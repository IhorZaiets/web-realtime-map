var cF=Object.defineProperty;var hF=(e,t,r)=>t in e?cF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var dF=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ic=(e,t,r)=>hF(e,typeof t!="symbol"?t+"":t,r);var kee=dF((Jo,Qo)=>{function $I(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const h=Object.getOwnPropertyDescriptor(n,a);h&&Object.defineProperty(e,a,h.get?h:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(a){if(a.ep)return;a.ep=!0;const h=r(a);fetch(a.href,h)}})();var fF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jI={exports:{}},Rv={},UI={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm=Symbol.for("react.element"),pF=Symbol.for("react.portal"),mF=Symbol.for("react.fragment"),gF=Symbol.for("react.strict_mode"),yF=Symbol.for("react.profiler"),_F=Symbol.for("react.provider"),vF=Symbol.for("react.context"),xF=Symbol.for("react.forward_ref"),bF=Symbol.for("react.suspense"),wF=Symbol.for("react.memo"),SF=Symbol.for("react.lazy"),IC=Symbol.iterator;function TF(e){return e===null||typeof e!="object"?null:(e=IC&&e[IC]||e["@@iterator"],typeof e=="function"?e:null)}var VI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qI=Object.assign,HI={};function Yd(e,t,r){this.props=e,this.context=t,this.refs=HI,this.updater=r||VI}Yd.prototype.isReactComponent={};Yd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WI(){}WI.prototype=Yd.prototype;function BS(e,t,r){this.props=e,this.context=t,this.refs=HI,this.updater=r||VI}var NS=BS.prototype=new WI;NS.constructor=BS;qI(NS,Yd.prototype);NS.isPureReactComponent=!0;var RC=Array.isArray,GI=Object.prototype.hasOwnProperty,$S={current:null},ZI={key:!0,ref:!0,__self:!0,__source:!0};function KI(e,t,r){var n,a={},h=null,d=null;if(t!=null)for(n in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(h=""+t.key),t)GI.call(t,n)&&!ZI.hasOwnProperty(n)&&(a[n]=t[n]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var b=Array(u),T=0;T<u;T++)b[T]=arguments[T+2];a.children=b}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)a[n]===void 0&&(a[n]=u[n]);return{$$typeof:qm,type:e,key:h,ref:d,props:a,_owner:$S.current}}function EF(e,t){return{$$typeof:qm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jS(e){return typeof e=="object"&&e!==null&&e.$$typeof===qm}function CF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var MC=/\/+/g;function S1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CF(""+e.key):t.toString(36)}function Yy(e,t,r,n,a){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case qm:case pF:d=!0}}if(d)return d=e,a=a(d),e=n===""?"."+S1(d,0):n,RC(a)?(r="",e!=null&&(r=e.replace(MC,"$&/")+"/"),Yy(a,t,r,"",function(T){return T})):a!=null&&(jS(a)&&(a=EF(a,r+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(MC,"$&/")+"/")+e)),t.push(a)),1;if(d=0,n=n===""?".":n+":",RC(e))for(var u=0;u<e.length;u++){h=e[u];var b=n+S1(h,u);d+=Yy(h,t,r,b,a)}else if(b=TF(e),typeof b=="function")for(e=b.call(e),u=0;!(h=e.next()).done;)h=h.value,b=n+S1(h,u++),d+=Yy(h,t,r,b,a);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function my(e,t,r){if(e==null)return e;var n=[],a=0;return Yy(e,n,"","",function(h){return t.call(r,h,a++)}),n}function AF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var oo={current:null},Jy={transition:null},kF={ReactCurrentDispatcher:oo,ReactCurrentBatchConfig:Jy,ReactCurrentOwner:$S};function XI(){throw Error("act(...) is not supported in production builds of React.")}Cr.Children={map:my,forEach:function(e,t,r){my(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return my(e,function(){t++}),t},toArray:function(e){return my(e,function(t){return t})||[]},only:function(e){if(!jS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Cr.Component=Yd;Cr.Fragment=mF;Cr.Profiler=yF;Cr.PureComponent=BS;Cr.StrictMode=gF;Cr.Suspense=bF;Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kF;Cr.act=XI;Cr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=qI({},e.props),a=e.key,h=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,d=$S.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)GI.call(t,b)&&!ZI.hasOwnProperty(b)&&(n[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)n.children=r;else if(1<b){u=Array(b);for(var T=0;T<b;T++)u[T]=arguments[T+2];n.children=u}return{$$typeof:qm,type:e.type,key:a,ref:h,props:n,_owner:d}};Cr.createContext=function(e){return e={$$typeof:vF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_F,_context:e},e.Consumer=e};Cr.createElement=KI;Cr.createFactory=function(e){var t=KI.bind(null,e);return t.type=e,t};Cr.createRef=function(){return{current:null}};Cr.forwardRef=function(e){return{$$typeof:xF,render:e}};Cr.isValidElement=jS;Cr.lazy=function(e){return{$$typeof:SF,_payload:{_status:-1,_result:e},_init:AF}};Cr.memo=function(e,t){return{$$typeof:wF,type:e,compare:t===void 0?null:t}};Cr.startTransition=function(e){var t=Jy.transition;Jy.transition={};try{e()}finally{Jy.transition=t}};Cr.unstable_act=XI;Cr.useCallback=function(e,t){return oo.current.useCallback(e,t)};Cr.useContext=function(e){return oo.current.useContext(e)};Cr.useDebugValue=function(){};Cr.useDeferredValue=function(e){return oo.current.useDeferredValue(e)};Cr.useEffect=function(e,t){return oo.current.useEffect(e,t)};Cr.useId=function(){return oo.current.useId()};Cr.useImperativeHandle=function(e,t,r){return oo.current.useImperativeHandle(e,t,r)};Cr.useInsertionEffect=function(e,t){return oo.current.useInsertionEffect(e,t)};Cr.useLayoutEffect=function(e,t){return oo.current.useLayoutEffect(e,t)};Cr.useMemo=function(e,t){return oo.current.useMemo(e,t)};Cr.useReducer=function(e,t,r){return oo.current.useReducer(e,t,r)};Cr.useRef=function(e){return oo.current.useRef(e)};Cr.useState=function(e){return oo.current.useState(e)};Cr.useSyncExternalStore=function(e,t,r){return oo.current.useSyncExternalStore(e,t,r)};Cr.useTransition=function(){return oo.current.useTransition()};Cr.version="18.3.1";UI.exports=Cr;var X=UI.exports;const Xo=Xd(X),P_=$I({__proto__:null,default:Xo},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PF=X,IF=Symbol.for("react.element"),RF=Symbol.for("react.fragment"),MF=Object.prototype.hasOwnProperty,LF=PF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OF={key:!0,ref:!0,__self:!0,__source:!0};function YI(e,t,r){var n,a={},h=null,d=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(d=t.ref);for(n in t)MF.call(t,n)&&!OF.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:IF,type:e,key:h,ref:d,props:a,_owner:LF.current}}Rv.Fragment=RF;Rv.jsx=YI;Rv.jsxs=YI;jI.exports=Rv;var We=jI.exports,JI={exports:{}},is={},QI={exports:{}},eR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,Ye){var vt=Ne.length;Ne.push(Ye);e:for(;0<vt;){var Ct=vt-1>>>1,Lt=Ne[Ct];if(0<a(Lt,Ye))Ne[Ct]=Ye,Ne[vt]=Lt,vt=Ct;else break e}}function r(Ne){return Ne.length===0?null:Ne[0]}function n(Ne){if(Ne.length===0)return null;var Ye=Ne[0],vt=Ne.pop();if(vt!==Ye){Ne[0]=vt;e:for(var Ct=0,Lt=Ne.length,Nt=Lt>>>1;Ct<Nt;){var zt=2*(Ct+1)-1,er=Ne[zt],lr=zt+1,sr=Ne[lr];if(0>a(er,vt))lr<Lt&&0>a(sr,er)?(Ne[Ct]=sr,Ne[lr]=vt,Ct=lr):(Ne[Ct]=er,Ne[zt]=vt,Ct=zt);else if(lr<Lt&&0>a(sr,vt))Ne[Ct]=sr,Ne[lr]=vt,Ct=lr;else break e}}return Ye}function a(Ne,Ye){var vt=Ne.sortIndex-Ye.sortIndex;return vt!==0?vt:Ne.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var b=[],T=[],A=1,P=null,R=3,U=!1,j=!1,W=!1,ee=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Ne){for(var Ye=r(T);Ye!==null;){if(Ye.callback===null)n(T);else if(Ye.startTime<=Ne)n(T),Ye.sortIndex=Ye.expirationTime,t(b,Ye);else break;Ye=r(T)}}function te(Ne){if(W=!1,V(Ne),!j)if(r(b)!==null)j=!0,it(me);else{var Ye=r(T);Ye!==null&&Et(te,Ye.startTime-Ne)}}function me(Ne,Ye){j=!1,W&&(W=!1,B(ie),ie=-1),U=!0;var vt=R;try{for(V(Ye),P=r(b);P!==null&&(!(P.expirationTime>Ye)||Ne&&!Te());){var Ct=P.callback;if(typeof Ct=="function"){P.callback=null,R=P.priorityLevel;var Lt=Ct(P.expirationTime<=Ye);Ye=e.unstable_now(),typeof Lt=="function"?P.callback=Lt:P===r(b)&&n(b),V(Ye)}else n(b);P=r(b)}if(P!==null)var Nt=!0;else{var zt=r(T);zt!==null&&Et(te,zt.startTime-Ye),Nt=!1}return Nt}finally{P=null,R=vt,U=!1}}var fe=!1,ge=null,ie=-1,Re=5,Z=-1;function Te(){return!(e.unstable_now()-Z<Re)}function Ue(){if(ge!==null){var Ne=e.unstable_now();Z=Ne;var Ye=!0;try{Ye=ge(!0,Ne)}finally{Ye?Fe():(fe=!1,ge=null)}}else fe=!1}var Fe;if(typeof H=="function")Fe=function(){H(Ue)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Xe=Ze.port2;Ze.port1.onmessage=Ue,Fe=function(){Xe.postMessage(null)}}else Fe=function(){ee(Ue,0)};function it(Ne){ge=Ne,fe||(fe=!0,Fe())}function Et(Ne,Ye){ie=ee(function(){Ne(e.unstable_now())},Ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){j||U||(j=!0,it(me))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Ne){switch(R){case 1:case 2:case 3:var Ye=3;break;default:Ye=R}var vt=R;R=Ye;try{return Ne()}finally{R=vt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,Ye){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var vt=R;R=Ne;try{return Ye()}finally{R=vt}},e.unstable_scheduleCallback=function(Ne,Ye,vt){var Ct=e.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Ct+vt:Ct):vt=Ct,Ne){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=vt+Lt,Ne={id:A++,callback:Ye,priorityLevel:Ne,startTime:vt,expirationTime:Lt,sortIndex:-1},vt>Ct?(Ne.sortIndex=vt,t(T,Ne),r(b)===null&&Ne===r(T)&&(W?(B(ie),ie=-1):W=!0,Et(te,vt-Ct))):(Ne.sortIndex=Lt,t(b,Ne),j||U||(j=!0,it(me))),Ne},e.unstable_shouldYield=Te,e.unstable_wrapCallback=function(Ne){var Ye=R;return function(){var vt=R;R=Ye;try{return Ne.apply(this,arguments)}finally{R=vt}}}})(eR);QI.exports=eR;var DF=QI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zF=X,ns=DF;function st(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tR=new Set,hm={};function Uc(e,t){zd(e,t),zd(e+"Capture",t)}function zd(e,t){for(hm[e]=t,e=0;e<t.length;e++)tR.add(t[e])}var cl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mb=Object.prototype.hasOwnProperty,FF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LC={},OC={};function BF(e){return Mb.call(OC,e)?!0:Mb.call(LC,e)?!1:FF.test(e)?OC[e]=!0:(LC[e]=!0,!1)}function NF(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $F(e,t,r,n){if(t===null||typeof t>"u"||NF(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function so(e,t,r,n,a,h,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=d}var Ii={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ii[e]=new so(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ii[t]=new so(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ii[e]=new so(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ii[e]=new so(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ii[e]=new so(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ii[e]=new so(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ii[e]=new so(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ii[e]=new so(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ii[e]=new so(e,5,!1,e.toLowerCase(),null,!1,!1)});var US=/[\-:]([a-z])/g;function VS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(US,VS);Ii[t]=new so(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(US,VS);Ii[t]=new so(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(US,VS);Ii[t]=new so(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ii[e]=new so(e,1,!1,e.toLowerCase(),null,!1,!1)});Ii.xlinkHref=new so("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ii[e]=new so(e,1,!1,e.toLowerCase(),null,!0,!0)});function qS(e,t,r,n){var a=Ii.hasOwnProperty(t)?Ii[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($F(t,r,a,n)&&(r=null),n||a===null?BF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var yl=zF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gy=Symbol.for("react.element"),sd=Symbol.for("react.portal"),ad=Symbol.for("react.fragment"),HS=Symbol.for("react.strict_mode"),Lb=Symbol.for("react.profiler"),rR=Symbol.for("react.provider"),nR=Symbol.for("react.context"),WS=Symbol.for("react.forward_ref"),Ob=Symbol.for("react.suspense"),Db=Symbol.for("react.suspense_list"),GS=Symbol.for("react.memo"),tu=Symbol.for("react.lazy"),iR=Symbol.for("react.offscreen"),DC=Symbol.iterator;function vp(e){return e===null||typeof e!="object"?null:(e=DC&&e[DC]||e["@@iterator"],typeof e=="function"?e:null)}var Fn=Object.assign,T1;function Bp(e){if(T1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);T1=t&&t[1]||""}return`
`+T1+e}var E1=!1;function C1(e,t){if(!e||E1)return"";E1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var n=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){n=T}e.call(t.prototype)}else{try{throw Error()}catch(T){n=T}e()}}catch(T){if(T&&n&&typeof T.stack=="string"){for(var a=T.stack.split(`
`),h=n.stack.split(`
`),d=a.length-1,u=h.length-1;1<=d&&0<=u&&a[d]!==h[u];)u--;for(;1<=d&&0<=u;d--,u--)if(a[d]!==h[u]){if(d!==1||u!==1)do if(d--,u--,0>u||a[d]!==h[u]){var b=`
`+a[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=u);break}}}finally{E1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bp(e):""}function jF(e){switch(e.tag){case 5:return Bp(e.type);case 16:return Bp("Lazy");case 13:return Bp("Suspense");case 19:return Bp("SuspenseList");case 0:case 2:case 15:return e=C1(e.type,!1),e;case 11:return e=C1(e.type.render,!1),e;case 1:return e=C1(e.type,!0),e;default:return""}}function zb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ad:return"Fragment";case sd:return"Portal";case Lb:return"Profiler";case HS:return"StrictMode";case Ob:return"Suspense";case Db:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nR:return(e.displayName||"Context")+".Consumer";case rR:return(e._context.displayName||"Context")+".Provider";case WS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case GS:return t=e.displayName||null,t!==null?t:zb(e.type)||"Memo";case tu:t=e._payload,e=e._init;try{return zb(e(t))}catch{}}return null}function UF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zb(t);case 8:return t===HS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VF(e){var t=oR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){n=""+d,h.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yy(e){e._valueTracker||(e._valueTracker=VF(e))}function sR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=oR(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function I_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fb(e,t){var r=t.checked;return Fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zC(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aR(e,t){t=t.checked,t!=null&&qS(e,"checked",t,!1)}function Bb(e,t){aR(e,t);var r=xu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nb(e,t.type,r):t.hasOwnProperty("defaultValue")&&Nb(e,t.type,xu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function FC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Nb(e,t,r){(t!=="number"||I_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Np=Array.isArray;function Sd(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function $b(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(st(91));return Fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function BC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(st(92));if(Np(r)){if(1<r.length)throw Error(st(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xu(r)}}function lR(e,t){var r=xu(t.value),n=xu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function NC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _y,cR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_y=_y||document.createElement("div"),_y.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_y.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Kp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qF=["Webkit","ms","Moz","O"];Object.keys(Kp).forEach(function(e){qF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kp[t]=Kp[e]})});function hR(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Kp.hasOwnProperty(e)&&Kp[e]?(""+t).trim():t+"px"}function dR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=hR(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var HF=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ub(e,t){if(t){if(HF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(st(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(st(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(st(61))}if(t.style!=null&&typeof t.style!="object")throw Error(st(62))}}function Vb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qb=null;function ZS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hb=null,Td=null,Ed=null;function $C(e){if(e=Gm(e)){if(typeof Hb!="function")throw Error(st(280));var t=e.stateNode;t&&(t=zv(t),Hb(e.stateNode,e.type,t))}}function fR(e){Td?Ed?Ed.push(e):Ed=[e]:Td=e}function pR(){if(Td){var e=Td,t=Ed;if(Ed=Td=null,$C(e),t)for(e=0;e<t.length;e++)$C(t[e])}}function mR(e,t){return e(t)}function gR(){}var A1=!1;function yR(e,t,r){if(A1)return e(t,r);A1=!0;try{return mR(e,t,r)}finally{A1=!1,(Td!==null||Ed!==null)&&(gR(),pR())}}function fm(e,t){var r=e.stateNode;if(r===null)return null;var n=zv(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(st(231,t,typeof r));return r}var Wb=!1;if(cl)try{var xp={};Object.defineProperty(xp,"passive",{get:function(){Wb=!0}}),window.addEventListener("test",xp,xp),window.removeEventListener("test",xp,xp)}catch{Wb=!1}function WF(e,t,r,n,a,h,d,u,b){var T=Array.prototype.slice.call(arguments,3);try{t.apply(r,T)}catch(A){this.onError(A)}}var Xp=!1,R_=null,M_=!1,Gb=null,GF={onError:function(e){Xp=!0,R_=e}};function ZF(e,t,r,n,a,h,d,u,b){Xp=!1,R_=null,WF.apply(GF,arguments)}function KF(e,t,r,n,a,h,d,u,b){if(ZF.apply(this,arguments),Xp){if(Xp){var T=R_;Xp=!1,R_=null}else throw Error(st(198));M_||(M_=!0,Gb=T)}}function Vc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _R(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jC(e){if(Vc(e)!==e)throw Error(st(188))}function XF(e){var t=e.alternate;if(!t){if(t=Vc(e),t===null)throw Error(st(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var h=a.alternate;if(h===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===h.child){for(h=a.child;h;){if(h===r)return jC(a),e;if(h===n)return jC(a),t;h=h.sibling}throw Error(st(188))}if(r.return!==n.return)r=a,n=h;else{for(var d=!1,u=a.child;u;){if(u===r){d=!0,r=a,n=h;break}if(u===n){d=!0,n=a,r=h;break}u=u.sibling}if(!d){for(u=h.child;u;){if(u===r){d=!0,r=h,n=a;break}if(u===n){d=!0,n=h,r=a;break}u=u.sibling}if(!d)throw Error(st(189))}}if(r.alternate!==n)throw Error(st(190))}if(r.tag!==3)throw Error(st(188));return r.stateNode.current===r?e:t}function vR(e){return e=XF(e),e!==null?xR(e):null}function xR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xR(e);if(t!==null)return t;e=e.sibling}return null}var bR=ns.unstable_scheduleCallback,UC=ns.unstable_cancelCallback,YF=ns.unstable_shouldYield,JF=ns.unstable_requestPaint,Wn=ns.unstable_now,QF=ns.unstable_getCurrentPriorityLevel,KS=ns.unstable_ImmediatePriority,wR=ns.unstable_UserBlockingPriority,L_=ns.unstable_NormalPriority,eB=ns.unstable_LowPriority,SR=ns.unstable_IdlePriority,Mv=null,Ta=null;function tB(e){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(Mv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:iB,rB=Math.log,nB=Math.LN2;function iB(e){return e>>>=0,e===0?32:31-(rB(e)/nB|0)|0}var vy=64,xy=4194304;function $p(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function O_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,h=e.pingedLanes,d=r&268435455;if(d!==0){var u=d&~a;u!==0?n=$p(u):(h&=d,h!==0&&(n=$p(h)))}else d=r&~a,d!==0?n=$p(d):h!==0&&(n=$p(h));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,h=t&-t,a>=h||a===16&&(h&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ws(t),a=1<<r,n|=e[r],t&=~a;return n}function oB(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sB(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,h=e.pendingLanes;0<h;){var d=31-Ws(h),u=1<<d,b=a[d];b===-1?(!(u&r)||u&n)&&(a[d]=oB(u,t)):b<=t&&(e.expiredLanes|=u),h&=~u}}function Zb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TR(){var e=vy;return vy<<=1,!(vy&4194240)&&(vy=64),e}function k1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Hm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ws(t),e[t]=r}function aB(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ws(r),h=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~h}}function XS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ws(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Yr=0;function ER(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CR,YS,AR,kR,PR,Kb=!1,by=[],uu=null,cu=null,hu=null,pm=new Map,mm=new Map,nu=[],lB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VC(e,t){switch(e){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":hu=null;break;case"pointerover":case"pointerout":pm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mm.delete(t.pointerId)}}function bp(e,t,r,n,a,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:h,targetContainers:[a]},t!==null&&(t=Gm(t),t!==null&&YS(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function uB(e,t,r,n,a){switch(t){case"focusin":return uu=bp(uu,e,t,r,n,a),!0;case"dragenter":return cu=bp(cu,e,t,r,n,a),!0;case"mouseover":return hu=bp(hu,e,t,r,n,a),!0;case"pointerover":var h=a.pointerId;return pm.set(h,bp(pm.get(h)||null,e,t,r,n,a)),!0;case"gotpointercapture":return h=a.pointerId,mm.set(h,bp(mm.get(h)||null,e,t,r,n,a)),!0}return!1}function IR(e){var t=gc(e.target);if(t!==null){var r=Vc(t);if(r!==null){if(t=r.tag,t===13){if(t=_R(r),t!==null){e.blockedOn=t,PR(e.priority,function(){AR(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qb=n,r.target.dispatchEvent(n),qb=null}else return t=Gm(r),t!==null&&YS(t),e.blockedOn=r,!1;t.shift()}return!0}function qC(e,t,r){Qy(e)&&r.delete(t)}function cB(){Kb=!1,uu!==null&&Qy(uu)&&(uu=null),cu!==null&&Qy(cu)&&(cu=null),hu!==null&&Qy(hu)&&(hu=null),pm.forEach(qC),mm.forEach(qC)}function wp(e,t){e.blockedOn===t&&(e.blockedOn=null,Kb||(Kb=!0,ns.unstable_scheduleCallback(ns.unstable_NormalPriority,cB)))}function gm(e){function t(a){return wp(a,e)}if(0<by.length){wp(by[0],e);for(var r=1;r<by.length;r++){var n=by[r];n.blockedOn===e&&(n.blockedOn=null)}}for(uu!==null&&wp(uu,e),cu!==null&&wp(cu,e),hu!==null&&wp(hu,e),pm.forEach(t),mm.forEach(t),r=0;r<nu.length;r++)n=nu[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<nu.length&&(r=nu[0],r.blockedOn===null);)IR(r),r.blockedOn===null&&nu.shift()}var Cd=yl.ReactCurrentBatchConfig,D_=!0;function hB(e,t,r,n){var a=Yr,h=Cd.transition;Cd.transition=null;try{Yr=1,JS(e,t,r,n)}finally{Yr=a,Cd.transition=h}}function dB(e,t,r,n){var a=Yr,h=Cd.transition;Cd.transition=null;try{Yr=4,JS(e,t,r,n)}finally{Yr=a,Cd.transition=h}}function JS(e,t,r,n){if(D_){var a=Xb(e,t,r,n);if(a===null)B1(e,t,n,z_,r),VC(e,n);else if(uB(a,e,t,r,n))n.stopPropagation();else if(VC(e,n),t&4&&-1<lB.indexOf(e)){for(;a!==null;){var h=Gm(a);if(h!==null&&CR(h),h=Xb(e,t,r,n),h===null&&B1(e,t,n,z_,r),h===a)break;a=h}a!==null&&n.stopPropagation()}else B1(e,t,n,null,r)}}var z_=null;function Xb(e,t,r,n){if(z_=null,e=ZS(n),e=gc(e),e!==null)if(t=Vc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_R(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return z_=e,null}function RR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QF()){case KS:return 1;case wR:return 4;case L_:case eB:return 16;case SR:return 536870912;default:return 16}default:return 16}}var ou=null,QS=null,e_=null;function MR(){if(e_)return e_;var e,t=QS,r=t.length,n,a="value"in ou?ou.value:ou.textContent,h=a.length;for(e=0;e<r&&t[e]===a[e];e++);var d=r-e;for(n=1;n<=d&&t[r-n]===a[h-n];n++);return e_=a.slice(e,1<n?1-n:void 0)}function t_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wy(){return!0}function HC(){return!1}function os(e){function t(r,n,a,h,d){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(h):h[u]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?wy:HC,this.isPropagationStopped=HC,this}return Fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wy)},persist:function(){},isPersistent:wy}),t}var Jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e2=os(Jd),Wm=Fn({},Jd,{view:0,detail:0}),fB=os(Wm),P1,I1,Sp,Lv=Fn({},Wm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sp&&(Sp&&e.type==="mousemove"?(P1=e.screenX-Sp.screenX,I1=e.screenY-Sp.screenY):I1=P1=0,Sp=e),P1)},movementY:function(e){return"movementY"in e?e.movementY:I1}}),WC=os(Lv),pB=Fn({},Lv,{dataTransfer:0}),mB=os(pB),gB=Fn({},Wm,{relatedTarget:0}),R1=os(gB),yB=Fn({},Jd,{animationName:0,elapsedTime:0,pseudoElement:0}),_B=os(yB),vB=Fn({},Jd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xB=os(vB),bB=Fn({},Jd,{data:0}),GC=os(bB),wB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EB(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=TB[e])?!!t[e]:!1}function t2(){return EB}var CB=Fn({},Wm,{key:function(e){if(e.key){var t=wB[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=t_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SB[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t2,charCode:function(e){return e.type==="keypress"?t_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?t_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),AB=os(CB),kB=Fn({},Lv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZC=os(kB),PB=Fn({},Wm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t2}),IB=os(PB),RB=Fn({},Jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),MB=os(RB),LB=Fn({},Lv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OB=os(LB),DB=[9,13,27,32],r2=cl&&"CompositionEvent"in window,Yp=null;cl&&"documentMode"in document&&(Yp=document.documentMode);var zB=cl&&"TextEvent"in window&&!Yp,LR=cl&&(!r2||Yp&&8<Yp&&11>=Yp),KC=" ",XC=!1;function OR(e,t){switch(e){case"keyup":return DB.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ld=!1;function FB(e,t){switch(e){case"compositionend":return DR(t);case"keypress":return t.which!==32?null:(XC=!0,KC);case"textInput":return e=t.data,e===KC&&XC?null:e;default:return null}}function BB(e,t){if(ld)return e==="compositionend"||!r2&&OR(e,t)?(e=MR(),e_=QS=ou=null,ld=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LR&&t.locale!=="ko"?null:t.data;default:return null}}var NB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NB[e.type]:t==="textarea"}function zR(e,t,r,n){fR(n),t=F_(t,"onChange"),0<t.length&&(r=new e2("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Jp=null,ym=null;function $B(e){GR(e,0)}function Ov(e){var t=hd(e);if(sR(t))return e}function jB(e,t){if(e==="change")return t}var FR=!1;if(cl){var M1;if(cl){var L1="oninput"in document;if(!L1){var JC=document.createElement("div");JC.setAttribute("oninput","return;"),L1=typeof JC.oninput=="function"}M1=L1}else M1=!1;FR=M1&&(!document.documentMode||9<document.documentMode)}function QC(){Jp&&(Jp.detachEvent("onpropertychange",BR),ym=Jp=null)}function BR(e){if(e.propertyName==="value"&&Ov(ym)){var t=[];zR(t,ym,e,ZS(e)),yR($B,t)}}function UB(e,t,r){e==="focusin"?(QC(),Jp=t,ym=r,Jp.attachEvent("onpropertychange",BR)):e==="focusout"&&QC()}function VB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ov(ym)}function qB(e,t){if(e==="click")return Ov(t)}function HB(e,t){if(e==="input"||e==="change")return Ov(t)}function WB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xs=typeof Object.is=="function"?Object.is:WB;function _m(e,t){if(Xs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Mb.call(t,a)||!Xs(e[a],t[a]))return!1}return!0}function eA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tA(e,t){var r=eA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=eA(r)}}function NR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $R(){for(var e=window,t=I_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=I_(e.document)}return t}function n2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function GB(e){var t=$R(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&NR(r.ownerDocument.documentElement,r)){if(n!==null&&n2(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,h=Math.min(n.start,a);n=n.end===void 0?h:Math.min(n.end,a),!e.extend&&h>n&&(a=n,n=h,h=a),a=tA(r,h);var d=tA(r,n);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),h>n?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZB=cl&&"documentMode"in document&&11>=document.documentMode,ud=null,Yb=null,Qp=null,Jb=!1;function rA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jb||ud==null||ud!==I_(n)||(n=ud,"selectionStart"in n&&n2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qp&&_m(Qp,n)||(Qp=n,n=F_(Yb,"onSelect"),0<n.length&&(t=new e2("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ud)))}function Sy(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cd={animationend:Sy("Animation","AnimationEnd"),animationiteration:Sy("Animation","AnimationIteration"),animationstart:Sy("Animation","AnimationStart"),transitionend:Sy("Transition","TransitionEnd")},O1={},jR={};cl&&(jR=document.createElement("div").style,"AnimationEvent"in window||(delete cd.animationend.animation,delete cd.animationiteration.animation,delete cd.animationstart.animation),"TransitionEvent"in window||delete cd.transitionend.transition);function Dv(e){if(O1[e])return O1[e];if(!cd[e])return e;var t=cd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jR)return O1[e]=t[r];return e}var UR=Dv("animationend"),VR=Dv("animationiteration"),qR=Dv("animationstart"),HR=Dv("transitionend"),WR=new Map,nA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eu(e,t){WR.set(e,t),Uc(t,[e])}for(var D1=0;D1<nA.length;D1++){var z1=nA[D1],KB=z1.toLowerCase(),XB=z1[0].toUpperCase()+z1.slice(1);Eu(KB,"on"+XB)}Eu(UR,"onAnimationEnd");Eu(VR,"onAnimationIteration");Eu(qR,"onAnimationStart");Eu("dblclick","onDoubleClick");Eu("focusin","onFocus");Eu("focusout","onBlur");Eu(HR,"onTransitionEnd");zd("onMouseEnter",["mouseout","mouseover"]);zd("onMouseLeave",["mouseout","mouseover"]);zd("onPointerEnter",["pointerout","pointerover"]);zd("onPointerLeave",["pointerout","pointerover"]);Uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YB=new Set("cancel close invalid load scroll toggle".split(" ").concat(jp));function iA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,KF(n,t,void 0,e),e.currentTarget=null}function GR(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var h=void 0;if(t)for(var d=n.length-1;0<=d;d--){var u=n[d],b=u.instance,T=u.currentTarget;if(u=u.listener,b!==h&&a.isPropagationStopped())break e;iA(a,u,T),h=b}else for(d=0;d<n.length;d++){if(u=n[d],b=u.instance,T=u.currentTarget,u=u.listener,b!==h&&a.isPropagationStopped())break e;iA(a,u,T),h=b}}}if(M_)throw e=Gb,M_=!1,Gb=null,e}function bn(e,t){var r=t[nw];r===void 0&&(r=t[nw]=new Set);var n=e+"__bubble";r.has(n)||(ZR(t,e,2,!1),r.add(n))}function F1(e,t,r){var n=0;t&&(n|=4),ZR(r,e,n,t)}var Ty="_reactListening"+Math.random().toString(36).slice(2);function vm(e){if(!e[Ty]){e[Ty]=!0,tR.forEach(function(r){r!=="selectionchange"&&(YB.has(r)||F1(r,!1,e),F1(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ty]||(t[Ty]=!0,F1("selectionchange",!1,t))}}function ZR(e,t,r,n){switch(RR(t)){case 1:var a=hB;break;case 4:a=dB;break;default:a=JS}r=a.bind(null,t,r,e),a=void 0,!Wb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function B1(e,t,r,n,a){var h=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var u=n.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(d===4)for(d=n.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===a||b.nodeType===8&&b.parentNode===a))return;d=d.return}for(;u!==null;){if(d=gc(u),d===null)return;if(b=d.tag,b===5||b===6){n=h=d;continue e}u=u.parentNode}}n=n.return}yR(function(){var T=h,A=ZS(r),P=[];e:{var R=WR.get(e);if(R!==void 0){var U=e2,j=e;switch(e){case"keypress":if(t_(r)===0)break e;case"keydown":case"keyup":U=AB;break;case"focusin":j="focus",U=R1;break;case"focusout":j="blur",U=R1;break;case"beforeblur":case"afterblur":U=R1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=WC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=mB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=IB;break;case UR:case VR:case qR:U=_B;break;case HR:U=MB;break;case"scroll":U=fB;break;case"wheel":U=OB;break;case"copy":case"cut":case"paste":U=xB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=ZC}var W=(t&4)!==0,ee=!W&&e==="scroll",B=W?R!==null?R+"Capture":null:R;W=[];for(var H=T,V;H!==null;){V=H;var te=V.stateNode;if(V.tag===5&&te!==null&&(V=te,B!==null&&(te=fm(H,B),te!=null&&W.push(xm(H,te,V)))),ee)break;H=H.return}0<W.length&&(R=new U(R,j,null,r,A),P.push({event:R,listeners:W}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",R&&r!==qb&&(j=r.relatedTarget||r.fromElement)&&(gc(j)||j[hl]))break e;if((U||R)&&(R=A.window===A?A:(R=A.ownerDocument)?R.defaultView||R.parentWindow:window,U?(j=r.relatedTarget||r.toElement,U=T,j=j?gc(j):null,j!==null&&(ee=Vc(j),j!==ee||j.tag!==5&&j.tag!==6)&&(j=null)):(U=null,j=T),U!==j)){if(W=WC,te="onMouseLeave",B="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(W=ZC,te="onPointerLeave",B="onPointerEnter",H="pointer"),ee=U==null?R:hd(U),V=j==null?R:hd(j),R=new W(te,H+"leave",U,r,A),R.target=ee,R.relatedTarget=V,te=null,gc(A)===T&&(W=new W(B,H+"enter",j,r,A),W.target=V,W.relatedTarget=ee,te=W),ee=te,U&&j)t:{for(W=U,B=j,H=0,V=W;V;V=Gh(V))H++;for(V=0,te=B;te;te=Gh(te))V++;for(;0<H-V;)W=Gh(W),H--;for(;0<V-H;)B=Gh(B),V--;for(;H--;){if(W===B||B!==null&&W===B.alternate)break t;W=Gh(W),B=Gh(B)}W=null}else W=null;U!==null&&oA(P,R,U,W,!1),j!==null&&ee!==null&&oA(P,ee,j,W,!0)}}e:{if(R=T?hd(T):window,U=R.nodeName&&R.nodeName.toLowerCase(),U==="select"||U==="input"&&R.type==="file")var me=jB;else if(YC(R))if(FR)me=HB;else{me=VB;var fe=UB}else(U=R.nodeName)&&U.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(me=qB);if(me&&(me=me(e,T))){zR(P,me,r,A);break e}fe&&fe(e,R,T),e==="focusout"&&(fe=R._wrapperState)&&fe.controlled&&R.type==="number"&&Nb(R,"number",R.value)}switch(fe=T?hd(T):window,e){case"focusin":(YC(fe)||fe.contentEditable==="true")&&(ud=fe,Yb=T,Qp=null);break;case"focusout":Qp=Yb=ud=null;break;case"mousedown":Jb=!0;break;case"contextmenu":case"mouseup":case"dragend":Jb=!1,rA(P,r,A);break;case"selectionchange":if(ZB)break;case"keydown":case"keyup":rA(P,r,A)}var ge;if(r2)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else ld?OR(e,r)&&(ie="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ie="onCompositionStart");ie&&(LR&&r.locale!=="ko"&&(ld||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&ld&&(ge=MR()):(ou=A,QS="value"in ou?ou.value:ou.textContent,ld=!0)),fe=F_(T,ie),0<fe.length&&(ie=new GC(ie,e,null,r,A),P.push({event:ie,listeners:fe}),ge?ie.data=ge:(ge=DR(r),ge!==null&&(ie.data=ge)))),(ge=zB?FB(e,r):BB(e,r))&&(T=F_(T,"onBeforeInput"),0<T.length&&(A=new GC("onBeforeInput","beforeinput",null,r,A),P.push({event:A,listeners:T}),A.data=ge))}GR(P,t)})}function xm(e,t,r){return{instance:e,listener:t,currentTarget:r}}function F_(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,h=a.stateNode;a.tag===5&&h!==null&&(a=h,h=fm(e,r),h!=null&&n.unshift(xm(e,h,a)),h=fm(e,t),h!=null&&n.push(xm(e,h,a))),e=e.return}return n}function Gh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oA(e,t,r,n,a){for(var h=t._reactName,d=[];r!==null&&r!==n;){var u=r,b=u.alternate,T=u.stateNode;if(b!==null&&b===n)break;u.tag===5&&T!==null&&(u=T,a?(b=fm(r,h),b!=null&&d.unshift(xm(r,b,u))):a||(b=fm(r,h),b!=null&&d.push(xm(r,b,u)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var JB=/\r\n?/g,QB=/\u0000|\uFFFD/g;function sA(e){return(typeof e=="string"?e:""+e).replace(JB,`
`).replace(QB,"")}function Ey(e,t,r){if(t=sA(t),sA(e)!==t&&r)throw Error(st(425))}function B_(){}var Qb=null,ew=null;function tw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rw=typeof setTimeout=="function"?setTimeout:void 0,e4=typeof clearTimeout=="function"?clearTimeout:void 0,aA=typeof Promise=="function"?Promise:void 0,t4=typeof queueMicrotask=="function"?queueMicrotask:typeof aA<"u"?function(e){return aA.resolve(null).then(e).catch(r4)}:rw;function r4(e){setTimeout(function(){throw e})}function N1(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),gm(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gm(t)}function du(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Qd=Math.random().toString(36).slice(2),va="__reactFiber$"+Qd,bm="__reactProps$"+Qd,hl="__reactContainer$"+Qd,nw="__reactEvents$"+Qd,n4="__reactListeners$"+Qd,i4="__reactHandles$"+Qd;function gc(e){var t=e[va];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hl]||r[va]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=lA(e);e!==null;){if(r=e[va])return r;e=lA(e)}return t}e=r,r=e.parentNode}return null}function Gm(e){return e=e[va]||e[hl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(st(33))}function zv(e){return e[bm]||null}var iw=[],dd=-1;function Cu(e){return{current:e}}function Sn(e){0>dd||(e.current=iw[dd],iw[dd]=null,dd--)}function yn(e,t){dd++,iw[dd]=e.current,e.current=t}var bu={},Wi=Cu(bu),To=Cu(!1),Pc=bu;function Fd(e,t){var r=e.type.contextTypes;if(!r)return bu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},h;for(h in r)a[h]=t[h];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Eo(e){return e=e.childContextTypes,e!=null}function N_(){Sn(To),Sn(Wi)}function uA(e,t,r){if(Wi.current!==bu)throw Error(st(168));yn(Wi,t),yn(To,r)}function KR(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(st(108,UF(e)||"Unknown",a));return Fn({},r,n)}function $_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bu,Pc=Wi.current,yn(Wi,e),yn(To,To.current),!0}function cA(e,t,r){var n=e.stateNode;if(!n)throw Error(st(169));r?(e=KR(e,t,Pc),n.__reactInternalMemoizedMergedChildContext=e,Sn(To),Sn(Wi),yn(Wi,e)):Sn(To),yn(To,r)}var el=null,Fv=!1,$1=!1;function XR(e){el===null?el=[e]:el.push(e)}function o4(e){Fv=!0,XR(e)}function Au(){if(!$1&&el!==null){$1=!0;var e=0,t=Yr;try{var r=el;for(Yr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}el=null,Fv=!1}catch(a){throw el!==null&&(el=el.slice(e+1)),bR(KS,Au),a}finally{Yr=t,$1=!1}}return null}var fd=[],pd=0,j_=null,U_=0,_s=[],vs=0,Ic=null,il=1,ol="";function lc(e,t){fd[pd++]=U_,fd[pd++]=j_,j_=e,U_=t}function YR(e,t,r){_s[vs++]=il,_s[vs++]=ol,_s[vs++]=Ic,Ic=e;var n=il;e=ol;var a=32-Ws(n)-1;n&=~(1<<a),r+=1;var h=32-Ws(t)+a;if(30<h){var d=a-a%5;h=(n&(1<<d)-1).toString(32),n>>=d,a-=d,il=1<<32-Ws(t)+a|r<<a|n,ol=h+e}else il=1<<h|r<<a|n,ol=e}function i2(e){e.return!==null&&(lc(e,1),YR(e,1,0))}function o2(e){for(;e===j_;)j_=fd[--pd],fd[pd]=null,U_=fd[--pd],fd[pd]=null;for(;e===Ic;)Ic=_s[--vs],_s[vs]=null,ol=_s[--vs],_s[vs]=null,il=_s[--vs],_s[vs]=null}var es=null,Yo=null,Rn=!1,qs=null;function JR(e,t){var r=Ts(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,es=e,Yo=du(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,es=e,Yo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ic!==null?{id:il,overflow:ol}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ts(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,es=e,Yo=null,!0):!1;default:return!1}}function ow(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sw(e){if(Rn){var t=Yo;if(t){var r=t;if(!hA(e,t)){if(ow(e))throw Error(st(418));t=du(r.nextSibling);var n=es;t&&hA(e,t)?JR(n,r):(e.flags=e.flags&-4097|2,Rn=!1,es=e)}}else{if(ow(e))throw Error(st(418));e.flags=e.flags&-4097|2,Rn=!1,es=e}}}function dA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;es=e}function Cy(e){if(e!==es)return!1;if(!Rn)return dA(e),Rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tw(e.type,e.memoizedProps)),t&&(t=Yo)){if(ow(e))throw QR(),Error(st(418));for(;t;)JR(e,t),t=du(t.nextSibling)}if(dA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(st(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yo=du(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yo=null}}else Yo=es?du(e.stateNode.nextSibling):null;return!0}function QR(){for(var e=Yo;e;)e=du(e.nextSibling)}function Bd(){Yo=es=null,Rn=!1}function s2(e){qs===null?qs=[e]:qs.push(e)}var s4=yl.ReactCurrentBatchConfig;function Tp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(st(309));var n=r.stateNode}if(!n)throw Error(st(147,e));var a=n,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(d){var u=a.refs;d===null?delete u[h]:u[h]=d},t._stringRef=h,t)}if(typeof e!="string")throw Error(st(284));if(!r._owner)throw Error(st(290,e))}return e}function Ay(e,t){throw e=Object.prototype.toString.call(t),Error(st(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fA(e){var t=e._init;return t(e._payload)}function eM(e){function t(B,H){if(e){var V=B.deletions;V===null?(B.deletions=[H],B.flags|=16):V.push(H)}}function r(B,H){if(!e)return null;for(;H!==null;)t(B,H),H=H.sibling;return null}function n(B,H){for(B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function a(B,H){return B=gu(B,H),B.index=0,B.sibling=null,B}function h(B,H,V){return B.index=V,e?(V=B.alternate,V!==null?(V=V.index,V<H?(B.flags|=2,H):V):(B.flags|=2,H)):(B.flags|=1048576,H)}function d(B){return e&&B.alternate===null&&(B.flags|=2),B}function u(B,H,V,te){return H===null||H.tag!==6?(H=G1(V,B.mode,te),H.return=B,H):(H=a(H,V),H.return=B,H)}function b(B,H,V,te){var me=V.type;return me===ad?A(B,H,V.props.children,te,V.key):H!==null&&(H.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===tu&&fA(me)===H.type)?(te=a(H,V.props),te.ref=Tp(B,H,V),te.return=B,te):(te=l_(V.type,V.key,V.props,null,B.mode,te),te.ref=Tp(B,H,V),te.return=B,te)}function T(B,H,V,te){return H===null||H.tag!==4||H.stateNode.containerInfo!==V.containerInfo||H.stateNode.implementation!==V.implementation?(H=Z1(V,B.mode,te),H.return=B,H):(H=a(H,V.children||[]),H.return=B,H)}function A(B,H,V,te,me){return H===null||H.tag!==7?(H=Tc(V,B.mode,te,me),H.return=B,H):(H=a(H,V),H.return=B,H)}function P(B,H,V){if(typeof H=="string"&&H!==""||typeof H=="number")return H=G1(""+H,B.mode,V),H.return=B,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case gy:return V=l_(H.type,H.key,H.props,null,B.mode,V),V.ref=Tp(B,null,H),V.return=B,V;case sd:return H=Z1(H,B.mode,V),H.return=B,H;case tu:var te=H._init;return P(B,te(H._payload),V)}if(Np(H)||vp(H))return H=Tc(H,B.mode,V,null),H.return=B,H;Ay(B,H)}return null}function R(B,H,V,te){var me=H!==null?H.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return me!==null?null:u(B,H,""+V,te);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case gy:return V.key===me?b(B,H,V,te):null;case sd:return V.key===me?T(B,H,V,te):null;case tu:return me=V._init,R(B,H,me(V._payload),te)}if(Np(V)||vp(V))return me!==null?null:A(B,H,V,te,null);Ay(B,V)}return null}function U(B,H,V,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return B=B.get(V)||null,u(H,B,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case gy:return B=B.get(te.key===null?V:te.key)||null,b(H,B,te,me);case sd:return B=B.get(te.key===null?V:te.key)||null,T(H,B,te,me);case tu:var fe=te._init;return U(B,H,V,fe(te._payload),me)}if(Np(te)||vp(te))return B=B.get(V)||null,A(H,B,te,me,null);Ay(H,te)}return null}function j(B,H,V,te){for(var me=null,fe=null,ge=H,ie=H=0,Re=null;ge!==null&&ie<V.length;ie++){ge.index>ie?(Re=ge,ge=null):Re=ge.sibling;var Z=R(B,ge,V[ie],te);if(Z===null){ge===null&&(ge=Re);break}e&&ge&&Z.alternate===null&&t(B,ge),H=h(Z,H,ie),fe===null?me=Z:fe.sibling=Z,fe=Z,ge=Re}if(ie===V.length)return r(B,ge),Rn&&lc(B,ie),me;if(ge===null){for(;ie<V.length;ie++)ge=P(B,V[ie],te),ge!==null&&(H=h(ge,H,ie),fe===null?me=ge:fe.sibling=ge,fe=ge);return Rn&&lc(B,ie),me}for(ge=n(B,ge);ie<V.length;ie++)Re=U(ge,B,ie,V[ie],te),Re!==null&&(e&&Re.alternate!==null&&ge.delete(Re.key===null?ie:Re.key),H=h(Re,H,ie),fe===null?me=Re:fe.sibling=Re,fe=Re);return e&&ge.forEach(function(Te){return t(B,Te)}),Rn&&lc(B,ie),me}function W(B,H,V,te){var me=vp(V);if(typeof me!="function")throw Error(st(150));if(V=me.call(V),V==null)throw Error(st(151));for(var fe=me=null,ge=H,ie=H=0,Re=null,Z=V.next();ge!==null&&!Z.done;ie++,Z=V.next()){ge.index>ie?(Re=ge,ge=null):Re=ge.sibling;var Te=R(B,ge,Z.value,te);if(Te===null){ge===null&&(ge=Re);break}e&&ge&&Te.alternate===null&&t(B,ge),H=h(Te,H,ie),fe===null?me=Te:fe.sibling=Te,fe=Te,ge=Re}if(Z.done)return r(B,ge),Rn&&lc(B,ie),me;if(ge===null){for(;!Z.done;ie++,Z=V.next())Z=P(B,Z.value,te),Z!==null&&(H=h(Z,H,ie),fe===null?me=Z:fe.sibling=Z,fe=Z);return Rn&&lc(B,ie),me}for(ge=n(B,ge);!Z.done;ie++,Z=V.next())Z=U(ge,B,ie,Z.value,te),Z!==null&&(e&&Z.alternate!==null&&ge.delete(Z.key===null?ie:Z.key),H=h(Z,H,ie),fe===null?me=Z:fe.sibling=Z,fe=Z);return e&&ge.forEach(function(Ue){return t(B,Ue)}),Rn&&lc(B,ie),me}function ee(B,H,V,te){if(typeof V=="object"&&V!==null&&V.type===ad&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case gy:e:{for(var me=V.key,fe=H;fe!==null;){if(fe.key===me){if(me=V.type,me===ad){if(fe.tag===7){r(B,fe.sibling),H=a(fe,V.props.children),H.return=B,B=H;break e}}else if(fe.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===tu&&fA(me)===fe.type){r(B,fe.sibling),H=a(fe,V.props),H.ref=Tp(B,fe,V),H.return=B,B=H;break e}r(B,fe);break}else t(B,fe);fe=fe.sibling}V.type===ad?(H=Tc(V.props.children,B.mode,te,V.key),H.return=B,B=H):(te=l_(V.type,V.key,V.props,null,B.mode,te),te.ref=Tp(B,H,V),te.return=B,B=te)}return d(B);case sd:e:{for(fe=V.key;H!==null;){if(H.key===fe)if(H.tag===4&&H.stateNode.containerInfo===V.containerInfo&&H.stateNode.implementation===V.implementation){r(B,H.sibling),H=a(H,V.children||[]),H.return=B,B=H;break e}else{r(B,H);break}else t(B,H);H=H.sibling}H=Z1(V,B.mode,te),H.return=B,B=H}return d(B);case tu:return fe=V._init,ee(B,H,fe(V._payload),te)}if(Np(V))return j(B,H,V,te);if(vp(V))return W(B,H,V,te);Ay(B,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,H!==null&&H.tag===6?(r(B,H.sibling),H=a(H,V),H.return=B,B=H):(r(B,H),H=G1(V,B.mode,te),H.return=B,B=H),d(B)):r(B,H)}return ee}var Nd=eM(!0),tM=eM(!1),V_=Cu(null),q_=null,md=null,a2=null;function l2(){a2=md=q_=null}function u2(e){var t=V_.current;Sn(V_),e._currentValue=t}function aw(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ad(e,t){q_=e,a2=md=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(So=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(a2!==e)if(e={context:e,memoizedValue:t,next:null},md===null){if(q_===null)throw Error(st(308));md=e,q_.dependencies={lanes:0,firstContext:e}}else md=md.next=e;return t}var yc=null;function c2(e){yc===null?yc=[e]:yc.push(e)}function rM(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,c2(t)):(r.next=a.next,a.next=r),t.interleaved=r,dl(e,n)}function dl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ru=!1;function h2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function al(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Nr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,dl(e,r)}return a=n.interleaved,a===null?(t.next=t,c2(n)):(t.next=a.next,a.next=t),n.interleaved=t,dl(e,r)}function r_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,XS(e,r)}}function pA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?a=h=d:h=h.next=d,r=r.next}while(r!==null);h===null?a=h=t:h=h.next=t}else a=h=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:h,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function H_(e,t,r,n){var a=e.updateQueue;ru=!1;var h=a.firstBaseUpdate,d=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var b=u,T=b.next;b.next=null,d===null?h=T:d.next=T,d=b;var A=e.alternate;A!==null&&(A=A.updateQueue,u=A.lastBaseUpdate,u!==d&&(u===null?A.firstBaseUpdate=T:u.next=T,A.lastBaseUpdate=b))}if(h!==null){var P=a.baseState;d=0,A=T=b=null,u=h;do{var R=u.lane,U=u.eventTime;if((n&R)===R){A!==null&&(A=A.next={eventTime:U,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var j=e,W=u;switch(R=t,U=r,W.tag){case 1:if(j=W.payload,typeof j=="function"){P=j.call(U,P,R);break e}P=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=W.payload,R=typeof j=="function"?j.call(U,P,R):j,R==null)break e;P=Fn({},P,R);break e;case 2:ru=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,R=a.effects,R===null?a.effects=[u]:R.push(u))}else U={eventTime:U,lane:R,tag:u.tag,payload:u.payload,callback:u.callback,next:null},A===null?(T=A=U,b=P):A=A.next=U,d|=R;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;R=u,u=R.next,R.next=null,a.lastBaseUpdate=R,a.shared.pending=null}}while(!0);if(A===null&&(b=P),a.baseState=b,a.firstBaseUpdate=T,a.lastBaseUpdate=A,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else h===null&&(a.shared.lanes=0);Mc|=d,e.lanes=d,e.memoizedState=P}}function mA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(st(191,a));a.call(n)}}}var Zm={},Ea=Cu(Zm),wm=Cu(Zm),Sm=Cu(Zm);function _c(e){if(e===Zm)throw Error(st(174));return e}function d2(e,t){switch(yn(Sm,t),yn(wm,e),yn(Ea,Zm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jb(t,e)}Sn(Ea),yn(Ea,t)}function $d(){Sn(Ea),Sn(wm),Sn(Sm)}function iM(e){_c(Sm.current);var t=_c(Ea.current),r=jb(t,e.type);t!==r&&(yn(wm,e),yn(Ea,r))}function f2(e){wm.current===e&&(Sn(Ea),Sn(wm))}var Dn=Cu(0);function W_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var j1=[];function p2(){for(var e=0;e<j1.length;e++)j1[e]._workInProgressVersionPrimary=null;j1.length=0}var n_=yl.ReactCurrentDispatcher,U1=yl.ReactCurrentBatchConfig,Rc=0,zn=null,oi=null,gi=null,G_=!1,em=!1,Tm=0,a4=0;function Ui(){throw Error(st(321))}function m2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xs(e[r],t[r]))return!1;return!0}function g2(e,t,r,n,a,h){if(Rc=h,zn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,n_.current=e===null||e.memoizedState===null?h4:d4,e=r(n,a),em){h=0;do{if(em=!1,Tm=0,25<=h)throw Error(st(301));h+=1,gi=oi=null,t.updateQueue=null,n_.current=f4,e=r(n,a)}while(em)}if(n_.current=Z_,t=oi!==null&&oi.next!==null,Rc=0,gi=oi=zn=null,G_=!1,t)throw Error(st(300));return e}function y2(){var e=Tm!==0;return Tm=0,e}function pa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?zn.memoizedState=gi=e:gi=gi.next=e,gi}function Ps(){if(oi===null){var e=zn.alternate;e=e!==null?e.memoizedState:null}else e=oi.next;var t=gi===null?zn.memoizedState:gi.next;if(t!==null)gi=t,oi=e;else{if(e===null)throw Error(st(310));oi=e,e={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},gi===null?zn.memoizedState=gi=e:gi=gi.next=e}return gi}function Em(e,t){return typeof t=="function"?t(e):t}function V1(e){var t=Ps(),r=t.queue;if(r===null)throw Error(st(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,h=r.pending;if(h!==null){if(a!==null){var d=a.next;a.next=h.next,h.next=d}n.baseQueue=a=h,r.pending=null}if(a!==null){h=a.next,n=n.baseState;var u=d=null,b=null,T=h;do{var A=T.lane;if((Rc&A)===A)b!==null&&(b=b.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),n=T.hasEagerState?T.eagerState:e(n,T.action);else{var P={lane:A,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};b===null?(u=b=P,d=n):b=b.next=P,zn.lanes|=A,Mc|=A}T=T.next}while(T!==null&&T!==h);b===null?d=n:b.next=u,Xs(n,t.memoizedState)||(So=!0),t.memoizedState=n,t.baseState=d,t.baseQueue=b,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do h=a.lane,zn.lanes|=h,Mc|=h,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function q1(e){var t=Ps(),r=t.queue;if(r===null)throw Error(st(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,h=t.memoizedState;if(a!==null){r.pending=null;var d=a=a.next;do h=e(h,d.action),d=d.next;while(d!==a);Xs(h,t.memoizedState)||(So=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,n]}function oM(){}function sM(e,t){var r=zn,n=Ps(),a=t(),h=!Xs(n.memoizedState,a);if(h&&(n.memoizedState=a,So=!0),n=n.queue,_2(uM.bind(null,r,n,e),[e]),n.getSnapshot!==t||h||gi!==null&&gi.memoizedState.tag&1){if(r.flags|=2048,Cm(9,lM.bind(null,r,n,a,t),void 0,null),_i===null)throw Error(st(349));Rc&30||aM(r,t,a)}return a}function aM(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zn.updateQueue,t===null?(t={lastEffect:null,stores:null},zn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lM(e,t,r,n){t.value=r,t.getSnapshot=n,cM(t)&&hM(e)}function uM(e,t,r){return r(function(){cM(t)&&hM(e)})}function cM(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xs(e,r)}catch{return!0}}function hM(e){var t=dl(e,1);t!==null&&Gs(t,e,1,-1)}function gA(e){var t=pa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:e},t.queue=e,e=e.dispatch=c4.bind(null,zn,e),[t.memoizedState,e]}function Cm(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zn.updateQueue,t===null?(t={lastEffect:null,stores:null},zn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function dM(){return Ps().memoizedState}function i_(e,t,r,n){var a=pa();zn.flags|=e,a.memoizedState=Cm(1|t,r,void 0,n===void 0?null:n)}function Bv(e,t,r,n){var a=Ps();n=n===void 0?null:n;var h=void 0;if(oi!==null){var d=oi.memoizedState;if(h=d.destroy,n!==null&&m2(n,d.deps)){a.memoizedState=Cm(t,r,h,n);return}}zn.flags|=e,a.memoizedState=Cm(1|t,r,h,n)}function yA(e,t){return i_(8390656,8,e,t)}function _2(e,t){return Bv(2048,8,e,t)}function fM(e,t){return Bv(4,2,e,t)}function pM(e,t){return Bv(4,4,e,t)}function mM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gM(e,t,r){return r=r!=null?r.concat([e]):null,Bv(4,4,mM.bind(null,t,e),r)}function v2(){}function yM(e,t){var r=Ps();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&m2(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function _M(e,t){var r=Ps();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&m2(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function vM(e,t,r){return Rc&21?(Xs(r,t)||(r=TR(),zn.lanes|=r,Mc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,So=!0),e.memoizedState=r)}function l4(e,t){var r=Yr;Yr=r!==0&&4>r?r:4,e(!0);var n=U1.transition;U1.transition={};try{e(!1),t()}finally{Yr=r,U1.transition=n}}function xM(){return Ps().memoizedState}function u4(e,t,r){var n=mu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bM(e))wM(t,r);else if(r=rM(e,t,r,n),r!==null){var a=io();Gs(r,e,n,a),SM(r,t,n)}}function c4(e,t,r){var n=mu(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bM(e))wM(t,a);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var d=t.lastRenderedState,u=h(d,r);if(a.hasEagerState=!0,a.eagerState=u,Xs(u,d)){var b=t.interleaved;b===null?(a.next=a,c2(t)):(a.next=b.next,b.next=a),t.interleaved=a;return}}catch{}finally{}r=rM(e,t,a,n),r!==null&&(a=io(),Gs(r,e,n,a),SM(r,t,n))}}function bM(e){var t=e.alternate;return e===zn||t!==null&&t===zn}function wM(e,t){em=G_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function SM(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,XS(e,r)}}var Z_={readContext:ks,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},h4={readContext:ks,useCallback:function(e,t){return pa().memoizedState=[e,t===void 0?null:t],e},useContext:ks,useEffect:yA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,i_(4194308,4,mM.bind(null,t,e),r)},useLayoutEffect:function(e,t){return i_(4194308,4,e,t)},useInsertionEffect:function(e,t){return i_(4,2,e,t)},useMemo:function(e,t){var r=pa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=pa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=u4.bind(null,zn,e),[n.memoizedState,e]},useRef:function(e){var t=pa();return e={current:e},t.memoizedState=e},useState:gA,useDebugValue:v2,useDeferredValue:function(e){return pa().memoizedState=e},useTransition:function(){var e=gA(!1),t=e[0];return e=l4.bind(null,e[1]),pa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zn,a=pa();if(Rn){if(r===void 0)throw Error(st(407));r=r()}else{if(r=t(),_i===null)throw Error(st(349));Rc&30||aM(n,t,r)}a.memoizedState=r;var h={value:r,getSnapshot:t};return a.queue=h,yA(uM.bind(null,n,h,e),[e]),n.flags|=2048,Cm(9,lM.bind(null,n,h,r,t),void 0,null),r},useId:function(){var e=pa(),t=_i.identifierPrefix;if(Rn){var r=ol,n=il;r=(n&~(1<<32-Ws(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Tm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=a4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},d4={readContext:ks,useCallback:yM,useContext:ks,useEffect:_2,useImperativeHandle:gM,useInsertionEffect:fM,useLayoutEffect:pM,useMemo:_M,useReducer:V1,useRef:dM,useState:function(){return V1(Em)},useDebugValue:v2,useDeferredValue:function(e){var t=Ps();return vM(t,oi.memoizedState,e)},useTransition:function(){var e=V1(Em)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:oM,useSyncExternalStore:sM,useId:xM,unstable_isNewReconciler:!1},f4={readContext:ks,useCallback:yM,useContext:ks,useEffect:_2,useImperativeHandle:gM,useInsertionEffect:fM,useLayoutEffect:pM,useMemo:_M,useReducer:q1,useRef:dM,useState:function(){return q1(Em)},useDebugValue:v2,useDeferredValue:function(e){var t=Ps();return oi===null?t.memoizedState=e:vM(t,oi.memoizedState,e)},useTransition:function(){var e=q1(Em)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:oM,useSyncExternalStore:sM,useId:xM,unstable_isNewReconciler:!1};function $s(e,t){if(e&&e.defaultProps){t=Fn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function lw(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Fn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Nv={isMounted:function(e){return(e=e._reactInternals)?Vc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=io(),a=mu(e),h=al(n,a);h.payload=t,r!=null&&(h.callback=r),t=fu(e,h,a),t!==null&&(Gs(t,e,a,n),r_(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=io(),a=mu(e),h=al(n,a);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=fu(e,h,a),t!==null&&(Gs(t,e,a,n),r_(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=io(),n=mu(e),a=al(r,n);a.tag=2,t!=null&&(a.callback=t),t=fu(e,a,n),t!==null&&(Gs(t,e,n,r),r_(t,e,n))}};function _A(e,t,r,n,a,h,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,h,d):t.prototype&&t.prototype.isPureReactComponent?!_m(r,n)||!_m(a,h):!0}function TM(e,t,r){var n=!1,a=bu,h=t.contextType;return typeof h=="object"&&h!==null?h=ks(h):(a=Eo(t)?Pc:Wi.current,n=t.contextTypes,h=(n=n!=null)?Fd(e,a):bu),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nv,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=h),t}function vA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Nv.enqueueReplaceState(t,t.state,null)}function uw(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},h2(e);var h=t.contextType;typeof h=="object"&&h!==null?a.context=ks(h):(h=Eo(t)?Pc:Wi.current,a.context=Fd(e,h)),a.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(lw(e,t,h,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Nv.enqueueReplaceState(a,a.state,null),H_(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function jd(e,t){try{var r="",n=t;do r+=jF(n),n=n.return;while(n);var a=r}catch(h){a=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:a,digest:null}}function H1(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function cw(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var p4=typeof WeakMap=="function"?WeakMap:Map;function EM(e,t,r){r=al(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){X_||(X_=!0,xw=n),cw(e,t)},r}function CM(e,t,r){r=al(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){cw(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){cw(e,t),typeof n!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function xA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new p4;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=k4.bind(null,e,t,r),t.then(e,e))}function bA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wA(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=al(-1,1),t.tag=2,fu(r,t,1))),r.lanes|=1),e)}var m4=yl.ReactCurrentOwner,So=!1;function no(e,t,r,n){t.child=e===null?tM(t,null,r,n):Nd(t,e.child,r,n)}function SA(e,t,r,n,a){r=r.render;var h=t.ref;return Ad(t,a),n=g2(e,t,r,n,h,a),r=y2(),e!==null&&!So?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fl(e,t,a)):(Rn&&r&&i2(t),t.flags|=1,no(e,t,n,a),t.child)}function TA(e,t,r,n,a){if(e===null){var h=r.type;return typeof h=="function"&&!A2(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,AM(e,t,h,n,a)):(e=l_(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&a)){var d=h.memoizedProps;if(r=r.compare,r=r!==null?r:_m,r(d,n)&&e.ref===t.ref)return fl(e,t,a)}return t.flags|=1,e=gu(h,n),e.ref=t.ref,e.return=t,t.child=e}function AM(e,t,r,n,a){if(e!==null){var h=e.memoizedProps;if(_m(h,n)&&e.ref===t.ref)if(So=!1,t.pendingProps=n=h,(e.lanes&a)!==0)e.flags&131072&&(So=!0);else return t.lanes=e.lanes,fl(e,t,a)}return hw(e,t,r,n,a)}function kM(e,t,r){var n=t.pendingProps,a=n.children,h=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(yd,Ho),Ho|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yn(yd,Ho),Ho|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=h!==null?h.baseLanes:r,yn(yd,Ho),Ho|=n}else h!==null?(n=h.baseLanes|r,t.memoizedState=null):n=r,yn(yd,Ho),Ho|=n;return no(e,t,a,r),t.child}function PM(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hw(e,t,r,n,a){var h=Eo(r)?Pc:Wi.current;return h=Fd(t,h),Ad(t,a),r=g2(e,t,r,n,h,a),n=y2(),e!==null&&!So?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fl(e,t,a)):(Rn&&n&&i2(t),t.flags|=1,no(e,t,r,a),t.child)}function EA(e,t,r,n,a){if(Eo(r)){var h=!0;$_(t)}else h=!1;if(Ad(t,a),t.stateNode===null)o_(e,t),TM(t,r,n),uw(t,r,n,a),n=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var b=d.context,T=r.contextType;typeof T=="object"&&T!==null?T=ks(T):(T=Eo(r)?Pc:Wi.current,T=Fd(t,T));var A=r.getDerivedStateFromProps,P=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function";P||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==n||b!==T)&&vA(t,d,n,T),ru=!1;var R=t.memoizedState;d.state=R,H_(t,n,d,a),b=t.memoizedState,u!==n||R!==b||To.current||ru?(typeof A=="function"&&(lw(t,r,A,n),b=t.memoizedState),(u=ru||_A(t,r,u,n,R,b,T))?(P||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=b),d.props=n,d.state=b,d.context=T,n=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,nM(e,t),u=t.memoizedProps,T=t.type===t.elementType?u:$s(t.type,u),d.props=T,P=t.pendingProps,R=d.context,b=r.contextType,typeof b=="object"&&b!==null?b=ks(b):(b=Eo(r)?Pc:Wi.current,b=Fd(t,b));var U=r.getDerivedStateFromProps;(A=typeof U=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==P||R!==b)&&vA(t,d,n,b),ru=!1,R=t.memoizedState,d.state=R,H_(t,n,d,a);var j=t.memoizedState;u!==P||R!==j||To.current||ru?(typeof U=="function"&&(lw(t,r,U,n),j=t.memoizedState),(T=ru||_A(t,r,T,n,R,j,b)||!1)?(A||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,j,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,j,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),d.props=n,d.state=j,d.context=b,n=T):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),n=!1)}return dw(e,t,r,n,h,a)}function dw(e,t,r,n,a,h){PM(e,t);var d=(t.flags&128)!==0;if(!n&&!d)return a&&cA(t,r,!1),fl(e,t,h);n=t.stateNode,m4.current=t;var u=d&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&d?(t.child=Nd(t,e.child,null,h),t.child=Nd(t,null,u,h)):no(e,t,u,h),t.memoizedState=n.state,a&&cA(t,r,!0),t.child}function IM(e){var t=e.stateNode;t.pendingContext?uA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uA(e,t.context,!1),d2(e,t.containerInfo)}function CA(e,t,r,n,a){return Bd(),s2(a),t.flags|=256,no(e,t,r,n),t.child}var fw={dehydrated:null,treeContext:null,retryLane:0};function pw(e){return{baseLanes:e,cachePool:null,transitions:null}}function RM(e,t,r){var n=t.pendingProps,a=Dn.current,h=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),yn(Dn,a&1),e===null)return sw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=n.children,e=n.fallback,h?(n=t.mode,h=t.child,d={mode:"hidden",children:d},!(n&1)&&h!==null?(h.childLanes=0,h.pendingProps=d):h=Uv(d,n,0,null),e=Tc(e,n,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=pw(r),t.memoizedState=fw,e):x2(t,d));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return g4(e,t,d,n,u,a,r);if(h){h=n.fallback,d=t.mode,a=e.child,u=a.sibling;var b={mode:"hidden",children:n.children};return!(d&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=b,t.deletions=null):(n=gu(a,b),n.subtreeFlags=a.subtreeFlags&14680064),u!==null?h=gu(u,h):(h=Tc(h,d,r,null),h.flags|=2),h.return=t,n.return=t,n.sibling=h,t.child=n,n=h,h=t.child,d=e.child.memoizedState,d=d===null?pw(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},h.memoizedState=d,h.childLanes=e.childLanes&~r,t.memoizedState=fw,n}return h=e.child,e=h.sibling,n=gu(h,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function x2(e,t){return t=Uv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ky(e,t,r,n){return n!==null&&s2(n),Nd(t,e.child,null,r),e=x2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g4(e,t,r,n,a,h,d){if(r)return t.flags&256?(t.flags&=-257,n=H1(Error(st(422))),ky(e,t,d,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=n.fallback,a=t.mode,n=Uv({mode:"visible",children:n.children},a,0,null),h=Tc(h,a,d,null),h.flags|=2,n.return=t,h.return=t,n.sibling=h,t.child=n,t.mode&1&&Nd(t,e.child,null,d),t.child.memoizedState=pw(d),t.memoizedState=fw,h);if(!(t.mode&1))return ky(e,t,d,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var u=n.dgst;return n=u,h=Error(st(419)),n=H1(h,n,void 0),ky(e,t,d,n)}if(u=(d&e.childLanes)!==0,So||u){if(n=_i,n!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|d)?0:a,a!==0&&a!==h.retryLane&&(h.retryLane=a,dl(e,a),Gs(n,e,a,-1))}return C2(),n=H1(Error(st(421))),ky(e,t,d,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=P4.bind(null,e),a._reactRetry=t,null):(e=h.treeContext,Yo=du(a.nextSibling),es=t,Rn=!0,qs=null,e!==null&&(_s[vs++]=il,_s[vs++]=ol,_s[vs++]=Ic,il=e.id,ol=e.overflow,Ic=t),t=x2(t,n.children),t.flags|=4096,t)}function AA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),aw(e.return,t,r)}function W1(e,t,r,n,a){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=n,h.tail=r,h.tailMode=a)}function MM(e,t,r){var n=t.pendingProps,a=n.revealOrder,h=n.tail;if(no(e,t,n.children,r),n=Dn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&AA(e,r,t);else if(e.tag===19)AA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(yn(Dn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&W_(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),W1(t,!1,a,r,h);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&W_(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}W1(t,!0,r,null,h);break;case"together":W1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function o_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(st(153));if(t.child!==null){for(e=t.child,r=gu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=gu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function y4(e,t,r){switch(t.tag){case 3:IM(t),Bd();break;case 5:iM(t);break;case 1:Eo(t.type)&&$_(t);break;case 4:d2(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;yn(V_,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(yn(Dn,Dn.current&1),t.flags|=128,null):r&t.child.childLanes?RM(e,t,r):(yn(Dn,Dn.current&1),e=fl(e,t,r),e!==null?e.sibling:null);yn(Dn,Dn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return MM(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),yn(Dn,Dn.current),n)break;return null;case 22:case 23:return t.lanes=0,kM(e,t,r)}return fl(e,t,r)}var LM,mw,OM,DM;LM=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mw=function(){};OM=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,_c(Ea.current);var h=null;switch(r){case"input":a=Fb(e,a),n=Fb(e,n),h=[];break;case"select":a=Fn({},a,{value:void 0}),n=Fn({},n,{value:void 0}),h=[];break;case"textarea":a=$b(e,a),n=$b(e,n),h=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=B_)}Ub(r,n);var d;r=null;for(T in a)if(!n.hasOwnProperty(T)&&a.hasOwnProperty(T)&&a[T]!=null)if(T==="style"){var u=a[T];for(d in u)u.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(hm.hasOwnProperty(T)?h||(h=[]):(h=h||[]).push(T,null));for(T in n){var b=n[T];if(u=a!=null?a[T]:void 0,n.hasOwnProperty(T)&&b!==u&&(b!=null||u!=null))if(T==="style")if(u){for(d in u)!u.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in b)b.hasOwnProperty(d)&&u[d]!==b[d]&&(r||(r={}),r[d]=b[d])}else r||(h||(h=[]),h.push(T,r)),r=b;else T==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(h=h||[]).push(T,b)):T==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(T,""+b):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(hm.hasOwnProperty(T)?(b!=null&&T==="onScroll"&&bn("scroll",e),h||u===b||(h=[])):(h=h||[]).push(T,b))}r&&(h=h||[]).push("style",r);var T=h;(t.updateQueue=T)&&(t.flags|=4)}};DM=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ep(e,t){if(!Rn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _4(e,t,r){var n=t.pendingProps;switch(o2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(t),null;case 1:return Eo(t.type)&&N_(),Vi(t),null;case 3:return n=t.stateNode,$d(),Sn(To),Sn(Wi),p2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Cy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qs!==null&&(Sw(qs),qs=null))),mw(e,t),Vi(t),null;case 5:f2(t);var a=_c(Sm.current);if(r=t.type,e!==null&&t.stateNode!=null)OM(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(st(166));return Vi(t),null}if(e=_c(Ea.current),Cy(t)){n=t.stateNode,r=t.type;var h=t.memoizedProps;switch(n[va]=t,n[bm]=h,e=(t.mode&1)!==0,r){case"dialog":bn("cancel",n),bn("close",n);break;case"iframe":case"object":case"embed":bn("load",n);break;case"video":case"audio":for(a=0;a<jp.length;a++)bn(jp[a],n);break;case"source":bn("error",n);break;case"img":case"image":case"link":bn("error",n),bn("load",n);break;case"details":bn("toggle",n);break;case"input":zC(n,h),bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!h.multiple},bn("invalid",n);break;case"textarea":BC(n,h),bn("invalid",n)}Ub(r,h),a=null;for(var d in h)if(h.hasOwnProperty(d)){var u=h[d];d==="children"?typeof u=="string"?n.textContent!==u&&(h.suppressHydrationWarning!==!0&&Ey(n.textContent,u,e),a=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(h.suppressHydrationWarning!==!0&&Ey(n.textContent,u,e),a=["children",""+u]):hm.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&bn("scroll",n)}switch(r){case"input":yy(n),FC(n,h,!0);break;case"textarea":yy(n),NC(n);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(n.onclick=B_)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),r==="select"&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[va]=t,e[bm]=n,LM(e,t,!1,!1),t.stateNode=e;e:{switch(d=Vb(r,n),r){case"dialog":bn("cancel",e),bn("close",e),a=n;break;case"iframe":case"object":case"embed":bn("load",e),a=n;break;case"video":case"audio":for(a=0;a<jp.length;a++)bn(jp[a],e);a=n;break;case"source":bn("error",e),a=n;break;case"img":case"image":case"link":bn("error",e),bn("load",e),a=n;break;case"details":bn("toggle",e),a=n;break;case"input":zC(e,n),a=Fb(e,n),bn("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Fn({},n,{value:void 0}),bn("invalid",e);break;case"textarea":BC(e,n),a=$b(e,n),bn("invalid",e);break;default:a=n}Ub(r,a),u=a;for(h in u)if(u.hasOwnProperty(h)){var b=u[h];h==="style"?dR(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&cR(e,b)):h==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&dm(e,b):typeof b=="number"&&dm(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(hm.hasOwnProperty(h)?b!=null&&h==="onScroll"&&bn("scroll",e):b!=null&&qS(e,h,b,d))}switch(r){case"input":yy(e),FC(e,n,!1);break;case"textarea":yy(e),NC(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xu(n.value));break;case"select":e.multiple=!!n.multiple,h=n.value,h!=null?Sd(e,!!n.multiple,h,!1):n.defaultValue!=null&&Sd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=B_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vi(t),null;case 6:if(e&&t.stateNode!=null)DM(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(st(166));if(r=_c(Sm.current),_c(Ea.current),Cy(t)){if(n=t.stateNode,r=t.memoizedProps,n[va]=t,(h=n.nodeValue!==r)&&(e=es,e!==null))switch(e.tag){case 3:Ey(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ey(n.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[va]=t,t.stateNode=n}return Vi(t),null;case 13:if(Sn(Dn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rn&&Yo!==null&&t.mode&1&&!(t.flags&128))QR(),Bd(),t.flags|=98560,h=!1;else if(h=Cy(t),n!==null&&n.dehydrated!==null){if(e===null){if(!h)throw Error(st(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(st(317));h[va]=t}else Bd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vi(t),h=!1}else qs!==null&&(Sw(qs),qs=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Dn.current&1?si===0&&(si=3):C2())),t.updateQueue!==null&&(t.flags|=4),Vi(t),null);case 4:return $d(),mw(e,t),e===null&&vm(t.stateNode.containerInfo),Vi(t),null;case 10:return u2(t.type._context),Vi(t),null;case 17:return Eo(t.type)&&N_(),Vi(t),null;case 19:if(Sn(Dn),h=t.memoizedState,h===null)return Vi(t),null;if(n=(t.flags&128)!==0,d=h.rendering,d===null)if(n)Ep(h,!1);else{if(si!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=W_(e),d!==null){for(t.flags|=128,Ep(h,!1),n=d.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)h=r,e=n,h.flags&=14680066,d=h.alternate,d===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,e=d.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return yn(Dn,Dn.current&1|2),t.child}e=e.sibling}h.tail!==null&&Wn()>Ud&&(t.flags|=128,n=!0,Ep(h,!1),t.lanes=4194304)}else{if(!n)if(e=W_(d),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ep(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Rn)return Vi(t),null}else 2*Wn()-h.renderingStartTime>Ud&&r!==1073741824&&(t.flags|=128,n=!0,Ep(h,!1),t.lanes=4194304);h.isBackwards?(d.sibling=t.child,t.child=d):(r=h.last,r!==null?r.sibling=d:t.child=d,h.last=d)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Wn(),t.sibling=null,r=Dn.current,yn(Dn,n?r&1|2:r&1),t):(Vi(t),null);case 22:case 23:return E2(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ho&1073741824&&(Vi(t),t.subtreeFlags&6&&(t.flags|=8192)):Vi(t),null;case 24:return null;case 25:return null}throw Error(st(156,t.tag))}function v4(e,t){switch(o2(t),t.tag){case 1:return Eo(t.type)&&N_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $d(),Sn(To),Sn(Wi),p2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return f2(t),null;case 13:if(Sn(Dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(st(340));Bd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(Dn),null;case 4:return $d(),null;case 10:return u2(t.type._context),null;case 22:case 23:return E2(),null;case 24:return null;default:return null}}var Py=!1,Hi=!1,x4=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function gd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Un(e,t,n)}else r.current=null}function gw(e,t,r){try{r()}catch(n){Un(e,t,n)}}var kA=!1;function b4(e,t){if(Qb=D_,e=$R(),n2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,h=n.focusNode;n=n.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var d=0,u=-1,b=-1,T=0,A=0,P=e,R=null;t:for(;;){for(var U;P!==r||a!==0&&P.nodeType!==3||(u=d+a),P!==h||n!==0&&P.nodeType!==3||(b=d+n),P.nodeType===3&&(d+=P.nodeValue.length),(U=P.firstChild)!==null;)R=P,P=U;for(;;){if(P===e)break t;if(R===r&&++T===a&&(u=d),R===h&&++A===n&&(b=d),(U=P.nextSibling)!==null)break;P=R,R=P.parentNode}P=U}r=u===-1||b===-1?null:{start:u,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(ew={focusedElem:e,selectionRange:r},D_=!1,Dt=t;Dt!==null;)if(t=Dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Dt=e;else for(;Dt!==null;){t=Dt;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var W=j.memoizedProps,ee=j.memoizedState,B=t.stateNode,H=B.getSnapshotBeforeUpdate(t.elementType===t.type?W:$s(t.type,W),ee);B.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(te){Un(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,Dt=e;break}Dt=t.return}return j=kA,kA=!1,j}function tm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var h=a.destroy;a.destroy=void 0,h!==void 0&&gw(t,r,h)}a=a.next}while(a!==n)}}function $v(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function yw(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function zM(e){var t=e.alternate;t!==null&&(e.alternate=null,zM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[va],delete t[bm],delete t[nw],delete t[n4],delete t[i4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function FM(e){return e.tag===5||e.tag===3||e.tag===4}function PA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||FM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _w(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=B_));else if(n!==4&&(e=e.child,e!==null))for(_w(e,t,r),e=e.sibling;e!==null;)_w(e,t,r),e=e.sibling}function vw(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(vw(e,t,r),e=e.sibling;e!==null;)vw(e,t,r),e=e.sibling}var Ci=null,js=!1;function Jl(e,t,r){for(r=r.child;r!==null;)BM(e,t,r),r=r.sibling}function BM(e,t,r){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(Mv,r)}catch{}switch(r.tag){case 5:Hi||gd(r,t);case 6:var n=Ci,a=js;Ci=null,Jl(e,t,r),Ci=n,js=a,Ci!==null&&(js?(e=Ci,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ci.removeChild(r.stateNode));break;case 18:Ci!==null&&(js?(e=Ci,r=r.stateNode,e.nodeType===8?N1(e.parentNode,r):e.nodeType===1&&N1(e,r),gm(e)):N1(Ci,r.stateNode));break;case 4:n=Ci,a=js,Ci=r.stateNode.containerInfo,js=!0,Jl(e,t,r),Ci=n,js=a;break;case 0:case 11:case 14:case 15:if(!Hi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var h=a,d=h.destroy;h=h.tag,d!==void 0&&(h&2||h&4)&&gw(r,t,d),a=a.next}while(a!==n)}Jl(e,t,r);break;case 1:if(!Hi&&(gd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){Un(r,t,u)}Jl(e,t,r);break;case 21:Jl(e,t,r);break;case 22:r.mode&1?(Hi=(n=Hi)||r.memoizedState!==null,Jl(e,t,r),Hi=n):Jl(e,t,r);break;default:Jl(e,t,r)}}function IA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new x4),t.forEach(function(n){var a=I4.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Bs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var h=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:Ci=u.stateNode,js=!1;break e;case 3:Ci=u.stateNode.containerInfo,js=!0;break e;case 4:Ci=u.stateNode.containerInfo,js=!0;break e}u=u.return}if(Ci===null)throw Error(st(160));BM(h,d,a),Ci=null,js=!1;var b=a.alternate;b!==null&&(b.return=null),a.return=null}catch(T){Un(a,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)NM(t,e),t=t.sibling}function NM(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bs(t,e),ha(e),n&4){try{tm(3,e,e.return),$v(3,e)}catch(W){Un(e,e.return,W)}try{tm(5,e,e.return)}catch(W){Un(e,e.return,W)}}break;case 1:Bs(t,e),ha(e),n&512&&r!==null&&gd(r,r.return);break;case 5:if(Bs(t,e),ha(e),n&512&&r!==null&&gd(r,r.return),e.flags&32){var a=e.stateNode;try{dm(a,"")}catch(W){Un(e,e.return,W)}}if(n&4&&(a=e.stateNode,a!=null)){var h=e.memoizedProps,d=r!==null?r.memoizedProps:h,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&h.type==="radio"&&h.name!=null&&aR(a,h),Vb(u,d);var T=Vb(u,h);for(d=0;d<b.length;d+=2){var A=b[d],P=b[d+1];A==="style"?dR(a,P):A==="dangerouslySetInnerHTML"?cR(a,P):A==="children"?dm(a,P):qS(a,A,P,T)}switch(u){case"input":Bb(a,h);break;case"textarea":lR(a,h);break;case"select":var R=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!h.multiple;var U=h.value;U!=null?Sd(a,!!h.multiple,U,!1):R!==!!h.multiple&&(h.defaultValue!=null?Sd(a,!!h.multiple,h.defaultValue,!0):Sd(a,!!h.multiple,h.multiple?[]:"",!1))}a[bm]=h}catch(W){Un(e,e.return,W)}}break;case 6:if(Bs(t,e),ha(e),n&4){if(e.stateNode===null)throw Error(st(162));a=e.stateNode,h=e.memoizedProps;try{a.nodeValue=h}catch(W){Un(e,e.return,W)}}break;case 3:if(Bs(t,e),ha(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gm(t.containerInfo)}catch(W){Un(e,e.return,W)}break;case 4:Bs(t,e),ha(e);break;case 13:Bs(t,e),ha(e),a=e.child,a.flags&8192&&(h=a.memoizedState!==null,a.stateNode.isHidden=h,!h||a.alternate!==null&&a.alternate.memoizedState!==null||(S2=Wn())),n&4&&IA(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(Hi=(T=Hi)||A,Bs(t,e),Hi=T):Bs(t,e),ha(e),n&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!A&&e.mode&1)for(Dt=e,A=e.child;A!==null;){for(P=Dt=A;Dt!==null;){switch(R=Dt,U=R.child,R.tag){case 0:case 11:case 14:case 15:tm(4,R,R.return);break;case 1:gd(R,R.return);var j=R.stateNode;if(typeof j.componentWillUnmount=="function"){n=R,r=R.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(W){Un(n,r,W)}}break;case 5:gd(R,R.return);break;case 22:if(R.memoizedState!==null){MA(P);continue}}U!==null?(U.return=R,Dt=U):MA(P)}A=A.sibling}e:for(A=null,P=e;;){if(P.tag===5){if(A===null){A=P;try{a=P.stateNode,T?(h=a.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(u=P.stateNode,b=P.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=hR("display",d))}catch(W){Un(e,e.return,W)}}}else if(P.tag===6){if(A===null)try{P.stateNode.nodeValue=T?"":P.memoizedProps}catch(W){Un(e,e.return,W)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;A===P&&(A=null),P=P.return}A===P&&(A=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:Bs(t,e),ha(e),n&4&&IA(e);break;case 21:break;default:Bs(t,e),ha(e)}}function ha(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(FM(r)){var n=r;break e}r=r.return}throw Error(st(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(dm(a,""),n.flags&=-33);var h=PA(e);vw(e,h,a);break;case 3:case 4:var d=n.stateNode.containerInfo,u=PA(e);_w(e,u,d);break;default:throw Error(st(161))}}catch(b){Un(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function w4(e,t,r){Dt=e,$M(e)}function $M(e,t,r){for(var n=(e.mode&1)!==0;Dt!==null;){var a=Dt,h=a.child;if(a.tag===22&&n){var d=a.memoizedState!==null||Py;if(!d){var u=a.alternate,b=u!==null&&u.memoizedState!==null||Hi;u=Py;var T=Hi;if(Py=d,(Hi=b)&&!T)for(Dt=a;Dt!==null;)d=Dt,b=d.child,d.tag===22&&d.memoizedState!==null?LA(a):b!==null?(b.return=d,Dt=b):LA(a);for(;h!==null;)Dt=h,$M(h),h=h.sibling;Dt=a,Py=u,Hi=T}RA(e)}else a.subtreeFlags&8772&&h!==null?(h.return=a,Dt=h):RA(e)}}function RA(e){for(;Dt!==null;){var t=Dt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Hi||$v(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Hi)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:$s(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&mA(t,h,n);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}mA(t,d,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var A=T.memoizedState;if(A!==null){var P=A.dehydrated;P!==null&&gm(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}Hi||t.flags&512&&yw(t)}catch(R){Un(t,t.return,R)}}if(t===e){Dt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Dt=r;break}Dt=t.return}}function MA(e){for(;Dt!==null;){var t=Dt;if(t===e){Dt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Dt=r;break}Dt=t.return}}function LA(e){for(;Dt!==null;){var t=Dt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$v(4,t)}catch(b){Un(t,r,b)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(b){Un(t,a,b)}}var h=t.return;try{yw(t)}catch(b){Un(t,h,b)}break;case 5:var d=t.return;try{yw(t)}catch(b){Un(t,d,b)}}}catch(b){Un(t,t.return,b)}if(t===e){Dt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Dt=u;break}Dt=t.return}}var S4=Math.ceil,K_=yl.ReactCurrentDispatcher,b2=yl.ReactCurrentOwner,As=yl.ReactCurrentBatchConfig,Nr=0,_i=null,ei=null,Pi=0,Ho=0,yd=Cu(0),si=0,Am=null,Mc=0,jv=0,w2=0,rm=null,bo=null,S2=0,Ud=1/0,Qa=null,X_=!1,xw=null,pu=null,Iy=!1,su=null,Y_=0,nm=0,bw=null,s_=-1,a_=0;function io(){return Nr&6?Wn():s_!==-1?s_:s_=Wn()}function mu(e){return e.mode&1?Nr&2&&Pi!==0?Pi&-Pi:s4.transition!==null?(a_===0&&(a_=TR()),a_):(e=Yr,e!==0||(e=window.event,e=e===void 0?16:RR(e.type)),e):1}function Gs(e,t,r,n){if(50<nm)throw nm=0,bw=null,Error(st(185));Hm(e,r,n),(!(Nr&2)||e!==_i)&&(e===_i&&(!(Nr&2)&&(jv|=r),si===4&&iu(e,Pi)),Co(e,n),r===1&&Nr===0&&!(t.mode&1)&&(Ud=Wn()+500,Fv&&Au()))}function Co(e,t){var r=e.callbackNode;sB(e,t);var n=O_(e,e===_i?Pi:0);if(n===0)r!==null&&UC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&UC(r),t===1)e.tag===0?o4(OA.bind(null,e)):XR(OA.bind(null,e)),t4(function(){!(Nr&6)&&Au()}),r=null;else{switch(ER(n)){case 1:r=KS;break;case 4:r=wR;break;case 16:r=L_;break;case 536870912:r=SR;break;default:r=L_}r=ZM(r,jM.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jM(e,t){if(s_=-1,a_=0,Nr&6)throw Error(st(327));var r=e.callbackNode;if(kd()&&e.callbackNode!==r)return null;var n=O_(e,e===_i?Pi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=J_(e,n);else{t=n;var a=Nr;Nr|=2;var h=VM();(_i!==e||Pi!==t)&&(Qa=null,Ud=Wn()+500,Sc(e,t));do try{C4();break}catch(u){UM(e,u)}while(!0);l2(),K_.current=h,Nr=a,ei!==null?t=0:(_i=null,Pi=0,t=si)}if(t!==0){if(t===2&&(a=Zb(e),a!==0&&(n=a,t=ww(e,a))),t===1)throw r=Am,Sc(e,0),iu(e,n),Co(e,Wn()),r;if(t===6)iu(e,n);else{if(a=e.current.alternate,!(n&30)&&!T4(a)&&(t=J_(e,n),t===2&&(h=Zb(e),h!==0&&(n=h,t=ww(e,h))),t===1))throw r=Am,Sc(e,0),iu(e,n),Co(e,Wn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(st(345));case 2:uc(e,bo,Qa);break;case 3:if(iu(e,n),(n&130023424)===n&&(t=S2+500-Wn(),10<t)){if(O_(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){io(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=rw(uc.bind(null,e,bo,Qa),t);break}uc(e,bo,Qa);break;case 4:if(iu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var d=31-Ws(n);h=1<<d,d=t[d],d>a&&(a=d),n&=~h}if(n=a,n=Wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*S4(n/1960))-n,10<n){e.timeoutHandle=rw(uc.bind(null,e,bo,Qa),n);break}uc(e,bo,Qa);break;case 5:uc(e,bo,Qa);break;default:throw Error(st(329))}}}return Co(e,Wn()),e.callbackNode===r?jM.bind(null,e):null}function ww(e,t){var r=rm;return e.current.memoizedState.isDehydrated&&(Sc(e,t).flags|=256),e=J_(e,t),e!==2&&(t=bo,bo=r,t!==null&&Sw(t)),e}function Sw(e){bo===null?bo=e:bo.push.apply(bo,e)}function T4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],h=a.getSnapshot;a=a.value;try{if(!Xs(h(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function iu(e,t){for(t&=~w2,t&=~jv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ws(t),n=1<<r;e[r]=-1,t&=~n}}function OA(e){if(Nr&6)throw Error(st(327));kd();var t=O_(e,0);if(!(t&1))return Co(e,Wn()),null;var r=J_(e,t);if(e.tag!==0&&r===2){var n=Zb(e);n!==0&&(t=n,r=ww(e,n))}if(r===1)throw r=Am,Sc(e,0),iu(e,t),Co(e,Wn()),r;if(r===6)throw Error(st(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uc(e,bo,Qa),Co(e,Wn()),null}function T2(e,t){var r=Nr;Nr|=1;try{return e(t)}finally{Nr=r,Nr===0&&(Ud=Wn()+500,Fv&&Au())}}function Lc(e){su!==null&&su.tag===0&&!(Nr&6)&&kd();var t=Nr;Nr|=1;var r=As.transition,n=Yr;try{if(As.transition=null,Yr=1,e)return e()}finally{Yr=n,As.transition=r,Nr=t,!(Nr&6)&&Au()}}function E2(){Ho=yd.current,Sn(yd)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,e4(r)),ei!==null)for(r=ei.return;r!==null;){var n=r;switch(o2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&N_();break;case 3:$d(),Sn(To),Sn(Wi),p2();break;case 5:f2(n);break;case 4:$d();break;case 13:Sn(Dn);break;case 19:Sn(Dn);break;case 10:u2(n.type._context);break;case 22:case 23:E2()}r=r.return}if(_i=e,ei=e=gu(e.current,null),Pi=Ho=t,si=0,Am=null,w2=jv=Mc=0,bo=rm=null,yc!==null){for(t=0;t<yc.length;t++)if(r=yc[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,h=r.pending;if(h!==null){var d=h.next;h.next=a,n.next=d}r.pending=n}yc=null}return e}function UM(e,t){do{var r=ei;try{if(l2(),n_.current=Z_,G_){for(var n=zn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}G_=!1}if(Rc=0,gi=oi=zn=null,em=!1,Tm=0,b2.current=null,r===null||r.return===null){si=1,Am=t,ei=null;break}e:{var h=e,d=r.return,u=r,b=t;if(t=Pi,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var T=b,A=u,P=A.tag;if(!(A.mode&1)&&(P===0||P===11||P===15)){var R=A.alternate;R?(A.updateQueue=R.updateQueue,A.memoizedState=R.memoizedState,A.lanes=R.lanes):(A.updateQueue=null,A.memoizedState=null)}var U=bA(d);if(U!==null){U.flags&=-257,wA(U,d,u,h,t),U.mode&1&&xA(h,T,t),t=U,b=T;var j=t.updateQueue;if(j===null){var W=new Set;W.add(b),t.updateQueue=W}else j.add(b);break e}else{if(!(t&1)){xA(h,T,t),C2();break e}b=Error(st(426))}}else if(Rn&&u.mode&1){var ee=bA(d);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),wA(ee,d,u,h,t),s2(jd(b,u));break e}}h=b=jd(b,u),si!==4&&(si=2),rm===null?rm=[h]:rm.push(h),h=d;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var B=EM(h,b,t);pA(h,B);break e;case 1:u=b;var H=h.type,V=h.stateNode;if(!(h.flags&128)&&(typeof H.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(pu===null||!pu.has(V)))){h.flags|=65536,t&=-t,h.lanes|=t;var te=CM(h,u,t);pA(h,te);break e}}h=h.return}while(h!==null)}HM(r)}catch(me){t=me,ei===r&&r!==null&&(ei=r=r.return);continue}break}while(!0)}function VM(){var e=K_.current;return K_.current=Z_,e===null?Z_:e}function C2(){(si===0||si===3||si===2)&&(si=4),_i===null||!(Mc&268435455)&&!(jv&268435455)||iu(_i,Pi)}function J_(e,t){var r=Nr;Nr|=2;var n=VM();(_i!==e||Pi!==t)&&(Qa=null,Sc(e,t));do try{E4();break}catch(a){UM(e,a)}while(!0);if(l2(),Nr=r,K_.current=n,ei!==null)throw Error(st(261));return _i=null,Pi=0,si}function E4(){for(;ei!==null;)qM(ei)}function C4(){for(;ei!==null&&!YF();)qM(ei)}function qM(e){var t=GM(e.alternate,e,Ho);e.memoizedProps=e.pendingProps,t===null?HM(e):ei=t,b2.current=null}function HM(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=v4(r,t),r!==null){r.flags&=32767,ei=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{si=6,ei=null;return}}else if(r=_4(r,t,Ho),r!==null){ei=r;return}if(t=t.sibling,t!==null){ei=t;return}ei=t=e}while(t!==null);si===0&&(si=5)}function uc(e,t,r){var n=Yr,a=As.transition;try{As.transition=null,Yr=1,A4(e,t,r,n)}finally{As.transition=a,Yr=n}return null}function A4(e,t,r,n){do kd();while(su!==null);if(Nr&6)throw Error(st(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(st(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(aB(e,h),e===_i&&(ei=_i=null,Pi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Iy||(Iy=!0,ZM(L_,function(){return kd(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=As.transition,As.transition=null;var d=Yr;Yr=1;var u=Nr;Nr|=4,b2.current=null,b4(e,r),NM(r,e),GB(ew),D_=!!Qb,ew=Qb=null,e.current=r,w4(r),JF(),Nr=u,Yr=d,As.transition=h}else e.current=r;if(Iy&&(Iy=!1,su=e,Y_=a),h=e.pendingLanes,h===0&&(pu=null),tB(r.stateNode),Co(e,Wn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(X_)throw X_=!1,e=xw,xw=null,e;return Y_&1&&e.tag!==0&&kd(),h=e.pendingLanes,h&1?e===bw?nm++:(nm=0,bw=e):nm=0,Au(),null}function kd(){if(su!==null){var e=ER(Y_),t=As.transition,r=Yr;try{if(As.transition=null,Yr=16>e?16:e,su===null)var n=!1;else{if(e=su,su=null,Y_=0,Nr&6)throw Error(st(331));var a=Nr;for(Nr|=4,Dt=e.current;Dt!==null;){var h=Dt,d=h.child;if(Dt.flags&16){var u=h.deletions;if(u!==null){for(var b=0;b<u.length;b++){var T=u[b];for(Dt=T;Dt!==null;){var A=Dt;switch(A.tag){case 0:case 11:case 15:tm(8,A,h)}var P=A.child;if(P!==null)P.return=A,Dt=P;else for(;Dt!==null;){A=Dt;var R=A.sibling,U=A.return;if(zM(A),A===T){Dt=null;break}if(R!==null){R.return=U,Dt=R;break}Dt=U}}}var j=h.alternate;if(j!==null){var W=j.child;if(W!==null){j.child=null;do{var ee=W.sibling;W.sibling=null,W=ee}while(W!==null)}}Dt=h}}if(h.subtreeFlags&2064&&d!==null)d.return=h,Dt=d;else e:for(;Dt!==null;){if(h=Dt,h.flags&2048)switch(h.tag){case 0:case 11:case 15:tm(9,h,h.return)}var B=h.sibling;if(B!==null){B.return=h.return,Dt=B;break e}Dt=h.return}}var H=e.current;for(Dt=H;Dt!==null;){d=Dt;var V=d.child;if(d.subtreeFlags&2064&&V!==null)V.return=d,Dt=V;else e:for(d=H;Dt!==null;){if(u=Dt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:$v(9,u)}}catch(me){Un(u,u.return,me)}if(u===d){Dt=null;break e}var te=u.sibling;if(te!==null){te.return=u.return,Dt=te;break e}Dt=u.return}}if(Nr=a,Au(),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(Mv,e)}catch{}n=!0}return n}finally{Yr=r,As.transition=t}}return!1}function DA(e,t,r){t=jd(r,t),t=EM(e,t,1),e=fu(e,t,1),t=io(),e!==null&&(Hm(e,1,t),Co(e,t))}function Un(e,t,r){if(e.tag===3)DA(e,e,r);else for(;t!==null;){if(t.tag===3){DA(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pu===null||!pu.has(n))){e=jd(r,e),e=CM(t,e,1),t=fu(t,e,1),e=io(),t!==null&&(Hm(t,1,e),Co(t,e));break}}t=t.return}}function k4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=io(),e.pingedLanes|=e.suspendedLanes&r,_i===e&&(Pi&r)===r&&(si===4||si===3&&(Pi&130023424)===Pi&&500>Wn()-S2?Sc(e,0):w2|=r),Co(e,t)}function WM(e,t){t===0&&(e.mode&1?(t=xy,xy<<=1,!(xy&130023424)&&(xy=4194304)):t=1);var r=io();e=dl(e,t),e!==null&&(Hm(e,t,r),Co(e,r))}function P4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),WM(e,r)}function I4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(st(314))}n!==null&&n.delete(t),WM(e,r)}var GM;GM=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||To.current)So=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return So=!1,y4(e,t,r);So=!!(e.flags&131072)}else So=!1,Rn&&t.flags&1048576&&YR(t,U_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;o_(e,t),e=t.pendingProps;var a=Fd(t,Wi.current);Ad(t,r),a=g2(null,t,n,e,a,r);var h=y2();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Eo(n)?(h=!0,$_(t)):h=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,h2(t),a.updater=Nv,t.stateNode=a,a._reactInternals=t,uw(t,n,e,r),t=dw(null,t,n,!0,h,r)):(t.tag=0,Rn&&h&&i2(t),no(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(o_(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=M4(n),e=$s(n,e),a){case 0:t=hw(null,t,n,e,r);break e;case 1:t=EA(null,t,n,e,r);break e;case 11:t=SA(null,t,n,e,r);break e;case 14:t=TA(null,t,n,$s(n.type,e),r);break e}throw Error(st(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$s(n,a),hw(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$s(n,a),EA(e,t,n,a,r);case 3:e:{if(IM(t),e===null)throw Error(st(387));n=t.pendingProps,h=t.memoizedState,a=h.element,nM(e,t),H_(t,n,null,r);var d=t.memoizedState;if(n=d.element,h.isDehydrated)if(h={element:n,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){a=jd(Error(st(423)),t),t=CA(e,t,n,r,a);break e}else if(n!==a){a=jd(Error(st(424)),t),t=CA(e,t,n,r,a);break e}else for(Yo=du(t.stateNode.containerInfo.firstChild),es=t,Rn=!0,qs=null,r=tM(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bd(),n===a){t=fl(e,t,r);break e}no(e,t,n,r)}t=t.child}return t;case 5:return iM(t),e===null&&sw(t),n=t.type,a=t.pendingProps,h=e!==null?e.memoizedProps:null,d=a.children,tw(n,a)?d=null:h!==null&&tw(n,h)&&(t.flags|=32),PM(e,t),no(e,t,d,r),t.child;case 6:return e===null&&sw(t),null;case 13:return RM(e,t,r);case 4:return d2(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Nd(t,null,n,r):no(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$s(n,a),SA(e,t,n,a,r);case 7:return no(e,t,t.pendingProps,r),t.child;case 8:return no(e,t,t.pendingProps.children,r),t.child;case 12:return no(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,h=t.memoizedProps,d=a.value,yn(V_,n._currentValue),n._currentValue=d,h!==null)if(Xs(h.value,d)){if(h.children===a.children&&!To.current){t=fl(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){d=h.child;for(var b=u.firstContext;b!==null;){if(b.context===n){if(h.tag===1){b=al(-1,r&-r),b.tag=2;var T=h.updateQueue;if(T!==null){T=T.shared;var A=T.pending;A===null?b.next=b:(b.next=A.next,A.next=b),T.pending=b}}h.lanes|=r,b=h.alternate,b!==null&&(b.lanes|=r),aw(h.return,r,t),u.lanes|=r;break}b=b.next}}else if(h.tag===10)d=h.type===t.type?null:h.child;else if(h.tag===18){if(d=h.return,d===null)throw Error(st(341));d.lanes|=r,u=d.alternate,u!==null&&(u.lanes|=r),aw(d,r,t),d=h.sibling}else d=h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===t){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}no(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ad(t,r),a=ks(a),n=n(a),t.flags|=1,no(e,t,n,r),t.child;case 14:return n=t.type,a=$s(n,t.pendingProps),a=$s(n.type,a),TA(e,t,n,a,r);case 15:return AM(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$s(n,a),o_(e,t),t.tag=1,Eo(n)?(e=!0,$_(t)):e=!1,Ad(t,r),TM(t,n,a),uw(t,n,a,r),dw(null,t,n,!0,e,r);case 19:return MM(e,t,r);case 22:return kM(e,t,r)}throw Error(st(156,t.tag))};function ZM(e,t){return bR(e,t)}function R4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,r,n){return new R4(e,t,r,n)}function A2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function M4(e){if(typeof e=="function")return A2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===WS)return 11;if(e===GS)return 14}return 2}function gu(e,t){var r=e.alternate;return r===null?(r=Ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function l_(e,t,r,n,a,h){var d=2;if(n=e,typeof e=="function")A2(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ad:return Tc(r.children,a,h,t);case HS:d=8,a|=8;break;case Lb:return e=Ts(12,r,t,a|2),e.elementType=Lb,e.lanes=h,e;case Ob:return e=Ts(13,r,t,a),e.elementType=Ob,e.lanes=h,e;case Db:return e=Ts(19,r,t,a),e.elementType=Db,e.lanes=h,e;case iR:return Uv(r,a,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rR:d=10;break e;case nR:d=9;break e;case WS:d=11;break e;case GS:d=14;break e;case tu:d=16,n=null;break e}throw Error(st(130,e==null?e:typeof e,""))}return t=Ts(d,r,t,a),t.elementType=e,t.type=n,t.lanes=h,t}function Tc(e,t,r,n){return e=Ts(7,e,n,t),e.lanes=r,e}function Uv(e,t,r,n){return e=Ts(22,e,n,t),e.elementType=iR,e.lanes=r,e.stateNode={isHidden:!1},e}function G1(e,t,r){return e=Ts(6,e,null,t),e.lanes=r,e}function Z1(e,t,r){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function L4(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=k1(0),this.expirationTimes=k1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k1(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function k2(e,t,r,n,a,h,d,u,b){return e=new L4(e,t,r,u,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Ts(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},h2(h),e}function O4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sd,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function KM(e){if(!e)return bu;e=e._reactInternals;e:{if(Vc(e)!==e||e.tag!==1)throw Error(st(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Eo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(st(171))}if(e.tag===1){var r=e.type;if(Eo(r))return KR(e,r,t)}return t}function XM(e,t,r,n,a,h,d,u,b){return e=k2(r,n,!0,e,a,h,d,u,b),e.context=KM(null),r=e.current,n=io(),a=mu(r),h=al(n,a),h.callback=t??null,fu(r,h,a),e.current.lanes=a,Hm(e,a,n),Co(e,n),e}function Vv(e,t,r,n){var a=t.current,h=io(),d=mu(a);return r=KM(r),t.context===null?t.context=r:t.pendingContext=r,t=al(h,d),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fu(a,t,d),e!==null&&(Gs(e,a,d,h),r_(e,a,d)),d}function Q_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function P2(e,t){zA(e,t),(e=e.alternate)&&zA(e,t)}function D4(){return null}var YM=typeof reportError=="function"?reportError:function(e){console.error(e)};function I2(e){this._internalRoot=e}qv.prototype.render=I2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(st(409));Vv(e,t,null,null)};qv.prototype.unmount=I2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lc(function(){Vv(null,e,null,null)}),t[hl]=null}};function qv(e){this._internalRoot=e}qv.prototype.unstable_scheduleHydration=function(e){if(e){var t=kR();e={blockedOn:null,target:e,priority:t};for(var r=0;r<nu.length&&t!==0&&t<nu[r].priority;r++);nu.splice(r,0,e),r===0&&IR(e)}};function R2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function FA(){}function z4(e,t,r,n,a){if(a){if(typeof n=="function"){var h=n;n=function(){var T=Q_(d);h.call(T)}}var d=XM(t,n,e,0,null,!1,!1,"",FA);return e._reactRootContainer=d,e[hl]=d.current,vm(e.nodeType===8?e.parentNode:e),Lc(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var u=n;n=function(){var T=Q_(b);u.call(T)}}var b=k2(e,0,!1,null,null,!1,!1,"",FA);return e._reactRootContainer=b,e[hl]=b.current,vm(e.nodeType===8?e.parentNode:e),Lc(function(){Vv(t,b,r,n)}),b}function Wv(e,t,r,n,a){var h=r._reactRootContainer;if(h){var d=h;if(typeof a=="function"){var u=a;a=function(){var b=Q_(d);u.call(b)}}Vv(t,d,e,a)}else d=z4(r,t,e,a,n);return Q_(d)}CR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=$p(t.pendingLanes);r!==0&&(XS(t,r|1),Co(t,Wn()),!(Nr&6)&&(Ud=Wn()+500,Au()))}break;case 13:Lc(function(){var n=dl(e,1);if(n!==null){var a=io();Gs(n,e,1,a)}}),P2(e,1)}};YS=function(e){if(e.tag===13){var t=dl(e,134217728);if(t!==null){var r=io();Gs(t,e,134217728,r)}P2(e,134217728)}};AR=function(e){if(e.tag===13){var t=mu(e),r=dl(e,t);if(r!==null){var n=io();Gs(r,e,t,n)}P2(e,t)}};kR=function(){return Yr};PR=function(e,t){var r=Yr;try{return Yr=e,t()}finally{Yr=r}};Hb=function(e,t,r){switch(t){case"input":if(Bb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=zv(n);if(!a)throw Error(st(90));sR(n),Bb(n,a)}}}break;case"textarea":lR(e,r);break;case"select":t=r.value,t!=null&&Sd(e,!!r.multiple,t,!1)}};mR=T2;gR=Lc;var F4={usingClientEntryPoint:!1,Events:[Gm,hd,zv,fR,pR,T2]},Cp={findFiberByHostInstance:gc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B4={bundleType:Cp.bundleType,version:Cp.version,rendererPackageName:Cp.rendererPackageName,rendererConfig:Cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vR(e),e===null?null:e.stateNode},findFiberByHostInstance:Cp.findFiberByHostInstance||D4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ry.isDisabled&&Ry.supportsFiber)try{Mv=Ry.inject(B4),Ta=Ry}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F4;is.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R2(t))throw Error(st(200));return O4(e,t,null,r)};is.createRoot=function(e,t){if(!R2(e))throw Error(st(299));var r=!1,n="",a=YM;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=k2(e,1,!1,null,null,r,!1,n,a),e[hl]=t.current,vm(e.nodeType===8?e.parentNode:e),new I2(t)};is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(st(188)):(e=Object.keys(e).join(","),Error(st(268,e)));return e=vR(t),e=e===null?null:e.stateNode,e};is.flushSync=function(e){return Lc(e)};is.hydrate=function(e,t,r){if(!Hv(t))throw Error(st(200));return Wv(null,e,t,!0,r)};is.hydrateRoot=function(e,t,r){if(!R2(e))throw Error(st(405));var n=r!=null&&r.hydratedSources||null,a=!1,h="",d=YM;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=XM(t,null,e,1,r??null,a,!1,h,d),e[hl]=t.current,vm(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new qv(t)};is.render=function(e,t,r){if(!Hv(t))throw Error(st(200));return Wv(null,e,t,!1,r)};is.unmountComponentAtNode=function(e){if(!Hv(e))throw Error(st(40));return e._reactRootContainer?(Lc(function(){Wv(null,null,e,!1,function(){e._reactRootContainer=null,e[hl]=null})}),!0):!1};is.unstable_batchedUpdates=T2;is.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Hv(r))throw Error(st(200));if(e==null||e._reactInternals===void 0)throw Error(st(38));return Wv(e,t,r,!1,n)};is.version="18.3.1-next-f1338f8080-20240426";function JM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JM)}catch(e){console.error(e)}}JM(),JI.exports=is;var Km=JI.exports;const Up=Xd(Km),N4=$I({__proto__:null,default:Up},[Km]);var QM,BA=Km;QM=BA.createRoot,BA.hydrateRoot;function eL(e,t){return function(){return e.apply(t,arguments)}}const{toString:$4}=Object.prototype,{getPrototypeOf:M2}=Object,Gv=(e=>t=>{const r=$4.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ea=e=>(e=e.toLowerCase(),t=>Gv(t)===e),Zv=e=>t=>typeof t===e,{isArray:ef}=Array,km=Zv("undefined");function j4(e){return e!==null&&!km(e)&&e.constructor!==null&&!km(e.constructor)&&ts(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tL=ea("ArrayBuffer");function U4(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tL(e.buffer),t}const V4=Zv("string"),ts=Zv("function"),rL=Zv("number"),Kv=e=>e!==null&&typeof e=="object",q4=e=>e===!0||e===!1,u_=e=>{if(Gv(e)!=="object")return!1;const t=M2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},H4=ea("Date"),W4=ea("File"),G4=ea("Blob"),Z4=ea("FileList"),K4=e=>Kv(e)&&ts(e.pipe),X4=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ts(e.append)&&((t=Gv(e))==="formdata"||t==="object"&&ts(e.toString)&&e.toString()==="[object FormData]"))},Y4=ea("URLSearchParams"),[J4,Q4,eN,tN]=["ReadableStream","Request","Response","Headers"].map(ea),rN=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xm(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),ef(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const h=r?Object.getOwnPropertyNames(e):Object.keys(e),d=h.length;let u;for(n=0;n<d;n++)u=h[n],t.call(null,e[u],u,e)}}function nL(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const vc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,iL=e=>!km(e)&&e!==vc;function Tw(){const{caseless:e}=iL(this)&&this||{},t={},r=(n,a)=>{const h=e&&nL(t,a)||a;u_(t[h])&&u_(n)?t[h]=Tw(t[h],n):u_(n)?t[h]=Tw({},n):ef(n)?t[h]=n.slice():t[h]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Xm(arguments[n],r);return t}const nN=(e,t,r,{allOwnKeys:n}={})=>(Xm(t,(a,h)=>{r&&ts(a)?e[h]=eL(a,r):e[h]=a},{allOwnKeys:n}),e),iN=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),oN=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sN=(e,t,r,n)=>{let a,h,d;const u={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),h=a.length;h-- >0;)d=a[h],(!n||n(d,e,t))&&!u[d]&&(t[d]=e[d],u[d]=!0);e=r!==!1&&M2(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},aN=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},lN=e=>{if(!e)return null;if(ef(e))return e;let t=e.length;if(!rL(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},uN=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&M2(Uint8Array)),cN=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=n.next())&&!a.done;){const h=a.value;t.call(e,h[0],h[1])}},hN=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},dN=ea("HTMLFormElement"),fN=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),NA=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),pN=ea("RegExp"),oL=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Xm(r,(a,h)=>{let d;(d=t(a,h,e))!==!1&&(n[h]=d||a)}),Object.defineProperties(e,n)},mN=e=>{oL(e,(t,r)=>{if(ts(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ts(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},gN=(e,t)=>{const r={},n=a=>{a.forEach(h=>{r[h]=!0})};return ef(e)?n(e):n(String(e).split(t)),r},yN=()=>{},_N=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,K1="abcdefghijklmnopqrstuvwxyz",$A="0123456789",sL={DIGIT:$A,ALPHA:K1,ALPHA_DIGIT:K1+K1.toUpperCase()+$A},vN=(e=16,t=sL.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function xN(e){return!!(e&&ts(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const bN=e=>{const t=new Array(10),r=(n,a)=>{if(Kv(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const h=ef(n)?[]:{};return Xm(n,(d,u)=>{const b=r(d,a+1);!km(b)&&(h[u]=b)}),t[a]=void 0,h}}return n};return r(e,0)},wN=ea("AsyncFunction"),SN=e=>e&&(Kv(e)||ts(e))&&ts(e.then)&&ts(e.catch),aL=((e,t)=>e?setImmediate:t?((r,n)=>(vc.addEventListener("message",({source:a,data:h})=>{a===vc&&h===r&&n.length&&n.shift()()},!1),a=>{n.push(a),vc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ts(vc.postMessage)),TN=typeof queueMicrotask<"u"?queueMicrotask.bind(vc):typeof process<"u"&&process.nextTick||aL,Be={isArray:ef,isArrayBuffer:tL,isBuffer:j4,isFormData:X4,isArrayBufferView:U4,isString:V4,isNumber:rL,isBoolean:q4,isObject:Kv,isPlainObject:u_,isReadableStream:J4,isRequest:Q4,isResponse:eN,isHeaders:tN,isUndefined:km,isDate:H4,isFile:W4,isBlob:G4,isRegExp:pN,isFunction:ts,isStream:K4,isURLSearchParams:Y4,isTypedArray:uN,isFileList:Z4,forEach:Xm,merge:Tw,extend:nN,trim:rN,stripBOM:iN,inherits:oN,toFlatObject:sN,kindOf:Gv,kindOfTest:ea,endsWith:aN,toArray:lN,forEachEntry:cN,matchAll:hN,isHTMLForm:dN,hasOwnProperty:NA,hasOwnProp:NA,reduceDescriptors:oL,freezeMethods:mN,toObjectSet:gN,toCamelCase:fN,noop:yN,toFiniteNumber:_N,findKey:nL,global:vc,isContextDefined:iL,ALPHABET:sL,generateString:vN,isSpecCompliantForm:xN,toJSONObject:bN,isAsyncFn:wN,isThenable:SN,setImmediate:aL,asap:TN};function gr(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Be.inherits(gr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const lL=gr.prototype,uL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{uL[e]={value:e}});Object.defineProperties(gr,uL);Object.defineProperty(lL,"isAxiosError",{value:!0});gr.from=(e,t,r,n,a,h)=>{const d=Object.create(lL);return Be.toFlatObject(e,d,function(b){return b!==Error.prototype},u=>u!=="isAxiosError"),gr.call(d,e.message,t,r,n,a),d.cause=e,d.name=e.name,h&&Object.assign(d,h),d};const EN=null;function Ew(e){return Be.isPlainObject(e)||Be.isArray(e)}function cL(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function jA(e,t,r){return e?e.concat(t).map(function(a,h){return a=cL(a),!r&&h?"["+a+"]":a}).join(r?".":""):t}function CN(e){return Be.isArray(e)&&!e.some(Ew)}const AN=Be.toFlatObject(Be,{},null,function(t){return/^is[A-Z]/.test(t)});function Xv(e,t,r){if(!Be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Be.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(W,ee){return!Be.isUndefined(ee[W])});const n=r.metaTokens,a=r.visitor||A,h=r.dots,d=r.indexes,b=(r.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(t);if(!Be.isFunction(a))throw new TypeError("visitor must be a function");function T(j){if(j===null)return"";if(Be.isDate(j))return j.toISOString();if(!b&&Be.isBlob(j))throw new gr("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(j)||Be.isTypedArray(j)?b&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function A(j,W,ee){let B=j;if(j&&!ee&&typeof j=="object"){if(Be.endsWith(W,"{}"))W=n?W:W.slice(0,-2),j=JSON.stringify(j);else if(Be.isArray(j)&&CN(j)||(Be.isFileList(j)||Be.endsWith(W,"[]"))&&(B=Be.toArray(j)))return W=cL(W),B.forEach(function(V,te){!(Be.isUndefined(V)||V===null)&&t.append(d===!0?jA([W],te,h):d===null?W:W+"[]",T(V))}),!1}return Ew(j)?!0:(t.append(jA(ee,W,h),T(j)),!1)}const P=[],R=Object.assign(AN,{defaultVisitor:A,convertValue:T,isVisitable:Ew});function U(j,W){if(!Be.isUndefined(j)){if(P.indexOf(j)!==-1)throw Error("Circular reference detected in "+W.join("."));P.push(j),Be.forEach(j,function(B,H){(!(Be.isUndefined(B)||B===null)&&a.call(t,B,Be.isString(H)?H.trim():H,W,R))===!0&&U(B,W?W.concat(H):[H])}),P.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return U(e),t}function UA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function L2(e,t){this._pairs=[],e&&Xv(e,this,t)}const hL=L2.prototype;hL.append=function(t,r){this._pairs.push([t,r])};hL.toString=function(t){const r=t?function(n){return t.call(this,n,UA)}:UA;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function kN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dL(e,t,r){if(!t)return e;const n=r&&r.encode||kN,a=r&&r.serialize;let h;if(a?h=a(t,r):h=Be.isURLSearchParams(t)?t.toString():new L2(t,r).toString(n),h){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class VA{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Be.forEach(this.handlers,function(n){n!==null&&t(n)})}}const fL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PN=typeof URLSearchParams<"u"?URLSearchParams:L2,IN=typeof FormData<"u"?FormData:null,RN=typeof Blob<"u"?Blob:null,MN={isBrowser:!0,classes:{URLSearchParams:PN,FormData:IN,Blob:RN},protocols:["http","https","file","blob","url","data"]},O2=typeof window<"u"&&typeof document<"u",Cw=typeof navigator=="object"&&navigator||void 0,LN=O2&&(!Cw||["ReactNative","NativeScript","NS"].indexOf(Cw.product)<0),ON=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DN=O2&&window.location.href||"http://localhost",zN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:O2,hasStandardBrowserEnv:LN,hasStandardBrowserWebWorkerEnv:ON,navigator:Cw,origin:DN},Symbol.toStringTag,{value:"Module"})),Ao={...zN,...MN};function FN(e,t){return Xv(e,new Ao.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,h){return Ao.isNode&&Be.isBuffer(r)?(this.append(n,r.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},t))}function BN(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function NN(e){const t={},r=Object.keys(e);let n;const a=r.length;let h;for(n=0;n<a;n++)h=r[n],t[h]=e[h];return t}function pL(e){function t(r,n,a,h){let d=r[h++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),b=h>=r.length;return d=!d&&Be.isArray(a)?a.length:d,b?(Be.hasOwnProp(a,d)?a[d]=[a[d],n]:a[d]=n,!u):((!a[d]||!Be.isObject(a[d]))&&(a[d]=[]),t(r,n,a[d],h)&&Be.isArray(a[d])&&(a[d]=NN(a[d])),!u)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const r={};return Be.forEachEntry(e,(n,a)=>{t(BN(n),a,r,0)}),r}return null}function $N(e,t,r){if(Be.isString(e))try{return(t||JSON.parse)(e),Be.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const Ym={transitional:fL,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,h=Be.isObject(t);if(h&&Be.isHTMLForm(t)&&(t=new FormData(t)),Be.isFormData(t))return a?JSON.stringify(pL(t)):t;if(Be.isArrayBuffer(t)||Be.isBuffer(t)||Be.isStream(t)||Be.isFile(t)||Be.isBlob(t)||Be.isReadableStream(t))return t;if(Be.isArrayBufferView(t))return t.buffer;if(Be.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(h){if(n.indexOf("application/x-www-form-urlencoded")>-1)return FN(t,this.formSerializer).toString();if((u=Be.isFileList(t))||n.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return Xv(u?{"files[]":t}:t,b&&new b,this.formSerializer)}}return h||a?(r.setContentType("application/json",!1),$N(t)):t}],transformResponse:[function(t){const r=this.transitional||Ym.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Be.isResponse(t)||Be.isReadableStream(t))return t;if(t&&Be.isString(t)&&(n&&!this.responseType||a)){const d=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(u){if(d)throw u.name==="SyntaxError"?gr.from(u,gr.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ao.classes.FormData,Blob:Ao.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{Ym.headers[e]={}});const jN=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UN=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(d){a=d.indexOf(":"),r=d.substring(0,a).trim().toLowerCase(),n=d.substring(a+1).trim(),!(!r||t[r]&&jN[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},qA=Symbol("internals");function Ap(e){return e&&String(e).trim().toLowerCase()}function c_(e){return e===!1||e==null?e:Be.isArray(e)?e.map(c_):String(e)}function VN(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function X1(e,t,r,n,a){if(Be.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!Be.isString(t)){if(Be.isString(n))return t.indexOf(n)!==-1;if(Be.isRegExp(n))return n.test(t)}}function HN(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function WN(e,t){const r=Be.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,h,d){return this[n].call(this,t,a,h,d)},configurable:!0})})}class ko{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function h(u,b,T){const A=Ap(b);if(!A)throw new Error("header name must be a non-empty string");const P=Be.findKey(a,A);(!P||a[P]===void 0||T===!0||T===void 0&&a[P]!==!1)&&(a[P||b]=c_(u))}const d=(u,b)=>Be.forEach(u,(T,A)=>h(T,A,b));if(Be.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(Be.isString(t)&&(t=t.trim())&&!qN(t))d(UN(t),r);else if(Be.isHeaders(t))for(const[u,b]of t.entries())h(b,u,n);else t!=null&&h(r,t,n);return this}get(t,r){if(t=Ap(t),t){const n=Be.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return VN(a);if(Be.isFunction(r))return r.call(this,a,n);if(Be.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ap(t),t){const n=Be.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||X1(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function h(d){if(d=Ap(d),d){const u=Be.findKey(n,d);u&&(!r||X1(n,n[u],u,r))&&(delete n[u],a=!0)}}return Be.isArray(t)?t.forEach(h):h(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const h=r[n];(!t||X1(this,this[h],h,t,!0))&&(delete this[h],a=!0)}return a}normalize(t){const r=this,n={};return Be.forEach(this,(a,h)=>{const d=Be.findKey(n,h);if(d){r[d]=c_(a),delete r[h];return}const u=t?HN(h):String(h).trim();u!==h&&delete r[h],r[u]=c_(a),n[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Be.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&Be.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[qA]=this[qA]={accessors:{}}).accessors,a=this.prototype;function h(d){const u=Ap(d);n[u]||(WN(a,d),n[u]=!0)}return Be.isArray(t)?t.forEach(h):h(t),this}}ko.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(ko.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Be.freezeMethods(ko);function Y1(e,t){const r=this||Ym,n=t||r,a=ko.from(n.headers);let h=n.data;return Be.forEach(e,function(u){h=u.call(r,h,a.normalize(),t?t.status:void 0)}),a.normalize(),h}function mL(e){return!!(e&&e.__CANCEL__)}function tf(e,t,r){gr.call(this,e??"canceled",gr.ERR_CANCELED,t,r),this.name="CanceledError"}Be.inherits(tf,gr,{__CANCEL__:!0});function gL(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new gr("Request failed with status code "+r.status,[gr.ERR_BAD_REQUEST,gr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function GN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ZN(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,h=0,d;return t=t!==void 0?t:1e3,function(b){const T=Date.now(),A=n[h];d||(d=T),r[a]=b,n[a]=T;let P=h,R=0;for(;P!==a;)R+=r[P++],P=P%e;if(a=(a+1)%e,a===h&&(h=(h+1)%e),T-d<t)return;const U=A&&T-A;return U?Math.round(R*1e3/U):void 0}}function KN(e,t){let r=0,n=1e3/t,a,h;const d=(T,A=Date.now())=>{r=A,a=null,h&&(clearTimeout(h),h=null),e.apply(null,T)};return[(...T)=>{const A=Date.now(),P=A-r;P>=n?d(T,A):(a=T,h||(h=setTimeout(()=>{h=null,d(a)},n-P)))},()=>a&&d(a)]}const ev=(e,t,r=3)=>{let n=0;const a=ZN(50,250);return KN(h=>{const d=h.loaded,u=h.lengthComputable?h.total:void 0,b=d-n,T=a(b),A=d<=u;n=d;const P={loaded:d,total:u,progress:u?d/u:void 0,bytes:b,rate:T||void 0,estimated:T&&u&&A?(u-d)/T:void 0,event:h,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(P)},r)},HA=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},WA=e=>(...t)=>Be.asap(()=>e(...t)),XN=Ao.hasStandardBrowserEnv?function(){const t=Ao.navigator&&/(msie|trident)/i.test(Ao.navigator.userAgent),r=document.createElement("a");let n;function a(h){let d=h;return t&&(r.setAttribute("href",d),d=r.href),r.setAttribute("href",d),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=a(window.location.href),function(d){const u=Be.isString(d)?a(d):d;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}(),YN=Ao.hasStandardBrowserEnv?{write(e,t,r,n,a,h){const d=[e+"="+encodeURIComponent(t)];Be.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),Be.isString(n)&&d.push("path="+n),Be.isString(a)&&d.push("domain="+a),h===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function QN(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function yL(e,t){return e&&!JN(t)?QN(e,t):t}const GA=e=>e instanceof ko?{...e}:e;function Oc(e,t){t=t||{};const r={};function n(T,A,P){return Be.isPlainObject(T)&&Be.isPlainObject(A)?Be.merge.call({caseless:P},T,A):Be.isPlainObject(A)?Be.merge({},A):Be.isArray(A)?A.slice():A}function a(T,A,P){if(Be.isUndefined(A)){if(!Be.isUndefined(T))return n(void 0,T,P)}else return n(T,A,P)}function h(T,A){if(!Be.isUndefined(A))return n(void 0,A)}function d(T,A){if(Be.isUndefined(A)){if(!Be.isUndefined(T))return n(void 0,T)}else return n(void 0,A)}function u(T,A,P){if(P in t)return n(T,A);if(P in e)return n(void 0,T)}const b={url:h,method:h,data:h,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(T,A)=>a(GA(T),GA(A),!0)};return Be.forEach(Object.keys(Object.assign({},e,t)),function(A){const P=b[A]||a,R=P(e[A],t[A],A);Be.isUndefined(R)&&P!==u||(r[A]=R)}),r}const _L=e=>{const t=Oc({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:h,headers:d,auth:u}=t;t.headers=d=ko.from(d),t.url=dL(yL(t.baseURL,t.url),e.params,e.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let b;if(Be.isFormData(r)){if(Ao.hasStandardBrowserEnv||Ao.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((b=d.getContentType())!==!1){const[T,...A]=b?b.split(";").map(P=>P.trim()).filter(Boolean):[];d.setContentType([T||"multipart/form-data",...A].join("; "))}}if(Ao.hasStandardBrowserEnv&&(n&&Be.isFunction(n)&&(n=n(t)),n||n!==!1&&XN(t.url))){const T=a&&h&&YN.read(h);T&&d.set(a,T)}return t},e6=typeof XMLHttpRequest<"u",t6=e6&&function(e){return new Promise(function(r,n){const a=_L(e);let h=a.data;const d=ko.from(a.headers).normalize();let{responseType:u,onUploadProgress:b,onDownloadProgress:T}=a,A,P,R,U,j;function W(){U&&U(),j&&j(),a.cancelToken&&a.cancelToken.unsubscribe(A),a.signal&&a.signal.removeEventListener("abort",A)}let ee=new XMLHttpRequest;ee.open(a.method.toUpperCase(),a.url,!0),ee.timeout=a.timeout;function B(){if(!ee)return;const V=ko.from("getAllResponseHeaders"in ee&&ee.getAllResponseHeaders()),me={data:!u||u==="text"||u==="json"?ee.responseText:ee.response,status:ee.status,statusText:ee.statusText,headers:V,config:e,request:ee};gL(function(ge){r(ge),W()},function(ge){n(ge),W()},me),ee=null}"onloadend"in ee?ee.onloadend=B:ee.onreadystatechange=function(){!ee||ee.readyState!==4||ee.status===0&&!(ee.responseURL&&ee.responseURL.indexOf("file:")===0)||setTimeout(B)},ee.onabort=function(){ee&&(n(new gr("Request aborted",gr.ECONNABORTED,e,ee)),ee=null)},ee.onerror=function(){n(new gr("Network Error",gr.ERR_NETWORK,e,ee)),ee=null},ee.ontimeout=function(){let te=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const me=a.transitional||fL;a.timeoutErrorMessage&&(te=a.timeoutErrorMessage),n(new gr(te,me.clarifyTimeoutError?gr.ETIMEDOUT:gr.ECONNABORTED,e,ee)),ee=null},h===void 0&&d.setContentType(null),"setRequestHeader"in ee&&Be.forEach(d.toJSON(),function(te,me){ee.setRequestHeader(me,te)}),Be.isUndefined(a.withCredentials)||(ee.withCredentials=!!a.withCredentials),u&&u!=="json"&&(ee.responseType=a.responseType),T&&([R,j]=ev(T,!0),ee.addEventListener("progress",R)),b&&ee.upload&&([P,U]=ev(b),ee.upload.addEventListener("progress",P),ee.upload.addEventListener("loadend",U)),(a.cancelToken||a.signal)&&(A=V=>{ee&&(n(!V||V.type?new tf(null,e,ee):V),ee.abort(),ee=null)},a.cancelToken&&a.cancelToken.subscribe(A),a.signal&&(a.signal.aborted?A():a.signal.addEventListener("abort",A)));const H=GN(a.url);if(H&&Ao.protocols.indexOf(H)===-1){n(new gr("Unsupported protocol "+H+":",gr.ERR_BAD_REQUEST,e));return}ee.send(h||null)})},r6=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const h=function(T){if(!a){a=!0,u();const A=T instanceof Error?T:this.reason;n.abort(A instanceof gr?A:new tf(A instanceof Error?A.message:A))}};let d=t&&setTimeout(()=>{d=null,h(new gr(`timeout ${t} of ms exceeded`,gr.ETIMEDOUT))},t);const u=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(T=>{T.unsubscribe?T.unsubscribe(h):T.removeEventListener("abort",h)}),e=null)};e.forEach(T=>T.addEventListener("abort",h));const{signal:b}=n;return b.unsubscribe=()=>Be.asap(u),b}},n6=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},i6=async function*(e,t){for await(const r of o6(e))yield*n6(r,t)},o6=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},ZA=(e,t,r,n)=>{const a=i6(e,t);let h=0,d,u=b=>{d||(d=!0,n&&n(b))};return new ReadableStream({async pull(b){try{const{done:T,value:A}=await a.next();if(T){u(),b.close();return}let P=A.byteLength;if(r){let R=h+=P;r(R)}b.enqueue(new Uint8Array(A))}catch(T){throw u(T),T}},cancel(b){return u(b),a.return()}},{highWaterMark:2})},Yv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vL=Yv&&typeof ReadableStream=="function",s6=Yv&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),xL=(e,...t)=>{try{return!!e(...t)}catch{return!1}},a6=vL&&xL(()=>{let e=!1;const t=new Request(Ao.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),KA=64*1024,Aw=vL&&xL(()=>Be.isReadableStream(new Response("").body)),tv={stream:Aw&&(e=>e.body)};Yv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!tv[t]&&(tv[t]=Be.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new gr(`Response type '${t}' is not supported`,gr.ERR_NOT_SUPPORT,n)})})})(new Response);const l6=async e=>{if(e==null)return 0;if(Be.isBlob(e))return e.size;if(Be.isSpecCompliantForm(e))return(await new Request(Ao.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(e)||Be.isArrayBuffer(e))return e.byteLength;if(Be.isURLSearchParams(e)&&(e=e+""),Be.isString(e))return(await s6(e)).byteLength},u6=async(e,t)=>{const r=Be.toFiniteNumber(e.getContentLength());return r??l6(t)},c6=Yv&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:h,timeout:d,onDownloadProgress:u,onUploadProgress:b,responseType:T,headers:A,withCredentials:P="same-origin",fetchOptions:R}=_L(e);T=T?(T+"").toLowerCase():"text";let U=r6([a,h&&h.toAbortSignal()],d),j;const W=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let ee;try{if(b&&a6&&r!=="get"&&r!=="head"&&(ee=await u6(A,n))!==0){let me=new Request(t,{method:"POST",body:n,duplex:"half"}),fe;if(Be.isFormData(n)&&(fe=me.headers.get("content-type"))&&A.setContentType(fe),me.body){const[ge,ie]=HA(ee,ev(WA(b)));n=ZA(me.body,KA,ge,ie)}}Be.isString(P)||(P=P?"include":"omit");const B="credentials"in Request.prototype;j=new Request(t,{...R,signal:U,method:r.toUpperCase(),headers:A.normalize().toJSON(),body:n,duplex:"half",credentials:B?P:void 0});let H=await fetch(j);const V=Aw&&(T==="stream"||T==="response");if(Aw&&(u||V&&W)){const me={};["status","statusText","headers"].forEach(Re=>{me[Re]=H[Re]});const fe=Be.toFiniteNumber(H.headers.get("content-length")),[ge,ie]=u&&HA(fe,ev(WA(u),!0))||[];H=new Response(ZA(H.body,KA,ge,()=>{ie&&ie(),W&&W()}),me)}T=T||"text";let te=await tv[Be.findKey(tv,T)||"text"](H,e);return!V&&W&&W(),await new Promise((me,fe)=>{gL(me,fe,{data:te,headers:ko.from(H.headers),status:H.status,statusText:H.statusText,config:e,request:j})})}catch(B){throw W&&W(),B&&B.name==="TypeError"&&/fetch/i.test(B.message)?Object.assign(new gr("Network Error",gr.ERR_NETWORK,e,j),{cause:B.cause||B}):gr.from(B,B&&B.code,e,j)}}),kw={http:EN,xhr:t6,fetch:c6};Be.forEach(kw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const XA=e=>`- ${e}`,h6=e=>Be.isFunction(e)||e===null||e===!1,bL={getAdapter:e=>{e=Be.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let h=0;h<t;h++){r=e[h];let d;if(n=r,!h6(r)&&(n=kw[(d=String(r)).toLowerCase()],n===void 0))throw new gr(`Unknown adapter '${d}'`);if(n)break;a[d||"#"+h]=n}if(!n){const h=Object.entries(a).map(([u,b])=>`adapter ${u} `+(b===!1?"is not supported by the environment":"is not available in the build"));let d=t?h.length>1?`since :
`+h.map(XA).join(`
`):" "+XA(h[0]):"as no adapter specified";throw new gr("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return n},adapters:kw};function J1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tf(null,e)}function YA(e){return J1(e),e.headers=ko.from(e.headers),e.data=Y1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bL.getAdapter(e.adapter||Ym.adapter)(e).then(function(n){return J1(e),n.data=Y1.call(e,e.transformResponse,n),n.headers=ko.from(n.headers),n},function(n){return mL(n)||(J1(e),n&&n.response&&(n.response.data=Y1.call(e,e.transformResponse,n.response),n.response.headers=ko.from(n.response.headers))),Promise.reject(n)})}const wL="1.7.7",D2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{D2[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const JA={};D2.transitional=function(t,r,n){function a(h,d){return"[Axios v"+wL+"] Transitional option '"+h+"'"+d+(n?". "+n:"")}return(h,d,u)=>{if(t===!1)throw new gr(a(d," has been removed"+(r?" in "+r:"")),gr.ERR_DEPRECATED);return r&&!JA[d]&&(JA[d]=!0,console.warn(a(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(h,d,u):!0}};function d6(e,t,r){if(typeof e!="object")throw new gr("options must be an object",gr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const h=n[a],d=t[h];if(d){const u=e[h],b=u===void 0||d(u,h,e);if(b!==!0)throw new gr("option "+h+" must be "+b,gr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new gr("Unknown option "+h,gr.ERR_BAD_OPTION)}}const Pw={assertOptions:d6,validators:D2},Ql=Pw.validators;class Ec{constructor(t){this.defaults=t,this.interceptors={request:new VA,response:new VA}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a;Error.captureStackTrace?Error.captureStackTrace(a={}):a=new Error;const h=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?h&&!String(n.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+h):n.stack=h}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Oc(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:h}=r;n!==void 0&&Pw.assertOptions(n,{silentJSONParsing:Ql.transitional(Ql.boolean),forcedJSONParsing:Ql.transitional(Ql.boolean),clarifyTimeoutError:Ql.transitional(Ql.boolean)},!1),a!=null&&(Be.isFunction(a)?r.paramsSerializer={serialize:a}:Pw.assertOptions(a,{encode:Ql.function,serialize:Ql.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=h&&Be.merge(h.common,h[r.method]);h&&Be.forEach(["delete","get","head","post","put","patch","common"],j=>{delete h[j]}),r.headers=ko.concat(d,h);const u=[];let b=!0;this.interceptors.request.forEach(function(W){typeof W.runWhen=="function"&&W.runWhen(r)===!1||(b=b&&W.synchronous,u.unshift(W.fulfilled,W.rejected))});const T=[];this.interceptors.response.forEach(function(W){T.push(W.fulfilled,W.rejected)});let A,P=0,R;if(!b){const j=[YA.bind(this),void 0];for(j.unshift.apply(j,u),j.push.apply(j,T),R=j.length,A=Promise.resolve(r);P<R;)A=A.then(j[P++],j[P++]);return A}R=u.length;let U=r;for(P=0;P<R;){const j=u[P++],W=u[P++];try{U=j(U)}catch(ee){W.call(this,ee);break}}try{A=YA.call(this,U)}catch(j){return Promise.reject(j)}for(P=0,R=T.length;P<R;)A=A.then(T[P++],T[P++]);return A}getUri(t){t=Oc(this.defaults,t);const r=yL(t.baseURL,t.url);return dL(r,t.params,t.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(t){Ec.prototype[t]=function(r,n){return this.request(Oc(n||{},{method:t,url:r,data:(n||{}).data}))}});Be.forEach(["post","put","patch"],function(t){function r(n){return function(h,d,u){return this.request(Oc(u||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:h,data:d}))}}Ec.prototype[t]=r(),Ec.prototype[t+"Form"]=r(!0)});class z2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(h){r=h});const n=this;this.promise.then(a=>{if(!n._listeners)return;let h=n._listeners.length;for(;h-- >0;)n._listeners[h](a);n._listeners=null}),this.promise.then=a=>{let h;const d=new Promise(u=>{n.subscribe(u),h=u}).then(a);return d.cancel=function(){n.unsubscribe(h)},d},t(function(h,d,u){n.reason||(n.reason=new tf(h,d,u),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new z2(function(a){t=a}),cancel:t}}}function f6(e){return function(r){return e.apply(null,r)}}function p6(e){return Be.isObject(e)&&e.isAxiosError===!0}const Iw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iw).forEach(([e,t])=>{Iw[t]=e});function SL(e){const t=new Ec(e),r=eL(Ec.prototype.request,t);return Be.extend(r,Ec.prototype,t,{allOwnKeys:!0}),Be.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return SL(Oc(e,a))},r}const ri=SL(Ym);ri.Axios=Ec;ri.CanceledError=tf;ri.CancelToken=z2;ri.isCancel=mL;ri.VERSION=wL;ri.toFormData=Xv;ri.AxiosError=gr;ri.Cancel=ri.CanceledError;ri.all=function(t){return Promise.all(t)};ri.spread=f6;ri.isAxiosError=p6;ri.mergeConfig=Oc;ri.AxiosHeaders=ko;ri.formToJSON=e=>pL(Be.isHTMLForm(e)?new FormData(e):e);ri.getAdapter=bL.getAdapter;ri.HttpStatusCode=Iw;ri.default=ri;const m6=ri.create({baseURL:"http://localhost:3000/api/"}),Ia=Object.create(null);Ia.open="0";Ia.close="1";Ia.ping="2";Ia.pong="3";Ia.message="4";Ia.upgrade="5";Ia.noop="6";const h_=Object.create(null);Object.keys(Ia).forEach(e=>{h_[Ia[e]]=e});const Rw={type:"error",data:"parser error"},TL=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",EL=typeof ArrayBuffer=="function",CL=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,F2=({type:e,data:t},r,n)=>TL&&t instanceof Blob?r?n(t):QA(t,n):EL&&(t instanceof ArrayBuffer||CL(t))?r?n(t):QA(new Blob([t]),n):n(Ia[e]+(t||"")),QA=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function ek(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Q1;function g6(e,t){if(TL&&e.data instanceof Blob)return e.data.arrayBuffer().then(ek).then(t);if(EL&&(e.data instanceof ArrayBuffer||CL(e.data)))return t(ek(e.data));F2(e,!1,r=>{Q1||(Q1=new TextEncoder),t(Q1.encode(r))})}const tk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<tk.length;e++)Vp[tk.charCodeAt(e)]=e;const y6=e=>{let t=e.length*.75,r=e.length,n,a=0,h,d,u,b;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const T=new ArrayBuffer(t),A=new Uint8Array(T);for(n=0;n<r;n+=4)h=Vp[e.charCodeAt(n)],d=Vp[e.charCodeAt(n+1)],u=Vp[e.charCodeAt(n+2)],b=Vp[e.charCodeAt(n+3)],A[a++]=h<<2|d>>4,A[a++]=(d&15)<<4|u>>2,A[a++]=(u&3)<<6|b&63;return T},_6=typeof ArrayBuffer=="function",B2=(e,t)=>{if(typeof e!="string")return{type:"message",data:AL(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:v6(e.substring(1),t)}:h_[r]?e.length>1?{type:h_[r],data:e.substring(1)}:{type:h_[r]}:Rw},v6=(e,t)=>{if(_6){const r=y6(e);return AL(r,t)}else return{base64:!0,data:e}},AL=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},kL="",x6=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((h,d)=>{F2(h,!1,u=>{n[d]=u,++a===r&&t(n.join(kL))})})},b6=(e,t)=>{const r=e.split(kL),n=[];for(let a=0;a<r.length;a++){const h=B2(r[a],t);if(n.push(h),h.type==="error")break}return n};function w6(){return new TransformStream({transform(e,t){g6(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const h=new DataView(a.buffer);h.setUint8(0,126),h.setUint16(1,n)}else{a=new Uint8Array(9);const h=new DataView(a.buffer);h.setUint8(0,127),h.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let eb;function My(e){return e.reduce((t,r)=>t+r.length,0)}function Ly(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function S6(e,t){eb||(eb=new TextDecoder);const r=[];let n=0,a=-1,h=!1;return new TransformStream({transform(d,u){for(r.push(d);;){if(n===0){if(My(r)<1)break;const b=Ly(r,1);h=(b[0]&128)===128,a=b[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(My(r)<2)break;const b=Ly(r,2);a=new DataView(b.buffer,b.byteOffset,b.length).getUint16(0),n=3}else if(n===2){if(My(r)<8)break;const b=Ly(r,8),T=new DataView(b.buffer,b.byteOffset,b.length),A=T.getUint32(0);if(A>Math.pow(2,21)-1){u.enqueue(Rw);break}a=A*Math.pow(2,32)+T.getUint32(4),n=3}else{if(My(r)<a)break;const b=Ly(r,a);u.enqueue(B2(h?b:eb.decode(b),t)),n=0}if(a===0||a>e){u.enqueue(Rw);break}}}})}const PL=4;function ti(e){if(e)return T6(e)}function T6(e){for(var t in ti.prototype)e[t]=ti.prototype[t];return e}ti.prototype.on=ti.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ti.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ti.prototype.off=ti.prototype.removeListener=ti.prototype.removeAllListeners=ti.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ti.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};ti.prototype.emitReserved=ti.prototype.emit;ti.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ti.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Jv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),xs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),E6="arraybuffer";function IL(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const C6=xs.setTimeout,A6=xs.clearTimeout;function Qv(e,t){t.useNativeTimers?(e.setTimeoutFn=C6.bind(xs),e.clearTimeoutFn=A6.bind(xs)):(e.setTimeoutFn=xs.setTimeout.bind(xs),e.clearTimeoutFn=xs.clearTimeout.bind(xs))}const k6=1.33;function P6(e){return typeof e=="string"?I6(e):Math.ceil((e.byteLength||e.size)*k6)}function I6(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function RL(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function R6(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function M6(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let h=r[n].split("=");t[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}return t}class L6 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class N2 extends ti{constructor(t){super(),this.writable=!1,Qv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new L6(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=B2(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=R6(t);return r.length?"?"+r:""}}class O6 extends N2{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};b6(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,x6(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=RL()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let ML=!1;try{ML=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const D6=ML;function z6(){}class F6 extends O6{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,h)=>{this.onError("xhr post error",a,h)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let Pd=class d_ extends ti{constructor(t,r,n){super(),this.createRequest=t,Qv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=IL(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=d_.requestsCount++,d_.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=z6,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete d_.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Pd.requestsCount=0;Pd.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",rk);else if(typeof addEventListener=="function"){const e="onpagehide"in xs?"pagehide":"unload";addEventListener(e,rk,!1)}}function rk(){for(let e in Pd.requests)Pd.requests.hasOwnProperty(e)&&Pd.requests[e].abort()}const B6=function(){const e=LL({xdomain:!1});return e&&e.responseType!==null}();class N6 extends F6{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=B6&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Pd(LL,this.uri(),t)}}function LL(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||D6))return new XMLHttpRequest}catch{}if(!t)try{return new xs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const OL=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class $6 extends N2{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=OL?{}:IL(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;F2(n,this.supportsBinary,h=>{try{this.doWrite(n,h)}catch{}a&&Jv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=RL()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const tb=xs.WebSocket||xs.MozWebSocket;class j6 extends $6{createSocket(t,r,n){return OL?new tb(t,r,n):r?new tb(t,r):new tb(t)}doWrite(t,r){this.ws.send(r)}}class U6 extends N2{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=S6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=w6();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const h=()=>{n.read().then(({done:u,value:b})=>{u||(this.onPacket(b),h())}).catch(u=>{})};h();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&Jv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const V6={websocket:j6,webtransport:U6,polling:N6},q6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,H6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Mw(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=q6.exec(e||""),h={},d=14;for(;d--;)h[H6[d]]=a[d]||"";return r!=-1&&n!=-1&&(h.source=t,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=W6(h,h.path),h.queryKey=G6(h,h.query),h}function W6(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function G6(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,h){a&&(r[a]=h)}),r}const Lw=typeof addEventListener=="function"&&typeof removeEventListener=="function",f_=[];Lw&&addEventListener("offline",()=>{f_.forEach(e=>e())},!1);class yu extends ti{constructor(t,r){if(super(),this.binaryType=E6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Mw(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Mw(r.host).host);Qv(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=M6(this.opts.query)),Lw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},f_.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=PL,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&yu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",yu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=P6(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Jv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const h={type:t,data:r,options:n};this.emitReserved("packetCreate",h),this.writeBuffer.push(h),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(yu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Lw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=f_.indexOf(this._offlineEventListener);n!==-1&&f_.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}yu.protocol=PL;class Z6 extends yu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;yu.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",P=>{if(!n)if(P.type==="pong"&&P.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;yu.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(A(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const R=new Error("probe error");R.transport=r.name,this.emitReserved("upgradeError",R)}}))};function h(){n||(n=!0,A(),r.close(),r=null)}const d=P=>{const R=new Error("probe error: "+P);R.transport=r.name,h(),this.emitReserved("upgradeError",R)};function u(){d("transport closed")}function b(){d("socket closed")}function T(P){r&&P.name!==r.name&&h()}const A=()=>{r.removeListener("open",a),r.removeListener("error",d),r.removeListener("close",u),this.off("close",b),this.off("upgrading",T)};r.once("open",a),r.once("error",d),r.once("close",u),this.once("close",b),this.once("upgrading",T),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let K6=class extends Z6{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>V6[a]).filter(a=>!!a)),super(t,n)}};function X6(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Mw(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const h=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+h+":"+n.port+t,n.href=n.protocol+"://"+h+(r&&r.port===n.port?"":":"+n.port),n}const Y6=typeof ArrayBuffer=="function",J6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,DL=Object.prototype.toString,Q6=typeof Blob=="function"||typeof Blob<"u"&&DL.call(Blob)==="[object BlobConstructor]",e$=typeof File=="function"||typeof File<"u"&&DL.call(File)==="[object FileConstructor]";function $2(e){return Y6&&(e instanceof ArrayBuffer||J6(e))||Q6&&e instanceof Blob||e$&&e instanceof File}function p_(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(p_(e[r]))return!0;return!1}if($2(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return p_(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&p_(e[r]))return!0;return!1}function t$(e){const t=[],r=e.data,n=e;return n.data=Ow(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Ow(e,t){if(!e)return e;if($2(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Ow(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Ow(e[n],t));return r}return e}function r$(e,t){return e.data=Dw(e.data,t),delete e.attachments,e}function Dw(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Dw(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Dw(e[r],t));return e}const n$=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],i$=5;var Dr;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Dr||(Dr={}));class o${constructor(t){this.replacer=t}encode(t){return(t.type===Dr.EVENT||t.type===Dr.ACK)&&p_(t)?this.encodeAsBinary({type:t.type===Dr.EVENT?Dr.BINARY_EVENT:Dr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Dr.BINARY_EVENT||t.type===Dr.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=t$(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function nk(e){return Object.prototype.toString.call(e)==="[object Object]"}class j2 extends ti{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Dr.BINARY_EVENT;n||r.type===Dr.BINARY_ACK?(r.type=n?Dr.EVENT:Dr.ACK,this.reconstructor=new s$(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if($2(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Dr[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Dr.BINARY_EVENT||n.type===Dr.BINARY_ACK){const h=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(h,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(d)}if(t.charAt(r+1)==="/"){const h=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(h,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const h=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}n.id=Number(t.substring(h,r+1))}if(t.charAt(++r)){const h=this.tryParse(t.substr(r));if(j2.isPayloadValid(n.type,h))n.data=h;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Dr.CONNECT:return nk(r);case Dr.DISCONNECT:return r===void 0;case Dr.CONNECT_ERROR:return typeof r=="string"||nk(r);case Dr.EVENT:case Dr.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&n$.indexOf(r[0])===-1);case Dr.ACK:case Dr.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class s${constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=r$(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const a$=Object.freeze(Object.defineProperty({__proto__:null,Decoder:j2,Encoder:o$,get PacketType(){return Dr},protocol:i$},Symbol.toStringTag,{value:"Module"}));function Us(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const l$=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class zL extends ti{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Us(t,"open",this.onopen.bind(this)),Us(t,"packet",this.onpacket.bind(this)),Us(t,"error",this.onerror.bind(this)),Us(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,h;if(l$.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:Dr.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const A=this.ids++,P=r.pop();this._registerAckCallback(A,P),d.id=A}const u=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,b=this.connected&&!(!((h=this.io.engine)===null||h===void 0)&&h._hasPingExpired());return this.flags.volatile&&!u||(b?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const h=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);r.call(this,new Error("operation has timed out"))},a),d=(...u)=>{this.io.clearTimeoutFn(h),r.apply(this,u)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((n,a)=>{const h=(d,u)=>d?a(d):n(u);h.withError=!0,r.push(h),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...h)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...h)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Dr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Dr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Dr.EVENT:case Dr.BINARY_EVENT:this.onevent(t);break;case Dr.ACK:case Dr.BINARY_ACK:this.onack(t);break;case Dr.DISCONNECT:this.ondisconnect();break;case Dr.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:Dr.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Dr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function rf(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}rf.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};rf.prototype.reset=function(){this.attempts=0};rf.prototype.setMin=function(e){this.ms=e};rf.prototype.setMax=function(e){this.max=e};rf.prototype.setJitter=function(e){this.jitter=e};class zw extends ti{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Qv(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new rf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||a$;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new K6(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Us(r,"open",function(){n.onopen(),t&&t()}),h=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},d=Us(r,"error",h);if(this._timeout!==!1){const u=this._timeout,b=this.setTimeoutFn(()=>{a(),h(new Error("timeout")),r.close()},u);this.opts.autoUnref&&b.unref(),this.subs.push(()=>{this.clearTimeoutFn(b)})}return this.subs.push(a),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Us(t,"ping",this.onping.bind(this)),Us(t,"data",this.ondata.bind(this)),Us(t,"error",this.onerror.bind(this)),Us(t,"close",this.onclose.bind(this)),Us(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Jv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new zL(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const kp={};function m_(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=X6(e,t.path||"/socket.io"),n=r.source,a=r.id,h=r.path,d=kp[a]&&h in kp[a].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let b;return u?b=new zw(n,t):(kp[a]||(kp[a]=new zw(n,t)),b=kp[a]),r.query&&!t.query&&(t.query=r.queryKey),b.socket(r.path,t)}Object.assign(m_,{Manager:zw,Socket:zL,io:m_,connect:m_});const Fw=m_("http://localhost:3000/",{autoConnect:!1}),Bw={LOGIN:"*",MAP:"/map"};var Nw=(e=>(e.MAP_ITEMS="map_items",e))(Nw||{});/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},On.apply(this,arguments)}var Jn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jn||(Jn={}));const ik="popstate";function u$(e){e===void 0&&(e={});function t(n,a){let{pathname:h,search:d,hash:u}=n.location;return Pm("",{pathname:h,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Jm(a)}return h$(t,r,null,e)}function Ir(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function c$(){return Math.random().toString(36).substr(2,8)}function ok(e,t){return{usr:e.state,key:e.key,idx:t}}function Pm(e,t,r,n){return r===void 0&&(r=null),On({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ku(t):t,{state:r,key:t&&t.key||n||c$()})}function Jm(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ku(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function h$(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:h=!1}=n,d=a.history,u=Jn.Pop,b=null,T=A();T==null&&(T=0,d.replaceState(On({},d.state,{idx:T}),""));function A(){return(d.state||{idx:null}).idx}function P(){u=Jn.Pop;let ee=A(),B=ee==null?null:ee-T;T=ee,b&&b({action:u,location:W.location,delta:B})}function R(ee,B){u=Jn.Push;let H=Pm(W.location,ee,B);T=A()+1;let V=ok(H,T),te=W.createHref(H);try{d.pushState(V,"",te)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;a.location.assign(te)}h&&b&&b({action:u,location:W.location,delta:1})}function U(ee,B){u=Jn.Replace;let H=Pm(W.location,ee,B);T=A();let V=ok(H,T),te=W.createHref(H);d.replaceState(V,"",te),h&&b&&b({action:u,location:W.location,delta:0})}function j(ee){let B=a.location.origin!=="null"?a.location.origin:a.location.href,H=typeof ee=="string"?ee:Jm(ee);return H=H.replace(/ $/,"%20"),Ir(B,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,B)}let W={get action(){return u},get location(){return e(a,d)},listen(ee){if(b)throw new Error("A history only accepts one active listener");return a.addEventListener(ik,P),b=ee,()=>{a.removeEventListener(ik,P),b=null}},createHref(ee){return t(a,ee)},createURL:j,encodeLocation(ee){let B=j(ee);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:R,replace:U,go(ee){return d.go(ee)}};return W}var on;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(on||(on={}));const d$=new Set(["lazy","caseSensitive","path","id","index","children"]);function f$(e){return e.index===!0}function Im(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((a,h)=>{let d=[...r,String(h)],u=typeof a.id=="string"?a.id:d.join("-");if(Ir(a.index!==!0||!a.children,"Cannot specify children on an index route"),Ir(!n[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),f$(a)){let b=On({},a,t(a),{id:u});return n[u]=b,b}else{let b=On({},a,t(a),{id:u,children:void 0});return n[u]=b,a.children&&(b.children=Im(a.children,t,d,n)),b}})}function mc(e,t,r){return r===void 0&&(r="/"),g_(e,t,r,!1)}function g_(e,t,r,n){let a=typeof t=="string"?ku(t):t,h=Qm(a.pathname||"/",r);if(h==null)return null;let d=FL(e);m$(d);let u=null;for(let b=0;u==null&&b<d.length;++b){let T=C$(h);u=T$(d[b],T,n)}return u}function p$(e,t){let{route:r,pathname:n,params:a}=e;return{id:r.id,pathname:n,params:a,data:t[r.id],handle:r.handle}}function FL(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(h,d,u)=>{let b={relativePath:u===void 0?h.path||"":u,caseSensitive:h.caseSensitive===!0,childrenIndex:d,route:h};b.relativePath.startsWith("/")&&(Ir(b.relativePath.startsWith(n),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(n.length));let T=_u([n,b.relativePath]),A=r.concat(b);h.children&&h.children.length>0&&(Ir(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),FL(h.children,t,A,T)),!(h.path==null&&!h.index)&&t.push({path:T,score:w$(T,h.index),routesMeta:A})};return e.forEach((h,d)=>{var u;if(h.path===""||!((u=h.path)!=null&&u.includes("?")))a(h,d);else for(let b of BL(h.path))a(h,d,b)}),t}function BL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),h=r.replace(/\?$/,"");if(n.length===0)return a?[h,""]:[h];let d=BL(n.join("/")),u=[];return u.push(...d.map(b=>b===""?h:[h,b].join("/"))),a&&u.push(...d),u.map(b=>e.startsWith("/")&&b===""?"/":b)}function m$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:S$(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const g$=/^:[\w-]+$/,y$=3,_$=2,v$=1,x$=10,b$=-2,sk=e=>e==="*";function w$(e,t){let r=e.split("/"),n=r.length;return r.some(sk)&&(n+=b$),t&&(n+=_$),r.filter(a=>!sk(a)).reduce((a,h)=>a+(g$.test(h)?y$:h===""?v$:x$),n)}function S$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function T$(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},h="/",d=[];for(let u=0;u<n.length;++u){let b=n[u],T=u===n.length-1,A=h==="/"?t:t.slice(h.length)||"/",P=ak({path:b.relativePath,caseSensitive:b.caseSensitive,end:T},A),R=b.route;if(!P&&T&&r&&!n[n.length-1].route.index&&(P=ak({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},A)),!P)return null;Object.assign(a,P.params),d.push({params:a,pathname:_u([h,P.pathname]),pathnameBase:P$(_u([h,P.pathnameBase])),route:R}),P.pathnameBase!=="/"&&(h=_u([h,P.pathnameBase]))}return d}function ak(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=E$(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let h=a[0],d=h.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((T,A,P)=>{let{paramName:R,isOptional:U}=A;if(R==="*"){let W=u[P]||"";d=h.slice(0,h.length-W.length).replace(/(.)\/+$/,"$1")}const j=u[P];return U&&!j?T[R]=void 0:T[R]=(j||"").replace(/%2F/g,"/"),T},{}),pathname:h,pathnameBase:d,pattern:e}}function E$(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Vd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,b)=>(n.push({paramName:u,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function C$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qm(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function A$(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ku(e):e;return{pathname:r?r.startsWith("/")?r:k$(r,t):t,search:I$(n),hash:R$(a)}}function k$(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function rb(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function $L(e,t){let r=NL(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function jL(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ku(e):(a=On({},e),Ir(!a.pathname||!a.pathname.includes("?"),rb("?","pathname","search",a)),Ir(!a.pathname||!a.pathname.includes("#"),rb("#","pathname","hash",a)),Ir(!a.search||!a.search.includes("#"),rb("#","search","hash",a)));let h=e===""||a.pathname==="",d=h?"/":a.pathname,u;if(d==null)u=r;else{let P=t.length-1;if(!n&&d.startsWith("..")){let R=d.split("/");for(;R[0]==="..";)R.shift(),P-=1;a.pathname=R.join("/")}u=P>=0?t[P]:"/"}let b=A$(a,u),T=d&&d!=="/"&&d.endsWith("/"),A=(h||d===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(T||A)&&(b.pathname+="/"),b}const _u=e=>e.join("/").replace(/\/\/+/g,"/"),P$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,R$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class rv{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function e0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const UL=["post","put","patch","delete"],M$=new Set(UL),L$=["get",...UL],O$=new Set(L$),D$=new Set([301,302,303,307,308]),z$=new Set([307,308]),nb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},F$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Pp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},U2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B$=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),VL="remix-router-transitions";function N$(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Ir(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(e.mapRouteProperties)a=e.mapRouteProperties;else if(e.detectErrorBoundary){let ne=e.detectErrorBoundary;a=ce=>({hasErrorBoundary:ne(ce)})}else a=B$;let h={},d=Im(e.routes,a,void 0,h),u,b=e.basename||"/",T=e.unstable_dataStrategy||H$,A=e.unstable_patchRoutesOnNavigation,P=On({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),R=null,U=new Set,j=1e3,W=new Set,ee=null,B=null,H=null,V=e.hydrationData!=null,te=mc(d,e.history.location,b),me=null;if(te==null&&!A){let ne=ro(404,{pathname:e.history.location.pathname}),{matches:ce,route:be}=gk(d);te=ce,me={[be.id]:ne}}te&&!e.hydrationData&&Ae(te,d,e.history.location.pathname).active&&(te=null);let fe;if(te)if(te.some(ne=>ne.route.lazy))fe=!1;else if(!te.some(ne=>ne.route.loader))fe=!0;else if(P.v7_partialHydration){let ne=e.hydrationData?e.hydrationData.loaderData:null,ce=e.hydrationData?e.hydrationData.errors:null,be=ze=>ze.route.loader?typeof ze.route.loader=="function"&&ze.route.loader.hydrate===!0?!1:ne&&ne[ze.route.id]!==void 0||ce&&ce[ze.route.id]!==void 0:!0;if(ce){let ze=te.findIndex(Ke=>ce[Ke.route.id]!==void 0);fe=te.slice(0,ze+1).every(be)}else fe=te.every(be)}else fe=e.hydrationData!=null;else if(fe=!1,te=[],P.v7_partialHydration){let ne=Ae(null,d,e.history.location.pathname);ne.active&&ne.matches&&(te=ne.matches)}let ge,ie={historyAction:e.history.action,location:e.history.location,matches:te,initialized:fe,navigation:nb,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||me,fetchers:new Map,blockers:new Map},Re=Jn.Pop,Z=!1,Te,Ue=!1,Fe=new Map,Ze=null,Xe=!1,it=!1,Et=[],Ne=new Set,Ye=new Map,vt=0,Ct=-1,Lt=new Map,Nt=new Set,zt=new Map,er=new Map,lr=new Set,sr=new Map,br=new Map,Ar=new Map,Zt;function fr(){if(R=e.history.listen(ne=>{let{action:ce,location:be,delta:ze}=ne;if(Zt){Zt(),Zt=void 0;return}Vd(br.size===0||ze!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ke=Zi({currentLocation:ie.location,nextLocation:be,historyAction:ce});if(Ke&&ze!=null){let ot=new Promise(ft=>{Zt=ft});e.history.go(ze*-1),Gi(Ke,{state:"blocked",location:be,proceed(){Gi(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:be}),ot.then(()=>e.history.go(ze))},reset(){let ft=new Map(ie.blockers);ft.set(Ke,Pp),$t({blockers:ft})}});return}return Rr(ce,be)}),r){sj(t,Fe);let ne=()=>aj(t,Fe);t.addEventListener("pagehide",ne),Ze=()=>t.removeEventListener("pagehide",ne)}return ie.initialized||Rr(Jn.Pop,ie.location,{initialHydration:!0}),ge}function ir(){R&&R(),Ze&&Ze(),U.clear(),Te&&Te.abort(),ie.fetchers.forEach((ne,ce)=>et(ce)),ie.blockers.forEach((ne,ce)=>lo(ce))}function Fr(ne){return U.add(ne),()=>U.delete(ne)}function $t(ne,ce){ce===void 0&&(ce={}),ie=On({},ie,ne);let be=[],ze=[];P.v7_fetcherPersist&&ie.fetchers.forEach((Ke,ot)=>{Ke.state==="idle"&&(lr.has(ot)?ze.push(ot):be.push(ot))}),[...U].forEach(Ke=>Ke(ie,{deletedFetchers:ze,unstable_viewTransitionOpts:ce.viewTransitionOpts,unstable_flushSync:ce.flushSync===!0})),P.v7_fetcherPersist&&(be.forEach(Ke=>ie.fetchers.delete(Ke)),ze.forEach(Ke=>et(Ke)))}function hr(ne,ce,be){var ze,Ke;let{flushSync:ot}=be===void 0?{}:be,ft=ie.actionData!=null&&ie.navigation.formMethod!=null&&Vs(ie.navigation.formMethod)&&ie.navigation.state==="loading"&&((ze=ne.state)==null?void 0:ze._isRedirect)!==!0,nt;ce.actionData?Object.keys(ce.actionData).length>0?nt=ce.actionData:nt=null:ft?nt=ie.actionData:nt=null;let St=ce.loaderData?pk(ie.loaderData,ce.loaderData,ce.matches||[],ce.errors):ie.loaderData,Qe=ie.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((or,dr)=>Qe.set(dr,Pp)));let ut=Z===!0||ie.navigation.formMethod!=null&&Vs(ie.navigation.formMethod)&&((Ke=ne.state)==null?void 0:Ke._isRedirect)!==!0;u&&(d=u,u=void 0),Xe||Re===Jn.Pop||(Re===Jn.Push?e.history.push(ne,ne.state):Re===Jn.Replace&&e.history.replace(ne,ne.state));let qt;if(Re===Jn.Pop){let or=Fe.get(ie.location.pathname);or&&or.has(ne.pathname)?qt={currentLocation:ie.location,nextLocation:ne}:Fe.has(ne.pathname)&&(qt={currentLocation:ne,nextLocation:ie.location})}else if(Ue){let or=Fe.get(ie.location.pathname);or?or.add(ne.pathname):(or=new Set([ne.pathname]),Fe.set(ie.location.pathname,or)),qt={currentLocation:ie.location,nextLocation:ne}}$t(On({},ce,{actionData:nt,loaderData:St,historyAction:Re,location:ne,initialized:!0,navigation:nb,revalidation:"idle",restoreScrollPosition:Se(ne,ce.matches||ie.matches),preventScrollReset:ut,blockers:Qe}),{viewTransitionOpts:qt,flushSync:ot===!0}),Re=Jn.Pop,Z=!1,Ue=!1,Xe=!1,it=!1,Et=[]}async function Ie(ne,ce){if(typeof ne=="number"){e.history.go(ne);return}let be=$w(ie.location,ie.matches,b,P.v7_prependBasename,ne,P.v7_relativeSplatPath,ce==null?void 0:ce.fromRouteId,ce==null?void 0:ce.relative),{path:ze,submission:Ke,error:ot}=lk(P.v7_normalizeFormMethod,!1,be,ce),ft=ie.location,nt=Pm(ie.location,ze,ce&&ce.state);nt=On({},nt,e.history.encodeLocation(nt));let St=ce&&ce.replace!=null?ce.replace:void 0,Qe=Jn.Push;St===!0?Qe=Jn.Replace:St===!1||Ke!=null&&Vs(Ke.formMethod)&&Ke.formAction===ie.location.pathname+ie.location.search&&(Qe=Jn.Replace);let ut=ce&&"preventScrollReset"in ce?ce.preventScrollReset===!0:void 0,qt=(ce&&ce.unstable_flushSync)===!0,or=Zi({currentLocation:ft,nextLocation:nt,historyAction:Qe});if(or){Gi(or,{state:"blocked",location:nt,proceed(){Gi(or,{state:"proceeding",proceed:void 0,reset:void 0,location:nt}),Ie(ne,ce)},reset(){let dr=new Map(ie.blockers);dr.set(or,Pp),$t({blockers:dr})}});return}return await Rr(Qe,nt,{submission:Ke,pendingError:ot,preventScrollReset:ut,replace:ce&&ce.replace,enableViewTransition:ce&&ce.unstable_viewTransition,flushSync:qt})}function mn(){if(Mr(),$t({revalidation:"loading"}),ie.navigation.state!=="submitting"){if(ie.navigation.state==="idle"){Rr(ie.historyAction,ie.location,{startUninterruptedRevalidation:!0});return}Rr(Re||ie.historyAction,ie.navigation.location,{overrideNavigation:ie.navigation,enableViewTransition:Ue===!0})}}async function Rr(ne,ce,be){Te&&Te.abort(),Te=null,Re=ne,Xe=(be&&be.startUninterruptedRevalidation)===!0,ve(ie.location,ie.matches),Z=(be&&be.preventScrollReset)===!0,Ue=(be&&be.enableViewTransition)===!0;let ze=u||d,Ke=be&&be.overrideNavigation,ot=mc(ze,ce,b),ft=(be&&be.flushSync)===!0,nt=Ae(ot,ze,ce.pathname);if(nt.active&&nt.matches&&(ot=nt.matches),!ot){let{error:nr,notFoundMatches:un,route:Jt}=ue(ce.pathname);hr(ce,{matches:un,loaderData:{},errors:{[Jt.id]:nr}},{flushSync:ft});return}if(ie.initialized&&!it&&Y$(ie.location,ce)&&!(be&&be.submission&&Vs(be.submission.formMethod))){hr(ce,{matches:ot},{flushSync:ft});return}Te=new AbortController;let St=Zh(e.history,ce,Te.signal,be&&be.submission),Qe;if(be&&be.pendingError)Qe=[_d(ot).route.id,{type:on.error,error:be.pendingError}];else if(be&&be.submission&&Vs(be.submission.formMethod)){let nr=await Vt(St,ce,be.submission,ot,nt.active,{replace:be.replace,flushSync:ft});if(nr.shortCircuited)return;if(nr.pendingActionResult){let[un,Jt]=nr.pendingActionResult;if(Wo(Jt)&&e0(Jt.error)&&Jt.error.status===404){Te=null,hr(ce,{matches:nr.matches,loaderData:{},errors:{[un]:Jt.error}});return}}ot=nr.matches||ot,Qe=nr.pendingActionResult,Ke=ib(ce,be.submission),ft=!1,nt.active=!1,St=Zh(e.history,St.url,St.signal)}let{shortCircuited:ut,matches:qt,loaderData:or,errors:dr}=await _r(St,ce,ot,nt.active,Ke,be&&be.submission,be&&be.fetcherSubmission,be&&be.replace,be&&be.initialHydration===!0,ft,Qe);ut||(Te=null,hr(ce,On({matches:qt||ot},mk(Qe),{loaderData:or,errors:dr})))}async function Vt(ne,ce,be,ze,Ke,ot){ot===void 0&&(ot={}),Mr();let ft=ij(ce,be);if($t({navigation:ft},{flushSync:ot.flushSync===!0}),Ke){let Qe=await ye(ze,ce.pathname,ne.signal);if(Qe.type==="aborted")return{shortCircuited:!0};if(Qe.type==="error"){let{boundaryId:ut,error:qt}=N(ce.pathname,Qe);return{matches:Qe.partialMatches,pendingActionResult:[ut,{type:on.error,error:qt}]}}else if(Qe.matches)ze=Qe.matches;else{let{notFoundMatches:ut,error:qt,route:or}=ue(ce.pathname);return{matches:ut,pendingActionResult:[or.id,{type:on.error,error:qt}]}}}let nt,St=qp(ze,ce);if(!St.route.action&&!St.route.lazy)nt={type:on.error,error:ro(405,{method:ne.method,pathname:ce.pathname,routeId:St.route.id})};else if(nt=(await tr("action",ie,ne,[St],ze,null))[St.route.id],ne.signal.aborted)return{shortCircuited:!0};if(xc(nt)){let Qe;return ot&&ot.replace!=null?Qe=ot.replace:Qe=hk(nt.response.headers.get("Location"),new URL(ne.url),b)===ie.location.pathname+ie.location.search,await Ft(ne,nt,!0,{submission:be,replace:Qe}),{shortCircuited:!0}}if(au(nt))throw ro(400,{type:"defer-action"});if(Wo(nt)){let Qe=_d(ze,St.route.id);return(ot&&ot.replace)!==!0&&(Re=Jn.Push),{matches:ze,pendingActionResult:[Qe.route.id,nt]}}return{matches:ze,pendingActionResult:[St.route.id,nt]}}async function _r(ne,ce,be,ze,Ke,ot,ft,nt,St,Qe,ut){let qt=Ke||ib(ce,ot),or=ot||ft||_k(qt),dr=!Xe&&(!P.v7_partialHydration||!St);if(ze){if(dr){let Gr=Sr(ut);$t(On({navigation:qt},Gr!==void 0?{actionData:Gr}:{}),{flushSync:Qe})}let Bt=await ye(be,ce.pathname,ne.signal);if(Bt.type==="aborted")return{shortCircuited:!0};if(Bt.type==="error"){let{boundaryId:Gr,error:cn}=N(ce.pathname,Bt);return{matches:Bt.partialMatches,loaderData:{},errors:{[Gr]:cn}}}else if(Bt.matches)be=Bt.matches;else{let{error:Gr,notFoundMatches:cn,route:ur}=ue(ce.pathname);return{matches:cn,loaderData:{},errors:{[ur.id]:Gr}}}}let nr=u||d,[un,Jt]=uk(e.history,ie,be,or,ce,P.v7_partialHydration&&St===!0,P.v7_skipActionErrorRevalidation,it,Et,Ne,lr,zt,Nt,nr,b,ut);if($(Bt=>!(be&&be.some(Gr=>Gr.route.id===Bt))||un&&un.some(Gr=>Gr.route.id===Bt)),Ct=++vt,un.length===0&&Jt.length===0){let Bt=Mn();return hr(ce,On({matches:be,loaderData:{},errors:ut&&Wo(ut[1])?{[ut[0]]:ut[1].error}:null},mk(ut),Bt?{fetchers:new Map(ie.fetchers)}:{}),{flushSync:Qe}),{shortCircuited:!0}}if(dr){let Bt={};if(!ze){Bt.navigation=qt;let Gr=Sr(ut);Gr!==void 0&&(Bt.actionData=Gr)}Jt.length>0&&(Bt.fetchers=Me(Jt)),$t(Bt,{flushSync:Qe})}Jt.forEach(Bt=>{Ye.has(Bt.key)&&at(Bt.key),Bt.controller&&Ye.set(Bt.key,Bt.controller)});let Ms=()=>Jt.forEach(Bt=>at(Bt.key));Te&&Te.signal.addEventListener("abort",Ms);let{loaderResults:Ki,fetcherResults:Bn}=await He(ie,be,un,Jt,ne);if(ne.signal.aborted)return{shortCircuited:!0};Te&&Te.signal.removeEventListener("abort",Ms),Jt.forEach(Bt=>Ye.delete(Bt.key));let En=Oy(Ki);if(En)return await Ft(ne,En.result,!0,{replace:nt}),{shortCircuited:!0};if(En=Oy(Bn),En)return Nt.add(En.key),await Ft(ne,En.result,!0,{replace:nt}),{shortCircuited:!0};let{loaderData:vl,errors:Cn}=fk(ie,be,un,Ki,ut,Jt,Bn,sr);sr.forEach((Bt,Gr)=>{Bt.subscribe(cn=>{(cn||Bt.done)&&sr.delete(Gr)})}),P.v7_partialHydration&&St&&ie.errors&&Object.entries(ie.errors).filter(Bt=>{let[Gr]=Bt;return!un.some(cn=>cn.route.id===Gr)}).forEach(Bt=>{let[Gr,cn]=Bt;Cn=Object.assign(Cn||{},{[Gr]:cn})});let Zn=Mn(),Ro=Wt(Ct),uo=Zn||Ro||Jt.length>0;return On({matches:be,loaderData:vl,errors:Cn},uo?{fetchers:new Map(ie.fetchers)}:{})}function Sr(ne){if(ne&&!Wo(ne[1]))return{[ne[0]]:ne[1].data};if(ie.actionData)return Object.keys(ie.actionData).length===0?null:ie.actionData}function Me(ne){return ne.forEach(ce=>{let be=ie.fetchers.get(ce.key),ze=Ip(void 0,be?be.data:void 0);ie.fetchers.set(ce.key,ze)}),new Map(ie.fetchers)}function $e(ne,ce,be,ze){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ye.has(ne)&&at(ne);let Ke=(ze&&ze.unstable_flushSync)===!0,ot=u||d,ft=$w(ie.location,ie.matches,b,P.v7_prependBasename,be,P.v7_relativeSplatPath,ce,ze==null?void 0:ze.relative),nt=mc(ot,ft,b),St=Ae(nt,ot,ft);if(St.active&&St.matches&&(nt=St.matches),!nt){rr(ne,ce,ro(404,{pathname:ft}),{flushSync:Ke});return}let{path:Qe,submission:ut,error:qt}=lk(P.v7_normalizeFormMethod,!0,ft,ze);if(qt){rr(ne,ce,qt,{flushSync:Ke});return}let or=qp(nt,Qe);if(Z=(ze&&ze.preventScrollReset)===!0,ut&&Vs(ut.formMethod)){mt(ne,ce,Qe,or,nt,St.active,Ke,ut);return}zt.set(ne,{routeId:ce,path:Qe}),kt(ne,ce,Qe,or,nt,St.active,Ke,ut)}async function mt(ne,ce,be,ze,Ke,ot,ft,nt){Mr(),zt.delete(ne);function St(ur){if(!ur.route.action&&!ur.route.lazy){let Mi=ro(405,{method:nt.formMethod,pathname:be,routeId:ce});return rr(ne,ce,Mi,{flushSync:ft}),!0}return!1}if(!ot&&St(ze))return;let Qe=ie.fetchers.get(ne);Tr(ne,oj(nt,Qe),{flushSync:ft});let ut=new AbortController,qt=Zh(e.history,be,ut.signal,nt);if(ot){let ur=await ye(Ke,be,qt.signal);if(ur.type==="aborted")return;if(ur.type==="error"){let{error:Mi}=N(be,ur);rr(ne,ce,Mi,{flushSync:ft});return}else if(ur.matches){if(Ke=ur.matches,ze=qp(Ke,be),St(ze))return}else{rr(ne,ce,ro(404,{pathname:be}),{flushSync:ft});return}}Ye.set(ne,ut);let or=vt,nr=(await tr("action",ie,qt,[ze],Ke,ne))[ze.route.id];if(qt.signal.aborted){Ye.get(ne)===ut&&Ye.delete(ne);return}if(P.v7_fetcherPersist&&lr.has(ne)){if(xc(nr)||Wo(nr)){Tr(ne,eu(void 0));return}}else{if(xc(nr))if(Ye.delete(ne),Ct>or){Tr(ne,eu(void 0));return}else return Nt.add(ne),Tr(ne,Ip(nt)),Ft(qt,nr,!1,{fetcherSubmission:nt});if(Wo(nr)){rr(ne,ce,nr.error);return}}if(au(nr))throw ro(400,{type:"defer-action"});let un=ie.navigation.location||ie.location,Jt=Zh(e.history,un,ut.signal),Ms=u||d,Ki=ie.navigation.state!=="idle"?mc(Ms,ie.navigation.location,b):ie.matches;Ir(Ki,"Didn't find any matches after fetcher action");let Bn=++vt;Lt.set(ne,Bn);let En=Ip(nt,nr.data);ie.fetchers.set(ne,En);let[vl,Cn]=uk(e.history,ie,Ki,nt,un,!1,P.v7_skipActionErrorRevalidation,it,Et,Ne,lr,zt,Nt,Ms,b,[ze.route.id,nr]);Cn.filter(ur=>ur.key!==ne).forEach(ur=>{let Mi=ur.key,Li=ie.fetchers.get(Mi),Mu=Ip(void 0,Li?Li.data:void 0);ie.fetchers.set(Mi,Mu),Ye.has(Mi)&&at(Mi),ur.controller&&Ye.set(Mi,ur.controller)}),$t({fetchers:new Map(ie.fetchers)});let Zn=()=>Cn.forEach(ur=>at(ur.key));ut.signal.addEventListener("abort",Zn);let{loaderResults:Ro,fetcherResults:uo}=await He(ie,Ki,vl,Cn,Jt);if(ut.signal.aborted)return;ut.signal.removeEventListener("abort",Zn),Lt.delete(ne),Ye.delete(ne),Cn.forEach(ur=>Ye.delete(ur.key));let Bt=Oy(Ro);if(Bt)return Ft(Jt,Bt.result,!1);if(Bt=Oy(uo),Bt)return Nt.add(Bt.key),Ft(Jt,Bt.result,!1);let{loaderData:Gr,errors:cn}=fk(ie,Ki,vl,Ro,void 0,Cn,uo,sr);if(ie.fetchers.has(ne)){let ur=eu(nr.data);ie.fetchers.set(ne,ur)}Wt(Bn),ie.navigation.state==="loading"&&Bn>Ct?(Ir(Re,"Expected pending action"),Te&&Te.abort(),hr(ie.navigation.location,{matches:Ki,loaderData:Gr,errors:cn,fetchers:new Map(ie.fetchers)})):($t({errors:cn,loaderData:pk(ie.loaderData,Gr,Ki,cn),fetchers:new Map(ie.fetchers)}),it=!1)}async function kt(ne,ce,be,ze,Ke,ot,ft,nt){let St=ie.fetchers.get(ne);Tr(ne,Ip(nt,St?St.data:void 0),{flushSync:ft});let Qe=new AbortController,ut=Zh(e.history,be,Qe.signal);if(ot){let nr=await ye(Ke,be,ut.signal);if(nr.type==="aborted")return;if(nr.type==="error"){let{error:un}=N(be,nr);rr(ne,ce,un,{flushSync:ft});return}else if(nr.matches)Ke=nr.matches,ze=qp(Ke,be);else{rr(ne,ce,ro(404,{pathname:be}),{flushSync:ft});return}}Ye.set(ne,Qe);let qt=vt,dr=(await tr("loader",ie,ut,[ze],Ke,ne))[ze.route.id];if(au(dr)&&(dr=await V2(dr,ut.signal,!0)||dr),Ye.get(ne)===Qe&&Ye.delete(ne),!ut.signal.aborted){if(lr.has(ne)){Tr(ne,eu(void 0));return}if(xc(dr))if(Ct>qt){Tr(ne,eu(void 0));return}else{Nt.add(ne),await Ft(ut,dr,!1);return}if(Wo(dr)){rr(ne,ce,dr.error);return}Ir(!au(dr),"Unhandled fetcher deferred data"),Tr(ne,eu(dr.data))}}async function Ft(ne,ce,be,ze){let{submission:Ke,fetcherSubmission:ot,replace:ft}=ze===void 0?{}:ze;ce.response.headers.has("X-Remix-Revalidate")&&(it=!0);let nt=ce.response.headers.get("Location");Ir(nt,"Expected a Location header on the redirect Response"),nt=hk(nt,new URL(ne.url),b);let St=Pm(ie.location,nt,{_isRedirect:!0});if(r){let nr=!1;if(ce.response.headers.has("X-Remix-Reload-Document"))nr=!0;else if(U2.test(nt)){const un=e.history.createURL(nt);nr=un.origin!==t.location.origin||Qm(un.pathname,b)==null}if(nr){ft?t.location.replace(nt):t.location.assign(nt);return}}Te=null;let Qe=ft===!0||ce.response.headers.has("X-Remix-Replace")?Jn.Replace:Jn.Push,{formMethod:ut,formAction:qt,formEncType:or}=ie.navigation;!Ke&&!ot&&ut&&qt&&or&&(Ke=_k(ie.navigation));let dr=Ke||ot;if(z$.has(ce.response.status)&&dr&&Vs(dr.formMethod))await Rr(Qe,St,{submission:On({},dr,{formAction:nt}),preventScrollReset:Z,enableViewTransition:be?Ue:void 0});else{let nr=ib(St,Ke);await Rr(Qe,St,{overrideNavigation:nr,fetcherSubmission:ot,preventScrollReset:Z,enableViewTransition:be?Ue:void 0})}}async function tr(ne,ce,be,ze,Ke,ot){let ft,nt={};try{ft=await W$(T,ne,ce,be,ze,Ke,ot,h,a)}catch(St){return ze.forEach(Qe=>{nt[Qe.route.id]={type:on.error,error:St}}),nt}for(let[St,Qe]of Object.entries(ft))if(Q$(Qe)){let ut=Qe.result;nt[St]={type:on.redirect,response:K$(ut,be,St,Ke,b,P.v7_relativeSplatPath)}}else nt[St]=await Z$(Qe);return nt}async function He(ne,ce,be,ze,Ke){let ot=ne.matches,ft=tr("loader",ne,Ke,be,ce,null),nt=Promise.all(ze.map(async ut=>{if(ut.matches&&ut.match&&ut.controller){let or=(await tr("loader",ne,Zh(e.history,ut.path,ut.controller.signal),[ut.match],ut.matches,ut.key))[ut.match.route.id];return{[ut.key]:or}}else return Promise.resolve({[ut.key]:{type:on.error,error:ro(404,{pathname:ut.path})}})})),St=await ft,Qe=(await nt).reduce((ut,qt)=>Object.assign(ut,qt),{});return await Promise.all([rj(ce,St,Ke.signal,ot,ne.loaderData),nj(ce,Qe,ze)]),{loaderResults:St,fetcherResults:Qe}}function Mr(){it=!0,Et.push(...$()),zt.forEach((ne,ce)=>{Ye.has(ce)&&(Ne.add(ce),at(ce))})}function Tr(ne,ce,be){be===void 0&&(be={}),ie.fetchers.set(ne,ce),$t({fetchers:new Map(ie.fetchers)},{flushSync:(be&&be.flushSync)===!0})}function rr(ne,ce,be,ze){ze===void 0&&(ze={});let Ke=_d(ie.matches,ce);et(ne),$t({errors:{[Ke.route.id]:be},fetchers:new Map(ie.fetchers)},{flushSync:(ze&&ze.flushSync)===!0})}function qn(ne){return P.v7_fetcherPersist&&(er.set(ne,(er.get(ne)||0)+1),lr.has(ne)&&lr.delete(ne)),ie.fetchers.get(ne)||F$}function et(ne){let ce=ie.fetchers.get(ne);Ye.has(ne)&&!(ce&&ce.state==="loading"&&Lt.has(ne))&&at(ne),zt.delete(ne),Lt.delete(ne),Nt.delete(ne),lr.delete(ne),Ne.delete(ne),ie.fetchers.delete(ne)}function rt(ne){if(P.v7_fetcherPersist){let ce=(er.get(ne)||0)-1;ce<=0?(er.delete(ne),lr.add(ne)):er.set(ne,ce)}else et(ne);$t({fetchers:new Map(ie.fetchers)})}function at(ne){let ce=Ye.get(ne);Ir(ce,"Expected fetch controller: "+ne),ce.abort(),Ye.delete(ne)}function Er(ne){for(let ce of ne){let be=qn(ce),ze=eu(be.data);ie.fetchers.set(ce,ze)}}function Mn(){let ne=[],ce=!1;for(let be of Nt){let ze=ie.fetchers.get(be);Ir(ze,"Expected fetcher: "+be),ze.state==="loading"&&(Nt.delete(be),ne.push(be),ce=!0)}return Er(ne),ce}function Wt(ne){let ce=[];for(let[be,ze]of Lt)if(ze<ne){let Ke=ie.fetchers.get(be);Ir(Ke,"Expected fetcher: "+be),Ke.state==="loading"&&(at(be),Lt.delete(be),ce.push(be))}return Er(ce),ce.length>0}function ao(ne,ce){let be=ie.blockers.get(ne)||Pp;return br.get(ne)!==ce&&br.set(ne,ce),be}function lo(ne){ie.blockers.delete(ne),br.delete(ne)}function Gi(ne,ce){let be=ie.blockers.get(ne)||Pp;Ir(be.state==="unblocked"&&ce.state==="blocked"||be.state==="blocked"&&ce.state==="blocked"||be.state==="blocked"&&ce.state==="proceeding"||be.state==="blocked"&&ce.state==="unblocked"||be.state==="proceeding"&&ce.state==="unblocked","Invalid blocker state transition: "+be.state+" -> "+ce.state);let ze=new Map(ie.blockers);ze.set(ne,ce),$t({blockers:ze})}function Zi(ne){let{currentLocation:ce,nextLocation:be,historyAction:ze}=ne;if(br.size===0)return;br.size>1&&Vd(!1,"A router only supports one blocker at a time");let Ke=Array.from(br.entries()),[ot,ft]=Ke[Ke.length-1],nt=ie.blockers.get(ot);if(!(nt&&nt.state==="proceeding")&&ft({currentLocation:ce,nextLocation:be,historyAction:ze}))return ot}function ue(ne){let ce=ro(404,{pathname:ne}),be=u||d,{matches:ze,route:Ke}=gk(be);return $(),{notFoundMatches:ze,route:Ke,error:ce}}function N(ne,ce){return{boundaryId:_d(ce.partialMatches).route.id,error:ro(400,{type:"route-discovery",pathname:ne,message:ce.error!=null&&"message"in ce.error?ce.error:String(ce.error)})}}function $(ne){let ce=[];return sr.forEach((be,ze)=>{(!ne||ne(ze))&&(be.cancel(),ce.push(ze),sr.delete(ze))}),ce}function J(ne,ce,be){if(ee=ne,H=ce,B=be||null,!V&&ie.navigation===nb){V=!0;let ze=Se(ie.location,ie.matches);ze!=null&&$t({restoreScrollPosition:ze})}return()=>{ee=null,H=null,B=null}}function oe(ne,ce){return B&&B(ne,ce.map(ze=>p$(ze,ie.loaderData)))||ne.key}function ve(ne,ce){if(ee&&H){let be=oe(ne,ce);ee[be]=H()}}function Se(ne,ce){if(ee){let be=oe(ne,ce),ze=ee[be];if(typeof ze=="number")return ze}return null}function Ae(ne,ce,be){if(A){if(W.has(be))return{active:!1,matches:ne};if(ne){if(Object.keys(ne[0].params).length>0)return{active:!0,matches:g_(ce,be,b,!0)}}else return{active:!0,matches:g_(ce,be,b,!0)||[]}}return{active:!1,matches:null}}async function ye(ne,ce,be){let ze=ne;for(;;){let Ke=u==null,ot=u||d;try{await V$(A,ce,ze,ot,h,a,Ar,be)}catch(St){return{type:"error",error:St,partialMatches:ze}}finally{Ke&&(d=[...d])}if(be.aborted)return{type:"aborted"};let ft=mc(ot,ce,b);if(ft)return Oe(ce,W),{type:"success",matches:ft};let nt=g_(ot,ce,b,!0);if(!nt||ze.length===nt.length&&ze.every((St,Qe)=>St.route.id===nt[Qe].route.id))return Oe(ce,W),{type:"success",matches:null};ze=nt}}function Oe(ne,ce){if(ce.size>=j){let be=ce.values().next().value;ce.delete(be)}ce.add(ne)}function Ge(ne){h={},u=Im(ne,a,void 0,h)}function Le(ne,ce){let be=u==null;HL(ne,ce,u||d,h,a),be&&(d=[...d],$t({}))}return ge={get basename(){return b},get future(){return P},get state(){return ie},get routes(){return d},get window(){return t},initialize:fr,subscribe:Fr,enableScrollRestoration:J,navigate:Ie,fetch:$e,revalidate:mn,createHref:ne=>e.history.createHref(ne),encodeLocation:ne=>e.history.encodeLocation(ne),getFetcher:qn,deleteFetcher:rt,dispose:ir,getBlocker:ao,deleteBlocker:lo,patchRoutes:Le,_internalFetchControllers:Ye,_internalActiveDeferreds:sr,_internalSetRoutes:Ge},ge}function $$(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function $w(e,t,r,n,a,h,d,u){let b,T;if(d){b=[];for(let P of t)if(b.push(P),P.route.id===d){T=P;break}}else b=t,T=t[t.length-1];let A=jL(a||".",$L(b,h),Qm(e.pathname,r)||e.pathname,u==="path");return a==null&&(A.search=e.search,A.hash=e.hash),(a==null||a===""||a===".")&&T&&T.route.index&&!q2(A.search)&&(A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(A.pathname=A.pathname==="/"?r:_u([r,A.pathname])),Jm(A)}function lk(e,t,r,n){if(!n||!$$(n))return{path:r};if(n.formMethod&&!tj(n.formMethod))return{path:r,error:ro(405,{method:n.formMethod})};let a=()=>({path:r,error:ro(400,{type:"invalid-body"})}),h=n.formMethod||"get",d=e?h.toUpperCase():h.toLowerCase(),u=WL(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Vs(d))return a();let R=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((U,j)=>{let[W,ee]=j;return""+U+W+"="+ee+`
`},""):String(n.body);return{path:r,submission:{formMethod:d,formAction:u,formEncType:n.formEncType,formData:void 0,json:void 0,text:R}}}else if(n.formEncType==="application/json"){if(!Vs(d))return a();try{let R=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:d,formAction:u,formEncType:n.formEncType,formData:void 0,json:R,text:void 0}}}catch{return a()}}}Ir(typeof FormData=="function","FormData is not available in this environment");let b,T;if(n.formData)b=jw(n.formData),T=n.formData;else if(n.body instanceof FormData)b=jw(n.body),T=n.body;else if(n.body instanceof URLSearchParams)b=n.body,T=dk(b);else if(n.body==null)b=new URLSearchParams,T=new FormData;else try{b=new URLSearchParams(n.body),T=dk(b)}catch{return a()}let A={formMethod:d,formAction:u,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:T,json:void 0,text:void 0};if(Vs(A.formMethod))return{path:r,submission:A};let P=ku(r);return t&&P.search&&q2(P.search)&&b.append("index",""),P.search="?"+b,{path:Jm(P),submission:A}}function j$(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function uk(e,t,r,n,a,h,d,u,b,T,A,P,R,U,j,W){let ee=W?Wo(W[1])?W[1].error:W[1].data:void 0,B=e.createURL(t.location),H=e.createURL(a),V=W&&Wo(W[1])?W[0]:void 0,te=V?j$(r,V):r,me=W?W[1].statusCode:void 0,fe=d&&me&&me>=400,ge=te.filter((Re,Z)=>{let{route:Te}=Re;if(Te.lazy)return!0;if(Te.loader==null)return!1;if(h)return typeof Te.loader!="function"||Te.loader.hydrate?!0:t.loaderData[Te.id]===void 0&&(!t.errors||t.errors[Te.id]===void 0);if(U$(t.loaderData,t.matches[Z],Re)||b.some(Ze=>Ze===Re.route.id))return!0;let Ue=t.matches[Z],Fe=Re;return ck(Re,On({currentUrl:B,currentParams:Ue.params,nextUrl:H,nextParams:Fe.params},n,{actionResult:ee,actionStatus:me,defaultShouldRevalidate:fe?!1:u||B.pathname+B.search===H.pathname+H.search||B.search!==H.search||qL(Ue,Fe)}))}),ie=[];return P.forEach((Re,Z)=>{if(h||!r.some(Xe=>Xe.route.id===Re.routeId)||A.has(Z))return;let Te=mc(U,Re.path,j);if(!Te){ie.push({key:Z,routeId:Re.routeId,path:Re.path,matches:null,match:null,controller:null});return}let Ue=t.fetchers.get(Z),Fe=qp(Te,Re.path),Ze=!1;R.has(Z)?Ze=!1:T.has(Z)?(T.delete(Z),Ze=!0):Ue&&Ue.state!=="idle"&&Ue.data===void 0?Ze=u:Ze=ck(Fe,On({currentUrl:B,currentParams:t.matches[t.matches.length-1].params,nextUrl:H,nextParams:r[r.length-1].params},n,{actionResult:ee,actionStatus:me,defaultShouldRevalidate:fe?!1:u})),Ze&&ie.push({key:Z,routeId:Re.routeId,path:Re.path,matches:Te,match:Fe,controller:new AbortController})}),[ge,ie]}function U$(e,t,r){let n=!t||r.route.id!==t.route.id,a=e[r.route.id]===void 0;return n||a}function qL(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function ck(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function V$(e,t,r,n,a,h,d,u){let b=[t,...r.map(T=>T.route.id)].join("-");try{let T=d.get(b);T||(T=e({path:t,matches:r,patch:(A,P)=>{u.aborted||HL(A,P,n,a,h)}}),d.set(b,T)),T&&J$(T)&&await T}finally{d.delete(b)}}function HL(e,t,r,n,a){if(e){var h;let d=n[e];Ir(d,"No route found to patch children into: routeId = "+e);let u=Im(t,a,[e,"patch",String(((h=d.children)==null?void 0:h.length)||"0")],n);d.children?d.children.push(...u):d.children=u}else{let d=Im(t,a,["patch",String(r.length||"0")],n);r.push(...d)}}async function q$(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let a=r[e.id];Ir(a,"No route found in manifest");let h={};for(let d in n){let b=a[d]!==void 0&&d!=="hasErrorBoundary";Vd(!b,'Route "'+a.id+'" has a static property "'+d+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+d+'" will be ignored.')),!b&&!d$.has(d)&&(h[d]=n[d])}Object.assign(a,h),Object.assign(a,On({},t(a),{lazy:void 0}))}async function H$(e){let{matches:t}=e,r=t.filter(a=>a.shouldLoad);return(await Promise.all(r.map(a=>a.resolve()))).reduce((a,h,d)=>Object.assign(a,{[r[d].route.id]:h}),{})}async function W$(e,t,r,n,a,h,d,u,b,T){let A=h.map(U=>U.route.lazy?q$(U.route,b,u):void 0),P=h.map((U,j)=>{let W=A[j],ee=a.some(H=>H.route.id===U.route.id);return On({},U,{shouldLoad:ee,resolve:async H=>(H&&n.method==="GET"&&(U.route.lazy||U.route.loader)&&(ee=!0),ee?G$(t,n,U,W,H,T):Promise.resolve({type:on.data,result:void 0}))})}),R=await e({matches:P,request:n,params:h[0].params,fetcherKey:d,context:T});try{await Promise.all(A)}catch{}return R}async function G$(e,t,r,n,a,h){let d,u,b=T=>{let A,P=new Promise((j,W)=>A=W);u=()=>A(),t.signal.addEventListener("abort",u);let R=j=>typeof T!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):T({request:t,params:r.params,context:h},...j!==void 0?[j]:[]),U=(async()=>{try{return{type:"data",result:await(a?a(W=>R(W)):R())}}catch(j){return{type:"error",result:j}}})();return Promise.race([U,P])};try{let T=r.route[e];if(n)if(T){let A,[P]=await Promise.all([b(T).catch(R=>{A=R}),n]);if(A!==void 0)throw A;d=P}else if(await n,T=r.route[e],T)d=await b(T);else if(e==="action"){let A=new URL(t.url),P=A.pathname+A.search;throw ro(405,{method:t.method,pathname:P,routeId:r.route.id})}else return{type:on.data,result:void 0};else if(T)d=await b(T);else{let A=new URL(t.url),P=A.pathname+A.search;throw ro(404,{pathname:P})}Ir(d.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(T){return{type:on.error,result:T}}finally{u&&t.signal.removeEventListener("abort",u)}return d}async function Z$(e){let{result:t,type:r}=e;if(GL(t)){let T;try{let A=t.headers.get("Content-Type");A&&/\bapplication\/json\b/.test(A)?t.body==null?T=null:T=await t.json():T=await t.text()}catch(A){return{type:on.error,error:A}}return r===on.error?{type:on.error,error:new rv(t.status,t.statusText,T),statusCode:t.status,headers:t.headers}:{type:on.data,data:T,statusCode:t.status,headers:t.headers}}if(r===on.error){if(yk(t)){var n;if(t.data instanceof Error){var a;return{type:on.error,error:t.data,statusCode:(a=t.init)==null?void 0:a.status}}t=new rv(((n=t.init)==null?void 0:n.status)||500,void 0,t.data)}return{type:on.error,error:t,statusCode:e0(t)?t.status:void 0}}if(ej(t)){var h,d;return{type:on.deferred,deferredData:t,statusCode:(h=t.init)==null?void 0:h.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}if(yk(t)){var u,b;return{type:on.data,data:t.data,statusCode:(u=t.init)==null?void 0:u.status,headers:(b=t.init)!=null&&b.headers?new Headers(t.init.headers):void 0}}return{type:on.data,data:t}}function K$(e,t,r,n,a,h){let d=e.headers.get("Location");if(Ir(d,"Redirects returned/thrown from loaders/actions must have a Location header"),!U2.test(d)){let u=n.slice(0,n.findIndex(b=>b.route.id===r)+1);d=$w(new URL(t.url),u,a,!0,d,h),e.headers.set("Location",d)}return e}function hk(e,t,r){if(U2.test(e)){let n=e,a=n.startsWith("//")?new URL(t.protocol+n):new URL(n),h=Qm(a.pathname,r)!=null;if(a.origin===t.origin&&h)return a.pathname+a.search+a.hash}return e}function Zh(e,t,r,n){let a=e.createURL(WL(t)).toString(),h={signal:r};if(n&&Vs(n.formMethod)){let{formMethod:d,formEncType:u}=n;h.method=d.toUpperCase(),u==="application/json"?(h.headers=new Headers({"Content-Type":u}),h.body=JSON.stringify(n.json)):u==="text/plain"?h.body=n.text:u==="application/x-www-form-urlencoded"&&n.formData?h.body=jw(n.formData):h.body=n.formData}return new Request(a,h)}function jw(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function dk(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function X$(e,t,r,n,a){let h={},d=null,u,b=!1,T={},A=r&&Wo(r[1])?r[1].error:void 0;return e.forEach(P=>{if(!(P.route.id in t))return;let R=P.route.id,U=t[R];if(Ir(!xc(U),"Cannot handle redirect results in processLoaderData"),Wo(U)){let j=U.error;A!==void 0&&(j=A,A=void 0),d=d||{};{let W=_d(e,R);d[W.route.id]==null&&(d[W.route.id]=j)}h[R]=void 0,b||(b=!0,u=e0(U.error)?U.error.status:500),U.headers&&(T[R]=U.headers)}else au(U)?(n.set(R,U.deferredData),h[R]=U.deferredData.data,U.statusCode!=null&&U.statusCode!==200&&!b&&(u=U.statusCode),U.headers&&(T[R]=U.headers)):(h[R]=U.data,U.statusCode&&U.statusCode!==200&&!b&&(u=U.statusCode),U.headers&&(T[R]=U.headers))}),A!==void 0&&r&&(d={[r[0]]:A},h[r[0]]=void 0),{loaderData:h,errors:d,statusCode:u||200,loaderHeaders:T}}function fk(e,t,r,n,a,h,d,u){let{loaderData:b,errors:T}=X$(t,n,a,u);return h.forEach(A=>{let{key:P,match:R,controller:U}=A,j=d[P];if(Ir(j,"Did not find corresponding fetcher result"),!(U&&U.signal.aborted))if(Wo(j)){let W=_d(e.matches,R==null?void 0:R.route.id);T&&T[W.route.id]||(T=On({},T,{[W.route.id]:j.error})),e.fetchers.delete(P)}else if(xc(j))Ir(!1,"Unhandled fetcher revalidation redirect");else if(au(j))Ir(!1,"Unhandled fetcher deferred data");else{let W=eu(j.data);e.fetchers.set(P,W)}}),{loaderData:b,errors:T}}function pk(e,t,r,n){let a=On({},t);for(let h of r){let d=h.route.id;if(t.hasOwnProperty(d)?t[d]!==void 0&&(a[d]=t[d]):e[d]!==void 0&&h.route.loader&&(a[d]=e[d]),n&&n.hasOwnProperty(d))break}return a}function mk(e){return e?Wo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function _d(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function gk(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ro(e,t){let{pathname:r,routeId:n,method:a,type:h,message:d}=t===void 0?{}:t,u="Unknown Server Error",b="Unknown @remix-run/router error";return e===400?(u="Bad Request",h==="route-discovery"?b='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+d):a&&r&&n?b="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":h==="defer-action"?b="defer() is not supported in actions":h==="invalid-body"&&(b="Unable to encode submission body")):e===403?(u="Forbidden",b='Route "'+n+'" does not match URL "'+r+'"'):e===404?(u="Not Found",b='No route matches URL "'+r+'"'):e===405&&(u="Method Not Allowed",a&&r&&n?b="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(b='Invalid request method "'+a.toUpperCase()+'"')),new rv(e||500,u,new Error(b),!0)}function Oy(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,a]=t[r];if(xc(a))return{key:n,result:a}}}function WL(e){let t=typeof e=="string"?ku(e):e;return Jm(On({},t,{hash:""}))}function Y$(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function J$(e){return typeof e=="object"&&e!=null&&"then"in e}function Q$(e){return GL(e.result)&&D$.has(e.result.status)}function au(e){return e.type===on.deferred}function Wo(e){return e.type===on.error}function xc(e){return(e&&e.type)===on.redirect}function yk(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function ej(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function GL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function tj(e){return O$.has(e.toLowerCase())}function Vs(e){return M$.has(e.toLowerCase())}async function rj(e,t,r,n,a){let h=Object.entries(t);for(let d=0;d<h.length;d++){let[u,b]=h[d],T=e.find(R=>(R==null?void 0:R.route.id)===u);if(!T)continue;let A=n.find(R=>R.route.id===T.route.id),P=A!=null&&!qL(A,T)&&(a&&a[T.route.id])!==void 0;au(b)&&P&&await V2(b,r,!1).then(R=>{R&&(t[u]=R)})}}async function nj(e,t,r){for(let n=0;n<r.length;n++){let{key:a,routeId:h,controller:d}=r[n],u=t[a];e.find(T=>(T==null?void 0:T.route.id)===h)&&au(u)&&(Ir(d,"Expected an AbortController for revalidating fetcher deferred result"),await V2(u,d.signal,!0).then(T=>{T&&(t[a]=T)}))}}async function V2(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:on.data,data:e.deferredData.unwrappedData}}catch(a){return{type:on.error,error:a}}return{type:on.data,data:e.deferredData.data}}}function q2(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function qp(e,t){let r=typeof t=="string"?ku(t).search:t.search;if(e[e.length-1].route.index&&q2(r||""))return e[e.length-1];let n=NL(e);return n[n.length-1]}function _k(e){let{formMethod:t,formAction:r,formEncType:n,text:a,formData:h,json:d}=e;if(!(!t||!r||!n)){if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:a};if(h!=null)return{formMethod:t,formAction:r,formEncType:n,formData:h,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:d,text:void 0}}}function ib(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ij(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ip(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function oj(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function eu(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function sj(e,t){try{let r=e.sessionStorage.getItem(VL);if(r){let n=JSON.parse(r);for(let[a,h]of Object.entries(n||{}))h&&Array.isArray(h)&&t.set(a,new Set(h||[]))}}catch{}}function aj(e,t){if(t.size>0){let r={};for(let[n,a]of t)r[n]=[...a];try{e.sessionStorage.setItem(VL,JSON.stringify(r))}catch(n){Vd(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(this,arguments)}const t0=X.createContext(null),ZL=X.createContext(null),r0=X.createContext(null),H2=X.createContext(null),nf=X.createContext({outlet:null,matches:[],isDataRoute:!1}),KL=X.createContext(null);function n0(){return X.useContext(H2)!=null}function XL(){return n0()||Ir(!1),X.useContext(H2).location}function YL(e){X.useContext(r0).static||X.useLayoutEffect(e)}function JL(){let{isDataRoute:e}=X.useContext(nf);return e?vj():lj()}function lj(){n0()||Ir(!1);let e=X.useContext(t0),{basename:t,future:r,navigator:n}=X.useContext(r0),{matches:a}=X.useContext(nf),{pathname:h}=XL(),d=JSON.stringify($L(a,r.v7_relativeSplatPath)),u=X.useRef(!1);return YL(()=>{u.current=!0}),X.useCallback(function(T,A){if(A===void 0&&(A={}),!u.current)return;if(typeof T=="number"){n.go(T);return}let P=jL(T,JSON.parse(d),h,A.relative==="path");e==null&&t!=="/"&&(P.pathname=P.pathname==="/"?t:_u([t,P.pathname])),(A.replace?n.replace:n.push)(P,A.state,A)},[t,n,d,h,e])}function uj(e,t,r,n){n0()||Ir(!1);let{navigator:a}=X.useContext(r0),{matches:h}=X.useContext(nf),d=h[h.length-1],u=d?d.params:{};d&&d.pathname;let b=d?d.pathnameBase:"/";d&&d.route;let T=XL(),A;A=T;let P=A.pathname||"/",R=P;if(b!=="/"){let W=b.replace(/^\//,"").split("/");R="/"+P.replace(/^\//,"").split("/").slice(W.length).join("/")}let U=mc(e,{pathname:R});return pj(U&&U.map(W=>Object.assign({},W,{params:Object.assign({},u,W.params),pathname:_u([b,a.encodeLocation?a.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?b:_u([b,a.encodeLocation?a.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),h,r,n)}function cj(){let e=_j(),t=e0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),r?X.createElement("pre",{style:a},r):null,null)}const hj=X.createElement(cj,null);class dj extends X.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?X.createElement(nf.Provider,{value:this.props.routeContext},X.createElement(KL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fj(e){let{routeContext:t,match:r,children:n}=e,a=X.useContext(t0);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),X.createElement(nf.Provider,{value:t},n)}function pj(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var h;if(!r)return null;if(r.errors)e=r.matches;else if((h=n)!=null&&h.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let d=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let A=d.findIndex(P=>P.route.id&&(u==null?void 0:u[P.route.id])!==void 0);A>=0||Ir(!1),d=d.slice(0,Math.min(d.length,A+1))}let b=!1,T=-1;if(r&&n&&n.v7_partialHydration)for(let A=0;A<d.length;A++){let P=d[A];if((P.route.HydrateFallback||P.route.hydrateFallbackElement)&&(T=A),P.route.id){let{loaderData:R,errors:U}=r,j=P.route.loader&&R[P.route.id]===void 0&&(!U||U[P.route.id]===void 0);if(P.route.lazy||j){b=!0,T>=0?d=d.slice(0,T+1):d=[d[0]];break}}}return d.reduceRight((A,P,R)=>{let U,j=!1,W=null,ee=null;r&&(U=u&&P.route.id?u[P.route.id]:void 0,W=P.route.errorElement||hj,b&&(T<0&&R===0?(j=!0,ee=null):T===R&&(j=!0,ee=P.route.hydrateFallbackElement||null)));let B=t.concat(d.slice(0,R+1)),H=()=>{let V;return U?V=W:j?V=ee:P.route.Component?V=X.createElement(P.route.Component,null):P.route.element?V=P.route.element:V=A,X.createElement(fj,{match:P,routeContext:{outlet:A,matches:B,isDataRoute:r!=null},children:V})};return r&&(P.route.ErrorBoundary||P.route.errorElement||R===0)?X.createElement(dj,{location:r.location,revalidation:r.revalidation,component:W,error:U,children:H(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):H()},null)}var QL=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QL||{}),iv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(iv||{});function mj(e){let t=X.useContext(t0);return t||Ir(!1),t}function gj(e){let t=X.useContext(ZL);return t||Ir(!1),t}function yj(e){let t=X.useContext(nf);return t||Ir(!1),t}function eO(e){let t=yj(),r=t.matches[t.matches.length-1];return r.route.id||Ir(!1),r.route.id}function _j(){var e;let t=X.useContext(KL),r=gj(iv.UseRouteError),n=eO(iv.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function vj(){let{router:e}=mj(QL.UseNavigateStable),t=eO(iv.UseNavigateStable),r=X.useRef(!1);return YL(()=>{r.current=!0}),X.useCallback(function(a,h){h===void 0&&(h={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,nv({fromRouteId:t},h)))},[e,t])}function xj(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Jn.Pop,navigator:h,static:d=!1,future:u}=e;n0()&&Ir(!1);let b=t.replace(/^\/*/,"/"),T=X.useMemo(()=>({basename:b,navigator:h,static:d,future:nv({v7_relativeSplatPath:!1},u)}),[b,u,h,d]);typeof n=="string"&&(n=ku(n));let{pathname:A="/",search:P="",hash:R="",state:U=null,key:j="default"}=n,W=X.useMemo(()=>{let ee=Qm(A,b);return ee==null?null:{location:{pathname:ee,search:P,hash:R,state:U,key:j},navigationType:a}},[b,A,P,R,U,j,a]);return W==null?null:X.createElement(r0.Provider,{value:T},X.createElement(H2.Provider,{children:r,value:W}))}new Promise(()=>{});function bj(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:X.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:X.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:X.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ov.apply(this,arguments)}const wj="6";try{window.__reactRouterVersion=wj}catch{}function Sj(e,t){return N$({basename:void 0,future:ov({},void 0,{v7_prependBasename:!0}),history:u$({window:void 0}),hydrationData:Tj(),routes:e,mapRouteProperties:bj,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Tj(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ov({},t,{errors:Ej(t.errors)})),t}function Ej(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,a]of t)if(a&&a.__type==="RouteErrorResponse")r[n]=new rv(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let h=window[a.__subType];if(typeof h=="function")try{let d=new h(a.message);d.stack="",r[n]=d}catch{}}if(r[n]==null){let h=new Error(a.message);h.stack="",r[n]=h}}else r[n]=a;return r}const Cj=X.createContext({isTransitioning:!1}),Aj=X.createContext(new Map),kj="startTransition",vk=P_[kj],Pj="flushSync",xk=N4[Pj];function Ij(e){vk?vk(e):e()}function Rp(e){xk?xk(e):e()}class Rj{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function Mj(e){let{fallbackElement:t,router:r,future:n}=e,[a,h]=X.useState(r.state),[d,u]=X.useState(),[b,T]=X.useState({isTransitioning:!1}),[A,P]=X.useState(),[R,U]=X.useState(),[j,W]=X.useState(),ee=X.useRef(new Map),{v7_startTransition:B}=n||{},H=X.useCallback(ie=>{B?Ij(ie):ie()},[B]),V=X.useCallback((ie,Re)=>{let{deletedFetchers:Z,unstable_flushSync:Te,unstable_viewTransitionOpts:Ue}=Re;Z.forEach(Ze=>ee.current.delete(Ze)),ie.fetchers.forEach((Ze,Xe)=>{Ze.data!==void 0&&ee.current.set(Xe,Ze.data)});let Fe=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!Ue||Fe){Te?Rp(()=>h(ie)):H(()=>h(ie));return}if(Te){Rp(()=>{R&&(A&&A.resolve(),R.skipTransition()),T({isTransitioning:!0,flushSync:!0,currentLocation:Ue.currentLocation,nextLocation:Ue.nextLocation})});let Ze=r.window.document.startViewTransition(()=>{Rp(()=>h(ie))});Ze.finished.finally(()=>{Rp(()=>{P(void 0),U(void 0),u(void 0),T({isTransitioning:!1})})}),Rp(()=>U(Ze));return}R?(A&&A.resolve(),R.skipTransition(),W({state:ie,currentLocation:Ue.currentLocation,nextLocation:Ue.nextLocation})):(u(ie),T({isTransitioning:!0,flushSync:!1,currentLocation:Ue.currentLocation,nextLocation:Ue.nextLocation}))},[r.window,R,A,ee,H]);X.useLayoutEffect(()=>r.subscribe(V),[r,V]),X.useEffect(()=>{b.isTransitioning&&!b.flushSync&&P(new Rj)},[b]),X.useEffect(()=>{if(A&&d&&r.window){let ie=d,Re=A.promise,Z=r.window.document.startViewTransition(async()=>{H(()=>h(ie)),await Re});Z.finished.finally(()=>{P(void 0),U(void 0),u(void 0),T({isTransitioning:!1})}),U(Z)}},[H,d,A,r.window]),X.useEffect(()=>{A&&d&&a.location.key===d.location.key&&A.resolve()},[A,R,a.location,d]),X.useEffect(()=>{!b.isTransitioning&&j&&(u(j.state),T({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}),W(void 0))},[b.isTransitioning,j]),X.useEffect(()=>{},[]);let te=X.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:ie=>r.navigate(ie),push:(ie,Re,Z)=>r.navigate(ie,{state:Re,preventScrollReset:Z==null?void 0:Z.preventScrollReset}),replace:(ie,Re,Z)=>r.navigate(ie,{replace:!0,state:Re,preventScrollReset:Z==null?void 0:Z.preventScrollReset})}),[r]),me=r.basename||"/",fe=X.useMemo(()=>({router:r,navigator:te,static:!1,basename:me}),[r,te,me]),ge=X.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return X.createElement(X.Fragment,null,X.createElement(t0.Provider,{value:fe},X.createElement(ZL.Provider,{value:a},X.createElement(Aj.Provider,{value:ee.current},X.createElement(Cj.Provider,{value:b},X.createElement(xj,{basename:me,location:a.location,navigationType:a.historyAction,navigator:te,future:ge},a.initialized||r.future.v7_partialHydration?X.createElement(Lj,{routes:r.routes,future:r.future,state:a}):t))))),null)}const Lj=X.memo(Oj);function Oj(e){let{routes:t,future:r,state:n}=e;return uj(t,void 0,n,r)}var bk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bk||(bk={}));var wk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wk||(wk={}));var W2=(e=>(e.IS_LOGGED_IN="isLoggedIn",e))(W2||{});function xa(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function tO(e){if(!xa(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=tO(e[r])}),t}function vi(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return xa(e)&&xa(t)&&Object.keys(t).forEach(a=>{xa(t[a])&&Object.prototype.hasOwnProperty.call(e,a)&&xa(e[a])?n[a]=vi(e[a],t[a],r):r.clone?n[a]=xa(t[a])?tO(t[a]):t[a]:n[a]=t[a]}),n}function pl(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function pr(e){if(typeof e!="string")throw new Error(pl(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Sk(...e){return e.reduce((t,r)=>r==null?t:function(...a){t.apply(this,a),r.apply(this,a)},()=>{})}function rO(e,t=166){let r;function n(...a){const h=()=>{e.apply(this,a)};clearTimeout(r),r=setTimeout(h,t)}return n.clear=()=>{clearTimeout(r)},n}function ob(e,t){var r,n,a;return X.isValidElement(e)&&t.indexOf(e.type.muiName??((a=(n=(r=e.type)==null?void 0:r._payload)==null?void 0:n.value)==null?void 0:a.muiName))!==-1}function Po(e){return e&&e.ownerDocument||document}function ml(e){return Po(e).defaultView||window}function Uw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const Dc=typeof window<"u"?X.useLayoutEffect:X.useEffect;let Tk=0;function Dj(e){const[t,r]=X.useState(e),n=e||t;return X.useEffect(()=>{t==null&&(Tk+=1,r(`mui-${Tk}`))},[t]),n}const zj={...P_},Ek=zj.useId;function nO(e){if(Ek!==void 0){const t=Ek();return e??t}return Dj(e)}function Ck({controlled:e,default:t,name:r,state:n="value"}){const{current:a}=X.useRef(e!==void 0),[h,d]=X.useState(t),u=a?e:h,b=X.useCallback(T=>{a||d(T)},[]);return[u,b]}function sl(e){const t=X.useRef(e);return Dc(()=>{t.current=e}),X.useRef((...r)=>(0,t.current)(...r)).current}function Ri(...e){return X.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{Uw(r,t)})},e)}const Ak={};function iO(e,t){const r=X.useRef(Ak);return r.current===Ak&&(r.current=e(t)),r}const Fj=[];function Bj(e){X.useEffect(e,Fj)}class G2{constructor(){ic(this,"currentId",null);ic(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});ic(this,"disposeEffect",()=>this.clear)}static create(){return new G2}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Z2(){const e=iO(G2.create).current;return Bj(e.disposeEffect),e}function kk(e){try{return e.matches(":focus-visible")}catch{}return!1}function oO(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Rm(e,t){const r={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const a=n;if(a==="components"||a==="slots")r[a]={...e[a],...r[a]};else if(a==="componentsProps"||a==="slotProps"){const h=e[a],d=t[a];if(!d)r[a]=h||{};else if(!h)r[a]=d;else{r[a]={...d};for(const u in h)if(Object.prototype.hasOwnProperty.call(h,u)){const b=u;r[a][b]=Rm(h[b],d[b])}}}else r[a]===void 0&&(r[a]=e[a])}return r}function _n(e,t,r=void 0){const n={};for(const a in e){const h=e[a];let d="",u=!0;for(let b=0;b<h.length;b+=1){const T=h[b];T&&(d+=(u===!0?"":" ")+t(T),u=!1,r&&r[T]&&(d+=" "+r[T]))}n[a]=d}return n}const Pk=e=>e,Nj=()=>{let e=Pk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Pk}}},sO=Nj(),$j={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fn(e,t,r="Mui"){const n=$j[t];return n?`${r}-${n}`:`${sO.generate(e)}-${t}`}function pn(e,t,r="Mui"){const n={};return t.forEach(a=>{n[a]=fn(e,a,r)}),n}function jj(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function Uj(e){return typeof e=="string"}function aO(e,t,r){return e===void 0||Uj(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function lO(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=lO(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function wr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=lO(e))&&(n&&(n+=" "),n+=t);return n}function sv(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function Ik(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function uO(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:a,className:h}=e;if(!t){const U=wr(r==null?void 0:r.className,h,a==null?void 0:a.className,n==null?void 0:n.className),j={...r==null?void 0:r.style,...a==null?void 0:a.style,...n==null?void 0:n.style},W={...r,...a,...n};return U.length>0&&(W.className=U),Object.keys(j).length>0&&(W.style=j),{props:W,internalRef:void 0}}const d=sv({...a,...n}),u=Ik(n),b=Ik(a),T=t(d),A=wr(T==null?void 0:T.className,r==null?void 0:r.className,h,a==null?void 0:a.className,n==null?void 0:n.className),P={...T==null?void 0:T.style,...r==null?void 0:r.style,...a==null?void 0:a.style,...n==null?void 0:n.style},R={...T,...r,...b,...u};return A.length>0&&(R.className=A),Object.keys(P).length>0&&(R.style=P),{props:R,internalRef:T.ref}}function cO(e,t,r){return typeof e=="function"?e(t,r):e}function Vw(e){var P;const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:a=!1,...h}=e,d=a?{}:cO(r,n),{props:u,internalRef:b}=uO({...h,externalSlotProps:d}),T=Ri(b,d==null?void 0:d.ref,(P=e.additionalProps)==null?void 0:P.ref);return aO(t,{...u,ref:T},n)}function of(e){var t;return parseInt(X.version,10)>=19?(t=e.props)==null?void 0:t.ref:e==null?void 0:e.ref}function im(e,t){return t?vi(e,t,{clone:!1}):e}function Vj(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,a)=>{var d,u;const h=/min-width:\s*([0-9.]+)/;return+(((d=n.match(h))==null?void 0:d[1])||0)-+(((u=a.match(h))==null?void 0:u[1])||0)});return r.length?r.reduce((n,a)=>{const h=t[a];return delete n[a],n[a]=h,n},{...t}):t}function qj(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function Hj(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,a]=r,h=Number.isNaN(+n)?n||0:+n;return e.containerQueries(a).up(h)}function Wj(e){const t=(h,d)=>h.replace("@media",d?`@container ${d}`:"@container");function r(h,d){h.up=(...u)=>t(e.breakpoints.up(...u),d),h.down=(...u)=>t(e.breakpoints.down(...u),d),h.between=(...u)=>t(e.breakpoints.between(...u),d),h.only=(...u)=>t(e.breakpoints.only(...u),d),h.not=(...u)=>{const b=t(e.breakpoints.not(...u),d);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):b}}const n={},a=h=>(r(n,h),n);return r(a),{...e,containerQueries:a}}const i0={xs:0,sm:600,md:900,lg:1200,xl:1536},Rk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i0[e]}px)`},Gj={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:i0[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Ys(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const h=n.breakpoints||Rk;return t.reduce((d,u,b)=>(d[h.up(h.keys[b])]=r(t[b]),d),{})}if(typeof t=="object"){const h=n.breakpoints||Rk;return Object.keys(t).reduce((d,u)=>{if(qj(h.keys,u)){const b=Hj(n.containerQueries?n:Gj,u);b&&(d[b]=r(t[u],u))}else if(Object.keys(h.values||i0).includes(u)){const b=h.up(u);d[b]=r(t[u],u)}else{const b=u;d[b]=t[b]}return d},{})}return r(t)}function hO(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((n,a)=>{const h=e.up(a);return n[h]={},n},{}))||{}}function dO(e,t){return e.reduce((r,n)=>{const a=r[n];return(!a||Object.keys(a).length===0)&&delete r[n],r},t)}function Zj(e,...t){const r=hO(e),n=[r,...t].reduce((a,h)=>vi(a,h),{});return dO(Object.keys(r),n)}function Kj(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((a,h)=>{h<e.length&&(r[a]=!0)}):n.forEach(a=>{e[a]!=null&&(r[a]=!0)}),r}function sb({values:e,breakpoints:t,base:r}){const n=r||Kj(e,t),a=Object.keys(n);if(a.length===0)return e;let h;return a.reduce((d,u,b)=>(Array.isArray(e)?(d[u]=e[b]!=null?e[b]:e[h],h=b):typeof e=="object"?(d[u]=e[u]!=null?e[u]:e[h],h=u):d[u]=e,d),{})}function o0(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((a,h)=>a&&a[h]?a[h]:null,e);if(n!=null)return n}return t.split(".").reduce((n,a)=>n&&n[a]!=null?n[a]:null,e)}function av(e,t,r,n=r){let a;return typeof e=="function"?a=e(r):Array.isArray(e)?a=e[r]||n:a=o0(e,r)||n,t&&(a=t(a,n,e)),a}function Gn(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:a}=e,h=d=>{if(d[t]==null)return null;const u=d[t],b=d.theme,T=o0(b,n)||{};return Ys(d,u,P=>{let R=av(T,a,P);return P===R&&typeof P=="string"&&(R=av(T,a,`${t}${P==="default"?"":pr(P)}`,P)),r===!1?R:{[r]:R}})};return h.propTypes={},h.filterProps=[t],h}function Xj(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const Yj={m:"margin",p:"padding"},Jj={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Mk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Qj=Xj(e=>{if(e.length>2)if(Mk[e])e=Mk[e];else return[e];const[t,r]=e.split(""),n=Yj[t],a=Jj[r]||"";return Array.isArray(a)?a.map(h=>n+h):[n+a]}),K2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],X2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...K2,...X2];function eg(e,t,r,n){const a=o0(e,t,!0)??r;return typeof a=="number"||typeof a=="string"?h=>typeof h=="string"?h:typeof a=="string"?`calc(${h} * ${a})`:a*h:Array.isArray(a)?h=>{if(typeof h=="string")return h;const d=Math.abs(h),u=a[d];return h>=0?u:typeof u=="number"?-u:`-${u}`}:typeof a=="function"?a:()=>{}}function s0(e){return eg(e,"spacing",8)}function zc(e,t){return typeof t=="string"||t==null?t:e(t)}function eU(e,t){return r=>e.reduce((n,a)=>(n[a]=zc(t,r),n),{})}function tU(e,t,r,n){if(!t.includes(r))return null;const a=Qj(r),h=eU(a,n),d=e[r];return Ys(e,d,h)}function fO(e,t){const r=s0(e.theme);return Object.keys(e).map(n=>tU(e,t,n,r)).reduce(im,{})}function $n(e){return fO(e,K2)}$n.propTypes={};$n.filterProps=K2;function jn(e){return fO(e,X2)}jn.propTypes={};jn.filterProps=X2;function a0(...e){const t=e.reduce((n,a)=>(a.filterProps.forEach(h=>{n[h]=a}),n),{}),r=n=>Object.keys(n).reduce((a,h)=>t[h]?im(a,t[h](n)):a,{});return r.propTypes={},r.filterProps=e.reduce((n,a)=>n.concat(a.filterProps),[]),r}function bs(e){return typeof e!="number"?e:`${e}px solid`}function Is(e,t){return Gn({prop:e,themeKey:"borders",transform:t})}const rU=Is("border",bs),nU=Is("borderTop",bs),iU=Is("borderRight",bs),oU=Is("borderBottom",bs),sU=Is("borderLeft",bs),aU=Is("borderColor"),lU=Is("borderTopColor"),uU=Is("borderRightColor"),cU=Is("borderBottomColor"),hU=Is("borderLeftColor"),dU=Is("outline",bs),fU=Is("outlineColor"),l0=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=eg(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:zc(t,n)});return Ys(e,e.borderRadius,r)}return null};l0.propTypes={};l0.filterProps=["borderRadius"];a0(rU,nU,iU,oU,sU,aU,lU,uU,cU,hU,l0,dU,fU);const u0=e=>{if(e.gap!==void 0&&e.gap!==null){const t=eg(e.theme,"spacing",8),r=n=>({gap:zc(t,n)});return Ys(e,e.gap,r)}return null};u0.propTypes={};u0.filterProps=["gap"];const c0=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=eg(e.theme,"spacing",8),r=n=>({columnGap:zc(t,n)});return Ys(e,e.columnGap,r)}return null};c0.propTypes={};c0.filterProps=["columnGap"];const h0=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=eg(e.theme,"spacing",8),r=n=>({rowGap:zc(t,n)});return Ys(e,e.rowGap,r)}return null};h0.propTypes={};h0.filterProps=["rowGap"];const pU=Gn({prop:"gridColumn"}),mU=Gn({prop:"gridRow"}),gU=Gn({prop:"gridAutoFlow"}),yU=Gn({prop:"gridAutoColumns"}),_U=Gn({prop:"gridAutoRows"}),vU=Gn({prop:"gridTemplateColumns"}),xU=Gn({prop:"gridTemplateRows"}),bU=Gn({prop:"gridTemplateAreas"}),wU=Gn({prop:"gridArea"});a0(u0,c0,h0,pU,mU,gU,yU,_U,vU,xU,bU,wU);function Id(e,t){return t==="grey"?t:e}const SU=Gn({prop:"color",themeKey:"palette",transform:Id}),TU=Gn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Id}),EU=Gn({prop:"backgroundColor",themeKey:"palette",transform:Id});a0(SU,TU,EU);function Go(e){return e<=1&&e!==0?`${e*100}%`:e}const CU=Gn({prop:"width",transform:Go}),Y2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var a,h,d,u,b;const n=((d=(h=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:h.values)==null?void 0:d[r])||i0[r];return n?((b=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Go(r)}};return Ys(e,e.maxWidth,t)}return null};Y2.filterProps=["maxWidth"];const AU=Gn({prop:"minWidth",transform:Go}),kU=Gn({prop:"height",transform:Go}),PU=Gn({prop:"maxHeight",transform:Go}),IU=Gn({prop:"minHeight",transform:Go});Gn({prop:"size",cssProperty:"width",transform:Go});Gn({prop:"size",cssProperty:"height",transform:Go});const RU=Gn({prop:"boxSizing"});a0(CU,Y2,AU,kU,PU,IU,RU);const tg={border:{themeKey:"borders",transform:bs},borderTop:{themeKey:"borders",transform:bs},borderRight:{themeKey:"borders",transform:bs},borderBottom:{themeKey:"borders",transform:bs},borderLeft:{themeKey:"borders",transform:bs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bs},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:l0},color:{themeKey:"palette",transform:Id},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Id},backgroundColor:{themeKey:"palette",transform:Id},p:{style:jn},pt:{style:jn},pr:{style:jn},pb:{style:jn},pl:{style:jn},px:{style:jn},py:{style:jn},padding:{style:jn},paddingTop:{style:jn},paddingRight:{style:jn},paddingBottom:{style:jn},paddingLeft:{style:jn},paddingX:{style:jn},paddingY:{style:jn},paddingInline:{style:jn},paddingInlineStart:{style:jn},paddingInlineEnd:{style:jn},paddingBlock:{style:jn},paddingBlockStart:{style:jn},paddingBlockEnd:{style:jn},m:{style:$n},mt:{style:$n},mr:{style:$n},mb:{style:$n},ml:{style:$n},mx:{style:$n},my:{style:$n},margin:{style:$n},marginTop:{style:$n},marginRight:{style:$n},marginBottom:{style:$n},marginLeft:{style:$n},marginX:{style:$n},marginY:{style:$n},marginInline:{style:$n},marginInlineStart:{style:$n},marginInlineEnd:{style:$n},marginBlock:{style:$n},marginBlockStart:{style:$n},marginBlockEnd:{style:$n},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:u0},rowGap:{style:h0},columnGap:{style:c0},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Go},maxWidth:{style:Y2},minWidth:{transform:Go},height:{transform:Go},maxHeight:{transform:Go},minHeight:{transform:Go},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function MU(...e){const t=e.reduce((n,a)=>n.concat(Object.keys(a)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function LU(e,t){return typeof e=="function"?e(t):e}function OU(){function e(r,n,a,h){const d={[r]:n,theme:a},u=h[r];if(!u)return{[r]:n};const{cssProperty:b=r,themeKey:T,transform:A,style:P}=u;if(n==null)return null;if(T==="typography"&&n==="inherit")return{[r]:n};const R=o0(a,T)||{};return P?P(d):Ys(d,n,j=>{let W=av(R,A,j);return j===W&&typeof j=="string"&&(W=av(R,A,`${r}${j==="default"?"":pr(j)}`,j)),b===!1?W:{[b]:W}})}function t(r){const{sx:n,theme:a={}}=r||{};if(!n)return null;const h=a.unstable_sxConfig??tg;function d(u){let b=u;if(typeof u=="function")b=u(a);else if(typeof u!="object")return u;if(!b)return null;const T=hO(a.breakpoints),A=Object.keys(T);let P=T;return Object.keys(b).forEach(R=>{const U=LU(b[R],a);if(U!=null)if(typeof U=="object")if(h[R])P=im(P,e(R,U,a,h));else{const j=Ys({theme:a},U,W=>({[R]:W}));MU(j,U)?P[R]=t({sx:U,theme:a}):P=im(P,j)}else P=im(P,e(R,U,a,h))}),Vj(a,dO(A,P))}return Array.isArray(n)?n.map(d):d(n)}return t}const sf=OU();sf.filterProps=["sx"];const DU=e=>{var n;const t={systemProps:{},otherProps:{}},r=((n=e==null?void 0:e.theme)==null?void 0:n.unstable_sxConfig)??tg;return Object.keys(e).forEach(a=>{r[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function J2(e){const{sx:t,...r}=e,{systemProps:n,otherProps:a}=DU(r);let h;return Array.isArray(t)?h=[n,...t]:typeof t=="function"?h=(...d)=>{const u=t(...d);return xa(u)?{...n,...u}:n}:h={...n,...t},{...a,sx:h}}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lv.apply(null,arguments)}function pO(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var zU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,FU=pO(function(e){return zU.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),BU=!1;function NU(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function $U(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var jU=function(){function e(r){var n=this;this._insertTag=function(a){var h;n.tags.length===0?n.insertionPoint?h=n.insertionPoint.nextSibling:n.prepend?h=n.container.firstChild:h=n.before:h=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,h),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!BU:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($U(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var h=NU(a);try{h.insertRule(n,h.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var a;return(a=n.parentNode)==null?void 0:a.removeChild(n)}),this.tags=[],this.ctr=0},e}(),qi="-ms-",uv="-moz-",Hr="-webkit-",mO="comm",Q2="rule",eT="decl",UU="@import",gO="@keyframes",VU="@layer",qU=Math.abs,d0=String.fromCharCode,HU=Object.assign;function WU(e,t){return ki(e,0)^45?(((t<<2^ki(e,0))<<2^ki(e,1))<<2^ki(e,2))<<2^ki(e,3):0}function yO(e){return e.trim()}function GU(e,t){return(e=t.exec(e))?e[0]:e}function Wr(e,t,r){return e.replace(t,r)}function qw(e,t){return e.indexOf(t)}function ki(e,t){return e.charCodeAt(t)|0}function Mm(e,t,r){return e.slice(t,r)}function ya(e){return e.length}function tT(e){return e.length}function Dy(e,t){return t.push(e),e}function ZU(e,t){return e.map(t).join("")}var f0=1,qd=1,_O=0,Io=0,Qn=0,af="";function p0(e,t,r,n,a,h,d){return{value:e,root:t,parent:r,type:n,props:a,children:h,line:f0,column:qd,length:d,return:""}}function Mp(e,t){return HU(p0("",null,null,"",null,null,0),e,{length:-e.length},t)}function KU(){return Qn}function XU(){return Qn=Io>0?ki(af,--Io):0,qd--,Qn===10&&(qd=1,f0--),Qn}function rs(){return Qn=Io<_O?ki(af,Io++):0,qd++,Qn===10&&(qd=1,f0++),Qn}function Ca(){return ki(af,Io)}function y_(){return Io}function rg(e,t){return Mm(af,e,t)}function Lm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vO(e){return f0=qd=1,_O=ya(af=e),Io=0,[]}function xO(e){return af="",e}function __(e){return yO(rg(Io-1,Hw(e===91?e+2:e===40?e+1:e)))}function YU(e){for(;(Qn=Ca())&&Qn<33;)rs();return Lm(e)>2||Lm(Qn)>3?"":" "}function JU(e,t){for(;--t&&rs()&&!(Qn<48||Qn>102||Qn>57&&Qn<65||Qn>70&&Qn<97););return rg(e,y_()+(t<6&&Ca()==32&&rs()==32))}function Hw(e){for(;rs();)switch(Qn){case e:return Io;case 34:case 39:e!==34&&e!==39&&Hw(Qn);break;case 40:e===41&&Hw(e);break;case 92:rs();break}return Io}function QU(e,t){for(;rs()&&e+Qn!==57;)if(e+Qn===84&&Ca()===47)break;return"/*"+rg(t,Io-1)+"*"+d0(e===47?e:rs())}function e8(e){for(;!Lm(Ca());)rs();return rg(e,Io)}function t8(e){return xO(v_("",null,null,null,[""],e=vO(e),0,[0],e))}function v_(e,t,r,n,a,h,d,u,b){for(var T=0,A=0,P=d,R=0,U=0,j=0,W=1,ee=1,B=1,H=0,V="",te=a,me=h,fe=n,ge=V;ee;)switch(j=H,H=rs()){case 40:if(j!=108&&ki(ge,P-1)==58){qw(ge+=Wr(__(H),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:ge+=__(H);break;case 9:case 10:case 13:case 32:ge+=YU(j);break;case 92:ge+=JU(y_()-1,7);continue;case 47:switch(Ca()){case 42:case 47:Dy(r8(QU(rs(),y_()),t,r),b);break;default:ge+="/"}break;case 123*W:u[T++]=ya(ge)*B;case 125*W:case 59:case 0:switch(H){case 0:case 125:ee=0;case 59+A:B==-1&&(ge=Wr(ge,/\f/g,"")),U>0&&ya(ge)-P&&Dy(U>32?Ok(ge+";",n,r,P-1):Ok(Wr(ge," ","")+";",n,r,P-2),b);break;case 59:ge+=";";default:if(Dy(fe=Lk(ge,t,r,T,A,a,u,V,te=[],me=[],P),h),H===123)if(A===0)v_(ge,t,fe,fe,te,h,P,u,me);else switch(R===99&&ki(ge,3)===110?100:R){case 100:case 108:case 109:case 115:v_(e,fe,fe,n&&Dy(Lk(e,fe,fe,0,0,a,u,V,a,te=[],P),me),a,me,P,u,n?te:me);break;default:v_(ge,fe,fe,fe,[""],me,0,u,me)}}T=A=U=0,W=B=1,V=ge="",P=d;break;case 58:P=1+ya(ge),U=j;default:if(W<1){if(H==123)--W;else if(H==125&&W++==0&&XU()==125)continue}switch(ge+=d0(H),H*W){case 38:B=A>0?1:(ge+="\f",-1);break;case 44:u[T++]=(ya(ge)-1)*B,B=1;break;case 64:Ca()===45&&(ge+=__(rs())),R=Ca(),A=P=ya(V=ge+=e8(y_())),H++;break;case 45:j===45&&ya(ge)==2&&(W=0)}}return h}function Lk(e,t,r,n,a,h,d,u,b,T,A){for(var P=a-1,R=a===0?h:[""],U=tT(R),j=0,W=0,ee=0;j<n;++j)for(var B=0,H=Mm(e,P+1,P=qU(W=d[j])),V=e;B<U;++B)(V=yO(W>0?R[B]+" "+H:Wr(H,/&\f/g,R[B])))&&(b[ee++]=V);return p0(e,t,r,a===0?Q2:u,b,T,A)}function r8(e,t,r){return p0(e,t,r,mO,d0(KU()),Mm(e,2,-2),0)}function Ok(e,t,r,n){return p0(e,t,r,eT,Mm(e,0,n),Mm(e,n+1,-1),n)}function Rd(e,t){for(var r="",n=tT(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function n8(e,t,r,n){switch(e.type){case VU:if(e.children.length)break;case UU:case eT:return e.return=e.return||e.value;case mO:return"";case gO:return e.return=e.value+"{"+Rd(e.children,n)+"}";case Q2:e.value=e.props.join(",")}return ya(r=Rd(e.children,n))?e.return=e.value+"{"+r+"}":""}function i8(e){var t=tT(e);return function(r,n,a,h){for(var d="",u=0;u<t;u++)d+=e[u](r,n,a,h)||"";return d}}function o8(e){return function(t){t.root||(t=t.return)&&e(t)}}var s8=function(t,r,n){for(var a=0,h=0;a=h,h=Ca(),a===38&&h===12&&(r[n]=1),!Lm(h);)rs();return rg(t,Io)},a8=function(t,r){var n=-1,a=44;do switch(Lm(a)){case 0:a===38&&Ca()===12&&(r[n]=1),t[n]+=s8(Io-1,r,n);break;case 2:t[n]+=__(a);break;case 4:if(a===44){t[++n]=Ca()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=d0(a)}while(a=rs());return t},l8=function(t,r){return xO(a8(vO(t),r))},Dk=new WeakMap,u8=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,a=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Dk.get(n))&&!a){Dk.set(t,!0);for(var h=[],d=l8(r,h),u=n.props,b=0,T=0;b<d.length;b++)for(var A=0;A<u.length;A++,T++)t.props[T]=h[b]?d[b].replace(/&\f/g,u[A]):u[A]+" "+d[b]}}},c8=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function bO(e,t){switch(WU(e,t)){case 5103:return Hr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Hr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Hr+e+uv+e+qi+e+e;case 6828:case 4268:return Hr+e+qi+e+e;case 6165:return Hr+e+qi+"flex-"+e+e;case 5187:return Hr+e+Wr(e,/(\w+).+(:[^]+)/,Hr+"box-$1$2"+qi+"flex-$1$2")+e;case 5443:return Hr+e+qi+"flex-item-"+Wr(e,/flex-|-self/,"")+e;case 4675:return Hr+e+qi+"flex-line-pack"+Wr(e,/align-content|flex-|-self/,"")+e;case 5548:return Hr+e+qi+Wr(e,"shrink","negative")+e;case 5292:return Hr+e+qi+Wr(e,"basis","preferred-size")+e;case 6060:return Hr+"box-"+Wr(e,"-grow","")+Hr+e+qi+Wr(e,"grow","positive")+e;case 4554:return Hr+Wr(e,/([^-])(transform)/g,"$1"+Hr+"$2")+e;case 6187:return Wr(Wr(Wr(e,/(zoom-|grab)/,Hr+"$1"),/(image-set)/,Hr+"$1"),e,"")+e;case 5495:case 3959:return Wr(e,/(image-set\([^]*)/,Hr+"$1$`$1");case 4968:return Wr(Wr(e,/(.+:)(flex-)?(.*)/,Hr+"box-pack:$3"+qi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Hr+e+e;case 4095:case 3583:case 4068:case 2532:return Wr(e,/(.+)-inline(.+)/,Hr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ya(e)-1-t>6)switch(ki(e,t+1)){case 109:if(ki(e,t+4)!==45)break;case 102:return Wr(e,/(.+:)(.+)-([^]+)/,"$1"+Hr+"$2-$3$1"+uv+(ki(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~qw(e,"stretch")?bO(Wr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ki(e,t+1)!==115)break;case 6444:switch(ki(e,ya(e)-3-(~qw(e,"!important")&&10))){case 107:return Wr(e,":",":"+Hr)+e;case 101:return Wr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Hr+(ki(e,14)===45?"inline-":"")+"box$3$1"+Hr+"$2$3$1"+qi+"$2box$3")+e}break;case 5936:switch(ki(e,t+11)){case 114:return Hr+e+qi+Wr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Hr+e+qi+Wr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Hr+e+qi+Wr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Hr+e+qi+e+e}return e}var h8=function(t,r,n,a){if(t.length>-1&&!t.return)switch(t.type){case eT:t.return=bO(t.value,t.length);break;case gO:return Rd([Mp(t,{value:Wr(t.value,"@","@"+Hr)})],a);case Q2:if(t.length)return ZU(t.props,function(h){switch(GU(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rd([Mp(t,{props:[Wr(h,/:(read-\w+)/,":"+uv+"$1")]})],a);case"::placeholder":return Rd([Mp(t,{props:[Wr(h,/:(plac\w+)/,":"+Hr+"input-$1")]}),Mp(t,{props:[Wr(h,/:(plac\w+)/,":"+uv+"$1")]}),Mp(t,{props:[Wr(h,/:(plac\w+)/,qi+"input-$1")]})],a)}return""})}},d8=[h8],f8=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(W){var ee=W.getAttribute("data-emotion");ee.indexOf(" ")!==-1&&(document.head.appendChild(W),W.setAttribute("data-s",""))})}var a=t.stylisPlugins||d8,h={},d,u=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(W){for(var ee=W.getAttribute("data-emotion").split(" "),B=1;B<ee.length;B++)h[ee[B]]=!0;u.push(W)});var b,T=[u8,c8];{var A,P=[n8,o8(function(W){A.insert(W)})],R=i8(T.concat(a,P)),U=function(ee){return Rd(t8(ee),R)};b=function(ee,B,H,V){A=H,U(ee?ee+"{"+B.styles+"}":B.styles),V&&(j.inserted[B.name]=!0)}}var j={key:r,sheet:new jU({key:r,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return j.sheet.hydrate(u),j},wO={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=typeof Symbol=="function"&&Symbol.for,rT=xi?Symbol.for("react.element"):60103,nT=xi?Symbol.for("react.portal"):60106,m0=xi?Symbol.for("react.fragment"):60107,g0=xi?Symbol.for("react.strict_mode"):60108,y0=xi?Symbol.for("react.profiler"):60114,_0=xi?Symbol.for("react.provider"):60109,v0=xi?Symbol.for("react.context"):60110,iT=xi?Symbol.for("react.async_mode"):60111,x0=xi?Symbol.for("react.concurrent_mode"):60111,b0=xi?Symbol.for("react.forward_ref"):60112,w0=xi?Symbol.for("react.suspense"):60113,p8=xi?Symbol.for("react.suspense_list"):60120,S0=xi?Symbol.for("react.memo"):60115,T0=xi?Symbol.for("react.lazy"):60116,m8=xi?Symbol.for("react.block"):60121,g8=xi?Symbol.for("react.fundamental"):60117,y8=xi?Symbol.for("react.responder"):60118,_8=xi?Symbol.for("react.scope"):60119;function ss(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case rT:switch(e=e.type,e){case iT:case x0:case m0:case y0:case g0:case w0:return e;default:switch(e=e&&e.$$typeof,e){case v0:case b0:case T0:case S0:case _0:return e;default:return t}}case nT:return t}}}function SO(e){return ss(e)===x0}Jr.AsyncMode=iT;Jr.ConcurrentMode=x0;Jr.ContextConsumer=v0;Jr.ContextProvider=_0;Jr.Element=rT;Jr.ForwardRef=b0;Jr.Fragment=m0;Jr.Lazy=T0;Jr.Memo=S0;Jr.Portal=nT;Jr.Profiler=y0;Jr.StrictMode=g0;Jr.Suspense=w0;Jr.isAsyncMode=function(e){return SO(e)||ss(e)===iT};Jr.isConcurrentMode=SO;Jr.isContextConsumer=function(e){return ss(e)===v0};Jr.isContextProvider=function(e){return ss(e)===_0};Jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===rT};Jr.isForwardRef=function(e){return ss(e)===b0};Jr.isFragment=function(e){return ss(e)===m0};Jr.isLazy=function(e){return ss(e)===T0};Jr.isMemo=function(e){return ss(e)===S0};Jr.isPortal=function(e){return ss(e)===nT};Jr.isProfiler=function(e){return ss(e)===y0};Jr.isStrictMode=function(e){return ss(e)===g0};Jr.isSuspense=function(e){return ss(e)===w0};Jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===m0||e===x0||e===y0||e===g0||e===w0||e===p8||typeof e=="object"&&e!==null&&(e.$$typeof===T0||e.$$typeof===S0||e.$$typeof===_0||e.$$typeof===v0||e.$$typeof===b0||e.$$typeof===g8||e.$$typeof===y8||e.$$typeof===_8||e.$$typeof===m8)};Jr.typeOf=ss;wO.exports=Jr;var v8=wO.exports,TO=v8,x8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},EO={};EO[TO.ForwardRef]=x8;EO[TO.Memo]=b8;var w8=!0;function S8(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(n+=a+" ")}),n}var CO=function(t,r,n){var a=t.key+"-"+r.name;(n===!1||w8===!1)&&t.registered[a]===void 0&&(t.registered[a]=r.styles)},AO=function(t,r,n){CO(t,r,n);var a=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var h=r;do t.insert(r===h?"."+a:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function T8(e){for(var t=0,r,n=0,a=e.length;a>=4;++n,a-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var E8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},C8=!1,A8=/[A-Z]|^ms/g,k8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,kO=function(t){return t.charCodeAt(1)===45},zk=function(t){return t!=null&&typeof t!="boolean"},ab=pO(function(e){return kO(e)?e:e.replace(A8,"-$&").toLowerCase()}),Fk=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(k8,function(n,a,h){return _a={name:a,styles:h,next:_a},a})}return E8[t]!==1&&!kO(t)&&typeof r=="number"&&r!==0?r+"px":r},P8="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Om(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var a=r;if(a.anim===1)return _a={name:a.name,styles:a.styles,next:_a},a.name;var h=r;if(h.styles!==void 0){var d=h.next;if(d!==void 0)for(;d!==void 0;)_a={name:d.name,styles:d.styles,next:_a},d=d.next;var u=h.styles+";";return u}return I8(e,t,r)}case"function":{if(e!==void 0){var b=_a,T=r(e);return _a=b,Om(e,t,T)}break}}var A=r;if(t==null)return A;var P=t[A];return P!==void 0?P:A}function I8(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=Om(e,t,r[a])+";";else for(var h in r){var d=r[h];if(typeof d!="object"){var u=d;t!=null&&t[u]!==void 0?n+=h+"{"+t[u]+"}":zk(u)&&(n+=ab(h)+":"+Fk(h,u)+";")}else{if(h==="NO_COMPONENT_SELECTOR"&&C8)throw new Error(P8);if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var b=0;b<d.length;b++)zk(d[b])&&(n+=ab(h)+":"+Fk(h,d[b])+";");else{var T=Om(e,t,d);switch(h){case"animation":case"animationName":{n+=ab(h)+":"+T+";";break}default:n+=h+"{"+T+"}"}}}}return n}var Bk=/label:\s*([^\s;{]+)\s*(;|$)/g,_a;function oT(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";_a=void 0;var h=e[0];if(h==null||h.raw===void 0)n=!1,a+=Om(r,t,h);else{var d=h;a+=d[0]}for(var u=1;u<e.length;u++)if(a+=Om(r,t,e[u]),n){var b=h;a+=b[u]}Bk.lastIndex=0;for(var T="",A;(A=Bk.exec(a))!==null;)T+="-"+A[1];var P=T8(a)+T;return{name:P,styles:a,next:_a}}var R8=function(t){return t()},PO=P_.useInsertionEffect?P_.useInsertionEffect:!1,M8=PO||R8,Nk=PO||X.useLayoutEffect,IO=X.createContext(typeof HTMLElement<"u"?f8({key:"css"}):null);IO.Provider;var RO=function(t){return X.forwardRef(function(r,n){var a=X.useContext(IO);return t(r,a,n)})},sT=X.createContext({}),L8=RO(function(e,t){var r=e.styles,n=oT([r],void 0,X.useContext(sT)),a=X.useRef();return Nk(function(){var h=t.key+"-global",d=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,b=document.querySelector('style[data-emotion="'+h+" "+n.name+'"]');return t.sheet.tags.length&&(d.before=t.sheet.tags[0]),b!==null&&(u=!0,b.setAttribute("data-emotion",h),d.hydrate([b])),a.current=[d,u],function(){d.flush()}},[t]),Nk(function(){var h=a.current,d=h[0],u=h[1];if(u){h[1]=!1;return}if(n.next!==void 0&&AO(t,n.next,!0),d.tags.length){var b=d.tags[d.tags.length-1].nextElementSibling;d.before=b,d.flush()}t.insert("",n,d,!1)},[t,n.name]),null});function O8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return oT(t)}var aT=function(){var t=O8.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},D8=FU,z8=function(t){return t!=="theme"},$k=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?D8:z8},jk=function(t,r,n){var a;if(r){var h=r.shouldForwardProp;a=t.__emotion_forwardProp&&h?function(d){return t.__emotion_forwardProp(d)&&h(d)}:h}return typeof a!="function"&&n&&(a=t.__emotion_forwardProp),a},F8=!1,B8=function(t){var r=t.cache,n=t.serialized,a=t.isStringTag;return CO(r,n,a),M8(function(){return AO(r,n,a)}),null},N8=function e(t,r){var n=t.__emotion_real===t,a=n&&t.__emotion_base||t,h,d;r!==void 0&&(h=r.label,d=r.target);var u=jk(t,r,n),b=u||$k(a),T=!b("as");return function(){var A=arguments,P=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&P.push("label:"+h+";"),A[0]==null||A[0].raw===void 0)P.push.apply(P,A);else{P.push(A[0][0]);for(var R=A.length,U=1;U<R;U++)P.push(A[U],A[0][U])}var j=RO(function(W,ee,B){var H=T&&W.as||a,V="",te=[],me=W;if(W.theme==null){me={};for(var fe in W)me[fe]=W[fe];me.theme=X.useContext(sT)}typeof W.className=="string"?V=S8(ee.registered,te,W.className):W.className!=null&&(V=W.className+" ");var ge=oT(P.concat(te),ee.registered,me);V+=ee.key+"-"+ge.name,d!==void 0&&(V+=" "+d);var ie=T&&u===void 0?$k(H):b,Re={};for(var Z in W)T&&Z==="as"||ie(Z)&&(Re[Z]=W[Z]);return Re.className=V,B&&(Re.ref=B),X.createElement(X.Fragment,null,X.createElement(B8,{cache:ee,serialized:ge,isStringTag:typeof H=="string"}),X.createElement(H,Re))});return j.displayName=h!==void 0?h:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=a,j.__emotion_styles=P,j.__emotion_forwardProp=u,Object.defineProperty(j,"toString",{value:function(){return d===void 0&&F8?"NO_COMPONENT_SELECTOR":"."+d}}),j.withComponent=function(W,ee){return e(W,lv({},r,ee,{shouldForwardProp:jk(j,ee,!0)})).apply(void 0,P)},j}},$8=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ww=N8.bind();$8.forEach(function(e){Ww[e]=Ww(e)});function j8(e){return e==null||Object.keys(e).length===0}function U8(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?a=>t(j8(a)?r:a):t;return We.jsx(L8,{styles:n})}/**
 * @mui/styled-engine v6.1.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function MO(e,t){return Ww(e,t)}const V8=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},q8=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function H8(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...a}=e,h=q8(t),d=Object.keys(h);function u(R){return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${r})`}function b(R){return`@media (max-width:${(typeof t[R]=="number"?t[R]:R)-n/100}${r})`}function T(R,U){const j=d.indexOf(U);return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${r}) and (max-width:${(j!==-1&&typeof t[d[j]]=="number"?t[d[j]]:U)-n/100}${r})`}function A(R){return d.indexOf(R)+1<d.length?T(R,d[d.indexOf(R)+1]):u(R)}function P(R){const U=d.indexOf(R);return U===0?u(d[1]):U===d.length-1?b(d[U]):T(R,d[d.indexOf(R)+1]).replace("@media","@media not all and")}return{keys:d,values:h,up:u,down:b,between:T,only:A,not:P,unit:r,...a}}const W8={borderRadius:4};function LO(e=8,t=s0({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(h=>{const d=t(h);return typeof d=="number"?`${d}px`:d}).join(" ");return r.mui=!0,r}function G8(e,t){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[e])||typeof r.getColorSchemeSelector!="function")return{};let a=r.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return r.palette.mode===e?t:{}}function E0(e={},...t){const{breakpoints:r={},palette:n={},spacing:a,shape:h={},...d}=e,u=H8(r),b=LO(a);let T=vi({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:b,shape:{...W8,...h}},d);return T=Wj(T),T.applyStyles=G8,T=t.reduce((A,P)=>vi(A,P),T),T.unstable_sxConfig={...tg,...d==null?void 0:d.unstable_sxConfig},T.unstable_sx=function(P){return sf({sx:P,theme:this})},T}function Z8(e){return Object.keys(e).length===0}function K8(e=null){const t=X.useContext(sT);return!t||Z8(t)?e:t}const X8=E0();function C0(e=X8){return K8(e)}function Y8({styles:e,themeId:t,defaultTheme:r={}}){const n=C0(r),a=typeof e=="function"?e(t&&n[t]||n):e;return We.jsx(U8,{styles:a})}function J8(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:a}=e,h=MO("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(sf);return X.forwardRef(function(b,T){const A=C0(r),{className:P,component:R="div",...U}=J2(b);return We.jsx(h,{as:R,ref:T,className:wr(P,a?a(n):n),theme:t&&A[t]||A,...U})})}const Q8=E0();function lb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Gw(e,t,r){return tV(t)?r:t[e]||t}const zy=Symbol("mui.processed_props");function Fy(e,t,r){if(zy in e)return e[zy];const n={...e,theme:Gw(t,e.theme,r)};return e[zy]=n,n[zy]=n,n}function eV(e){return e?(t,r)=>r[e]:null}function x_(e,t){var n;const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(a=>x_(a,t));if(Array.isArray(r==null?void 0:r.variants)){const{variants:a,...h}=r;let d=h,u;e:for(let b=0;b<a.length;b+=1){const T=a[b];if(typeof T.props=="function"){if(u??(u={...t,...t.ownerState,ownerState:t.ownerState}),!T.props(u))continue}else for(const A in T.props)if(t[A]!==T.props[A]&&((n=t.ownerState)==null?void 0:n[A])!==T.props[A])continue e;Array.isArray(d)||(d=[d]),typeof T.style=="function"?(u??(u={...t,...t.ownerState,ownerState:t.ownerState}),d.push(T.style(u))):d.push(T.style)}return d}return r}function OO(e={}){const{themeId:t,defaultTheme:r=Q8,rootShouldForwardProp:n=lb,slotShouldForwardProp:a=lb}=e,h=u=>sf(Fy(u,t,r));return h.__mui_systemSx=!0,(u,b={})=>{V8(u,fe=>fe.filter(ge=>!(ge!=null&&ge.__mui_systemSx)));const{name:T,slot:A,skipVariantsResolver:P,skipSx:R,overridesResolver:U=eV(nV(A)),...j}=b,W=P!==void 0?P:A&&A!=="Root"&&A!=="root"||!1,ee=R||!1;let B,H=lb;A==="Root"||A==="root"?H=n:A?H=a:rV(u)&&(H=void 0);const V=MO(u,{shouldForwardProp:H,label:B,...j}),te=fe=>typeof fe=="function"&&fe.__emotion_real!==fe||xa(fe)?ge=>x_(fe,Fy(ge,t,r)):fe,me=(fe,...ge)=>{let ie=te(fe);const Re=ge?ge.map(te):[];T&&U&&Re.push(Ue=>{const Fe=Gw(t,Ue.theme,r);if(!Fe.components||!Fe.components[T]||!Fe.components[T].styleOverrides)return null;const Ze=Fe.components[T].styleOverrides,Xe={},it=Fy(Ue,t,r);for(const Et in Ze)Xe[Et]=x_(Ze[Et],it);return U(Ue,Xe)}),T&&!W&&Re.push(Ue=>{var Xe,it;const Fe=Gw(t,Ue.theme,r),Ze=(it=(Xe=Fe==null?void 0:Fe.components)==null?void 0:Xe[T])==null?void 0:it.variants;return Ze?x_({variants:Ze},Fy(Ue,t,r)):null}),ee||Re.push(h);const Z=Re.length-ge.length;if(Array.isArray(fe)&&Z>0){const Ue=new Array(Z).fill("");ie=[...fe,...Ue],ie.raw=[...fe.raw,...Ue]}const Te=V(ie,...Re);return u.muiName&&(Te.muiName=u.muiName),Te};return V.withConfig&&(me.withConfig=V.withConfig),me}}function tV(e){for(const t in e)return!1;return!0}function rV(e){return typeof e=="string"&&e.charCodeAt(0)>96}function nV(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const iV=OO();function oV(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:Rm(t.components[r].defaultProps,n)}function DO({props:e,name:t,defaultTheme:r,themeId:n}){let a=C0(r);return n&&(a=a[n]||a),oV({theme:a,name:t,props:e})}function lT(e,t=0,r=1){return jj(e,t,r)}function sV(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,a)=>a<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function wu(e){if(e.type)return e;if(e.charAt(0)==="#")return wu(sV(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(pl(9,e));let n=e.substring(t+1,e.length-1),a;if(r==="color"){if(n=n.split(" "),a=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(pl(10,a))}else n=n.split(",");return n=n.map(h=>parseFloat(h)),{type:r,values:n,colorSpace:a}}const aV=e=>{const t=wu(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},Hp=(e,t)=>{try{return aV(e)}catch{return e}};function A0(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((a,h)=>h<3?parseInt(a,10):a):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function zO(e){e=wu(e);const{values:t}=e,r=t[0],n=t[1]/100,a=t[2]/100,h=n*Math.min(a,1-a),d=(T,A=(T+r/30)%12)=>a-h*Math.max(Math.min(A-3,9-A,1),-1);let u="rgb";const b=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(u+="a",b.push(t[3])),A0({type:u,values:b})}function Zw(e){e=wu(e);let t=e.type==="hsl"||e.type==="hsla"?wu(zO(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function lV(e,t){const r=Zw(e),n=Zw(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function ba(e,t){return e=wu(e),t=lT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,A0(e)}function By(e,t,r){try{return ba(e,t)}catch{return e}}function uT(e,t){if(e=wu(e),t=lT(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return A0(e)}function hn(e,t,r){try{return uT(e,t)}catch{return e}}function cT(e,t){if(e=wu(e),t=lT(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return A0(e)}function dn(e,t,r){try{return cT(e,t)}catch{return e}}function FO(e,t=.15){return Zw(e)>.5?uT(e,t):cT(e,t)}function Ny(e,t,r){try{return FO(e,t)}catch{return e}}const uV=X.createContext(),cV=()=>X.useContext(uV)??!1,hV=X.createContext(void 0);function dV(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const a=t.components[r];return a.defaultProps?Rm(a.defaultProps,n):!a.styleOverrides&&!a.variants?Rm(a,n):n}function fV({props:e,name:t}){const r=X.useContext(hV);return dV({props:e,name:t,theme:{components:r}})}function pV(e=""){function t(...n){if(!n.length)return"";const a=n[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${t(...n.slice(1))})`:`, ${a}`}return(n,...a)=>`var(--${e?`${e}-`:""}${n}${t(...a)})`}const Uk=(e,t,r,n=[])=>{let a=e;t.forEach((h,d)=>{d===t.length-1?Array.isArray(a)?a[Number(h)]=r:a&&typeof a=="object"&&(a[h]=r):a&&typeof a=="object"&&(a[h]||(a[h]=n.includes(h)?[]:{}),a=a[h])})},mV=(e,t,r)=>{function n(a,h=[],d=[]){Object.entries(a).forEach(([u,b])=>{(!r||r&&!r([...h,u]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?n(b,[...h,u],Array.isArray(b)?[...d,u]:d):t([...h,u],b,d))})}n(e)},gV=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function ub(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},a={},h={},d={};return mV(e,(u,b,T)=>{if((typeof b=="string"||typeof b=="number")&&(!n||!n(u,b))){const A=`--${r?`${r}-`:""}${u.join("-")}`,P=gV(u,b);Object.assign(a,{[A]:P}),Uk(h,u,`var(${A})`,T),Uk(d,u,`var(${A}, ${P})`,T)}},u=>u[0]==="vars"),{css:a,vars:h,varsWithDefaults:d}}function yV(e,t={}){const{getSelector:r=ee,disableCssColorScheme:n,colorSchemeSelector:a}=t,{colorSchemes:h={},components:d,defaultColorScheme:u="light",...b}=e,{vars:T,css:A,varsWithDefaults:P}=ub(b,t);let R=P;const U={},{[u]:j,...W}=h;if(Object.entries(W||{}).forEach(([V,te])=>{const{vars:me,css:fe,varsWithDefaults:ge}=ub(te,t);R=vi(R,ge),U[V]={css:fe,vars:me}}),j){const{css:V,vars:te,varsWithDefaults:me}=ub(j,t);R=vi(R,me),U[u]={css:V,vars:te}}function ee(V,te){var fe,ge;let me=a;if(a==="class"&&(me=".%s"),a==="data"&&(me="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(me=`[${a}="%s"]`),V){if(me==="media")return e.defaultColorScheme===V?":root":{[`@media (prefers-color-scheme: ${((ge=(fe=h[V])==null?void 0:fe.palette)==null?void 0:ge.mode)||V})`]:{":root":te}};if(me)return e.defaultColorScheme===V?`:root, ${me.replace("%s",String(V))}`:me.replace("%s",String(V))}return":root"}return{vars:R,generateThemeVars:()=>{let V={...T};return Object.entries(U).forEach(([,{vars:te}])=>{V=vi(V,te)}),V},generateStyleSheets:()=>{var ie,Re;const V=[],te=e.defaultColorScheme||"light";function me(Z,Te){Object.keys(Te).length&&V.push(typeof Z=="string"?{[Z]:{...Te}}:Z)}me(r(void 0,{...A}),A);const{[te]:fe,...ge}=U;if(fe){const{css:Z}=fe,Te=(Re=(ie=h[te])==null?void 0:ie.palette)==null?void 0:Re.mode,Ue=!n&&Te?{colorScheme:Te,...Z}:{...Z};me(r(te,{...Ue}),Ue)}return Object.entries(ge).forEach(([Z,{css:Te}])=>{var Ze,Xe;const Ue=(Xe=(Ze=h[Z])==null?void 0:Ze.palette)==null?void 0:Xe.mode,Fe=!n&&Ue?{colorScheme:Ue,...Te}:{...Te};me(r(Z,{...Fe}),Fe)}),V}}}function _V(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}const vV=E0(),xV=iV("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function bV(e){return DO({props:e,name:"MuiStack",defaultTheme:vV})}function wV(e,t){const r=X.Children.toArray(e).filter(Boolean);return r.reduce((n,a,h)=>(n.push(a),h<r.length-1&&n.push(X.cloneElement(t,{key:`separator-${h}`})),n),[])}const SV=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],TV=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...Ys({theme:t},sb({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n}))};if(e.spacing){const n=s0(t),a=Object.keys(t.breakpoints.values).reduce((b,T)=>((typeof e.spacing=="object"&&e.spacing[T]!=null||typeof e.direction=="object"&&e.direction[T]!=null)&&(b[T]=!0),b),{}),h=sb({values:e.direction,base:a}),d=sb({values:e.spacing,base:a});typeof h=="object"&&Object.keys(h).forEach((b,T,A)=>{if(!h[b]){const R=T>0?h[A[T-1]]:"column";h[b]=R}}),r=vi(r,Ys({theme:t},d,(b,T)=>e.useFlexGap?{gap:zc(n,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${SV(T?h[T]:e.direction)}`]:zc(n,b)}}))}return r=Zj(t.breakpoints,r),r};function EV(e={}){const{createStyledComponent:t=xV,useThemeProps:r=bV,componentName:n="MuiStack"}=e,a=()=>_n({root:["root"]},b=>fn(n,b),{}),h=t(TV);return X.forwardRef(function(b,T){const A=r(b),P=J2(A),{component:R="div",direction:U="column",spacing:j=0,divider:W,children:ee,className:B,useFlexGap:H=!1,...V}=P,te={direction:U,spacing:j,useFlexGap:H},me=a();return We.jsx(h,{as:R,ownerState:te,ref:T,className:wr(me.root,B),...V,children:W?wV(ee,W):ee})})}const Dm={black:"#000",white:"#fff"},CV={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Kh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Xh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Lp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Yh={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Jh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Qh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Vk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Dm.white,default:Dm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},cb={text:{primary:Dm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Dm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function qk(e,t,r,n){const a=n.light||n,h=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=cT(e.main,a):t==="dark"&&(e.dark=uT(e.main,h)))}function AV(e="light"){return e==="dark"?{main:Yh[200],light:Yh[50],dark:Yh[400]}:{main:Yh[700],light:Yh[400],dark:Yh[800]}}function kV(e="light"){return e==="dark"?{main:Kh[200],light:Kh[50],dark:Kh[400]}:{main:Kh[500],light:Kh[300],dark:Kh[700]}}function PV(e="light"){return e==="dark"?{main:Xh[500],light:Xh[300],dark:Xh[700]}:{main:Xh[700],light:Xh[400],dark:Xh[800]}}function IV(e="light"){return e==="dark"?{main:Jh[400],light:Jh[300],dark:Jh[700]}:{main:Jh[700],light:Jh[500],dark:Jh[900]}}function RV(e="light"){return e==="dark"?{main:Qh[400],light:Qh[300],dark:Qh[700]}:{main:Qh[800],light:Qh[500],dark:Qh[900]}}function MV(e="light"){return e==="dark"?{main:Lp[400],light:Lp[300],dark:Lp[700]}:{main:"#ed6c02",light:Lp[500],dark:Lp[900]}}function hT(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,...a}=e,h=e.primary||AV(t),d=e.secondary||kV(t),u=e.error||PV(t),b=e.info||IV(t),T=e.success||RV(t),A=e.warning||MV(t);function P(W){return lV(W,cb.text.primary)>=r?cb.text.primary:Vk.text.primary}const R=({color:W,name:ee,mainShade:B=500,lightShade:H=300,darkShade:V=700})=>{if(W={...W},!W.main&&W[B]&&(W.main=W[B]),!W.hasOwnProperty("main"))throw new Error(pl(11,ee?` (${ee})`:"",B));if(typeof W.main!="string")throw new Error(pl(12,ee?` (${ee})`:"",JSON.stringify(W.main)));return qk(W,"light",H,n),qk(W,"dark",V,n),W.contrastText||(W.contrastText=P(W.main)),W},U={dark:cb,light:Vk};return vi({common:{...Dm},mode:t,primary:R({color:h,name:"primary"}),secondary:R({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:u,name:"error"}),warning:R({color:A,name:"warning"}),info:R({color:b,name:"info"}),success:R({color:T,name:"success"}),grey:CV,contrastThreshold:r,getContrastText:P,augmentColor:R,tonalOffset:n,...U[t]},a)}function LV(e){const t={};return Object.entries(e).forEach(n=>{const[a,h]=n;typeof h=="object"&&(t[a]=`${h.fontStyle?`${h.fontStyle} `:""}${h.fontVariant?`${h.fontVariant} `:""}${h.fontWeight?`${h.fontWeight} `:""}${h.fontStretch?`${h.fontStretch} `:""}${h.fontSize||""}${h.lineHeight?`/${h.lineHeight} `:""}${h.fontFamily||""}`)}),t}function OV(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function DV(e){return Math.round(e*1e5)/1e5}const Hk={textTransform:"uppercase"},Wk='"Roboto", "Helvetica", "Arial", sans-serif';function zV(e,t){const{fontFamily:r=Wk,fontSize:n=14,fontWeightLight:a=300,fontWeightRegular:h=400,fontWeightMedium:d=500,fontWeightBold:u=700,htmlFontSize:b=16,allVariants:T,pxToRem:A,...P}=typeof t=="function"?t(e):t,R=n/14,U=A||(ee=>`${ee/b*R}rem`),j=(ee,B,H,V,te)=>({fontFamily:r,fontWeight:ee,fontSize:U(B),lineHeight:H,...r===Wk?{letterSpacing:`${DV(V/B)}em`}:{},...te,...T}),W={h1:j(a,96,1.167,-1.5),h2:j(a,60,1.2,-.5),h3:j(h,48,1.167,0),h4:j(h,34,1.235,.25),h5:j(h,24,1.334,0),h6:j(d,20,1.6,.15),subtitle1:j(h,16,1.75,.15),subtitle2:j(d,14,1.57,.1),body1:j(h,16,1.5,.15),body2:j(h,14,1.43,.15),button:j(d,14,1.75,.4,Hk),caption:j(h,12,1.66,.4),overline:j(h,12,2.66,1,Hk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return vi({htmlFontSize:b,pxToRem:U,fontFamily:r,fontSize:n,fontWeightLight:a,fontWeightRegular:h,fontWeightMedium:d,fontWeightBold:u,...W},P,{clone:!1})}const FV=.2,BV=.14,NV=.12;function In(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${FV})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${BV})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${NV})`].join(",")}const $V=["none",In(0,2,1,-1,0,1,1,0,0,1,3,0),In(0,3,1,-2,0,2,2,0,0,1,5,0),In(0,3,3,-2,0,3,4,0,0,1,8,0),In(0,2,4,-1,0,4,5,0,0,1,10,0),In(0,3,5,-1,0,5,8,0,0,1,14,0),In(0,3,5,-1,0,6,10,0,0,1,18,0),In(0,4,5,-2,0,7,10,1,0,2,16,1),In(0,5,5,-3,0,8,10,1,0,3,14,2),In(0,5,6,-3,0,9,12,1,0,3,16,2),In(0,6,6,-3,0,10,14,1,0,4,18,3),In(0,6,7,-4,0,11,15,1,0,4,20,3),In(0,7,8,-4,0,12,17,2,0,5,22,4),In(0,7,8,-4,0,13,19,2,0,5,24,4),In(0,7,9,-4,0,14,21,2,0,5,26,4),In(0,8,9,-5,0,15,22,2,0,6,28,5),In(0,8,10,-5,0,16,24,2,0,6,30,5),In(0,8,11,-5,0,17,26,2,0,6,32,5),In(0,9,11,-5,0,18,28,2,0,7,34,6),In(0,9,12,-6,0,19,29,2,0,7,36,6),In(0,10,13,-6,0,20,31,3,0,8,38,7),In(0,10,13,-6,0,21,33,3,0,8,40,7),In(0,10,14,-6,0,22,35,3,0,8,42,7),In(0,11,14,-7,0,23,36,3,0,9,44,8),In(0,11,15,-7,0,24,38,3,0,9,46,8)],jV={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UV={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Gk(e){return`${Math.round(e)}ms`}function VV(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function qV(e){const t={...jV,...e.easing},r={...UV,...e.duration};return{getAutoHeightDuration:VV,create:(a=["all"],h={})=>{const{duration:d=r.standard,easing:u=t.easeInOut,delay:b=0,...T}=h;return(Array.isArray(a)?a:[a]).map(A=>`${A} ${typeof d=="string"?d:Gk(d)} ${u} ${typeof b=="string"?b:Gk(b)}`).join(",")},...e,easing:t,duration:r}}const HV={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Kw(e={},...t){const{breakpoints:r,mixins:n={},spacing:a,palette:h={},transitions:d={},typography:u={},shape:b,...T}=e;if(e.vars)throw new Error(pl(20));const A=hT(h),P=E0(e);let R=vi(P,{mixins:OV(P.breakpoints,n),palette:A,shadows:$V.slice(),typography:zV(A,u),transitions:qV(d),zIndex:{...HV}});return R=vi(R,T),R=t.reduce((U,j)=>vi(U,j),R),R.unstable_sxConfig={...tg,...T==null?void 0:T.unstable_sxConfig},R.unstable_sx=function(j){return sf({sx:j,theme:this})},R}function Xw(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const WV=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=Xw(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function BO(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function NO(e){return e==="dark"?WV:[]}function GV(e){const{palette:t={mode:"light"},opacity:r,overlays:n,...a}=e,h=hT(t);return{palette:h,opacity:{...BO(h.mode),...r},overlays:n||NO(h.mode),...a}}function ZV(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const KV=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],XV=e=>(t,r)=>{const n=e.rootSelector||":root",a=e.colorSchemeSelector;let h=a;if(a==="class"&&(h=".%s"),a==="data"&&(h="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(h=`[${a}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const d={};return KV(e.cssVarPrefix).forEach(u=>{d[u]=r[u],delete r[u]}),h==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:d}}:h?{[h.replace("%s",t)]:d,[`${n}, ${h.replace("%s",t)}`]:r}:{[n]:{...r,...d}}}if(h&&h!=="media")return`${n}, ${h.replace("%s",String(t))}`}else if(t){if(h==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(h)return h.replace("%s",String(t))}return n};function YV(e){return xa(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function JV(e={}){const t={...e};function r(n){const a=Object.entries(n);for(let h=0;h<a.length;h++){const[d,u]=a[h];!YV(u)||d.startsWith("unstable_")?delete n[d]:xa(u)&&(n[d]={...u},r(n[d]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function QV(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Ve(e,t,r){!e[t]&&r&&(e[t]=r)}function Wp(e){return!e||!e.startsWith("hsl")?e:zO(e)}function Ya(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Hp(Wp(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function e7(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const da=e=>{try{return e()}catch{}},t7=(e="mui")=>pV(e);function hb(e,t,r,n){if(!t)return;t=t===!0?{}:t;const a=n==="dark"?"dark":"light";if(!r){e[n]=GV({...t,palette:{mode:a,...t==null?void 0:t.palette}});return}const{palette:h,...d}=Kw({...r,palette:{mode:a,...t==null?void 0:t.palette}});return e[n]={...t,palette:h,opacity:{...BO(a),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||NO(a)},d}function r7(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:a=!1,cssVarPrefix:h="mui",shouldSkipGeneratingVar:d=ZV,colorSchemeSelector:u=r.light&&r.dark?"media":void 0,rootSelector:b=":root",...T}=e,A=Object.keys(r)[0],P=n||(r.light&&A!=="light"?"light":A),R=t7(h),{[P]:U,light:j,dark:W,...ee}=r,B={...ee};let H=U;if((P==="dark"&&!("dark"in r)||P==="light"&&!("light"in r))&&(H=!0),!H)throw new Error(pl(21,P));const V=hb(B,H,T,P);j&&!B.light&&hb(B,j,void 0,"light"),W&&!B.dark&&hb(B,W,void 0,"dark");let te={defaultColorScheme:P,...V,cssVarPrefix:h,colorSchemeSelector:u,rootSelector:b,getCssVar:R,colorSchemes:B,font:{...LV(V.typography),...V.font},spacing:e7(T.spacing)};Object.keys(te.colorSchemes).forEach(Re=>{const Z=te.colorSchemes[Re].palette,Te=Ue=>{const Fe=Ue.split("-"),Ze=Fe[1],Xe=Fe[2];return R(Ue,Z[Ze][Xe])};if(Z.mode==="light"&&(Ve(Z.common,"background","#fff"),Ve(Z.common,"onBackground","#000")),Z.mode==="dark"&&(Ve(Z.common,"background","#000"),Ve(Z.common,"onBackground","#fff")),QV(Z,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Z.mode==="light"){Ve(Z.Alert,"errorColor",hn(Z.error.light,.6)),Ve(Z.Alert,"infoColor",hn(Z.info.light,.6)),Ve(Z.Alert,"successColor",hn(Z.success.light,.6)),Ve(Z.Alert,"warningColor",hn(Z.warning.light,.6)),Ve(Z.Alert,"errorFilledBg",Te("palette-error-main")),Ve(Z.Alert,"infoFilledBg",Te("palette-info-main")),Ve(Z.Alert,"successFilledBg",Te("palette-success-main")),Ve(Z.Alert,"warningFilledBg",Te("palette-warning-main")),Ve(Z.Alert,"errorFilledColor",da(()=>Z.getContrastText(Z.error.main))),Ve(Z.Alert,"infoFilledColor",da(()=>Z.getContrastText(Z.info.main))),Ve(Z.Alert,"successFilledColor",da(()=>Z.getContrastText(Z.success.main))),Ve(Z.Alert,"warningFilledColor",da(()=>Z.getContrastText(Z.warning.main))),Ve(Z.Alert,"errorStandardBg",dn(Z.error.light,.9)),Ve(Z.Alert,"infoStandardBg",dn(Z.info.light,.9)),Ve(Z.Alert,"successStandardBg",dn(Z.success.light,.9)),Ve(Z.Alert,"warningStandardBg",dn(Z.warning.light,.9)),Ve(Z.Alert,"errorIconColor",Te("palette-error-main")),Ve(Z.Alert,"infoIconColor",Te("palette-info-main")),Ve(Z.Alert,"successIconColor",Te("palette-success-main")),Ve(Z.Alert,"warningIconColor",Te("palette-warning-main")),Ve(Z.AppBar,"defaultBg",Te("palette-grey-100")),Ve(Z.Avatar,"defaultBg",Te("palette-grey-400")),Ve(Z.Button,"inheritContainedBg",Te("palette-grey-300")),Ve(Z.Button,"inheritContainedHoverBg",Te("palette-grey-A100")),Ve(Z.Chip,"defaultBorder",Te("palette-grey-400")),Ve(Z.Chip,"defaultAvatarColor",Te("palette-grey-700")),Ve(Z.Chip,"defaultIconColor",Te("palette-grey-700")),Ve(Z.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ve(Z.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ve(Z.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ve(Z.LinearProgress,"primaryBg",dn(Z.primary.main,.62)),Ve(Z.LinearProgress,"secondaryBg",dn(Z.secondary.main,.62)),Ve(Z.LinearProgress,"errorBg",dn(Z.error.main,.62)),Ve(Z.LinearProgress,"infoBg",dn(Z.info.main,.62)),Ve(Z.LinearProgress,"successBg",dn(Z.success.main,.62)),Ve(Z.LinearProgress,"warningBg",dn(Z.warning.main,.62)),Ve(Z.Skeleton,"bg",`rgba(${Te("palette-text-primaryChannel")} / 0.11)`),Ve(Z.Slider,"primaryTrack",dn(Z.primary.main,.62)),Ve(Z.Slider,"secondaryTrack",dn(Z.secondary.main,.62)),Ve(Z.Slider,"errorTrack",dn(Z.error.main,.62)),Ve(Z.Slider,"infoTrack",dn(Z.info.main,.62)),Ve(Z.Slider,"successTrack",dn(Z.success.main,.62)),Ve(Z.Slider,"warningTrack",dn(Z.warning.main,.62));const Ue=Ny(Z.background.default,.8);Ve(Z.SnackbarContent,"bg",Ue),Ve(Z.SnackbarContent,"color",da(()=>Z.getContrastText(Ue))),Ve(Z.SpeedDialAction,"fabHoverBg",Ny(Z.background.paper,.15)),Ve(Z.StepConnector,"border",Te("palette-grey-400")),Ve(Z.StepContent,"border",Te("palette-grey-400")),Ve(Z.Switch,"defaultColor",Te("palette-common-white")),Ve(Z.Switch,"defaultDisabledColor",Te("palette-grey-100")),Ve(Z.Switch,"primaryDisabledColor",dn(Z.primary.main,.62)),Ve(Z.Switch,"secondaryDisabledColor",dn(Z.secondary.main,.62)),Ve(Z.Switch,"errorDisabledColor",dn(Z.error.main,.62)),Ve(Z.Switch,"infoDisabledColor",dn(Z.info.main,.62)),Ve(Z.Switch,"successDisabledColor",dn(Z.success.main,.62)),Ve(Z.Switch,"warningDisabledColor",dn(Z.warning.main,.62)),Ve(Z.TableCell,"border",dn(By(Z.divider,1),.88)),Ve(Z.Tooltip,"bg",By(Z.grey[700],.92))}if(Z.mode==="dark"){Ve(Z.Alert,"errorColor",dn(Z.error.light,.6)),Ve(Z.Alert,"infoColor",dn(Z.info.light,.6)),Ve(Z.Alert,"successColor",dn(Z.success.light,.6)),Ve(Z.Alert,"warningColor",dn(Z.warning.light,.6)),Ve(Z.Alert,"errorFilledBg",Te("palette-error-dark")),Ve(Z.Alert,"infoFilledBg",Te("palette-info-dark")),Ve(Z.Alert,"successFilledBg",Te("palette-success-dark")),Ve(Z.Alert,"warningFilledBg",Te("palette-warning-dark")),Ve(Z.Alert,"errorFilledColor",da(()=>Z.getContrastText(Z.error.dark))),Ve(Z.Alert,"infoFilledColor",da(()=>Z.getContrastText(Z.info.dark))),Ve(Z.Alert,"successFilledColor",da(()=>Z.getContrastText(Z.success.dark))),Ve(Z.Alert,"warningFilledColor",da(()=>Z.getContrastText(Z.warning.dark))),Ve(Z.Alert,"errorStandardBg",hn(Z.error.light,.9)),Ve(Z.Alert,"infoStandardBg",hn(Z.info.light,.9)),Ve(Z.Alert,"successStandardBg",hn(Z.success.light,.9)),Ve(Z.Alert,"warningStandardBg",hn(Z.warning.light,.9)),Ve(Z.Alert,"errorIconColor",Te("palette-error-main")),Ve(Z.Alert,"infoIconColor",Te("palette-info-main")),Ve(Z.Alert,"successIconColor",Te("palette-success-main")),Ve(Z.Alert,"warningIconColor",Te("palette-warning-main")),Ve(Z.AppBar,"defaultBg",Te("palette-grey-900")),Ve(Z.AppBar,"darkBg",Te("palette-background-paper")),Ve(Z.AppBar,"darkColor",Te("palette-text-primary")),Ve(Z.Avatar,"defaultBg",Te("palette-grey-600")),Ve(Z.Button,"inheritContainedBg",Te("palette-grey-800")),Ve(Z.Button,"inheritContainedHoverBg",Te("palette-grey-700")),Ve(Z.Chip,"defaultBorder",Te("palette-grey-700")),Ve(Z.Chip,"defaultAvatarColor",Te("palette-grey-300")),Ve(Z.Chip,"defaultIconColor",Te("palette-grey-300")),Ve(Z.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ve(Z.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ve(Z.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ve(Z.LinearProgress,"primaryBg",hn(Z.primary.main,.5)),Ve(Z.LinearProgress,"secondaryBg",hn(Z.secondary.main,.5)),Ve(Z.LinearProgress,"errorBg",hn(Z.error.main,.5)),Ve(Z.LinearProgress,"infoBg",hn(Z.info.main,.5)),Ve(Z.LinearProgress,"successBg",hn(Z.success.main,.5)),Ve(Z.LinearProgress,"warningBg",hn(Z.warning.main,.5)),Ve(Z.Skeleton,"bg",`rgba(${Te("palette-text-primaryChannel")} / 0.13)`),Ve(Z.Slider,"primaryTrack",hn(Z.primary.main,.5)),Ve(Z.Slider,"secondaryTrack",hn(Z.secondary.main,.5)),Ve(Z.Slider,"errorTrack",hn(Z.error.main,.5)),Ve(Z.Slider,"infoTrack",hn(Z.info.main,.5)),Ve(Z.Slider,"successTrack",hn(Z.success.main,.5)),Ve(Z.Slider,"warningTrack",hn(Z.warning.main,.5));const Ue=Ny(Z.background.default,.98);Ve(Z.SnackbarContent,"bg",Ue),Ve(Z.SnackbarContent,"color",da(()=>Z.getContrastText(Ue))),Ve(Z.SpeedDialAction,"fabHoverBg",Ny(Z.background.paper,.15)),Ve(Z.StepConnector,"border",Te("palette-grey-600")),Ve(Z.StepContent,"border",Te("palette-grey-600")),Ve(Z.Switch,"defaultColor",Te("palette-grey-300")),Ve(Z.Switch,"defaultDisabledColor",Te("palette-grey-600")),Ve(Z.Switch,"primaryDisabledColor",hn(Z.primary.main,.55)),Ve(Z.Switch,"secondaryDisabledColor",hn(Z.secondary.main,.55)),Ve(Z.Switch,"errorDisabledColor",hn(Z.error.main,.55)),Ve(Z.Switch,"infoDisabledColor",hn(Z.info.main,.55)),Ve(Z.Switch,"successDisabledColor",hn(Z.success.main,.55)),Ve(Z.Switch,"warningDisabledColor",hn(Z.warning.main,.55)),Ve(Z.TableCell,"border",hn(By(Z.divider,1),.68)),Ve(Z.Tooltip,"bg",By(Z.grey[700],.92))}Ya(Z.background,"default"),Ya(Z.background,"paper"),Ya(Z.common,"background"),Ya(Z.common,"onBackground"),Ya(Z,"divider"),Object.keys(Z).forEach(Ue=>{const Fe=Z[Ue];Fe&&typeof Fe=="object"&&(Fe.main&&Ve(Z[Ue],"mainChannel",Hp(Wp(Fe.main))),Fe.light&&Ve(Z[Ue],"lightChannel",Hp(Wp(Fe.light))),Fe.dark&&Ve(Z[Ue],"darkChannel",Hp(Wp(Fe.dark))),Fe.contrastText&&Ve(Z[Ue],"contrastTextChannel",Hp(Wp(Fe.contrastText))),Ue==="text"&&(Ya(Z[Ue],"primary"),Ya(Z[Ue],"secondary")),Ue==="action"&&(Fe.active&&Ya(Z[Ue],"active"),Fe.selected&&Ya(Z[Ue],"selected")))})}),te=t.reduce((Re,Z)=>vi(Re,Z),te);const me={prefix:h,disableCssColorScheme:a,shouldSkipGeneratingVar:d,getSelector:XV(te)},{vars:fe,generateThemeVars:ge,generateStyleSheets:ie}=yV(te,me);return te.vars=fe,Object.entries(te.colorSchemes[te.defaultColorScheme]).forEach(([Re,Z])=>{te[Re]=Z}),te.generateThemeVars=ge,te.generateStyleSheets=ie,te.generateSpacing=function(){return LO(T.spacing,s0(this))},te.getColorSchemeSelector=_V(u),te.spacing=te.generateSpacing(),te.shouldSkipGeneratingVar=d,te.unstable_sxConfig={...tg,...T==null?void 0:T.unstable_sxConfig},te.unstable_sx=function(Z){return sf({sx:Z,theme:this})},te.toRuntimeSource=JV,te}function Zk(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:hT({...r===!0?{}:r.palette,mode:t})})}function $O(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:a=r?void 0:{light:!0},defaultColorScheme:h=r==null?void 0:r.mode,...d}=e,u=h||"light",b=a==null?void 0:a[u],T={...a,...r?{[u]:{...typeof b!="boolean"&&b,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return Kw(e,...t);let A=r;"palette"in e||T[u]&&(T[u]!==!0?A=T[u].palette:u==="dark"&&(A={mode:"dark"}));const P=Kw({...e,palette:A},...t);return P.defaultColorScheme=u,P.colorSchemes=T,P.palette.mode==="light"&&(P.colorSchemes.light={...T.light!==!0&&T.light,palette:P.palette},Zk(P,"dark",T.dark)),P.palette.mode==="dark"&&(P.colorSchemes.dark={...T.dark!==!0&&T.dark,palette:P.palette},Zk(P,"light",T.light)),P}return!r&&!("light"in T)&&u==="light"&&(T.light=!0),r7({...d,colorSchemes:T,defaultColorScheme:u,...typeof n!="boolean"&&n},...t)}const k0=$O(),ng="$$material";function P0(){const e=C0(k0);return e[ng]||e}function n7(e){return We.jsx(Y8,{...e,defaultTheme:k0,themeId:ng})}function jO(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ta=e=>jO(e)&&e!=="classes",Yt=OO({themeId:ng,defaultTheme:k0,rootShouldForwardProp:ta});function dT(e){return function(r){return We.jsx(n7,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function i7(){return J2}const Kk={theme:void 0};function Vn(e){let t,r;return n=>{let a=t;return(a===void 0||n.theme!==r)&&(Kk.theme=n.theme,a=e(Kk),t=a,r=n.theme),a}}function Tn(e){return fV(e)}function o7(e){return fn("MuiSvgIcon",e)}pn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const s7=e=>{const{color:t,fontSize:r,classes:n}=e,a={root:["root",t!=="inherit"&&`color${pr(t)}`,`fontSize${pr(r)}`]};return _n(a,o7,n)},a7=Yt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${pr(r.color)}`],t[`fontSize${pr(r.fontSize)}`]]}})(Vn(({theme:e})=>{var t,r,n,a,h,d,u,b,T,A,P,R,U,j;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(a=(t=e.transitions)==null?void 0:t.create)==null?void 0:a.call(t,"fill",{duration:(n=(r=(e.vars??e).transitions)==null?void 0:r.duration)==null?void 0:n.shorter}),variants:[{props:W=>!W.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((d=(h=e.typography)==null?void 0:h.pxToRem)==null?void 0:d.call(h,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((b=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:b.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((A=(T=e.typography)==null?void 0:T.pxToRem)==null?void 0:A.call(T,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,W])=>W&&W.main).map(([W])=>{var ee,B;return{props:{color:W},style:{color:(B=(ee=(e.vars??e).palette)==null?void 0:ee[W])==null?void 0:B.main}}}),{props:{color:"action"},style:{color:(R=(P=(e.vars??e).palette)==null?void 0:P.action)==null?void 0:R.active}},{props:{color:"disabled"},style:{color:(j=(U=(e.vars??e).palette)==null?void 0:U.action)==null?void 0:j.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),cv=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiSvgIcon"}),{children:a,className:h,color:d="inherit",component:u="svg",fontSize:b="medium",htmlColor:T,inheritViewBox:A=!1,titleAccess:P,viewBox:R="0 0 24 24",...U}=n,j=X.isValidElement(a)&&a.type==="svg",W={...n,color:d,component:u,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:R,hasSvgAsChild:j},ee={};A||(ee.viewBox=R);const B=s7(W);return We.jsxs(a7,{as:u,className:wr(B.root,h),focusable:"false",color:T,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:r,...ee,...U,...j&&a.props,ownerState:W,children:[j?a.props.children:a,P?We.jsx("title",{children:P}):null]})});cv&&(cv.muiName="SvgIcon");function UO(e,t){function r(n,a){return We.jsx(cv,{"data-testid":`${t}Icon`,ref:a,...n,children:e})}return r.muiName=cv.muiName,X.memo(X.forwardRef(r))}const l7=UO(We.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function VO({props:e,name:t}){return DO({props:e,name:t,defaultTheme:k0,themeId:ng})}var ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT=Symbol.for("react.element"),pT=Symbol.for("react.portal"),I0=Symbol.for("react.fragment"),R0=Symbol.for("react.strict_mode"),M0=Symbol.for("react.profiler"),L0=Symbol.for("react.provider"),O0=Symbol.for("react.context"),u7=Symbol.for("react.server_context"),D0=Symbol.for("react.forward_ref"),z0=Symbol.for("react.suspense"),F0=Symbol.for("react.suspense_list"),B0=Symbol.for("react.memo"),N0=Symbol.for("react.lazy"),c7=Symbol.for("react.offscreen"),qO;qO=Symbol.for("react.module.reference");function Rs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fT:switch(e=e.type,e){case I0:case M0:case R0:case z0:case F0:return e;default:switch(e=e&&e.$$typeof,e){case u7:case O0:case D0:case N0:case B0:case L0:return e;default:return t}}case pT:return t}}}ln.ContextConsumer=O0;ln.ContextProvider=L0;ln.Element=fT;ln.ForwardRef=D0;ln.Fragment=I0;ln.Lazy=N0;ln.Memo=B0;ln.Portal=pT;ln.Profiler=M0;ln.StrictMode=R0;ln.Suspense=z0;ln.SuspenseList=F0;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(e){return Rs(e)===O0};ln.isContextProvider=function(e){return Rs(e)===L0};ln.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fT};ln.isForwardRef=function(e){return Rs(e)===D0};ln.isFragment=function(e){return Rs(e)===I0};ln.isLazy=function(e){return Rs(e)===N0};ln.isMemo=function(e){return Rs(e)===B0};ln.isPortal=function(e){return Rs(e)===pT};ln.isProfiler=function(e){return Rs(e)===M0};ln.isStrictMode=function(e){return Rs(e)===R0};ln.isSuspense=function(e){return Rs(e)===z0};ln.isSuspenseList=function(e){return Rs(e)===F0};ln.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===I0||e===M0||e===R0||e===z0||e===F0||e===c7||typeof e=="object"&&e!==null&&(e.$$typeof===N0||e.$$typeof===B0||e.$$typeof===L0||e.$$typeof===O0||e.$$typeof===D0||e.$$typeof===qO||e.getModuleId!==void 0)};ln.typeOf=Rs;function HO(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Yw(e,t)}function WO(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Yw(e,t)}const Xk={disabled:!1},hv=Xo.createContext(null);var h7=function(t){return t.scrollTop},Gp="unmounted",cc="exited",hc="entering",id="entered",Jw="exiting",La=function(e){WO(t,e);function t(n,a){var h;h=e.call(this,n,a)||this;var d=a,u=d&&!d.isMounting?n.enter:n.appear,b;return h.appearStatus=null,n.in?u?(b=cc,h.appearStatus=hc):b=id:n.unmountOnExit||n.mountOnEnter?b=Gp:b=cc,h.state={status:b},h.nextCallback=null,h}t.getDerivedStateFromProps=function(a,h){var d=a.in;return d&&h.status===Gp?{status:cc}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(a){var h=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==hc&&d!==id&&(h=hc):(d===hc||d===id)&&(h=Jw)}this.updateStatus(!1,h)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var a=this.props.timeout,h,d,u;return h=d=u=a,a!=null&&typeof a!="number"&&(h=a.exit,d=a.enter,u=a.appear!==void 0?a.appear:d),{exit:h,enter:d,appear:u}},r.updateStatus=function(a,h){if(a===void 0&&(a=!1),h!==null)if(this.cancelNextCallback(),h===hc){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:Up.findDOMNode(this);d&&h7(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===cc&&this.setState({status:Gp})},r.performEnter=function(a){var h=this,d=this.props.enter,u=this.context?this.context.isMounting:a,b=this.props.nodeRef?[u]:[Up.findDOMNode(this),u],T=b[0],A=b[1],P=this.getTimeouts(),R=u?P.appear:P.enter;if(!a&&!d||Xk.disabled){this.safeSetState({status:id},function(){h.props.onEntered(T)});return}this.props.onEnter(T,A),this.safeSetState({status:hc},function(){h.props.onEntering(T,A),h.onTransitionEnd(R,function(){h.safeSetState({status:id},function(){h.props.onEntered(T,A)})})})},r.performExit=function(){var a=this,h=this.props.exit,d=this.getTimeouts(),u=this.props.nodeRef?void 0:Up.findDOMNode(this);if(!h||Xk.disabled){this.safeSetState({status:cc},function(){a.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Jw},function(){a.props.onExiting(u),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:cc},function(){a.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(a,h){h=this.setNextCallback(h),this.setState(a,h)},r.setNextCallback=function(a){var h=this,d=!0;return this.nextCallback=function(u){d&&(d=!1,h.nextCallback=null,a(u))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},r.onTransitionEnd=function(a,h){this.setNextCallback(h);var d=this.props.nodeRef?this.props.nodeRef.current:Up.findDOMNode(this),u=a==null&&!this.props.addEndListener;if(!d||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],T=b[0],A=b[1];this.props.addEndListener(T,A)}a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var a=this.state.status;if(a===Gp)return null;var h=this.props,d=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var u=HO(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Xo.createElement(hv.Provider,{value:null},typeof d=="function"?d(a,u):Xo.cloneElement(Xo.Children.only(d),u))},t}(Xo.Component);La.contextType=hv;La.propTypes={};function ed(){}La.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ed,onEntering:ed,onEntered:ed,onExit:ed,onExiting:ed,onExited:ed};La.UNMOUNTED=Gp;La.EXITED=cc;La.ENTERING=hc;La.ENTERED=id;La.EXITING=Jw;function d7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mT(e,t){var r=function(h){return t&&X.isValidElement(h)?t(h):h},n=Object.create(null);return e&&X.Children.map(e,function(a){return a}).forEach(function(a){n[a.key]=r(a)}),n}function f7(e,t){e=e||{},t=t||{};function r(A){return A in t?t[A]:e[A]}var n=Object.create(null),a=[];for(var h in e)h in t?a.length&&(n[h]=a,a=[]):a.push(h);var d,u={};for(var b in t){if(n[b])for(d=0;d<n[b].length;d++){var T=n[b][d];u[n[b][d]]=r(T)}u[b]=r(b)}for(d=0;d<a.length;d++)u[a[d]]=r(a[d]);return u}function bc(e,t,r){return r[t]!=null?r[t]:e.props[t]}function p7(e,t){return mT(e.children,function(r){return X.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:bc(r,"appear",e),enter:bc(r,"enter",e),exit:bc(r,"exit",e)})})}function m7(e,t,r){var n=mT(e.children),a=f7(t,n);return Object.keys(a).forEach(function(h){var d=a[h];if(X.isValidElement(d)){var u=h in t,b=h in n,T=t[h],A=X.isValidElement(T)&&!T.props.in;b&&(!u||A)?a[h]=X.cloneElement(d,{onExited:r.bind(null,d),in:!0,exit:bc(d,"exit",e),enter:bc(d,"enter",e)}):!b&&u&&!A?a[h]=X.cloneElement(d,{in:!1}):b&&u&&X.isValidElement(T)&&(a[h]=X.cloneElement(d,{onExited:r.bind(null,d),in:T.props.in,exit:bc(d,"exit",e),enter:bc(d,"enter",e)}))}}),a}var g7=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},y7={component:"div",childFactory:function(t){return t}},gT=function(e){WO(t,e);function t(n,a){var h;h=e.call(this,n,a)||this;var d=h.handleExited.bind(d7(h));return h.state={contextValue:{isMounting:!0},handleExited:d,firstRender:!0},h}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,h){var d=h.children,u=h.handleExited,b=h.firstRender;return{children:b?p7(a,u):m7(a,d,u),firstRender:!1}},r.handleExited=function(a,h){var d=mT(this.props.children);a.key in d||(a.props.onExited&&a.props.onExited(h),this.mounted&&this.setState(function(u){var b=lv({},u.children);return delete b[a.key],{children:b}}))},r.render=function(){var a=this.props,h=a.component,d=a.childFactory,u=HO(a,["component","childFactory"]),b=this.state.contextValue,T=g7(this.state.children).map(d);return delete u.appear,delete u.enter,delete u.exit,h===null?Xo.createElement(hv.Provider,{value:b},T):Xo.createElement(hv.Provider,{value:b},Xo.createElement(h,u,T))},t}(Xo.Component);gT.propTypes={};gT.defaultProps=y7;const GO=e=>e.scrollTop;function dv(e,t){const{timeout:r,easing:n,style:a={}}=e;return{duration:a.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:a.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:a.transitionDelay}}function _7(e){return fn("MuiPaper",e)}pn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const v7=e=>{const{square:t,elevation:r,variant:n,classes:a}=e,h={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return _n(h,_7,a)},x7=Yt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(Vn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),yT=X.forwardRef(function(t,r){var U;const n=Tn({props:t,name:"MuiPaper"}),a=P0(),{className:h,component:d="div",elevation:u=1,square:b=!1,variant:T="elevation",...A}=n,P={...n,component:d,elevation:u,square:b,variant:T},R=v7(P);return We.jsx(x7,{as:d,ownerState:P,className:wr(R.root,h),ref:r,...A,style:{...T==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[u],...a.vars&&{"--Paper-overlay":(U=a.vars.overlays)==null?void 0:U[u]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ba("#fff",Xw(u))}, ${ba("#fff",Xw(u))})`}},...A.style}})});function Hs(e,t){const{className:r,elementType:n,ownerState:a,externalForwardedProps:h,getSlotOwnerState:d,internalForwardedProps:u,...b}=t,{component:T,slots:A={[e]:void 0},slotProps:P={[e]:void 0},...R}=h,U=A[e]||n,j=cO(P[e],a),{props:{component:W,...ee},internalRef:B}=uO({className:r,...b,externalForwardedProps:e==="root"?R:void 0,externalSlotProps:j}),H=Ri(B,j==null?void 0:j.ref,t.ref),V=d?d(ee):{},te={...a,...V},me=e==="root"?W||T:W,fe=aO(U,{...e==="root"&&!T&&!A[e]&&u,...e!=="root"&&!A[e]&&u,...ee,...me&&{as:me},ref:H},te);return Object.keys(V).forEach(ge=>{delete fe[ge]}),[U,fe]}class fv{constructor(){ic(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new fv}static use(){const t=iO(fv.create).current,[r,n]=X.useState(!1);return t.shouldMount=r,t.setShouldMount=n,X.useEffect(t.mountEffect,[r]),t}mount(){return this.mounted||(this.mounted=w7(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...t)})}stop(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...t)})}pulsate(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...t)})}}function b7(){return fv.use()}function w7(){let e,t;const r=new Promise((n,a)=>{e=n,t=a});return r.resolve=e,r.reject=t,r}function S7(e){const{className:t,classes:r,pulsate:n=!1,rippleX:a,rippleY:h,rippleSize:d,in:u,onExited:b,timeout:T}=e,[A,P]=X.useState(!1),R=wr(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),U={width:d,height:d,top:-(d/2)+h,left:-(d/2)+a},j=wr(r.child,A&&r.childLeaving,n&&r.childPulsate);return!u&&!A&&P(!0),X.useEffect(()=>{if(!u&&b!=null){const W=setTimeout(b,T);return()=>{clearTimeout(W)}}},[b,u,T]),We.jsx("span",{className:R,style:U,children:We.jsx("span",{className:j})})}const ys=pn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Qw=550,T7=80,E7=aT`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,C7=aT`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,A7=aT`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,k7=Yt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),P7=Yt(S7,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ys.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${E7};
    animation-duration: ${Qw}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ys.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ys.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ys.childLeaving} {
    opacity: 0;
    animation-name: ${C7};
    animation-duration: ${Qw}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ys.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${A7};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,I7=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:h={},className:d,...u}=n,[b,T]=X.useState([]),A=X.useRef(0),P=X.useRef(null);X.useEffect(()=>{P.current&&(P.current(),P.current=null)},[b]);const R=X.useRef(!1),U=Z2(),j=X.useRef(null),W=X.useRef(null),ee=X.useCallback(te=>{const{pulsate:me,rippleX:fe,rippleY:ge,rippleSize:ie,cb:Re}=te;T(Z=>[...Z,We.jsx(P7,{classes:{ripple:wr(h.ripple,ys.ripple),rippleVisible:wr(h.rippleVisible,ys.rippleVisible),ripplePulsate:wr(h.ripplePulsate,ys.ripplePulsate),child:wr(h.child,ys.child),childLeaving:wr(h.childLeaving,ys.childLeaving),childPulsate:wr(h.childPulsate,ys.childPulsate)},timeout:Qw,pulsate:me,rippleX:fe,rippleY:ge,rippleSize:ie},A.current)]),A.current+=1,P.current=Re},[h]),B=X.useCallback((te={},me={},fe=()=>{})=>{const{pulsate:ge=!1,center:ie=a||me.pulsate,fakeElement:Re=!1}=me;if((te==null?void 0:te.type)==="mousedown"&&R.current){R.current=!1;return}(te==null?void 0:te.type)==="touchstart"&&(R.current=!0);const Z=Re?null:W.current,Te=Z?Z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Ue,Fe,Ze;if(ie||te===void 0||te.clientX===0&&te.clientY===0||!te.clientX&&!te.touches)Ue=Math.round(Te.width/2),Fe=Math.round(Te.height/2);else{const{clientX:Xe,clientY:it}=te.touches&&te.touches.length>0?te.touches[0]:te;Ue=Math.round(Xe-Te.left),Fe=Math.round(it-Te.top)}if(ie)Ze=Math.sqrt((2*Te.width**2+Te.height**2)/3),Ze%2===0&&(Ze+=1);else{const Xe=Math.max(Math.abs((Z?Z.clientWidth:0)-Ue),Ue)*2+2,it=Math.max(Math.abs((Z?Z.clientHeight:0)-Fe),Fe)*2+2;Ze=Math.sqrt(Xe**2+it**2)}te!=null&&te.touches?j.current===null&&(j.current=()=>{ee({pulsate:ge,rippleX:Ue,rippleY:Fe,rippleSize:Ze,cb:fe})},U.start(T7,()=>{j.current&&(j.current(),j.current=null)})):ee({pulsate:ge,rippleX:Ue,rippleY:Fe,rippleSize:Ze,cb:fe})},[a,ee,U]),H=X.useCallback(()=>{B({},{pulsate:!0})},[B]),V=X.useCallback((te,me)=>{if(U.clear(),(te==null?void 0:te.type)==="touchend"&&j.current){j.current(),j.current=null,U.start(0,()=>{V(te,me)});return}j.current=null,T(fe=>fe.length>0?fe.slice(1):fe),P.current=me},[U]);return X.useImperativeHandle(r,()=>({pulsate:H,start:B,stop:V}),[H,B,V]),We.jsx(k7,{className:wr(ys.root,h.root,d),ref:W,...u,children:We.jsx(gT,{component:null,exit:!0,children:b})})});function R7(e){return fn("MuiButtonBase",e)}const M7=pn("MuiButtonBase",["root","disabled","focusVisible"]),L7=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:a}=e,d=_n({root:["root",t&&"disabled",r&&"focusVisible"]},R7,a);return r&&n&&(d.root+=` ${n}`),d},O7=Yt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${M7.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ZO=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:h=!1,children:d,className:u,component:b="button",disabled:T=!1,disableRipple:A=!1,disableTouchRipple:P=!1,focusRipple:R=!1,focusVisibleClassName:U,LinkComponent:j="a",onBlur:W,onClick:ee,onContextMenu:B,onDragLeave:H,onFocus:V,onFocusVisible:te,onKeyDown:me,onKeyUp:fe,onMouseDown:ge,onMouseLeave:ie,onMouseUp:Re,onTouchEnd:Z,onTouchMove:Te,onTouchStart:Ue,tabIndex:Fe=0,TouchRippleProps:Ze,touchRippleRef:Xe,type:it,...Et}=n,Ne=X.useRef(null),Ye=b7(),vt=Ri(Ye.ref,Xe),[Ct,Lt]=X.useState(!1);T&&Ct&&Lt(!1),X.useImperativeHandle(a,()=>({focusVisible:()=>{Lt(!0),Ne.current.focus()}}),[]);const Nt=Ye.shouldMount&&!A&&!T;X.useEffect(()=>{Ct&&R&&!A&&Ye.pulsate()},[A,R,Ct,Ye]);function zt($e,mt,kt=P){return sl(Ft=>(mt&&mt(Ft),kt||Ye[$e](Ft),!0))}const er=zt("start",ge),lr=zt("stop",B),sr=zt("stop",H),br=zt("stop",Re),Ar=zt("stop",$e=>{Ct&&$e.preventDefault(),ie&&ie($e)}),Zt=zt("start",Ue),fr=zt("stop",Z),ir=zt("stop",Te),Fr=zt("stop",$e=>{kk($e.target)||Lt(!1),W&&W($e)},!1),$t=sl($e=>{Ne.current||(Ne.current=$e.currentTarget),kk($e.target)&&(Lt(!0),te&&te($e)),V&&V($e)}),hr=()=>{const $e=Ne.current;return b&&b!=="button"&&!($e.tagName==="A"&&$e.href)},Ie=sl($e=>{R&&!$e.repeat&&Ct&&$e.key===" "&&Ye.stop($e,()=>{Ye.start($e)}),$e.target===$e.currentTarget&&hr()&&$e.key===" "&&$e.preventDefault(),me&&me($e),$e.target===$e.currentTarget&&hr()&&$e.key==="Enter"&&!T&&($e.preventDefault(),ee&&ee($e))}),mn=sl($e=>{R&&$e.key===" "&&Ct&&!$e.defaultPrevented&&Ye.stop($e,()=>{Ye.pulsate($e)}),fe&&fe($e),ee&&$e.target===$e.currentTarget&&hr()&&$e.key===" "&&!$e.defaultPrevented&&ee($e)});let Rr=b;Rr==="button"&&(Et.href||Et.to)&&(Rr=j);const Vt={};Rr==="button"?(Vt.type=it===void 0?"button":it,Vt.disabled=T):(!Et.href&&!Et.to&&(Vt.role="button"),T&&(Vt["aria-disabled"]=T));const _r=Ri(r,Ne),Sr={...n,centerRipple:h,component:b,disabled:T,disableRipple:A,disableTouchRipple:P,focusRipple:R,tabIndex:Fe,focusVisible:Ct},Me=L7(Sr);return We.jsxs(O7,{as:Rr,className:wr(Me.root,u),ownerState:Sr,onBlur:Fr,onClick:ee,onContextMenu:lr,onFocus:$t,onKeyDown:Ie,onKeyUp:mn,onMouseDown:er,onMouseLeave:Ar,onMouseUp:br,onDragLeave:sr,onTouchEnd:fr,onTouchMove:ir,onTouchStart:Zt,ref:_r,tabIndex:T?-1:Fe,type:it,...Vt,...Et,children:[d,Nt?We.jsx(I7,{ref:vt,center:h,...Ze}):null]})});function D7(e){return typeof e.main=="string"}function z7(e,t=[]){if(!D7(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Su(e=[]){return([,t])=>t&&z7(t,e)}function F7(e){return fn("MuiIconButton",e)}const B7=pn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),N7=e=>{const{classes:t,disabled:r,color:n,edge:a,size:h}=e,d={root:["root",r&&"disabled",n!=="default"&&`color${pr(n)}`,a&&`edge${pr(a)}`,`size${pr(h)}`]};return _n(d,F7,t)},$7=Yt(ZO,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${pr(r.color)}`],r.edge&&t[`edge${pr(r.edge)}`],t[`size${pr(r.size)}`]]}})(Vn(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:{disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ba(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Vn(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Su()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Su()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ba((e.vars||e).palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${B7.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}}))),j7=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiIconButton"}),{edge:a=!1,children:h,className:d,color:u="default",disabled:b=!1,disableFocusRipple:T=!1,disableRipple:A=!1,size:P="medium",...R}=n,U={...n,edge:a,color:u,disabled:b,disableFocusRipple:T,disableRipple:A,size:P},j=N7(U);return We.jsx($7,{className:wr(j.root,d),centerRipple:!0,focusRipple:!T,disabled:b,disableRipple:A,ref:r,...R,ownerState:U,children:h})});function U7(e){return fn("MuiTypography",e)}pn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const V7={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},q7=i7(),H7=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:a,variant:h,classes:d}=e,u={root:["root",h,e.align!=="inherit"&&`align${pr(t)}`,r&&"gutterBottom",n&&"noWrap",a&&"paragraph"]};return _n(u,U7,d)},W7=Yt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${pr(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(Vn(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([r,n])=>r!=="inherit"&&n&&typeof n=="object").map(([r,n])=>({props:{variant:r},style:n})),...Object.entries(e.palette).filter(Su()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${pr(r)}`},style:{color:(e.vars||e).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}})),Yk={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},G7=X.forwardRef(function(t,r){const{color:n,...a}=Tn({props:t,name:"MuiTypography"}),h=!V7[n],d=q7({...a,...h&&{color:n}}),{align:u="inherit",className:b,component:T,gutterBottom:A=!1,noWrap:P=!1,paragraph:R=!1,variant:U="body1",variantMapping:j=Yk,...W}=d,ee={...d,align:u,color:n,className:b,component:T,gutterBottom:A,noWrap:P,paragraph:R,variant:U,variantMapping:j},B=T||(R?"p":j[U]||Yk[U])||"span",H=H7(ee);return We.jsx(W7,{as:B,ref:r,className:wr(H.root,b),...W,ownerState:ee,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...W.style}})});function Z7(e){return typeof e=="function"?e():e}const K7=X.forwardRef(function(t,r){const{children:n,container:a,disablePortal:h=!1}=t,[d,u]=X.useState(null),b=Ri(X.isValidElement(n)?of(n):null,r);if(Dc(()=>{h||u(Z7(a)||document.body)},[a,h]),Dc(()=>{if(d&&!h)return Uw(r,d),()=>{Uw(r,null)}},[r,d,h]),h){if(X.isValidElement(n)){const T={ref:b};return X.cloneElement(n,T)}return We.jsx(X.Fragment,{children:n})}return We.jsx(X.Fragment,{children:d&&Km.createPortal(n,d)})});function $y(e){return parseInt(e,10)||0}const X7={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Y7(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const J7=X.forwardRef(function(t,r){const{onChange:n,maxRows:a,minRows:h=1,style:d,value:u,...b}=t,{current:T}=X.useRef(u!=null),A=X.useRef(null),P=Ri(r,A),R=X.useRef(null),U=X.useRef(null),j=X.useCallback(()=>{const B=A.current,V=ml(B).getComputedStyle(B);if(V.width==="0px")return{outerHeightStyle:0,overflowing:!1};const te=U.current;te.style.width=V.width,te.value=B.value||t.placeholder||"x",te.value.slice(-1)===`
`&&(te.value+=" ");const me=V.boxSizing,fe=$y(V.paddingBottom)+$y(V.paddingTop),ge=$y(V.borderBottomWidth)+$y(V.borderTopWidth),ie=te.scrollHeight;te.value="x";const Re=te.scrollHeight;let Z=ie;h&&(Z=Math.max(Number(h)*Re,Z)),a&&(Z=Math.min(Number(a)*Re,Z)),Z=Math.max(Z,Re);const Te=Z+(me==="border-box"?fe+ge:0),Ue=Math.abs(Z-ie)<=1;return{outerHeightStyle:Te,overflowing:Ue}},[a,h,t.placeholder]),W=X.useCallback(()=>{const B=j();if(Y7(B))return;const H=B.outerHeightStyle,V=A.current;R.current!==H&&(R.current=H,V.style.height=`${H}px`),V.style.overflow=B.overflowing?"hidden":""},[j]);Dc(()=>{const B=()=>{W()};let H;const V=rO(B),te=A.current,me=ml(te);me.addEventListener("resize",V);let fe;return typeof ResizeObserver<"u"&&(fe=new ResizeObserver(B),fe.observe(te)),()=>{V.clear(),cancelAnimationFrame(H),me.removeEventListener("resize",V),fe&&fe.disconnect()}},[j,W]),Dc(()=>{W()});const ee=B=>{T||W(),n&&n(B)};return We.jsxs(X.Fragment,{children:[We.jsx("textarea",{value:u,onChange:ee,ref:P,rows:h,style:d,...b}),We.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:U,tabIndex:-1,style:{...X7.shadow,...d,paddingTop:0,paddingBottom:0}})]})});function eS(e){return typeof e=="string"}function lf({props:e,states:t,muiFormControl:r}){return t.reduce((n,a)=>(n[a]=e[a],r&&typeof e[a]>"u"&&(n[a]=r[a]),n),{})}const _T=X.createContext(void 0);function uf(){return X.useContext(_T)}function Jk(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function pv(e,t=!1){return e&&(Jk(e.value)&&e.value!==""||t&&Jk(e.defaultValue)&&e.defaultValue!=="")}function Q7(e){return e.startAdornment}function e9(e){return fn("MuiInputBase",e)}const Hd=pn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Qk;const $0=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${pr(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},j0=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},t9=e=>{const{classes:t,color:r,disabled:n,error:a,endAdornment:h,focused:d,formControl:u,fullWidth:b,hiddenLabel:T,multiline:A,readOnly:P,size:R,startAdornment:U,type:j}=e,W={root:["root",`color${pr(r)}`,n&&"disabled",a&&"error",b&&"fullWidth",d&&"focused",u&&"formControl",R&&R!=="medium"&&`size${pr(R)}`,A&&"multiline",U&&"adornedStart",h&&"adornedEnd",T&&"hiddenLabel",P&&"readOnly"],input:["input",n&&"disabled",j==="search"&&"inputTypeSearch",A&&"inputMultiline",R==="small"&&"inputSizeSmall",T&&"inputHiddenLabel",U&&"inputAdornedStart",h&&"inputAdornedEnd",P&&"readOnly"]};return _n(W,e9,t)},U0=Yt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:$0})(Vn(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Hd.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),V0=Yt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:j0})(Vn(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},a=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Hd.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${Hd.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:h})=>!h.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:h})=>h.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),eP=dT({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),vT=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:h,autoFocus:d,className:u,color:b,components:T={},componentsProps:A={},defaultValue:P,disabled:R,disableInjectingGlobalStyles:U,endAdornment:j,error:W,fullWidth:ee=!1,id:B,inputComponent:H="input",inputProps:V={},inputRef:te,margin:me,maxRows:fe,minRows:ge,multiline:ie=!1,name:Re,onBlur:Z,onChange:Te,onClick:Ue,onFocus:Fe,onKeyDown:Ze,onKeyUp:Xe,placeholder:it,readOnly:Et,renderSuffix:Ne,rows:Ye,size:vt,slotProps:Ct={},slots:Lt={},startAdornment:Nt,type:zt="text",value:er,...lr}=n,sr=V.value!=null?V.value:er,{current:br}=X.useRef(sr!=null),Ar=X.useRef(),Zt=X.useCallback(rr=>{},[]),fr=Ri(Ar,te,V.ref,Zt),[ir,Fr]=X.useState(!1),$t=uf(),hr=lf({props:n,muiFormControl:$t,states:["color","disabled","error","hiddenLabel","size","required","filled"]});hr.focused=$t?$t.focused:ir,X.useEffect(()=>{!$t&&R&&ir&&(Fr(!1),Z&&Z())},[$t,R,ir,Z]);const Ie=$t&&$t.onFilled,mn=$t&&$t.onEmpty,Rr=X.useCallback(rr=>{pv(rr)?Ie&&Ie():mn&&mn()},[Ie,mn]);Dc(()=>{br&&Rr({value:sr})},[sr,Rr,br]);const Vt=rr=>{Fe&&Fe(rr),V.onFocus&&V.onFocus(rr),$t&&$t.onFocus?$t.onFocus(rr):Fr(!0)},_r=rr=>{Z&&Z(rr),V.onBlur&&V.onBlur(rr),$t&&$t.onBlur?$t.onBlur(rr):Fr(!1)},Sr=(rr,...qn)=>{if(!br){const et=rr.target||Ar.current;if(et==null)throw new Error(pl(1));Rr({value:et.value})}V.onChange&&V.onChange(rr,...qn),Te&&Te(rr,...qn)};X.useEffect(()=>{Rr(Ar.current)},[]);const Me=rr=>{Ar.current&&rr.currentTarget===rr.target&&Ar.current.focus(),Ue&&Ue(rr)};let $e=H,mt=V;ie&&$e==="input"&&(Ye?mt={type:void 0,minRows:Ye,maxRows:Ye,...mt}:mt={type:void 0,maxRows:fe,minRows:ge,...mt},$e=J7);const kt=rr=>{Rr(rr.animationName==="mui-auto-fill-cancel"?Ar.current:{value:"x"})};X.useEffect(()=>{$t&&$t.setAdornedStart(!!Nt)},[$t,Nt]);const Ft={...n,color:hr.color||"primary",disabled:hr.disabled,endAdornment:j,error:hr.error,focused:hr.focused,formControl:$t,fullWidth:ee,hiddenLabel:hr.hiddenLabel,multiline:ie,size:hr.size,startAdornment:Nt,type:zt},tr=t9(Ft),He=Lt.root||T.Root||U0,Mr=Ct.root||A.root||{},Tr=Lt.input||T.Input||V0;return mt={...mt,...Ct.input??A.input},We.jsxs(X.Fragment,{children:[!U&&typeof eP=="function"&&(Qk||(Qk=We.jsx(eP,{}))),We.jsxs(He,{...Mr,ref:r,onClick:Me,...lr,...!eS(He)&&{ownerState:{...Ft,...Mr.ownerState}},className:wr(tr.root,Mr.className,u,Et&&"MuiInputBase-readOnly"),children:[Nt,We.jsx(_T.Provider,{value:null,children:We.jsx(Tr,{"aria-invalid":hr.error,"aria-describedby":a,autoComplete:h,autoFocus:d,defaultValue:P,disabled:hr.disabled,id:B,onAnimationStart:kt,name:Re,placeholder:it,readOnly:Et,required:hr.required,rows:Ye,value:sr,onKeyDown:Ze,onKeyUp:Xe,type:zt,...mt,...!eS(Tr)&&{as:$e,ownerState:{...Ft,...mt.ownerState}},ref:fr,className:wr(tr.input,mt.className,Et&&"MuiInputBase-readOnly"),onBlur:_r,onChange:Sr,onFocus:Vt})}),j,Ne?Ne({...hr,startAdornment:Nt}):null]})]})});function r9(e){return fn("MuiInput",e)}const Op={...Hd,...pn("MuiInput",["root","underline","input"])};function n9(e){return fn("MuiOutlinedInput",e)}const fa={...Hd,...pn("MuiOutlinedInput",["root","notchedOutline","input"])};function i9(e){return fn("MuiFilledInput",e)}const oc={...Hd,...pn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},o9=UO(We.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),s9={entering:{opacity:1},entered:{opacity:1}},a9=X.forwardRef(function(t,r){const n=P0(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:h,appear:d=!0,children:u,easing:b,in:T,onEnter:A,onEntered:P,onEntering:R,onExit:U,onExited:j,onExiting:W,style:ee,timeout:B=a,TransitionComponent:H=La,...V}=t,te=X.useRef(null),me=Ri(te,of(u),r),fe=Ze=>Xe=>{if(Ze){const it=te.current;Xe===void 0?Ze(it):Ze(it,Xe)}},ge=fe(R),ie=fe((Ze,Xe)=>{GO(Ze);const it=dv({style:ee,timeout:B,easing:b},{mode:"enter"});Ze.style.webkitTransition=n.transitions.create("opacity",it),Ze.style.transition=n.transitions.create("opacity",it),A&&A(Ze,Xe)}),Re=fe(P),Z=fe(W),Te=fe(Ze=>{const Xe=dv({style:ee,timeout:B,easing:b},{mode:"exit"});Ze.style.webkitTransition=n.transitions.create("opacity",Xe),Ze.style.transition=n.transitions.create("opacity",Xe),U&&U(Ze)}),Ue=fe(j),Fe=Ze=>{h&&h(te.current,Ze)};return We.jsx(H,{appear:d,in:T,nodeRef:te,onEnter:ie,onEntered:Re,onEntering:ge,onExit:Te,onExited:Ue,onExiting:Z,addEndListener:Fe,timeout:B,...V,children:(Ze,Xe)=>X.cloneElement(u,{style:{opacity:0,visibility:Ze==="exited"&&!T?"hidden":void 0,...s9[Ze],...ee,...u.props.style},ref:me,...Xe})})});function l9(e){return fn("MuiBackdrop",e)}pn("MuiBackdrop",["root","invisible"]);const u9=e=>{const{ownerState:t,...r}=e;return r},c9=e=>{const{classes:t,invisible:r}=e;return _n({root:["root",r&&"invisible"]},l9,t)},h9=Yt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),d9=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiBackdrop"}),{children:a,className:h,component:d="div",invisible:u=!1,open:b,components:T={},componentsProps:A={},slotProps:P={},slots:R={},TransitionComponent:U,transitionDuration:j,...W}=n,ee={...n,component:d,invisible:u},B=c9(ee),H={transition:U,root:T.Root,...R},V={...A,...P},te={slots:H,slotProps:V},[me,fe]=Hs("root",{elementType:h9,externalForwardedProps:te,className:wr(B.root,h),ownerState:ee}),[ge,ie]=Hs("transition",{elementType:a9,externalForwardedProps:te,ownerState:ee}),Re=u9(ie);return We.jsx(ge,{in:b,timeout:j,...W,...Re,children:We.jsx(me,{"aria-hidden":!0,...fe,classes:B,ref:r,children:a})})}),f9=pn("MuiBox",["root"]),p9=$O(),db=J8({themeId:ng,defaultTheme:p9,defaultClassName:f9.root,generateClassName:sO.generate});function m9(e){return fn("MuiButton",e)}const td=pn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),g9=X.createContext({}),y9=X.createContext(void 0),_9=e=>{const{color:t,disableElevation:r,fullWidth:n,size:a,variant:h,classes:d}=e,u={root:["root",h,`${h}${pr(t)}`,`size${pr(a)}`,`${h}Size${pr(a)}`,`color${pr(t)}`,r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${pr(a)}`],endIcon:["icon","endIcon",`iconSize${pr(a)}`]},b=_n(u,m9,d);return{...d,...b}},KO=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],v9=Yt(ZO,{shouldForwardProp:e=>ta(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${pr(r.color)}`],t[`size${pr(r.size)}`],t[`${r.variant}Size${pr(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})(Vn(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${td.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${td.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${td.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${td.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Su()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.5)`:ba(e.palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ba(e.palette[n].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ba(e.palette[n].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ba(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ba(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${td.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${td.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),x9=Yt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,t[`iconSize${pr(r.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...KO]}),b9=Yt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,t[`iconSize${pr(r.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...KO]}),w9=X.forwardRef(function(t,r){const n=X.useContext(g9),a=X.useContext(y9),h=Rm(n,t),d=Tn({props:h,name:"MuiButton"}),{children:u,color:b="primary",component:T="button",className:A,disabled:P=!1,disableElevation:R=!1,disableFocusRipple:U=!1,endIcon:j,focusVisibleClassName:W,fullWidth:ee=!1,size:B="medium",startIcon:H,type:V,variant:te="text",...me}=d,fe={...d,color:b,component:T,disabled:P,disableElevation:R,disableFocusRipple:U,fullWidth:ee,size:B,type:V,variant:te},ge=_9(fe),ie=H&&We.jsx(x9,{className:ge.startIcon,ownerState:fe,children:H}),Re=j&&We.jsx(b9,{className:ge.endIcon,ownerState:fe,children:j}),Z=a||"";return We.jsxs(v9,{ownerState:fe,className:wr(n.className,ge.root,A,Z),component:T,disabled:P,focusRipple:!U,focusVisibleClassName:wr(ge.focusVisible,W),ref:r,type:V,...me,classes:ge,children:[ie,u,Re]})});function S9(e){return fn("MuiCard",e)}pn("MuiCard",["root"]);const T9=e=>{const{classes:t}=e;return _n({root:["root"]},S9,t)},E9=Yt(yT,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),C9=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiCard"}),{className:a,raised:h=!1,...d}=n,u={...n,raised:h},b=T9(u);return We.jsx(E9,{className:wr(b.root,a),elevation:h?8:void 0,ref:r,ownerState:u,...d})});function tP(e){return e.substring(2).toLowerCase()}function A9(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function k9(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:a,touchEvent:h="onTouchEnd"}=e,d=X.useRef(!1),u=X.useRef(null),b=X.useRef(!1),T=X.useRef(!1);X.useEffect(()=>(setTimeout(()=>{b.current=!0},0),()=>{b.current=!1}),[]);const A=Ri(of(t),u),P=sl(j=>{const W=T.current;T.current=!1;const ee=Po(u.current);if(!b.current||!u.current||"clientX"in j&&A9(j,ee))return;if(d.current){d.current=!1;return}let B;j.composedPath?B=j.composedPath().includes(u.current):B=!ee.documentElement.contains(j.target)||u.current.contains(j.target),!B&&(r||!W)&&a(j)}),R=j=>W=>{T.current=!0;const ee=t.props[j];ee&&ee(W)},U={ref:A};return h!==!1&&(U[h]=R(h)),X.useEffect(()=>{if(h!==!1){const j=tP(h),W=Po(u.current),ee=()=>{d.current=!0};return W.addEventListener(j,P),W.addEventListener("touchmove",ee),()=>{W.removeEventListener(j,P),W.removeEventListener("touchmove",ee)}}},[P,h]),n!==!1&&(U[n]=R(n)),X.useEffect(()=>{if(n!==!1){const j=tP(n),W=Po(u.current);return W.addEventListener(j,P),()=>{W.removeEventListener(j,P)}}},[P,n]),We.jsx(X.Fragment,{children:X.cloneElement(t,U)})}const tS=typeof dT({})=="function",P9=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),I9=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),XO=(e,t=!1)=>{var h,d;const r={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([u,b])=>{var A,P;const T=e.getColorSchemeSelector(u);T.startsWith("@")?r[T]={":root":{colorScheme:(A=b.palette)==null?void 0:A.mode}}:r[T.replace(/\s*&/,"")]={colorScheme:(P=b.palette)==null?void 0:P.mode}});let n={html:P9(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...I9(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r};const a=(d=(h=e.components)==null?void 0:h.MuiCssBaseline)==null?void 0:d.styleOverrides;return a&&(n=[n,a]),n},b_="mui-ecs",R9=e=>{const t=XO(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[`:root:has(${b_})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([n,a])=>{var d,u;const h=e.getColorSchemeSelector(n);h.startsWith("@")?r[h]={[`:root:not(:has(.${b_}))`]:{colorScheme:(d=a.palette)==null?void 0:d.mode}}:r[h.replace(/\s*&/,"")]={[`&:not(:has(.${b_}))`]:{colorScheme:(u=a.palette)==null?void 0:u.mode}}}),t},M9=dT(tS?({theme:e,enableColorScheme:t})=>XO(e,t):({theme:e})=>R9(e));function L9(e){const t=Tn({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:n=!1}=t;return We.jsxs(X.Fragment,{children:[tS&&We.jsx(M9,{enableColorScheme:n}),!tS&&!n&&We.jsx("span",{className:b_,style:{display:"none"}}),r]})}function O9(e){const t=Po(e);return t.body===e?ml(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function om(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function rP(e){return parseInt(ml(e).getComputedStyle(e).paddingRight,10)||0}function D9(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function nP(e,t,r,n,a){const h=[t,r,...n];[].forEach.call(e.children,d=>{const u=!h.includes(d),b=!D9(d);u&&b&&om(d,a)})}function fb(e,t){let r=-1;return e.some((n,a)=>t(n)?(r=a,!0):!1),r}function z9(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(O9(n)){const d=oO(ml(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${rP(n)+d}px`;const u=Po(n).querySelectorAll(".mui-fixed");[].forEach.call(u,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${rP(b)+d}px`})}let h;if(n.parentNode instanceof DocumentFragment)h=Po(n).body;else{const d=n.parentElement,u=ml(n);h=(d==null?void 0:d.nodeName)==="HTML"&&u.getComputedStyle(d).overflowY==="scroll"?d:n}r.push({value:h.style.overflow,property:"overflow",el:h},{value:h.style.overflowX,property:"overflow-x",el:h},{value:h.style.overflowY,property:"overflow-y",el:h}),h.style.overflow="hidden"}return()=>{r.forEach(({value:h,el:d,property:u})=>{h?d.style.setProperty(u,h):d.style.removeProperty(u)})}}function F9(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class B9{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&om(t.modalRef,!1);const a=F9(r);nP(r,t.mount,t.modalRef,a,!0);const h=fb(this.containers,d=>d.container===r);return h!==-1?(this.containers[h].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:a}),n)}mount(t,r){const n=fb(this.containers,h=>h.modals.includes(t)),a=this.containers[n];a.restore||(a.restore=z9(a,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const a=fb(this.containers,d=>d.modals.includes(t)),h=this.containers[a];if(h.modals.splice(h.modals.indexOf(t),1),this.modals.splice(n,1),h.modals.length===0)h.restore&&h.restore(),t.modalRef&&om(t.modalRef,r),nP(h.container,t.mount,t.modalRef,h.hiddenSiblings,!1),this.containers.splice(a,1);else{const d=h.modals[h.modals.length-1];d.modalRef&&om(d.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const N9=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function $9(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function j9(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function U9(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||j9(e))}function V9(e){const t=[],r=[];return Array.from(e.querySelectorAll(N9)).forEach((n,a)=>{const h=$9(n);h===-1||!U9(n)||(h===0?t.push(n):r.push({documentOrder:a,tabIndex:h,node:n}))}),r.sort((n,a)=>n.tabIndex===a.tabIndex?n.documentOrder-a.documentOrder:n.tabIndex-a.tabIndex).map(n=>n.node).concat(t)}function q9(){return!0}function H9(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:a=!1,getTabbable:h=V9,isEnabled:d=q9,open:u}=e,b=X.useRef(!1),T=X.useRef(null),A=X.useRef(null),P=X.useRef(null),R=X.useRef(null),U=X.useRef(!1),j=X.useRef(null),W=Ri(of(t),j),ee=X.useRef(null);X.useEffect(()=>{!u||!j.current||(U.current=!r)},[r,u]),X.useEffect(()=>{if(!u||!j.current)return;const V=Po(j.current);return j.current.contains(V.activeElement)||(j.current.hasAttribute("tabIndex")||j.current.setAttribute("tabIndex","-1"),U.current&&j.current.focus()),()=>{a||(P.current&&P.current.focus&&(b.current=!0,P.current.focus()),P.current=null)}},[u]),X.useEffect(()=>{if(!u||!j.current)return;const V=Po(j.current),te=ge=>{ee.current=ge,!(n||!d()||ge.key!=="Tab")&&V.activeElement===j.current&&ge.shiftKey&&(b.current=!0,A.current&&A.current.focus())},me=()=>{var Re,Z;const ge=j.current;if(ge===null)return;if(!V.hasFocus()||!d()||b.current){b.current=!1;return}if(ge.contains(V.activeElement)||n&&V.activeElement!==T.current&&V.activeElement!==A.current)return;if(V.activeElement!==R.current)R.current=null;else if(R.current!==null)return;if(!U.current)return;let ie=[];if((V.activeElement===T.current||V.activeElement===A.current)&&(ie=h(j.current)),ie.length>0){const Te=!!((Re=ee.current)!=null&&Re.shiftKey&&((Z=ee.current)==null?void 0:Z.key)==="Tab"),Ue=ie[0],Fe=ie[ie.length-1];typeof Ue!="string"&&typeof Fe!="string"&&(Te?Fe.focus():Ue.focus())}else ge.focus()};V.addEventListener("focusin",me),V.addEventListener("keydown",te,!0);const fe=setInterval(()=>{V.activeElement&&V.activeElement.tagName==="BODY"&&me()},50);return()=>{clearInterval(fe),V.removeEventListener("focusin",me),V.removeEventListener("keydown",te,!0)}},[r,n,a,d,u,h]);const B=V=>{P.current===null&&(P.current=V.relatedTarget),U.current=!0,R.current=V.target;const te=t.props.onFocus;te&&te(V)},H=V=>{P.current===null&&(P.current=V.relatedTarget),U.current=!0};return We.jsxs(X.Fragment,{children:[We.jsx("div",{tabIndex:u?0:-1,onFocus:H,ref:T,"data-testid":"sentinelStart"}),X.cloneElement(t,{ref:W,onFocus:B}),We.jsx("div",{tabIndex:u?0:-1,onFocus:H,ref:A,"data-testid":"sentinelEnd"})]})}function W9(e){return typeof e=="function"?e():e}function G9(e){return e?e.props.hasOwnProperty("in"):!1}const jy=new B9;function Z9(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:a=!1,onTransitionEnter:h,onTransitionExited:d,children:u,onClose:b,open:T,rootRef:A}=e,P=X.useRef({}),R=X.useRef(null),U=X.useRef(null),j=Ri(U,A),[W,ee]=X.useState(!T),B=G9(u);let H=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(H=!1);const V=()=>Po(R.current),te=()=>(P.current.modalRef=U.current,P.current.mount=R.current,P.current),me=()=>{jy.mount(te(),{disableScrollLock:n}),U.current&&(U.current.scrollTop=0)},fe=sl(()=>{const Xe=W9(t)||V().body;jy.add(te(),Xe),U.current&&me()}),ge=()=>jy.isTopModal(te()),ie=sl(Xe=>{R.current=Xe,Xe&&(T&&ge()?me():U.current&&om(U.current,H))}),Re=X.useCallback(()=>{jy.remove(te(),H)},[H]);X.useEffect(()=>()=>{Re()},[Re]),X.useEffect(()=>{T?fe():(!B||!a)&&Re()},[T,Re,B,a,fe]);const Z=Xe=>it=>{var Et;(Et=Xe.onKeyDown)==null||Et.call(Xe,it),!(it.key!=="Escape"||it.which===229||!ge())&&(r||(it.stopPropagation(),b&&b(it,"escapeKeyDown")))},Te=Xe=>it=>{var Et;(Et=Xe.onClick)==null||Et.call(Xe,it),it.target===it.currentTarget&&b&&b(it,"backdropClick")};return{getRootProps:(Xe={})=>{const it=sv(e);delete it.onTransitionEnter,delete it.onTransitionExited;const Et={...it,...Xe};return{role:"presentation",...Et,onKeyDown:Z(Et),ref:j}},getBackdropProps:(Xe={})=>{const it=Xe;return{"aria-hidden":!0,...it,onClick:Te(it),open:T}},getTransitionProps:()=>{const Xe=()=>{ee(!1),h&&h()},it=()=>{ee(!0),d&&d(),a&&Re()};return{onEnter:Sk(Xe,u==null?void 0:u.props.onEnter),onExited:Sk(it,u==null?void 0:u.props.onExited)}},rootRef:j,portalRef:ie,isTopModal:ge,exited:W,hasTransition:B}}function K9(e){return fn("MuiModal",e)}pn("MuiModal",["root","hidden","backdrop"]);const X9=e=>{const{open:t,exited:r,classes:n}=e;return _n({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},K9,n)},Y9=Yt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(Vn(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),J9=Yt(d9,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Q9=X.forwardRef(function(t,r){const n=Tn({name:"MuiModal",props:t}),{BackdropComponent:a=J9,BackdropProps:h,classes:d,className:u,closeAfterTransition:b=!1,children:T,container:A,component:P,components:R={},componentsProps:U={},disableAutoFocus:j=!1,disableEnforceFocus:W=!1,disableEscapeKeyDown:ee=!1,disablePortal:B=!1,disableRestoreFocus:H=!1,disableScrollLock:V=!1,hideBackdrop:te=!1,keepMounted:me=!1,onBackdropClick:fe,onClose:ge,onTransitionEnter:ie,onTransitionExited:Re,open:Z,slotProps:Te={},slots:Ue={},theme:Fe,...Ze}=n,Xe={...n,closeAfterTransition:b,disableAutoFocus:j,disableEnforceFocus:W,disableEscapeKeyDown:ee,disablePortal:B,disableRestoreFocus:H,disableScrollLock:V,hideBackdrop:te,keepMounted:me},{getRootProps:it,getBackdropProps:Et,getTransitionProps:Ne,portalRef:Ye,isTopModal:vt,exited:Ct,hasTransition:Lt}=Z9({...Xe,rootRef:r}),Nt={...Xe,exited:Ct},zt=X9(Nt),er={};if(T.props.tabIndex===void 0&&(er.tabIndex="-1"),Lt){const{onEnter:ir,onExited:Fr}=Ne();er.onEnter=ir,er.onExited=Fr}const lr={...Ze,slots:{root:R.Root,backdrop:R.Backdrop,...Ue},slotProps:{...U,...Te}},[sr,br]=Hs("root",{elementType:Y9,externalForwardedProps:lr,getSlotProps:it,additionalProps:{ref:r,as:P},ownerState:Nt,className:wr(u,zt==null?void 0:zt.root,!Nt.open&&Nt.exited&&(zt==null?void 0:zt.hidden))}),[Ar,Zt]=Hs("backdrop",{elementType:a,externalForwardedProps:lr,additionalProps:h,getSlotProps:ir=>Et({...ir,onClick:Fr=>{fe&&fe(Fr),ir!=null&&ir.onClick&&ir.onClick(Fr)}}),className:wr(h==null?void 0:h.className,zt==null?void 0:zt.backdrop),ownerState:Nt}),fr=Ri(h==null?void 0:h.ref,Zt.ref);return!me&&!Z&&(!Lt||Ct)?null:We.jsx(K7,{ref:Ye,container:A,disablePortal:B,children:We.jsxs(sr,{...br,children:[!te&&a?We.jsx(Ar,{...Zt,ref:fr}):null,We.jsx(H9,{disableEnforceFocus:W,disableAutoFocus:j,disableRestoreFocus:H,isEnabled:vt,open:Z,children:X.cloneElement(T,er)})]})})}),eq=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:a,size:h,hiddenLabel:d,multiline:u}=e,b={root:["root",!r&&"underline",n&&"adornedStart",a&&"adornedEnd",h==="small"&&`size${pr(h)}`,d&&"hiddenLabel",u&&"multiline"],input:["input"]},T=_n(b,i9,t);return{...t,...T}},tq=Yt(U0,{shouldForwardProp:e=>ta(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...$0(e,t),!r.disableUnderline&&t.underline]}})(Vn(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${oc.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${oc.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:h},variants:[{props:({ownerState:d})=>!d.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${oc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${oc.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${oc.disabled}, .${oc.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${oc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Su()).map(([d])=>{var u;return{props:{disableUnderline:!1,color:d},style:{"&::after":{borderBottom:`2px solid ${(u=(e.vars||e).palette[d])==null?void 0:u.main}`}}}}),{props:({ownerState:d})=>d.startAdornment,style:{paddingLeft:12}},{props:({ownerState:d})=>d.endAdornment,style:{paddingRight:12}},{props:({ownerState:d})=>d.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:d,size:u})=>d.multiline&&u==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel&&d.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),rq=Yt(V0,{name:"MuiFilledInput",slot:"Input",overridesResolver:j0})(Vn(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),mv=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:h={},componentsProps:d,fullWidth:u=!1,hiddenLabel:b,inputComponent:T="input",multiline:A=!1,slotProps:P,slots:R={},type:U="text",...j}=n,W={...n,disableUnderline:a,fullWidth:u,inputComponent:T,multiline:A,type:U},ee=eq(n),B={root:{ownerState:W},input:{ownerState:W}},H=P??d?vi(B,P??d):B,V=R.root??h.Root??tq,te=R.input??h.Input??rq;return We.jsx(vT,{slots:{root:V,input:te},componentsProps:H,fullWidth:u,inputComponent:T,multiline:A,ref:r,type:U,...j,classes:ee})});mv&&(mv.muiName="Input");function nq(e){return fn("MuiFormControl",e)}pn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const iq=e=>{const{classes:t,margin:r,fullWidth:n}=e,a={root:["root",r!=="none"&&`margin${pr(r)}`,n&&"fullWidth"]};return _n(a,nq,t)},oq=Yt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...t[`margin${pr(e.margin)}`],...e.fullWidth&&t.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),rS=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiFormControl"}),{children:a,className:h,color:d="primary",component:u="div",disabled:b=!1,error:T=!1,focused:A,fullWidth:P=!1,hiddenLabel:R=!1,margin:U="none",required:j=!1,size:W="medium",variant:ee="outlined",...B}=n,H={...n,color:d,component:u,disabled:b,error:T,fullWidth:P,hiddenLabel:R,margin:U,required:j,size:W,variant:ee},V=iq(H),[te,me]=X.useState(()=>{let Fe=!1;return a&&X.Children.forEach(a,Ze=>{if(!ob(Ze,["Input","Select"]))return;const Xe=ob(Ze,["Select"])?Ze.props.input:Ze;Xe&&Q7(Xe.props)&&(Fe=!0)}),Fe}),[fe,ge]=X.useState(()=>{let Fe=!1;return a&&X.Children.forEach(a,Ze=>{ob(Ze,["Input","Select"])&&(pv(Ze.props,!0)||pv(Ze.props.inputProps,!0))&&(Fe=!0)}),Fe}),[ie,Re]=X.useState(!1);b&&ie&&Re(!1);const Z=A!==void 0&&!b?A:ie;let Te;X.useRef(!1);const Ue=X.useMemo(()=>({adornedStart:te,setAdornedStart:me,color:d,disabled:b,error:T,filled:fe,focused:Z,fullWidth:P,hiddenLabel:R,size:W,onBlur:()=>{Re(!1)},onEmpty:()=>{ge(!1)},onFilled:()=>{ge(!0)},onFocus:()=>{Re(!0)},registerEffect:Te,required:j,variant:ee}),[te,d,b,T,fe,Z,P,R,Te,j,W,ee]);return We.jsx(_T.Provider,{value:Ue,children:We.jsx(oq,{as:u,ownerState:H,className:wr(V.root,h),ref:r,...B,children:a})})});function sq(e){return fn("MuiFormHelperText",e)}const iP=pn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oP;const aq=e=>{const{classes:t,contained:r,size:n,disabled:a,error:h,filled:d,focused:u,required:b}=e,T={root:["root",a&&"disabled",h&&"error",n&&`size${pr(n)}`,r&&"contained",u&&"focused",d&&"filled",b&&"required"]};return _n(T,sq,t)},lq=Yt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${pr(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(Vn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${iP.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${iP.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),uq=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiFormHelperText"}),{children:a,className:h,component:d="p",disabled:u,error:b,filled:T,focused:A,margin:P,required:R,variant:U,...j}=n,W=uf(),ee=lf({props:n,muiFormControl:W,states:["variant","size","disabled","error","filled","focused","required"]}),B={...n,component:d,contained:ee.variant==="filled"||ee.variant==="outlined",variant:ee.variant,size:ee.size,disabled:ee.disabled,error:ee.error,filled:ee.filled,focused:ee.focused,required:ee.required};delete B.ownerState;const H=aq(B);return We.jsx(lq,{as:d,className:wr(H.root,h),ref:r,...j,ownerState:B,children:a===" "?oP||(oP=We.jsx("span",{className:"notranslate",children:"​"})):a})});function cq(e){return fn("MuiFormLabel",e)}const sm=pn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),hq=e=>{const{classes:t,color:r,focused:n,disabled:a,error:h,filled:d,required:u}=e,b={root:["root",`color${pr(r)}`,a&&"disabled",h&&"error",d&&"filled",n&&"focused",u&&"required"],asterisk:["asterisk",h&&"error"]};return _n(b,cq,t)},dq=Yt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...e.color==="secondary"&&t.colorSecondary,...e.filled&&t.filled})})(Vn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Su()).map(([t])=>({props:{color:t},style:{[`&.${sm.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${sm.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${sm.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),fq=Yt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Vn(({theme:e})=>({[`&.${sm.error}`]:{color:(e.vars||e).palette.error.main}}))),nS=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiFormLabel"}),{children:a,className:h,color:d,component:u="label",disabled:b,error:T,filled:A,focused:P,required:R,...U}=n,j=uf(),W=lf({props:n,muiFormControl:j,states:["color","required","focused","disabled","error","filled"]}),ee={...n,color:W.color||"primary",component:u,disabled:W.disabled,error:W.error,filled:W.filled,focused:W.focused,required:W.required},B=hq(ee);return We.jsxs(dq,{as:u,ownerState:ee,className:wr(B.root,h),ref:r,...U,children:[a,W.required&&We.jsxs(fq,{ownerState:ee,"aria-hidden":!0,className:B.asterisk,children:[" ","*"]})]})});function iS(e){return`scale(${e}, ${e**2})`}const pq={entering:{opacity:1,transform:iS(1)},entered:{opacity:1,transform:"none"}},pb=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),gv=X.forwardRef(function(t,r){const{addEndListener:n,appear:a=!0,children:h,easing:d,in:u,onEnter:b,onEntered:T,onEntering:A,onExit:P,onExited:R,onExiting:U,style:j,timeout:W="auto",TransitionComponent:ee=La,...B}=t,H=Z2(),V=X.useRef(),te=P0(),me=X.useRef(null),fe=Ri(me,of(h),r),ge=Xe=>it=>{if(Xe){const Et=me.current;it===void 0?Xe(Et):Xe(Et,it)}},ie=ge(A),Re=ge((Xe,it)=>{GO(Xe);const{duration:Et,delay:Ne,easing:Ye}=dv({style:j,timeout:W,easing:d},{mode:"enter"});let vt;W==="auto"?(vt=te.transitions.getAutoHeightDuration(Xe.clientHeight),V.current=vt):vt=Et,Xe.style.transition=[te.transitions.create("opacity",{duration:vt,delay:Ne}),te.transitions.create("transform",{duration:pb?vt:vt*.666,delay:Ne,easing:Ye})].join(","),b&&b(Xe,it)}),Z=ge(T),Te=ge(U),Ue=ge(Xe=>{const{duration:it,delay:Et,easing:Ne}=dv({style:j,timeout:W,easing:d},{mode:"exit"});let Ye;W==="auto"?(Ye=te.transitions.getAutoHeightDuration(Xe.clientHeight),V.current=Ye):Ye=it,Xe.style.transition=[te.transitions.create("opacity",{duration:Ye,delay:Et}),te.transitions.create("transform",{duration:pb?Ye:Ye*.666,delay:pb?Et:Et||Ye*.333,easing:Ne})].join(","),Xe.style.opacity=0,Xe.style.transform=iS(.75),P&&P(Xe)}),Fe=ge(R),Ze=Xe=>{W==="auto"&&H.start(V.current||0,Xe),n&&n(me.current,Xe)};return We.jsx(ee,{appear:a,in:u,nodeRef:me,onEnter:Re,onEntered:Z,onEntering:ie,onExit:Ue,onExited:Fe,onExiting:Te,addEndListener:Ze,timeout:W==="auto"?null:W,...B,children:(Xe,it)=>X.cloneElement(h,{style:{opacity:0,transform:iS(.75),visibility:Xe==="exited"&&!u?"hidden":void 0,...pq[Xe],...j,...h.props.style},ref:fe,...it})})});gv&&(gv.muiSupportAuto=!0);const mq=e=>{const{classes:t,disableUnderline:r}=e,a=_n({root:["root",!r&&"underline"],input:["input"]},r9,t);return{...t,...a}},gq=Yt(U0,{shouldForwardProp:e=>ta(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...$0(e,t),!r.disableUnderline&&t.underline]}})(Vn(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Op.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Op.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Op.disabled}, .${Op.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Op.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Su()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),yq=Yt(V0,{name:"MuiInput",slot:"Input",overridesResolver:j0})({}),yv=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiInput"}),{disableUnderline:a=!1,components:h={},componentsProps:d,fullWidth:u=!1,inputComponent:b="input",multiline:T=!1,slotProps:A,slots:P={},type:R="text",...U}=n,j=mq(n),ee={root:{ownerState:{disableUnderline:a}}},B=A??d?vi(A??d,ee):ee,H=P.root??h.Root??gq,V=P.input??h.Input??yq;return We.jsx(vT,{slots:{root:H,input:V},slotProps:B,fullWidth:u,inputComponent:b,multiline:T,ref:r,type:R,...U,classes:j})});yv&&(yv.muiName="Input");function _q(e){return fn("MuiInputLabel",e)}pn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const vq=e=>{const{classes:t,formControl:r,size:n,shrink:a,disableAnimation:h,variant:d,required:u}=e,b={root:["root",r&&"formControl",!h&&"animated",a&&"shrink",n&&n!=="normal"&&`size${pr(n)}`,d],asterisk:[u&&"asterisk"]},T=_n(b,_q,t);return{...t,...T}},xq=Yt(nS,{shouldForwardProp:e=>ta(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${sm.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(Vn(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),bq=X.forwardRef(function(t,r){const n=Tn({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,margin:h,shrink:d,variant:u,className:b,...T}=n,A=uf();let P=d;typeof P>"u"&&A&&(P=A.filled||A.focused||A.adornedStart);const R=lf({props:n,muiFormControl:A,states:["size","variant","required","focused"]}),U={...n,disableAnimation:a,formControl:A,shrink:P,size:R.size,variant:R.variant,required:R.required,focused:R.focused},j=vq(U);return We.jsx(xq,{"data-shrink":P,ref:r,className:wr(j.root,b),...T,ownerState:U,classes:j})}),wq=X.createContext({});function Sq(e){return fn("MuiList",e)}pn("MuiList",["root","padding","dense","subheader"]);const Tq=e=>{const{classes:t,disablePadding:r,dense:n,subheader:a}=e;return _n({root:["root",!r&&"padding",n&&"dense",a&&"subheader"]},Sq,t)},Eq=Yt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),Cq=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiList"}),{children:a,className:h,component:d="ul",dense:u=!1,disablePadding:b=!1,subheader:T,...A}=n,P=X.useMemo(()=>({dense:u}),[u]),R={...n,component:d,dense:u,disablePadding:b},U=Tq(R);return We.jsx(wq.Provider,{value:P,children:We.jsxs(Eq,{as:d,className:wr(U.root,h),ref:r,ownerState:R,...A,children:[T,a]})})});function mb(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function sP(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function YO(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function Dp(e,t,r,n,a,h){let d=!1,u=a(e,t,t?r:!1);for(;u;){if(u===e.firstChild){if(d)return!1;d=!0}const b=n?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!YO(u,h)||b)u=a(e,u,r);else return u.focus(),!0}return!1}const Aq=X.forwardRef(function(t,r){const{actions:n,autoFocus:a=!1,autoFocusItem:h=!1,children:d,className:u,disabledItemsFocusable:b=!1,disableListWrap:T=!1,onKeyDown:A,variant:P="selectedMenu",...R}=t,U=X.useRef(null),j=X.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Dc(()=>{a&&U.current.focus()},[a]),X.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(V,{direction:te})=>{const me=!U.current.style.width;if(V.clientHeight<U.current.clientHeight&&me){const fe=`${oO(ml(V))}px`;U.current.style[te==="rtl"?"paddingLeft":"paddingRight"]=fe,U.current.style.width=`calc(100% + ${fe})`}return U.current}}),[]);const W=V=>{const te=U.current,me=V.key;if(V.ctrlKey||V.metaKey||V.altKey){A&&A(V);return}const ge=Po(te).activeElement;if(me==="ArrowDown")V.preventDefault(),Dp(te,ge,T,b,mb);else if(me==="ArrowUp")V.preventDefault(),Dp(te,ge,T,b,sP);else if(me==="Home")V.preventDefault(),Dp(te,null,T,b,mb);else if(me==="End")V.preventDefault(),Dp(te,null,T,b,sP);else if(me.length===1){const ie=j.current,Re=me.toLowerCase(),Z=performance.now();ie.keys.length>0&&(Z-ie.lastTime>500?(ie.keys=[],ie.repeating=!0,ie.previousKeyMatched=!0):ie.repeating&&Re!==ie.keys[0]&&(ie.repeating=!1)),ie.lastTime=Z,ie.keys.push(Re);const Te=ge&&!ie.repeating&&YO(ge,ie);ie.previousKeyMatched&&(Te||Dp(te,ge,!1,b,mb,ie))?V.preventDefault():ie.previousKeyMatched=!1}A&&A(V)},ee=Ri(U,r);let B=-1;X.Children.forEach(d,(V,te)=>{if(!X.isValidElement(V)){B===te&&(B+=1,B>=d.length&&(B=-1));return}V.props.disabled||(P==="selectedMenu"&&V.props.selected||B===-1)&&(B=te),B===te&&(V.props.disabled||V.props.muiSkipListHighlight||V.type.muiSkipListHighlight)&&(B+=1,B>=d.length&&(B=-1))});const H=X.Children.map(d,(V,te)=>{if(te===B){const me={};return h&&(me.autoFocus=!0),V.props.tabIndex===void 0&&P==="selectedMenu"&&(me.tabIndex=0),X.cloneElement(V,me)}return V});return We.jsx(Cq,{role:"menu",ref:ee,className:u,onKeyDown:W,tabIndex:a?0:-1,...R,children:H})});function kq(e){return fn("MuiPopover",e)}pn("MuiPopover",["root","paper"]);function aP(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function lP(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function uP(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function gb(e){return typeof e=="function"?e():e}const Pq=e=>{const{classes:t}=e;return _n({root:["root"],paper:["paper"]},kq,t)},Iq=Yt(Q9,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),JO=Yt(yT,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Rq=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiPopover"}),{action:a,anchorEl:h,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:b="anchorEl",children:T,className:A,container:P,elevation:R=8,marginThreshold:U=16,open:j,PaperProps:W={},slots:ee={},slotProps:B={},transformOrigin:H={vertical:"top",horizontal:"left"},TransitionComponent:V=gv,transitionDuration:te="auto",TransitionProps:{onEntering:me,...fe}={},disableScrollLock:ge=!1,...ie}=n,Re=(B==null?void 0:B.paper)??W,Z=X.useRef(),Te={...n,anchorOrigin:d,anchorReference:b,elevation:R,marginThreshold:U,externalPaperSlotProps:Re,transformOrigin:H,TransitionComponent:V,transitionDuration:te,TransitionProps:fe},Ue=Pq(Te),Fe=X.useCallback(()=>{if(b==="anchorPosition")return u;const Zt=gb(h),ir=(Zt&&Zt.nodeType===1?Zt:Po(Z.current).body).getBoundingClientRect();return{top:ir.top+aP(ir,d.vertical),left:ir.left+lP(ir,d.horizontal)}},[h,d.horizontal,d.vertical,u,b]),Ze=X.useCallback(Zt=>({vertical:aP(Zt,H.vertical),horizontal:lP(Zt,H.horizontal)}),[H.horizontal,H.vertical]),Xe=X.useCallback(Zt=>{const fr={width:Zt.offsetWidth,height:Zt.offsetHeight},ir=Ze(fr);if(b==="none")return{top:null,left:null,transformOrigin:uP(ir)};const Fr=Fe();let $t=Fr.top-ir.vertical,hr=Fr.left-ir.horizontal;const Ie=$t+fr.height,mn=hr+fr.width,Rr=ml(gb(h)),Vt=Rr.innerHeight-U,_r=Rr.innerWidth-U;if(U!==null&&$t<U){const Sr=$t-U;$t-=Sr,ir.vertical+=Sr}else if(U!==null&&Ie>Vt){const Sr=Ie-Vt;$t-=Sr,ir.vertical+=Sr}if(U!==null&&hr<U){const Sr=hr-U;hr-=Sr,ir.horizontal+=Sr}else if(mn>_r){const Sr=mn-_r;hr-=Sr,ir.horizontal+=Sr}return{top:`${Math.round($t)}px`,left:`${Math.round(hr)}px`,transformOrigin:uP(ir)}},[h,b,Fe,Ze,U]),[it,Et]=X.useState(j),Ne=X.useCallback(()=>{const Zt=Z.current;if(!Zt)return;const fr=Xe(Zt);fr.top!==null&&Zt.style.setProperty("top",fr.top),fr.left!==null&&(Zt.style.left=fr.left),Zt.style.transformOrigin=fr.transformOrigin,Et(!0)},[Xe]);X.useEffect(()=>(ge&&window.addEventListener("scroll",Ne),()=>window.removeEventListener("scroll",Ne)),[h,ge,Ne]);const Ye=(Zt,fr)=>{me&&me(Zt,fr),Ne()},vt=()=>{Et(!1)};X.useEffect(()=>{j&&Ne()}),X.useImperativeHandle(a,()=>j?{updatePosition:()=>{Ne()}}:null,[j,Ne]),X.useEffect(()=>{if(!j)return;const Zt=rO(()=>{Ne()}),fr=ml(h);return fr.addEventListener("resize",Zt),()=>{Zt.clear(),fr.removeEventListener("resize",Zt)}},[h,j,Ne]);let Ct=te;te==="auto"&&!V.muiSupportAuto&&(Ct=void 0);const Lt=P||(h?Po(gb(h)).body:void 0),Nt={slots:ee,slotProps:{...B,paper:Re}},[zt,er]=Hs("paper",{elementType:JO,externalForwardedProps:Nt,additionalProps:{elevation:R,className:wr(Ue.paper,Re==null?void 0:Re.className),style:it?Re.style:{...Re.style,opacity:0}},ownerState:Te}),[lr,{slotProps:sr,...br}]=Hs("root",{elementType:Iq,externalForwardedProps:Nt,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Lt,open:j},ownerState:Te,className:wr(Ue.root,A)}),Ar=Ri(Z,er.ref);return We.jsx(lr,{...br,...!eS(lr)&&{slotProps:sr,disableScrollLock:ge},...ie,ref:r,children:We.jsx(V,{appear:!0,in:j,onEntering:Ye,onExited:vt,timeout:Ct,...fe,children:We.jsx(zt,{...er,ref:Ar,children:T})})})});function Mq(e){return fn("MuiMenu",e)}pn("MuiMenu",["root","paper","list"]);const Lq={vertical:"top",horizontal:"right"},Oq={vertical:"top",horizontal:"left"},Dq=e=>{const{classes:t}=e;return _n({root:["root"],paper:["paper"],list:["list"]},Mq,t)},zq=Yt(Rq,{shouldForwardProp:e=>ta(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Fq=Yt(JO,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Bq=Yt(Aq,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Nq=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:h,className:d,disableAutoFocusItem:u=!1,MenuListProps:b={},onClose:T,open:A,PaperProps:P={},PopoverClasses:R,transitionDuration:U="auto",TransitionProps:{onEntering:j,...W}={},variant:ee="selectedMenu",slots:B={},slotProps:H={},...V}=n,te=cV(),me={...n,autoFocus:a,disableAutoFocusItem:u,MenuListProps:b,onEntering:j,PaperProps:P,transitionDuration:U,TransitionProps:W,variant:ee},fe=Dq(me),ge=a&&!u&&A,ie=X.useRef(null),Re=(it,Et)=>{ie.current&&ie.current.adjustStyleForScrollbar(it,{direction:te?"rtl":"ltr"}),j&&j(it,Et)},Z=it=>{it.key==="Tab"&&(it.preventDefault(),T&&T(it,"tabKeyDown"))};let Te=-1;X.Children.map(h,(it,Et)=>{X.isValidElement(it)&&(it.props.disabled||(ee==="selectedMenu"&&it.props.selected||Te===-1)&&(Te=Et))});const Ue=B.paper??Fq,Fe=H.paper??P,Ze=Vw({elementType:B.root,externalSlotProps:H.root,ownerState:me,className:[fe.root,d]}),Xe=Vw({elementType:Ue,externalSlotProps:Fe,ownerState:me,className:fe.paper});return We.jsx(zq,{onClose:T,anchorOrigin:{vertical:"bottom",horizontal:te?"right":"left"},transformOrigin:te?Lq:Oq,slots:{paper:Ue,root:B.root},slotProps:{root:Ze,paper:Xe},open:A,ref:r,transitionDuration:U,TransitionProps:{onEntering:Re,...W},ownerState:me,...V,classes:R,children:We.jsx(Bq,{onKeyDown:Z,actions:ie,autoFocus:a&&(Te===-1||u),autoFocusItem:ge,variant:ee,...b,className:wr(fe.list,b.className),children:h})})});function $q(e){return fn("MuiNativeSelect",e)}const xT=pn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),jq=e=>{const{classes:t,variant:r,disabled:n,multiple:a,open:h,error:d}=e,u={select:["select",r,n&&"disabled",a&&"multiple",d&&"error"],icon:["icon",`icon${pr(r)}`,h&&"iconOpen",n&&"disabled"]};return _n(u,$q,t)},QO=Yt("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${xT.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Uq=Yt(QO,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ta,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${xT.multiple}`]:t.multiple}]}})({}),e5=Yt("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${xT.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Vq=Yt(e5,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${pr(r.variant)}`],r.open&&t.iconOpen]}})({}),qq=X.forwardRef(function(t,r){const{className:n,disabled:a,error:h,IconComponent:d,inputRef:u,variant:b="standard",...T}=t,A={...t,disabled:a,variant:b,error:h},P=jq(A);return We.jsxs(X.Fragment,{children:[We.jsx(Uq,{ownerState:A,className:wr(P.select,n),disabled:a,ref:u||r,...T}),t.multiple?null:We.jsx(Vq,{as:d,ownerState:A,className:P.icon})]})});var cP;const Hq=Yt("fieldset",{shouldForwardProp:ta})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Wq=Yt("legend",{shouldForwardProp:ta})(Vn(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function Gq(e){const{children:t,classes:r,className:n,label:a,notched:h,...d}=e,u=a!=null&&a!=="",b={...e,notched:h,withLabel:u};return We.jsx(Hq,{"aria-hidden":!0,className:n,ownerState:b,...d,children:We.jsx(Wq,{ownerState:b,children:u?We.jsx("span",{children:a}):cP||(cP=We.jsx("span",{className:"notranslate",children:"​"}))})})}const Zq=e=>{const{classes:t}=e,n=_n({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},n9,t);return{...t,...n}},Kq=Yt(U0,{shouldForwardProp:e=>ta(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:$0})(Vn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${fa.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},[`&.${fa.focused} .${fa.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Su()).map(([r])=>({props:{color:r},style:{[`&.${fa.focused} .${fa.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{"@media (hover: none)":{[`&:hover .${fa.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${fa.error} .${fa.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${fa.disabled} .${fa.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),Xq=Yt(Gq,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Vn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),Yq=Yt(V0,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:j0})(Vn(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),_v=X.forwardRef(function(t,r){var n;const a=Tn({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:d=!1,inputComponent:u="input",label:b,multiline:T=!1,notched:A,slots:P={},type:R="text",...U}=a,j=Zq(a),W=uf(),ee=lf({props:a,muiFormControl:W,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),B={...a,color:ee.color||"primary",disabled:ee.disabled,error:ee.error,focused:ee.focused,formControl:W,fullWidth:d,hiddenLabel:ee.hiddenLabel,multiline:T,size:ee.size,type:R},H=P.root??h.Root??Kq,V=P.input??h.Input??Yq;return We.jsx(vT,{slots:{root:H,input:V},renderSuffix:te=>We.jsx(Xq,{ownerState:B,className:j.notchedOutline,label:b!=null&&b!==""&&ee.required?n||(n=We.jsxs(X.Fragment,{children:[b," ","*"]})):b,notched:typeof A<"u"?A:!!(te.startAdornment||te.filled||te.focused)}),fullWidth:d,inputComponent:u,multiline:T,ref:r,type:R,...U,classes:{...j,notchedOutline:null}})});_v&&(_v.muiName="Input");function Jq(e){return fn("MuiSelect",e)}const zp=pn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var hP;const Qq=Yt(QO,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${zp.select}`]:t.select},{[`&.${zp.select}`]:t[r.variant]},{[`&.${zp.error}`]:t.error},{[`&.${zp.multiple}`]:t.multiple}]}})({[`&.${zp.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),eH=Yt(e5,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${pr(r.variant)}`],r.open&&t.iconOpen]}})({}),tH=Yt("input",{shouldForwardProp:e=>jO(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function dP(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function rH(e){return e==null||typeof e=="string"&&!e.trim()}const nH=e=>{const{classes:t,variant:r,disabled:n,multiple:a,open:h,error:d}=e,u={select:["select",r,n&&"disabled",a&&"multiple",d&&"error"],icon:["icon",`icon${pr(r)}`,h&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return _n(u,Jq,t)},iH=X.forwardRef(function(t,r){var et;const{"aria-describedby":n,"aria-label":a,autoFocus:h,autoWidth:d,children:u,className:b,defaultOpen:T,defaultValue:A,disabled:P,displayEmpty:R,error:U=!1,IconComponent:j,inputRef:W,labelId:ee,MenuProps:B={},multiple:H,name:V,onBlur:te,onChange:me,onClose:fe,onFocus:ge,onOpen:ie,open:Re,readOnly:Z,renderValue:Te,SelectDisplayProps:Ue={},tabIndex:Fe,type:Ze,value:Xe,variant:it="standard",...Et}=t,[Ne,Ye]=Ck({controlled:Xe,default:A,name:"Select"}),[vt,Ct]=Ck({controlled:Re,default:T,name:"Select"}),Lt=X.useRef(null),Nt=X.useRef(null),[zt,er]=X.useState(null),{current:lr}=X.useRef(Re!=null),[sr,br]=X.useState(),Ar=Ri(r,W),Zt=X.useCallback(rt=>{Nt.current=rt,rt&&er(rt)},[]),fr=zt==null?void 0:zt.parentNode;X.useImperativeHandle(Ar,()=>({focus:()=>{Nt.current.focus()},node:Lt.current,value:Ne}),[Ne]),X.useEffect(()=>{T&&vt&&zt&&!lr&&(br(d?null:fr.clientWidth),Nt.current.focus())},[zt,d]),X.useEffect(()=>{h&&Nt.current.focus()},[h]),X.useEffect(()=>{if(!ee)return;const rt=Po(Nt.current).getElementById(ee);if(rt){const at=()=>{getSelection().isCollapsed&&Nt.current.focus()};return rt.addEventListener("click",at),()=>{rt.removeEventListener("click",at)}}},[ee]);const ir=(rt,at)=>{rt?ie&&ie(at):fe&&fe(at),lr||(br(d?null:fr.clientWidth),Ct(rt))},Fr=rt=>{rt.button===0&&(rt.preventDefault(),Nt.current.focus(),ir(!0,rt))},$t=rt=>{ir(!1,rt)},hr=X.Children.toArray(u),Ie=rt=>{const at=hr.find(Er=>Er.props.value===rt.target.value);at!==void 0&&(Ye(at.props.value),me&&me(rt,at))},mn=rt=>at=>{let Er;if(at.currentTarget.hasAttribute("tabindex")){if(H){Er=Array.isArray(Ne)?Ne.slice():[];const Mn=Ne.indexOf(rt.props.value);Mn===-1?Er.push(rt.props.value):Er.splice(Mn,1)}else Er=rt.props.value;if(rt.props.onClick&&rt.props.onClick(at),Ne!==Er&&(Ye(Er),me)){const Mn=at.nativeEvent||at,Wt=new Mn.constructor(Mn.type,Mn);Object.defineProperty(Wt,"target",{writable:!0,value:{value:Er,name:V}}),me(Wt,rt)}H||ir(!1,at)}},Rr=rt=>{Z||[" ","ArrowUp","ArrowDown","Enter"].includes(rt.key)&&(rt.preventDefault(),ir(!0,rt))},Vt=zt!==null&&vt,_r=rt=>{!Vt&&te&&(Object.defineProperty(rt,"target",{writable:!0,value:{value:Ne,name:V}}),te(rt))};delete Et["aria-invalid"];let Sr,Me;const $e=[];let mt=!1;(pv({value:Ne})||R)&&(Te?Sr=Te(Ne):mt=!0);const kt=hr.map(rt=>{if(!X.isValidElement(rt))return null;let at;if(H){if(!Array.isArray(Ne))throw new Error(pl(2));at=Ne.some(Er=>dP(Er,rt.props.value)),at&&mt&&$e.push(rt.props.children)}else at=dP(Ne,rt.props.value),at&&mt&&(Me=rt.props.children);return X.cloneElement(rt,{"aria-selected":at?"true":"false",onClick:mn(rt),onKeyUp:Er=>{Er.key===" "&&Er.preventDefault(),rt.props.onKeyUp&&rt.props.onKeyUp(Er)},role:"option",selected:at,value:void 0,"data-value":rt.props.value})});mt&&(H?$e.length===0?Sr=null:Sr=$e.reduce((rt,at,Er)=>(rt.push(at),Er<$e.length-1&&rt.push(", "),rt),[]):Sr=Me);let Ft=sr;!d&&lr&&zt&&(Ft=fr.clientWidth);let tr;typeof Fe<"u"?tr=Fe:tr=P?null:0;const He=Ue.id||(V?`mui-component-select-${V}`:void 0),Mr={...t,variant:it,value:Ne,open:Vt,error:U},Tr=nH(Mr),rr={...B.PaperProps,...(et=B.slotProps)==null?void 0:et.paper},qn=nO();return We.jsxs(X.Fragment,{children:[We.jsx(Qq,{as:"div",ref:Zt,tabIndex:tr,role:"combobox","aria-controls":qn,"aria-disabled":P?"true":void 0,"aria-expanded":Vt?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[ee,He].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:Rr,onMouseDown:P||Z?null:Fr,onBlur:_r,onFocus:ge,...Ue,ownerState:Mr,className:wr(Ue.className,Tr.select,b),id:He,children:rH(Sr)?hP||(hP=We.jsx("span",{className:"notranslate",children:"​"})):Sr}),We.jsx(tH,{"aria-invalid":U,value:Array.isArray(Ne)?Ne.join(","):Ne,name:V,ref:Lt,"aria-hidden":!0,onChange:Ie,tabIndex:-1,disabled:P,className:Tr.nativeInput,autoFocus:h,...Et,ownerState:Mr}),We.jsx(eH,{as:j,className:Tr.icon,ownerState:Mr}),We.jsx(Nq,{id:`menu-${V||""}`,anchorEl:fr,open:Vt,onClose:$t,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...B,MenuListProps:{"aria-labelledby":ee,role:"listbox","aria-multiselectable":H?"true":void 0,disableListWrap:!0,id:qn,...B.MenuListProps},slotProps:{...B.slotProps,paper:{...rr,style:{minWidth:Ft,...rr!=null?rr.style:null}}},children:kt})]})}),oH=e=>{const{classes:t}=e;return t},bT={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ta(e)&&e!=="variant",slot:"Root"},sH=Yt(yv,bT)(""),aH=Yt(_v,bT)(""),lH=Yt(mv,bT)(""),t5=X.forwardRef(function(t,r){const n=VO({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:h,classes:d={},className:u,defaultOpen:b=!1,displayEmpty:T=!1,IconComponent:A=o9,id:P,input:R,inputProps:U,label:j,labelId:W,MenuProps:ee,multiple:B=!1,native:H=!1,onClose:V,onOpen:te,open:me,renderValue:fe,SelectDisplayProps:ge,variant:ie="outlined",...Re}=n,Z=H?qq:iH,Te=uf(),Ue=lf({props:n,muiFormControl:Te,states:["variant","error"]}),Fe=Ue.variant||ie,Ze={...n,variant:Fe,classes:d},Xe=oH(Ze),{root:it,...Et}=Xe,Ne=R||{standard:We.jsx(sH,{ownerState:Ze}),outlined:We.jsx(aH,{label:j,ownerState:Ze}),filled:We.jsx(lH,{ownerState:Ze})}[Fe],Ye=Ri(r,of(Ne));return We.jsx(X.Fragment,{children:X.cloneElement(Ne,{inputComponent:Z,inputProps:{children:h,error:Ue.error,IconComponent:A,variant:Fe,type:void 0,multiple:B,...H?{id:P}:{autoWidth:a,defaultOpen:b,displayEmpty:T,labelId:W,MenuProps:ee,onClose:V,onOpen:te,open:me,renderValue:fe,SelectDisplayProps:{id:P,...ge}},...U,classes:U?vi(Et,U.classes):Et,...R?R.props.inputProps:{}},...(B&&H||T)&&Fe==="outlined"?{notched:!0}:{},ref:Ye,className:wr(Ne.props.className,u,Xe.root),...!R&&{variant:Fe},...Re})})});t5.muiName="Select";function uH(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:a,resumeHideDuration:h}=e,d=Z2();X.useEffect(()=>{if(!a)return;function B(H){H.defaultPrevented||H.key==="Escape"&&(n==null||n(H,"escapeKeyDown"))}return document.addEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)}},[a,n]);const u=sl((B,H)=>{n==null||n(B,H)}),b=sl(B=>{!n||B==null||d.start(B,()=>{u(null,"timeout")})});X.useEffect(()=>(a&&b(t),d.clear),[a,t,b,d]);const T=B=>{n==null||n(B,"clickaway")},A=d.clear,P=X.useCallback(()=>{t!=null&&b(h??t*.5)},[t,h,b]),R=B=>H=>{const V=B.onBlur;V==null||V(H),P()},U=B=>H=>{const V=B.onFocus;V==null||V(H),A()},j=B=>H=>{const V=B.onMouseEnter;V==null||V(H),A()},W=B=>H=>{const V=B.onMouseLeave;V==null||V(H),P()};return X.useEffect(()=>{if(!r&&a)return window.addEventListener("focus",P),window.addEventListener("blur",A),()=>{window.removeEventListener("focus",P),window.removeEventListener("blur",A)}},[r,a,P,A]),{getRootProps:(B={})=>{const H={...sv(e),...sv(B)};return{role:"presentation",...B,...H,onBlur:R(H),onFocus:U(H),onMouseEnter:j(H),onMouseLeave:W(H)}},onClickAway:T}}function cH(e){return fn("MuiSnackbarContent",e)}pn("MuiSnackbarContent",["root","message","action"]);const hH=e=>{const{classes:t}=e;return _n({root:["root"],action:["action"],message:["message"]},cH,t)},dH=Yt(yT,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(Vn(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,r=FO(e.palette.background.default,t);return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(r),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),fH=Yt("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),pH=Yt("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),mH=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiSnackbarContent"}),{action:a,className:h,message:d,role:u="alert",...b}=n,T=n,A=hH(T);return We.jsxs(dH,{role:u,square:!0,elevation:6,className:wr(A.root,h),ownerState:T,ref:r,...b,children:[We.jsx(fH,{className:A.message,ownerState:T,children:d}),a?We.jsx(pH,{className:A.action,ownerState:T,children:a}):null]})});function gH(e){return fn("MuiSnackbar",e)}pn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const yH=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${pr(r.vertical)}${pr(r.horizontal)}`]};return _n(n,gH,t)},fP=Yt("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${pr(r.anchorOrigin.vertical)}${pr(r.anchorOrigin.horizontal)}`]]}})(Vn(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),_H=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiSnackbar"}),a=P0(),h={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:d,anchorOrigin:{vertical:u,horizontal:b}={vertical:"bottom",horizontal:"left"},autoHideDuration:T=null,children:A,className:P,ClickAwayListenerProps:R,ContentProps:U,disableWindowBlurListener:j=!1,message:W,onBlur:ee,onClose:B,onFocus:H,onMouseEnter:V,onMouseLeave:te,open:me,resumeHideDuration:fe,TransitionComponent:ge=gv,transitionDuration:ie=h,TransitionProps:{onEnter:Re,onExited:Z,...Te}={},...Ue}=n,Fe={...n,anchorOrigin:{vertical:u,horizontal:b},autoHideDuration:T,disableWindowBlurListener:j,TransitionComponent:ge,transitionDuration:ie},Ze=yH(Fe),{getRootProps:Xe,onClickAway:it}=uH({...Fe}),[Et,Ne]=X.useState(!0),Ye=Vw({elementType:fP,getSlotProps:Xe,externalForwardedProps:Ue,ownerState:Fe,additionalProps:{ref:r},className:[Ze.root,P]}),vt=Lt=>{Ne(!0),Z&&Z(Lt)},Ct=(Lt,Nt)=>{Ne(!1),Re&&Re(Lt,Nt)};return!me&&Et?null:We.jsx(k9,{onClickAway:it,...R,children:We.jsx(fP,{...Ye,children:We.jsx(ge,{appear:!0,in:me,timeout:ie,direction:u==="top"?"down":"up",onEnter:Ct,onExited:vt,...Te,children:A||We.jsx(mH,{message:W,action:d,...U})})})})}),vH=EV({createStyledComponent:Yt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>VO({props:e,name:"MuiStack"})});function xH(e){return fn("MuiTextField",e)}pn("MuiTextField",["root"]);const bH={standard:yv,filled:mv,outlined:_v},wH=e=>{const{classes:t}=e;return _n({root:["root"]},xH,t)},SH=Yt(rS,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),pP=X.forwardRef(function(t,r){const n=Tn({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:h=!1,children:d,className:u,color:b="primary",defaultValue:T,disabled:A=!1,error:P=!1,FormHelperTextProps:R,fullWidth:U=!1,helperText:j,id:W,InputLabelProps:ee,inputProps:B,InputProps:H,inputRef:V,label:te,maxRows:me,minRows:fe,multiline:ge=!1,name:ie,onBlur:Re,onChange:Z,onFocus:Te,placeholder:Ue,required:Fe=!1,rows:Ze,select:Xe=!1,SelectProps:it,slots:Et={},slotProps:Ne={},type:Ye,value:vt,variant:Ct="outlined",...Lt}=n,Nt={...n,autoFocus:h,color:b,disabled:A,error:P,fullWidth:U,multiline:ge,required:Fe,select:Xe,variant:Ct},zt=wH(Nt),er=nO(W),lr=j&&er?`${er}-helper-text`:void 0,sr=te&&er?`${er}-label`:void 0,br=bH[Ct],Ar={slots:Et,slotProps:{input:H,inputLabel:ee,htmlInput:B,formHelperText:R,select:it,...Ne}},Zt={},fr=Ar.slotProps.inputLabel;Ct==="outlined"&&(fr&&typeof fr.shrink<"u"&&(Zt.notched=fr.shrink),Zt.label=te),Xe&&((!it||!it.native)&&(Zt.id=void 0),Zt["aria-describedby"]=void 0);const[ir,Fr]=Hs("input",{elementType:br,externalForwardedProps:Ar,additionalProps:Zt,ownerState:Nt}),[$t,hr]=Hs("inputLabel",{elementType:bq,externalForwardedProps:Ar,ownerState:Nt}),[Ie,mn]=Hs("htmlInput",{elementType:"input",externalForwardedProps:Ar,ownerState:Nt}),[Rr,Vt]=Hs("formHelperText",{elementType:uq,externalForwardedProps:Ar,ownerState:Nt}),[_r,Sr]=Hs("select",{elementType:t5,externalForwardedProps:Ar,ownerState:Nt}),Me=We.jsx(ir,{"aria-describedby":lr,autoComplete:a,autoFocus:h,defaultValue:T,fullWidth:U,multiline:ge,name:ie,rows:Ze,maxRows:me,minRows:fe,type:Ye,value:vt,id:er,inputRef:V,onBlur:Re,onChange:Z,onFocus:Te,placeholder:Ue,inputProps:mn,slots:{input:Et.htmlInput?Ie:void 0},...Fr});return We.jsxs(SH,{className:wr(zt.root,u),disabled:A,error:P,fullWidth:U,ref:r,required:Fe,color:b,variant:Ct,ownerState:Nt,...Lt,children:[te!=null&&te!==""&&We.jsx($t,{htmlFor:er,id:sr,...hr,children:te}),Xe?We.jsx(_r,{"aria-describedby":lr,id:er,labelId:sr,value:vt,input:Me,...Sr,children:d}):Me,j&&We.jsx(Rr,{id:lr,...Vt,children:j})]})});var TH=function(t){return EH(t)&&!CH(t)};function EH(e){return!!e&&typeof e=="object"}function CH(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||PH(e)}var AH=typeof Symbol=="function"&&Symbol.for,kH=AH?Symbol.for("react.element"):60103;function PH(e){return e.$$typeof===kH}function IH(e){return Array.isArray(e)?[]:{}}function vv(e,t){return t.clone!==!1&&t.isMergeableObject(e)?zm(IH(e),e,t):e}function RH(e,t,r){return e.concat(t).map(function(n){return vv(n,r)})}function MH(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(a){n[a]=vv(e[a],r)}),Object.keys(t).forEach(function(a){!r.isMergeableObject(t[a])||!e[a]?n[a]=vv(t[a],r):n[a]=zm(e[a],t[a],r)}),n}function zm(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||RH,r.isMergeableObject=r.isMergeableObject||TH;var n=Array.isArray(t),a=Array.isArray(e),h=n===a;return h?n?r.arrayMerge(e,t,r):MH(e,t,r):vv(t,r)}zm.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,a){return zm(n,a,r)},{})};var oS=zm,r5=typeof global=="object"&&global&&global.Object===Object&&global,LH=typeof self=="object"&&self&&self.Object===Object&&self,Oa=r5||LH||Function("return this")(),Tu=Oa.Symbol,n5=Object.prototype,OH=n5.hasOwnProperty,DH=n5.toString,Fp=Tu?Tu.toStringTag:void 0;function zH(e){var t=OH.call(e,Fp),r=e[Fp];try{e[Fp]=void 0;var n=!0}catch{}var a=DH.call(e);return n&&(t?e[Fp]=r:delete e[Fp]),a}var FH=Object.prototype,BH=FH.toString;function NH(e){return BH.call(e)}var $H="[object Null]",jH="[object Undefined]",mP=Tu?Tu.toStringTag:void 0;function qc(e){return e==null?e===void 0?jH:$H:mP&&mP in Object(e)?zH(e):NH(e)}function i5(e,t){return function(r){return e(t(r))}}var wT=i5(Object.getPrototypeOf,Object);function Hc(e){return e!=null&&typeof e=="object"}var UH="[object Object]",VH=Function.prototype,qH=Object.prototype,o5=VH.toString,HH=qH.hasOwnProperty,WH=o5.call(Object);function gP(e){if(!Hc(e)||qc(e)!=UH)return!1;var t=wT(e);if(t===null)return!0;var r=HH.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&o5.call(r)==WH}function GH(){this.__data__=[],this.size=0}function s5(e,t){return e===t||e!==e&&t!==t}function q0(e,t){for(var r=e.length;r--;)if(s5(e[r][0],t))return r;return-1}var ZH=Array.prototype,KH=ZH.splice;function XH(e){var t=this.__data__,r=q0(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():KH.call(t,r,1),--this.size,!0}function YH(e){var t=this.__data__,r=q0(t,e);return r<0?void 0:t[r][1]}function JH(e){return q0(this.__data__,e)>-1}function QH(e,t){var r=this.__data__,n=q0(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function _l(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_l.prototype.clear=GH;_l.prototype.delete=XH;_l.prototype.get=YH;_l.prototype.has=JH;_l.prototype.set=QH;function eW(){this.__data__=new _l,this.size=0}function tW(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function rW(e){return this.__data__.get(e)}function nW(e){return this.__data__.has(e)}function ig(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var iW="[object AsyncFunction]",oW="[object Function]",sW="[object GeneratorFunction]",aW="[object Proxy]";function a5(e){if(!ig(e))return!1;var t=qc(e);return t==oW||t==sW||t==iW||t==aW}var yb=Oa["__core-js_shared__"],yP=function(){var e=/[^.]+$/.exec(yb&&yb.keys&&yb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lW(e){return!!yP&&yP in e}var uW=Function.prototype,cW=uW.toString;function Wc(e){if(e!=null){try{return cW.call(e)}catch{}try{return e+""}catch{}}return""}var hW=/[\\^$.*+?()[\]{}|]/g,dW=/^\[object .+?Constructor\]$/,fW=Function.prototype,pW=Object.prototype,mW=fW.toString,gW=pW.hasOwnProperty,yW=RegExp("^"+mW.call(gW).replace(hW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _W(e){if(!ig(e)||lW(e))return!1;var t=a5(e)?yW:dW;return t.test(Wc(e))}function vW(e,t){return e==null?void 0:e[t]}function Gc(e,t){var r=vW(e,t);return _W(r)?r:void 0}var Fm=Gc(Oa,"Map"),Bm=Gc(Object,"create");function xW(){this.__data__=Bm?Bm(null):{},this.size=0}function bW(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var wW="__lodash_hash_undefined__",SW=Object.prototype,TW=SW.hasOwnProperty;function EW(e){var t=this.__data__;if(Bm){var r=t[e];return r===wW?void 0:r}return TW.call(t,e)?t[e]:void 0}var CW=Object.prototype,AW=CW.hasOwnProperty;function kW(e){var t=this.__data__;return Bm?t[e]!==void 0:AW.call(t,e)}var PW="__lodash_hash_undefined__";function IW(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Bm&&t===void 0?PW:t,this}function Fc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fc.prototype.clear=xW;Fc.prototype.delete=bW;Fc.prototype.get=EW;Fc.prototype.has=kW;Fc.prototype.set=IW;function RW(){this.size=0,this.__data__={hash:new Fc,map:new(Fm||_l),string:new Fc}}function MW(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function H0(e,t){var r=e.__data__;return MW(t)?r[typeof t=="string"?"string":"hash"]:r.map}function LW(e){var t=H0(this,e).delete(e);return this.size-=t?1:0,t}function OW(e){return H0(this,e).get(e)}function DW(e){return H0(this,e).has(e)}function zW(e,t){var r=H0(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Pu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pu.prototype.clear=RW;Pu.prototype.delete=LW;Pu.prototype.get=OW;Pu.prototype.has=DW;Pu.prototype.set=zW;var FW=200;function BW(e,t){var r=this.__data__;if(r instanceof _l){var n=r.__data__;if(!Fm||n.length<FW-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pu(n)}return r.set(e,t),this.size=r.size,this}function cf(e){var t=this.__data__=new _l(e);this.size=t.size}cf.prototype.clear=eW;cf.prototype.delete=tW;cf.prototype.get=rW;cf.prototype.has=nW;cf.prototype.set=BW;function NW(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var _P=function(){try{var e=Gc(Object,"defineProperty");return e({},"",{}),e}catch{}}();function l5(e,t,r){t=="__proto__"&&_P?_P(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var $W=Object.prototype,jW=$W.hasOwnProperty;function u5(e,t,r){var n=e[t];(!(jW.call(e,t)&&s5(n,r))||r===void 0&&!(t in e))&&l5(e,t,r)}function W0(e,t,r,n){var a=!r;r||(r={});for(var h=-1,d=t.length;++h<d;){var u=t[h],b=void 0;b===void 0&&(b=e[u]),a?l5(r,u,b):u5(r,u,b)}return r}function UW(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var VW="[object Arguments]";function vP(e){return Hc(e)&&qc(e)==VW}var c5=Object.prototype,qW=c5.hasOwnProperty,HW=c5.propertyIsEnumerable,WW=vP(function(){return arguments}())?vP:function(e){return Hc(e)&&qW.call(e,"callee")&&!HW.call(e,"callee")},og=Array.isArray;function GW(){return!1}var h5=typeof Jo=="object"&&Jo&&!Jo.nodeType&&Jo,xP=h5&&typeof Qo=="object"&&Qo&&!Qo.nodeType&&Qo,ZW=xP&&xP.exports===h5,bP=ZW?Oa.Buffer:void 0,KW=bP?bP.isBuffer:void 0,d5=KW||GW,XW=9007199254740991,YW=/^(?:0|[1-9]\d*)$/;function JW(e,t){var r=typeof e;return t=t??XW,!!t&&(r=="number"||r!="symbol"&&YW.test(e))&&e>-1&&e%1==0&&e<t}var QW=9007199254740991;function f5(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=QW}var eG="[object Arguments]",tG="[object Array]",rG="[object Boolean]",nG="[object Date]",iG="[object Error]",oG="[object Function]",sG="[object Map]",aG="[object Number]",lG="[object Object]",uG="[object RegExp]",cG="[object Set]",hG="[object String]",dG="[object WeakMap]",fG="[object ArrayBuffer]",pG="[object DataView]",mG="[object Float32Array]",gG="[object Float64Array]",yG="[object Int8Array]",_G="[object Int16Array]",vG="[object Int32Array]",xG="[object Uint8Array]",bG="[object Uint8ClampedArray]",wG="[object Uint16Array]",SG="[object Uint32Array]",wn={};wn[mG]=wn[gG]=wn[yG]=wn[_G]=wn[vG]=wn[xG]=wn[bG]=wn[wG]=wn[SG]=!0;wn[eG]=wn[tG]=wn[fG]=wn[rG]=wn[pG]=wn[nG]=wn[iG]=wn[oG]=wn[sG]=wn[aG]=wn[lG]=wn[uG]=wn[cG]=wn[hG]=wn[dG]=!1;function TG(e){return Hc(e)&&f5(e.length)&&!!wn[qc(e)]}function ST(e){return function(t){return e(t)}}var p5=typeof Jo=="object"&&Jo&&!Jo.nodeType&&Jo,am=p5&&typeof Qo=="object"&&Qo&&!Qo.nodeType&&Qo,EG=am&&am.exports===p5,_b=EG&&r5.process,Wd=function(){try{var e=am&&am.require&&am.require("util").types;return e||_b&&_b.binding&&_b.binding("util")}catch{}}(),wP=Wd&&Wd.isTypedArray,CG=wP?ST(wP):TG,AG=Object.prototype,kG=AG.hasOwnProperty;function m5(e,t){var r=og(e),n=!r&&WW(e),a=!r&&!n&&d5(e),h=!r&&!n&&!a&&CG(e),d=r||n||a||h,u=d?UW(e.length,String):[],b=u.length;for(var T in e)(t||kG.call(e,T))&&!(d&&(T=="length"||a&&(T=="offset"||T=="parent")||h&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||JW(T,b)))&&u.push(T);return u}var PG=Object.prototype;function TT(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||PG;return e===r}var IG=i5(Object.keys,Object),RG=Object.prototype,MG=RG.hasOwnProperty;function LG(e){if(!TT(e))return IG(e);var t=[];for(var r in Object(e))MG.call(e,r)&&r!="constructor"&&t.push(r);return t}function g5(e){return e!=null&&f5(e.length)&&!a5(e)}function ET(e){return g5(e)?m5(e):LG(e)}function OG(e,t){return e&&W0(t,ET(t),e)}function DG(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var zG=Object.prototype,FG=zG.hasOwnProperty;function BG(e){if(!ig(e))return DG(e);var t=TT(e),r=[];for(var n in e)n=="constructor"&&(t||!FG.call(e,n))||r.push(n);return r}function CT(e){return g5(e)?m5(e,!0):BG(e)}function NG(e,t){return e&&W0(t,CT(t),e)}var y5=typeof Jo=="object"&&Jo&&!Jo.nodeType&&Jo,SP=y5&&typeof Qo=="object"&&Qo&&!Qo.nodeType&&Qo,$G=SP&&SP.exports===y5,TP=$G?Oa.Buffer:void 0,EP=TP?TP.allocUnsafe:void 0;function jG(e,t){if(t)return e.slice();var r=e.length,n=EP?EP(r):new e.constructor(r);return e.copy(n),n}function _5(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function UG(e,t){for(var r=-1,n=e==null?0:e.length,a=0,h=[];++r<n;){var d=e[r];t(d,r,e)&&(h[a++]=d)}return h}function v5(){return[]}var VG=Object.prototype,qG=VG.propertyIsEnumerable,CP=Object.getOwnPropertySymbols,AT=CP?function(e){return e==null?[]:(e=Object(e),UG(CP(e),function(t){return qG.call(e,t)}))}:v5;function HG(e,t){return W0(e,AT(e),t)}function x5(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var WG=Object.getOwnPropertySymbols,b5=WG?function(e){for(var t=[];e;)x5(t,AT(e)),e=wT(e);return t}:v5;function GG(e,t){return W0(e,b5(e),t)}function w5(e,t,r){var n=t(e);return og(e)?n:x5(n,r(e))}function ZG(e){return w5(e,ET,AT)}function KG(e){return w5(e,CT,b5)}var sS=Gc(Oa,"DataView"),aS=Gc(Oa,"Promise"),lS=Gc(Oa,"Set"),uS=Gc(Oa,"WeakMap"),AP="[object Map]",XG="[object Object]",kP="[object Promise]",PP="[object Set]",IP="[object WeakMap]",RP="[object DataView]",YG=Wc(sS),JG=Wc(Fm),QG=Wc(aS),eZ=Wc(lS),tZ=Wc(uS),tl=qc;(sS&&tl(new sS(new ArrayBuffer(1)))!=RP||Fm&&tl(new Fm)!=AP||aS&&tl(aS.resolve())!=kP||lS&&tl(new lS)!=PP||uS&&tl(new uS)!=IP)&&(tl=function(e){var t=qc(e),r=t==XG?e.constructor:void 0,n=r?Wc(r):"";if(n)switch(n){case YG:return RP;case JG:return AP;case QG:return kP;case eZ:return PP;case tZ:return IP}return t});var rZ=Object.prototype,nZ=rZ.hasOwnProperty;function iZ(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&nZ.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var MP=Oa.Uint8Array;function kT(e){var t=new e.constructor(e.byteLength);return new MP(t).set(new MP(e)),t}function oZ(e,t){var r=t?kT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var sZ=/\w*$/;function aZ(e){var t=new e.constructor(e.source,sZ.exec(e));return t.lastIndex=e.lastIndex,t}var LP=Tu?Tu.prototype:void 0,OP=LP?LP.valueOf:void 0;function lZ(e){return OP?Object(OP.call(e)):{}}function uZ(e,t){var r=t?kT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var cZ="[object Boolean]",hZ="[object Date]",dZ="[object Map]",fZ="[object Number]",pZ="[object RegExp]",mZ="[object Set]",gZ="[object String]",yZ="[object Symbol]",_Z="[object ArrayBuffer]",vZ="[object DataView]",xZ="[object Float32Array]",bZ="[object Float64Array]",wZ="[object Int8Array]",SZ="[object Int16Array]",TZ="[object Int32Array]",EZ="[object Uint8Array]",CZ="[object Uint8ClampedArray]",AZ="[object Uint16Array]",kZ="[object Uint32Array]";function PZ(e,t,r){var n=e.constructor;switch(t){case _Z:return kT(e);case cZ:case hZ:return new n(+e);case vZ:return oZ(e,r);case xZ:case bZ:case wZ:case SZ:case TZ:case EZ:case CZ:case AZ:case kZ:return uZ(e,r);case dZ:return new n;case fZ:case gZ:return new n(e);case pZ:return aZ(e);case mZ:return new n;case yZ:return lZ(e)}}var DP=Object.create,IZ=function(){function e(){}return function(t){if(!ig(t))return{};if(DP)return DP(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function RZ(e){return typeof e.constructor=="function"&&!TT(e)?IZ(wT(e)):{}}var MZ="[object Map]";function LZ(e){return Hc(e)&&tl(e)==MZ}var zP=Wd&&Wd.isMap,OZ=zP?ST(zP):LZ,DZ="[object Set]";function zZ(e){return Hc(e)&&tl(e)==DZ}var FP=Wd&&Wd.isSet,FZ=FP?ST(FP):zZ,BZ=1,NZ=2,$Z=4,S5="[object Arguments]",jZ="[object Array]",UZ="[object Boolean]",VZ="[object Date]",qZ="[object Error]",T5="[object Function]",HZ="[object GeneratorFunction]",WZ="[object Map]",GZ="[object Number]",E5="[object Object]",ZZ="[object RegExp]",KZ="[object Set]",XZ="[object String]",YZ="[object Symbol]",JZ="[object WeakMap]",QZ="[object ArrayBuffer]",eK="[object DataView]",tK="[object Float32Array]",rK="[object Float64Array]",nK="[object Int8Array]",iK="[object Int16Array]",oK="[object Int32Array]",sK="[object Uint8Array]",aK="[object Uint8ClampedArray]",lK="[object Uint16Array]",uK="[object Uint32Array]",gn={};gn[S5]=gn[jZ]=gn[QZ]=gn[eK]=gn[UZ]=gn[VZ]=gn[tK]=gn[rK]=gn[nK]=gn[iK]=gn[oK]=gn[WZ]=gn[GZ]=gn[E5]=gn[ZZ]=gn[KZ]=gn[XZ]=gn[YZ]=gn[sK]=gn[aK]=gn[lK]=gn[uK]=!0;gn[qZ]=gn[T5]=gn[JZ]=!1;function lm(e,t,r,n,a,h){var d,u=t&BZ,b=t&NZ,T=t&$Z;if(d!==void 0)return d;if(!ig(e))return e;var A=og(e);if(A){if(d=iZ(e),!u)return _5(e,d)}else{var P=tl(e),R=P==T5||P==HZ;if(d5(e))return jG(e,u);if(P==E5||P==S5||R&&!a){if(d=b||R?{}:RZ(e),!u)return b?GG(e,NG(d,e)):HG(e,OG(d,e))}else{if(!gn[P])return a?e:{};d=PZ(e,P,u)}}h||(h=new cf);var U=h.get(e);if(U)return U;h.set(e,d),FZ(e)?e.forEach(function(ee){d.add(lm(ee,t,r,ee,e,h))}):OZ(e)&&e.forEach(function(ee,B){d.set(B,lm(ee,t,r,B,e,h))});var j=T?b?KG:ZG:b?CT:ET,W=A?void 0:j(e);return NW(W||e,function(ee,B){W&&(B=ee,ee=e[B]),u5(d,B,lm(ee,t,r,B,e,h))}),d}var cK=1,hK=4;function Uy(e){return lm(e,cK|hK)}var BP=Array.isArray,NP=Object.keys,dK=Object.prototype.hasOwnProperty,fK=typeof Element<"u";function cS(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=BP(e),n=BP(t),a,h,d;if(r&&n){if(h=e.length,h!=t.length)return!1;for(a=h;a--!==0;)if(!cS(e[a],t[a]))return!1;return!0}if(r!=n)return!1;var u=e instanceof Date,b=t instanceof Date;if(u!=b)return!1;if(u&&b)return e.getTime()==t.getTime();var T=e instanceof RegExp,A=t instanceof RegExp;if(T!=A)return!1;if(T&&A)return e.toString()==t.toString();var P=NP(e);if(h=P.length,h!==NP(t).length)return!1;for(a=h;a--!==0;)if(!dK.call(t,P[a]))return!1;if(fK&&e instanceof Element&&t instanceof Element)return e===t;for(a=h;a--!==0;)if(d=P[a],!(d==="_owner"&&e.$$typeof)&&!cS(e[d],t[d]))return!1;return!0}return e!==e&&t!==t}var pK=function(t,r){try{return cS(t,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const dc=Xd(pK);var mK=4;function $P(e){return lm(e,mK)}function C5(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var gK="[object Symbol]";function PT(e){return typeof e=="symbol"||Hc(e)&&qc(e)==gK}var yK="Expected a function";function IT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(yK);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],h=r.cache;if(h.has(a))return h.get(a);var d=e.apply(this,n);return r.cache=h.set(a,d)||h,d};return r.cache=new(IT.Cache||Pu),r}IT.Cache=Pu;var _K=500;function vK(e){var t=IT(e,function(n){return r.size===_K&&r.clear(),n}),r=t.cache;return t}var xK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bK=/\\(\\)?/g,wK=vK(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(xK,function(r,n,a,h){t.push(a?h.replace(bK,"$1"):n||r)}),t}),SK=1/0;function TK(e){if(typeof e=="string"||PT(e))return e;var t=e+"";return t=="0"&&1/e==-SK?"-0":t}var EK=1/0,jP=Tu?Tu.prototype:void 0,UP=jP?jP.toString:void 0;function A5(e){if(typeof e=="string")return e;if(og(e))return C5(e,A5)+"";if(PT(e))return UP?UP.call(e):"";var t=e+"";return t=="0"&&1/e==-EK?"-0":t}function CK(e){return e==null?"":A5(e)}function k5(e){return og(e)?C5(e,TK):PT(e)?[e]:_5(wK(CK(e)))}function mi(){return mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mi.apply(this,arguments)}function P5(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,h;for(h=0;h<n.length;h++)a=n[h],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var G0=X.createContext(void 0);G0.displayName="FormikContext";G0.Provider;G0.Consumer;function AK(){var e=X.useContext(G0);return e}var Ns=function(t){return typeof t=="function"},Z0=function(t){return t!==null&&typeof t=="object"},kK=function(t){return String(Math.floor(Number(t)))===t},vb=function(t){return Object.prototype.toString.call(t)==="[object String]"},xb=function(t){return Z0(t)&&Ns(t.then)};function Uo(e,t,r,n){n===void 0&&(n=0);for(var a=k5(t);e&&n<a.length;)e=e[a[n++]];return n!==a.length&&!e||e===void 0?r:e}function Cc(e,t,r){for(var n=$P(e),a=n,h=0,d=k5(t);h<d.length-1;h++){var u=d[h],b=Uo(e,d.slice(0,h+1));if(b&&(Z0(b)||Array.isArray(b)))a=a[u]=$P(b);else{var T=d[h+1];a=a[u]=kK(T)&&Number(T)>=0?[]:{}}}return(h===0?e:a)[d[h]]===r?e:(r===void 0?delete a[d[h]]:a[d[h]]=r,h===0&&r===void 0&&delete n[d[h]],n)}function I5(e,t,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var a=0,h=Object.keys(e);a<h.length;a++){var d=h[a],u=e[d];Z0(u)?r.get(u)||(r.set(u,!0),n[d]=Array.isArray(u)?[]:{},I5(u,t,r,n[d])):n[d]=t}return n}function PK(e,t){switch(t.type){case"SET_VALUES":return mi({},e,{values:t.payload});case"SET_TOUCHED":return mi({},e,{touched:t.payload});case"SET_ERRORS":return dc(e.errors,t.payload)?e:mi({},e,{errors:t.payload});case"SET_STATUS":return mi({},e,{status:t.payload});case"SET_ISSUBMITTING":return mi({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return mi({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return mi({},e,{values:Cc(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return mi({},e,{touched:Cc(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return mi({},e,{errors:Cc(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return mi({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return mi({},e,{touched:I5(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return mi({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return mi({},e,{isSubmitting:!1});default:return e}}var sc={},Vy={};function IK(e){var t=e.validateOnChange,r=t===void 0?!0:t,n=e.validateOnBlur,a=n===void 0?!0:n,h=e.validateOnMount,d=h===void 0?!1:h,u=e.isInitialValid,b=e.enableReinitialize,T=b===void 0?!1:b,A=e.onSubmit,P=P5(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),R=mi({validateOnChange:r,validateOnBlur:a,validateOnMount:d,onSubmit:A},P),U=X.useRef(R.initialValues),j=X.useRef(R.initialErrors||sc),W=X.useRef(R.initialTouched||Vy),ee=X.useRef(R.initialStatus),B=X.useRef(!1),H=X.useRef({});X.useEffect(function(){return B.current=!0,function(){B.current=!1}},[]);var V=X.useState(0),te=V[1],me=X.useRef({values:Uy(R.initialValues),errors:Uy(R.initialErrors)||sc,touched:Uy(R.initialTouched)||Vy,status:Uy(R.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),fe=me.current,ge=X.useCallback(function(Me){var $e=me.current;me.current=PK($e,Me),$e!==me.current&&te(function(mt){return mt+1})},[]),ie=X.useCallback(function(Me,$e){return new Promise(function(mt,kt){var Ft=R.validate(Me,$e);Ft==null?mt(sc):xb(Ft)?Ft.then(function(tr){mt(tr||sc)},function(tr){kt(tr)}):mt(Ft)})},[R.validate]),Re=X.useCallback(function(Me,$e){var mt=R.validationSchema,kt=Ns(mt)?mt($e):mt,Ft=$e&&kt.validateAt?kt.validateAt($e,Me):MK(Me,kt);return new Promise(function(tr,He){Ft.then(function(){tr(sc)},function(Mr){Mr.name==="ValidationError"?tr(RK(Mr)):He(Mr)})})},[R.validationSchema]),Z=X.useCallback(function(Me,$e){return new Promise(function(mt){return mt(H.current[Me].validate($e))})},[]),Te=X.useCallback(function(Me){var $e=Object.keys(H.current).filter(function(kt){return Ns(H.current[kt].validate)}),mt=$e.length>0?$e.map(function(kt){return Z(kt,Uo(Me,kt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(mt).then(function(kt){return kt.reduce(function(Ft,tr,He){return tr==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||tr&&(Ft=Cc(Ft,$e[He],tr)),Ft},{})})},[Z]),Ue=X.useCallback(function(Me){return Promise.all([Te(Me),R.validationSchema?Re(Me):{},R.validate?ie(Me):{}]).then(function($e){var mt=$e[0],kt=$e[1],Ft=$e[2],tr=oS.all([mt,kt,Ft],{arrayMerge:LK});return tr})},[R.validate,R.validationSchema,Te,ie,Re]),Fe=ps(function(Me){return Me===void 0&&(Me=fe.values),ge({type:"SET_ISVALIDATING",payload:!0}),Ue(Me).then(function($e){return B.current&&(ge({type:"SET_ISVALIDATING",payload:!1}),ge({type:"SET_ERRORS",payload:$e})),$e})});X.useEffect(function(){d&&B.current===!0&&dc(U.current,R.initialValues)&&Fe(U.current)},[d,Fe]);var Ze=X.useCallback(function(Me){var $e=Me&&Me.values?Me.values:U.current,mt=Me&&Me.errors?Me.errors:j.current?j.current:R.initialErrors||{},kt=Me&&Me.touched?Me.touched:W.current?W.current:R.initialTouched||{},Ft=Me&&Me.status?Me.status:ee.current?ee.current:R.initialStatus;U.current=$e,j.current=mt,W.current=kt,ee.current=Ft;var tr=function(){ge({type:"RESET_FORM",payload:{isSubmitting:!!Me&&!!Me.isSubmitting,errors:mt,touched:kt,status:Ft,values:$e,isValidating:!!Me&&!!Me.isValidating,submitCount:Me&&Me.submitCount&&typeof Me.submitCount=="number"?Me.submitCount:0}})};if(R.onReset){var He=R.onReset(fe.values,Fr);xb(He)?He.then(tr):tr()}else tr()},[R.initialErrors,R.initialStatus,R.initialTouched,R.onReset]);X.useEffect(function(){B.current===!0&&!dc(U.current,R.initialValues)&&T&&(U.current=R.initialValues,Ze(),d&&Fe(U.current))},[T,R.initialValues,Ze,d,Fe]),X.useEffect(function(){T&&B.current===!0&&!dc(j.current,R.initialErrors)&&(j.current=R.initialErrors||sc,ge({type:"SET_ERRORS",payload:R.initialErrors||sc}))},[T,R.initialErrors]),X.useEffect(function(){T&&B.current===!0&&!dc(W.current,R.initialTouched)&&(W.current=R.initialTouched||Vy,ge({type:"SET_TOUCHED",payload:R.initialTouched||Vy}))},[T,R.initialTouched]),X.useEffect(function(){T&&B.current===!0&&!dc(ee.current,R.initialStatus)&&(ee.current=R.initialStatus,ge({type:"SET_STATUS",payload:R.initialStatus}))},[T,R.initialStatus,R.initialTouched]);var Xe=ps(function(Me){if(H.current[Me]&&Ns(H.current[Me].validate)){var $e=Uo(fe.values,Me),mt=H.current[Me].validate($e);return xb(mt)?(ge({type:"SET_ISVALIDATING",payload:!0}),mt.then(function(kt){return kt}).then(function(kt){ge({type:"SET_FIELD_ERROR",payload:{field:Me,value:kt}}),ge({type:"SET_ISVALIDATING",payload:!1})})):(ge({type:"SET_FIELD_ERROR",payload:{field:Me,value:mt}}),Promise.resolve(mt))}else if(R.validationSchema)return ge({type:"SET_ISVALIDATING",payload:!0}),Re(fe.values,Me).then(function(kt){return kt}).then(function(kt){ge({type:"SET_FIELD_ERROR",payload:{field:Me,value:Uo(kt,Me)}}),ge({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),it=X.useCallback(function(Me,$e){var mt=$e.validate;H.current[Me]={validate:mt}},[]),Et=X.useCallback(function(Me){delete H.current[Me]},[]),Ne=ps(function(Me,$e){ge({type:"SET_TOUCHED",payload:Me});var mt=$e===void 0?a:$e;return mt?Fe(fe.values):Promise.resolve()}),Ye=X.useCallback(function(Me){ge({type:"SET_ERRORS",payload:Me})},[]),vt=ps(function(Me,$e){var mt=Ns(Me)?Me(fe.values):Me;ge({type:"SET_VALUES",payload:mt});var kt=$e===void 0?r:$e;return kt?Fe(mt):Promise.resolve()}),Ct=X.useCallback(function(Me,$e){ge({type:"SET_FIELD_ERROR",payload:{field:Me,value:$e}})},[]),Lt=ps(function(Me,$e,mt){ge({type:"SET_FIELD_VALUE",payload:{field:Me,value:$e}});var kt=mt===void 0?r:mt;return kt?Fe(Cc(fe.values,Me,$e)):Promise.resolve()}),Nt=X.useCallback(function(Me,$e){var mt=$e,kt=Me,Ft;if(!vb(Me)){Me.persist&&Me.persist();var tr=Me.target?Me.target:Me.currentTarget,He=tr.type,Mr=tr.name,Tr=tr.id,rr=tr.value,qn=tr.checked,et=tr.outerHTML,rt=tr.options,at=tr.multiple;mt=$e||Mr||Tr,kt=/number|range/.test(He)?(Ft=parseFloat(rr),isNaN(Ft)?"":Ft):/checkbox/.test(He)?DK(Uo(fe.values,mt),qn,rr):rt&&at?OK(rt):rr}mt&&Lt(mt,kt)},[Lt,fe.values]),zt=ps(function(Me){if(vb(Me))return function($e){return Nt($e,Me)};Nt(Me)}),er=ps(function(Me,$e,mt){$e===void 0&&($e=!0),ge({type:"SET_FIELD_TOUCHED",payload:{field:Me,value:$e}});var kt=mt===void 0?a:mt;return kt?Fe(fe.values):Promise.resolve()}),lr=X.useCallback(function(Me,$e){Me.persist&&Me.persist();var mt=Me.target,kt=mt.name,Ft=mt.id,tr=mt.outerHTML,He=$e||kt||Ft;er(He,!0)},[er]),sr=ps(function(Me){if(vb(Me))return function($e){return lr($e,Me)};lr(Me)}),br=X.useCallback(function(Me){Ns(Me)?ge({type:"SET_FORMIK_STATE",payload:Me}):ge({type:"SET_FORMIK_STATE",payload:function(){return Me}})},[]),Ar=X.useCallback(function(Me){ge({type:"SET_STATUS",payload:Me})},[]),Zt=X.useCallback(function(Me){ge({type:"SET_ISSUBMITTING",payload:Me})},[]),fr=ps(function(){return ge({type:"SUBMIT_ATTEMPT"}),Fe().then(function(Me){var $e=Me instanceof Error,mt=!$e&&Object.keys(Me).length===0;if(mt){var kt;try{if(kt=$t(),kt===void 0)return}catch(Ft){throw Ft}return Promise.resolve(kt).then(function(Ft){return B.current&&ge({type:"SUBMIT_SUCCESS"}),Ft}).catch(function(Ft){if(B.current)throw ge({type:"SUBMIT_FAILURE"}),Ft})}else if(B.current&&(ge({type:"SUBMIT_FAILURE"}),$e))throw Me})}),ir=ps(function(Me){Me&&Me.preventDefault&&Ns(Me.preventDefault)&&Me.preventDefault(),Me&&Me.stopPropagation&&Ns(Me.stopPropagation)&&Me.stopPropagation(),fr().catch(function($e){console.warn("Warning: An unhandled error was caught from submitForm()",$e)})}),Fr={resetForm:Ze,validateForm:Fe,validateField:Xe,setErrors:Ye,setFieldError:Ct,setFieldTouched:er,setFieldValue:Lt,setStatus:Ar,setSubmitting:Zt,setTouched:Ne,setValues:vt,setFormikState:br,submitForm:fr},$t=ps(function(){return A(fe.values,Fr)}),hr=ps(function(Me){Me&&Me.preventDefault&&Ns(Me.preventDefault)&&Me.preventDefault(),Me&&Me.stopPropagation&&Ns(Me.stopPropagation)&&Me.stopPropagation(),Ze()}),Ie=X.useCallback(function(Me){return{value:Uo(fe.values,Me),error:Uo(fe.errors,Me),touched:!!Uo(fe.touched,Me),initialValue:Uo(U.current,Me),initialTouched:!!Uo(W.current,Me),initialError:Uo(j.current,Me)}},[fe.errors,fe.touched,fe.values]),mn=X.useCallback(function(Me){return{setValue:function(mt,kt){return Lt(Me,mt,kt)},setTouched:function(mt,kt){return er(Me,mt,kt)},setError:function(mt){return Ct(Me,mt)}}},[Lt,er,Ct]),Rr=X.useCallback(function(Me){var $e=Z0(Me),mt=$e?Me.name:Me,kt=Uo(fe.values,mt),Ft={name:mt,value:kt,onChange:zt,onBlur:sr};if($e){var tr=Me.type,He=Me.value,Mr=Me.as,Tr=Me.multiple;tr==="checkbox"?He===void 0?Ft.checked=!!kt:(Ft.checked=!!(Array.isArray(kt)&&~kt.indexOf(He)),Ft.value=He):tr==="radio"?(Ft.checked=kt===He,Ft.value=He):Mr==="select"&&Tr&&(Ft.value=Ft.value||[],Ft.multiple=!0)}return Ft},[sr,zt,fe.values]),Vt=X.useMemo(function(){return!dc(U.current,fe.values)},[U.current,fe.values]),_r=X.useMemo(function(){return typeof u<"u"?Vt?fe.errors&&Object.keys(fe.errors).length===0:u!==!1&&Ns(u)?u(R):u:fe.errors&&Object.keys(fe.errors).length===0},[u,Vt,fe.errors,R]),Sr=mi({},fe,{initialValues:U.current,initialErrors:j.current,initialTouched:W.current,initialStatus:ee.current,handleBlur:sr,handleChange:zt,handleReset:hr,handleSubmit:ir,resetForm:Ze,setErrors:Ye,setFormikState:br,setFieldTouched:er,setFieldValue:Lt,setFieldError:Ct,setStatus:Ar,setSubmitting:Zt,setTouched:Ne,setValues:vt,submitForm:fr,validateForm:Fe,validateField:Xe,isValid:_r,dirty:Vt,unregisterField:Et,registerField:it,getFieldProps:Rr,getFieldMeta:Ie,getFieldHelpers:mn,validateOnBlur:a,validateOnChange:r,validateOnMount:d});return Sr}function RK(e){var t={};if(e.inner){if(e.inner.length===0)return Cc(t,e.path,e.message);for(var a=e.inner,r=Array.isArray(a),n=0,a=r?a:a[Symbol.iterator]();;){var h;if(r){if(n>=a.length)break;h=a[n++]}else{if(n=a.next(),n.done)break;h=n.value}var d=h;Uo(t,d.path)||(t=Cc(t,d.path,d.message))}}return t}function MK(e,t,r,n){r===void 0&&(r=!1);var a=hS(e);return t[r?"validateSync":"validate"](a,{abortEarly:!1,context:a})}function hS(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=String(r);Array.isArray(e[n])===!0?t[n]=e[n].map(function(a){return Array.isArray(a)===!0||gP(a)?hS(a):a!==""?a:void 0}):gP(e[n])?t[n]=hS(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function LK(e,t,r){var n=e.slice();return t.forEach(function(h,d){if(typeof n[d]>"u"){var u=r.clone!==!1,b=u&&r.isMergeableObject(h);n[d]=b?oS(Array.isArray(h)?[]:{},h,r):h}else r.isMergeableObject(h)?n[d]=oS(e[d],h,r):e.indexOf(h)===-1&&n.push(h)}),n}function OK(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function DK(e,t,r){if(typeof e=="boolean")return!!t;var n=[],a=!1,h=-1;if(Array.isArray(e))n=e,h=e.indexOf(r),a=h>=0;else if(!r||r=="true"||r=="false")return!!t;return t&&r&&!a?n.concat(r):a?n.slice(0,h).concat(n.slice(h+1)):n}var zK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?X.useLayoutEffect:X.useEffect;function ps(e){var t=X.useRef(e);return zK(function(){t.current=e}),X.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current.apply(void 0,n)},[])}var FK=X.forwardRef(function(e,t){var r=e.action,n=P5(e,["action"]),a=r??"#",h=AK(),d=h.handleReset,u=h.handleSubmit;return X.createElement("form",mi({onSubmit:u,ref:t,onReset:d,action:a},n))});FK.displayName="Form";function Zc(e){this._maxSize=e,this.clear()}Zc.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Zc.prototype.get=function(e){return this._values[e]};Zc.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var BK=/[^.^\]^[]+|(?=\[\]|\.\.)/g,R5=/^\d+$/,NK=/^\d/,$K=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,jK=/^\s*(['"]?)(.*?)(\1)\s*$/,RT=512,VP=new Zc(RT),qP=new Zc(RT),HP=new Zc(RT),Ac={Cache:Zc,split:dS,normalizePath:bb,setter:function(e){var t=bb(e);return qP.get(e)||qP.set(e,function(n,a){for(var h=0,d=t.length,u=n;h<d-1;){var b=t[h];if(b==="__proto__"||b==="constructor"||b==="prototype")return n;u=u[t[h++]]}u[t[h]]=a})},getter:function(e,t){var r=bb(e);return HP.get(e)||HP.set(e,function(a){for(var h=0,d=r.length;h<d;)if(a!=null||!t)a=a[r[h++]];else return;return a})},join:function(e){return e.reduce(function(t,r){return t+(MT(r)||R5.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){UK(Array.isArray(e)?e:dS(e),t,r)}};function bb(e){return VP.get(e)||VP.set(e,dS(e).map(function(t){return t.replace(jK,"$2")}))}function dS(e){return e.match(BK)||[""]}function UK(e,t,r){var n=e.length,a,h,d,u;for(h=0;h<n;h++)a=e[h],a&&(HK(a)&&(a='"'+a+'"'),u=MT(a),d=!u&&/^\d+$/.test(a),t.call(r,a,u,d,h,e))}function MT(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function VK(e){return e.match(NK)&&!e.match(R5)}function qK(e){return $K.test(e)}function HK(e){return!MT(e)&&(VK(e)||qK(e))}const WK=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,K0=e=>e.match(WK)||[],X0=e=>e[0].toUpperCase()+e.slice(1),LT=(e,t)=>K0(e).join(t).toLowerCase(),M5=e=>K0(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),GK=e=>X0(M5(e)),ZK=e=>LT(e,"_"),KK=e=>LT(e,"-"),XK=e=>X0(LT(e," ")),YK=e=>K0(e).map(X0).join(" ");var wb={words:K0,upperFirst:X0,camelCase:M5,pascalCase:GK,snakeCase:ZK,kebabCase:KK,sentenceCase:XK,titleCase:YK},OT={exports:{}};OT.exports=function(e){return L5(JK(e),e)};OT.exports.array=L5;function L5(e,t){var r=e.length,n=new Array(r),a={},h=r,d=QK(t),u=eX(e);for(t.forEach(function(T){if(!u.has(T[0])||!u.has(T[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});h--;)a[h]||b(e[h],h,new Set);return n;function b(T,A,P){if(P.has(T)){var R;try{R=", node was:"+JSON.stringify(T)}catch{R=""}throw new Error("Cyclic dependency"+R)}if(!u.has(T))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(T));if(!a[A]){a[A]=!0;var U=d.get(T)||new Set;if(U=Array.from(U),A=U.length){P.add(T);do{var j=U[--A];b(j,u.get(j),P)}while(A);P.delete(T)}n[--r]=T}}}function JK(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var a=e[r];t.add(a[0]),t.add(a[1])}return Array.from(t)}function QK(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var a=e[r];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}function eX(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var tX=OT.exports;const rX=Xd(tX),nX=Object.prototype.toString,iX=Error.prototype.toString,oX=RegExp.prototype.toString,sX=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",aX=/^Symbol\((.*)\)(.*)$/;function lX(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function WP(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return lX(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return sX.call(e).replace(aX,"Symbol($1)");const n=nX.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+iX.call(e)+"]":n==="RegExp"?oX.call(e):null}function vu(e,t){let r=WP(e,t);return r!==null?r:JSON.stringify(e,function(n,a){let h=WP(this[n],t);return h!==null?h:a},2)}function O5(e){return e==null?[]:[].concat(e)}let D5,z5,F5,uX=/\$\{\s*(\w+)\s*\}/g;D5=Symbol.toStringTag;class GP{constructor(t,r,n,a){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[D5]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=a,this.errors=[],this.inner=[],O5(t).forEach(h=>{if(wo.isError(h)){this.errors.push(...h.errors);const d=h.inner.length?h.inner:[h];this.inner.push(...d)}else this.errors.push(h)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}z5=Symbol.hasInstance;F5=Symbol.toStringTag;class wo extends Error{static formatError(t,r){const n=r.label||r.path||"this";return n!==r.path&&(r=Object.assign({},r,{path:n})),typeof t=="string"?t.replace(uX,(a,h)=>vu(r[h])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,a,h){const d=new GP(t,r,n,a);if(h)return d;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[F5]="Error",this.name=d.name,this.message=d.message,this.type=d.type,this.value=d.value,this.path=d.path,this.errors=d.errors,this.inner=d.inner,Error.captureStackTrace&&Error.captureStackTrace(this,wo)}static[z5](t){return GP[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let ga={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const a=n!=null&&n!==r?` (cast from the value \`${vu(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${vu(r,!0)}\``+a:`${e} must match the configured type. The validated value was: \`${vu(r,!0)}\``+a}},_o={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},cX={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},fS={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},hX={isValue:"${path} field must be ${value}"},pS={noUnknown:"${path} field has unspecified keys: ${unknown}"},dX={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},fX={notType:e=>{const{path:t,value:r,spec:n}=e,a=n.types.length;if(Array.isArray(r)){if(r.length<a)return`${t} tuple value has too few items, expected a length of ${a} but got ${r.length} for value: \`${vu(r,!0)}\``;if(r.length>a)return`${t} tuple value has too many items, expected a length of ${a} but got ${r.length} for value: \`${vu(r,!0)}\``}return wo.formatError(ga.notType,e)}};Object.assign(Object.create(null),{mixed:ga,string:_o,number:cX,date:fS,object:pS,array:dX,boolean:hX,tuple:fX});const DT=e=>e&&e.__isYupSchema__;class xv{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:a,otherwise:h}=r,d=typeof n=="function"?n:(...u)=>u.every(b=>b===n);return new xv(t,(u,b)=>{var T;let A=d(...u)?a:h;return(T=A==null?void 0:A(b))!=null?T:b})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(h=>h.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),a=this.fn(n,t,r);if(a===void 0||a===t)return t;if(!DT(a))throw new TypeError("conditions must return a schema object");return a.resolve(r)}}const qy={context:"$",value:"."};class Kc{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===qy.context,this.isValue=this.key[0]===qy.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?qy.context:this.isValue?qy.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&Ac.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let a=this.isContext?n:this.isValue?t:r;return this.getter&&(a=this.getter(a||{})),this.map&&(a=this.map(a)),a}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Kc.prototype.__isYupRef=!0;const wc=e=>e==null;function rd(e){function t({value:r,path:n="",options:a,originalValue:h,schema:d},u,b){const{name:T,test:A,params:P,message:R,skipAbsent:U}=e;let{parent:j,context:W,abortEarly:ee=d.spec.abortEarly,disableStackTrace:B=d.spec.disableStackTrace}=a;function H(Te){return Kc.isRef(Te)?Te.getValue(r,j,W):Te}function V(Te={}){const Ue=Object.assign({value:r,originalValue:h,label:d.spec.label,path:Te.path||n,spec:d.spec,disableStackTrace:Te.disableStackTrace||B},P,Te.params);for(const Ze of Object.keys(Ue))Ue[Ze]=H(Ue[Ze]);const Fe=new wo(wo.formatError(Te.message||R,Ue),r,Ue.path,Te.type||T,Ue.disableStackTrace);return Fe.params=Ue,Fe}const te=ee?u:b;let me={path:n,parent:j,type:T,from:a.from,createError:V,resolve:H,options:a,originalValue:h,schema:d};const fe=Te=>{wo.isError(Te)?te(Te):Te?b(null):te(V())},ge=Te=>{wo.isError(Te)?te(Te):u(Te)};if(U&&wc(r))return fe(!0);let Re;try{var Z;if(Re=A.call(me,r,me),typeof((Z=Re)==null?void 0:Z.then)=="function"){if(a.sync)throw new Error(`Validation test of type: "${me.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(Re).then(fe,ge)}}catch(Te){ge(Te);return}fe(Re)}return t.OPTIONS=e,t}function pX(e,t,r,n=r){let a,h,d;return t?(Ac.forEach(t,(u,b,T)=>{let A=b?u.slice(1,u.length-1):u;e=e.resolve({context:n,parent:a,value:r});let P=e.type==="tuple",R=T?parseInt(A,10):0;if(e.innerType||P){if(P&&!T)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${d}" must contain an index to the tuple element, e.g. "${d}[0]"`);if(r&&R>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${u}, in the path: ${t}. because there is no value at that index. `);a=r,r=r&&r[R],e=P?e.spec.types[R]:e.innerType}if(!T){if(!e.fields||!e.fields[A])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${d} which is a type: "${e.type}")`);a=r,r=r&&r[A],e=e.fields[A]}h=A,d=b?"["+u+"]":"."+u}),{schema:e,parent:a,parentPath:h}):{parent:a,parentPath:t,schema:e}}class bv extends Set{describe(){const t=[];for(const r of this.values())t.push(Kc.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new bv(this.values())}merge(t,r){const n=this.clone();return t.forEach(a=>n.add(a)),r.forEach(a=>n.delete(a)),n}}function vd(e,t=new Map){if(DT(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=vd(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,a]of e.entries())r.set(n,vd(a,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(vd(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,a]of Object.entries(e))r[n]=vd(a,t)}else throw Error(`Unable to clone ${e}`);return r}class Ra{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new bv,this._blacklist=new bv,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ga.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=vd(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const a=Object.assign({},r.spec,n.spec);return n.spec=a,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(h=>{t.tests.forEach(d=>{h.test(d.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((a,h)=>h.resolve(a,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,a,h;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(a=t.recursive)!=null?a:this.spec.recursive,disableStackTrace:(h=t.disableStackTrace)!=null?h:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),a=r.assert==="ignore-optionality",h=n._cast(t,r);if(r.assert!==!1&&!n.isType(h)){if(a&&wc(h))return h;let d=vu(t),u=vu(h);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${d} 
`+(u!==d?`result of cast: ${u}`:""))}return h}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((a,h)=>h.call(this,a,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,a){let{path:h,originalValue:d=t,strict:u=this.spec.strict}=r,b=t;u||(b=this._cast(b,Object.assign({assert:!1},r)));let T=[];for(let A of Object.values(this.internalTests))A&&T.push(A);this.runTests({path:h,value:b,originalValue:d,options:r,tests:T},n,A=>{if(A.length)return a(A,b);this.runTests({path:h,value:b,originalValue:d,options:r,tests:this.tests},n,a)})}runTests(t,r,n){let a=!1,{tests:h,value:d,originalValue:u,path:b,options:T}=t,A=W=>{a||(a=!0,r(W,d))},P=W=>{a||(a=!0,n(W,d))},R=h.length,U=[];if(!R)return P([]);let j={value:d,originalValue:u,path:b,options:T,schema:this};for(let W=0;W<h.length;W++){const ee=h[W];ee(j,A,function(H){H&&(Array.isArray(H)?U.push(...H):U.push(H)),--R<=0&&P(U)})}}asNestedTest({key:t,index:r,parent:n,parentPath:a,originalParent:h,options:d}){const u=t??r;if(u==null)throw TypeError("Must include `key` or `index` for nested validations");const b=typeof u=="number";let T=n[u];const A=Object.assign({},d,{strict:!0,parent:n,value:T,originalValue:h[u],key:void 0,[b?"index":"key"]:u,path:b||u.includes(".")?`${a||""}[${b?u:`"${u}"`}]`:(a?`${a}.`:"")+t});return(P,R,U)=>this.resolve(A)._validate(T,A,R,U)}validate(t,r){var n;let a=this.resolve(Object.assign({},r,{value:t})),h=(n=r==null?void 0:r.disableStackTrace)!=null?n:a.spec.disableStackTrace;return new Promise((d,u)=>a._validate(t,r,(b,T)=>{wo.isError(b)&&(b.value=T),u(b)},(b,T)=>{b.length?u(new wo(b,T,void 0,void 0,h)):d(T)}))}validateSync(t,r){var n;let a=this.resolve(Object.assign({},r,{value:t})),h,d=(n=r==null?void 0:r.disableStackTrace)!=null?n:a.spec.disableStackTrace;return a._validate(t,Object.assign({},r,{sync:!0}),(u,b)=>{throw wo.isError(u)&&(u.value=b),u},(u,b)=>{if(u.length)throw new wo(u,t,void 0,void 0,d);h=b}),h}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(wo.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(wo.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):vd(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=rd({message:r,name:"nullable",test(a){return a===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=rd({message:r,name:"optionality",test(a){return a===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=ga.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=ga.notNull){return this.nullability(!1,t)}required(t=ga.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=ga.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),a=rd(r),h=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(d=>!(d.OPTIONS.name===r.name&&(h||d.OPTIONS.test===a.OPTIONS.test))),n.tests.push(a),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),a=O5(t).map(h=>new Kc(h));return a.forEach(h=>{h.isSibling&&n.deps.push(h.key)}),n.conditions.push(typeof r=="function"?new xv(a,r):xv.fromOptions(a,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=rd({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=ga.oneOf){let n=this.clone();return t.forEach(a=>{n._whitelist.add(a),n._blacklist.delete(a)}),n.internalTests.whiteList=rd({message:r,name:"oneOf",skipAbsent:!0,test(a){let h=this.schema._whitelist,d=h.resolveAll(this.resolve);return d.includes(a)?!0:this.createError({params:{values:Array.from(h).join(", "),resolved:d}})}}),n}notOneOf(t,r=ga.notOneOf){let n=this.clone();return t.forEach(a=>{n._blacklist.add(a),n._whitelist.delete(a)}),n.internalTests.blacklist=rd({message:r,name:"notOneOf",test(a){let h=this.schema._blacklist,d=h.resolveAll(this.resolve);return d.includes(a)?this.createError({params:{values:Array.from(h).join(", "),resolved:d}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:a,optional:h,nullable:d}=r.spec;return{meta:a,label:n,optional:h,nullable:d,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(b=>({name:b.OPTIONS.name,params:b.OPTIONS.params})).filter((b,T,A)=>A.findIndex(P=>P.name===b.name)===T)}}}Ra.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Ra.prototype[`${e}At`]=function(t,r,n={}){const{parent:a,parentPath:h,schema:d}=pX(this,t,r,n.context);return d[e](a&&a[h],Object.assign({},n,{parent:a,path:t}))};for(const e of["equals","is"])Ra.prototype[e]=Ra.prototype.oneOf;for(const e of["not","nope"])Ra.prototype[e]=Ra.prototype.notOneOf;const mX=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function gX(e){const t=mS(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(r=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}function mS(e){var t,r;const n=mX.exec(e);return n?{year:Ja(n[1]),month:Ja(n[2],1)-1,day:Ja(n[3],1),hour:Ja(n[4]),minute:Ja(n[5]),second:Ja(n[6]),millisecond:n[7]?Ja(n[7].substring(0,3)):0,precision:(t=(r=n[7])==null?void 0:r.length)!=null?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Ja(n[10]),minuteOffset:Ja(n[11])}:null}function Ja(e,t=0){return Number(e)||t}let yX=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_X=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,vX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,xX="^\\d{4}-\\d{2}-\\d{2}",bX="\\d{2}:\\d{2}:\\d{2}",wX="(([+-]\\d{2}(:?\\d{2})?)|Z)",SX=new RegExp(`${xX}T${bX}(\\.\\d+)?${wX}$`),TX=e=>wc(e)||e===e.trim(),EX={}.toString();function gS(){return new B5}class B5 extends Ra{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const a=t!=null&&t.toString?t.toString():t;return a===EX?t:a})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||ga.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=_o.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=_o.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=_o.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,a,h;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:a,name:h}=r:a=r),this.test({name:h||"matches",message:a||_o.matches,params:{regex:t},skipAbsent:!0,test:d=>d===""&&n||d.search(t)!==-1})}email(t=_o.email){return this.matches(yX,{name:"email",message:t,excludeEmptyString:!0})}url(t=_o.url){return this.matches(_X,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=_o.uuid){return this.matches(vX,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let r="",n,a;return t&&(typeof t=="object"?{message:r="",allowOffset:n=!1,precision:a=void 0}=t:r=t),this.matches(SX,{name:"datetime",message:r||_o.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||_o.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:h=>{if(!h||n)return!0;const d=mS(h);return d?!!d.z:!1}}).test({name:"datetime_precision",message:r||_o.datetime_precision,params:{precision:a},skipAbsent:!0,test:h=>{if(!h||a==null)return!0;const d=mS(h);return d?d.precision===a:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=_o.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:TX})}lowercase(t=_o.lowercase){return this.transform(r=>wc(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>wc(r)||r===r.toLowerCase()})}uppercase(t=_o.uppercase){return this.transform(r=>wc(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>wc(r)||r===r.toUpperCase()})}}gS.prototype=B5.prototype;let CX=new Date(""),AX=e=>Object.prototype.toString.call(e)==="[object Date]";class Y0 extends Ra{constructor(){super({type:"date",check(t){return AX(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=gX(t),isNaN(t)?Y0.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(Kc.isRef(t))n=t;else{let a=this.cast(t);if(!this._typeCheck(a))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=a}return n}min(t,r=fS.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(a){return a>=this.resolve(n)}})}max(t,r=fS.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(a){return a<=this.resolve(n)}})}}Y0.INVALID_DATE=CX;Y0.prototype;function kX(e,t=[]){let r=[],n=new Set,a=new Set(t.map(([d,u])=>`${d}-${u}`));function h(d,u){let b=Ac.split(d)[0];n.add(b),a.has(`${u}-${b}`)||r.push([u,b])}for(const d of Object.keys(e)){let u=e[d];n.add(d),Kc.isRef(u)&&u.isSibling?h(u.path,d):DT(u)&&"deps"in u&&u.deps.forEach(b=>h(b,d))}return rX.array(Array.from(n),r).reverse()}function ZP(e,t){let r=1/0;return e.some((n,a)=>{var h;if((h=t.path)!=null&&h.includes(n))return r=a,!0}),r}function N5(e){return(t,r)=>ZP(e,t)-ZP(e,r)}const PX=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function w_(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=w_(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=w_(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(w_)}):"optional"in e?e.optional():e}const IX=(e,t)=>{const r=[...Ac.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),a=Ac.getter(Ac.join(r),!0)(e);return!!(a&&n in a)};let KP=e=>Object.prototype.toString.call(e)==="[object Object]";function RX(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const MX=N5([]);function $5(e){return new j5(e)}class j5 extends Ra{constructor(t){super({type:"object",check(r){return KP(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=MX,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let a=super._cast(t,r);if(a===void 0)return this.getDefault(r);if(!this._typeCheck(a))return a;let h=this.fields,d=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,u=[].concat(this._nodes,Object.keys(a).filter(P=>!this._nodes.includes(P))),b={},T=Object.assign({},r,{parent:b,__validating:r.__validating||!1}),A=!1;for(const P of u){let R=h[P],U=P in a;if(R){let j,W=a[P];T.path=(r.path?`${r.path}.`:"")+P,R=R.resolve({value:W,context:r.context,parent:b});let ee=R instanceof Ra?R.spec:void 0,B=ee==null?void 0:ee.strict;if(ee!=null&&ee.strip){A=A||P in a;continue}j=!r.__validating||!B?R.cast(a[P],T):a[P],j!==void 0&&(b[P]=j)}else U&&!d&&(b[P]=a[P]);(U!==P in b||b[P]!==a[P])&&(A=!0)}return A?b:a}_validate(t,r={},n,a){let{from:h=[],originalValue:d=t,recursive:u=this.spec.recursive}=r;r.from=[{schema:this,value:d},...h],r.__validating=!0,r.originalValue=d,super._validate(t,r,n,(b,T)=>{if(!u||!KP(T)){a(b,T);return}d=d||T;let A=[];for(let P of this._nodes){let R=this.fields[P];!R||Kc.isRef(R)||A.push(R.asNestedTest({options:r,key:P,parent:T,parentPath:r.path,originalParent:d}))}this.runTests({tests:A,value:T,originalValue:d,options:r},n,P=>{a(P.sort(this._sortErrors).concat(b),T)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[a,h]of Object.entries(this.fields)){const d=n[a];n[a]=d===void 0?h:d}return r.withMutation(a=>a.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var a;const h=this.fields[n];let d=t;(a=d)!=null&&a.value&&(d=Object.assign({},d,{parent:d.value,value:d.value[n]})),r[n]=h&&"getDefault"in h?h.getDefault(d):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=kX(t,r),n._sortErrors=N5(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let a=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),a=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),a)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return w_(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,a])=>t.includes(n)&&t.includes(a)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let a=Ac.getter(t,!0);return this.transform(h=>{if(!h)return h;let d=h;return IX(h,t)&&(d=Object.assign({},h),n||delete d[t],d[r]=a(h)),d})}json(){return this.transform(PX)}noUnknown(t=!0,r=pS.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(a){if(a==null)return!0;const h=RX(this.schema,a);return!t||h.length===0||this.createError({params:{unknown:h.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=pS.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const a of Object.keys(r))n[t(a)]=r[a];return n})}camelCase(){return this.transformKeys(wb.camelCase)}snakeCase(){return this.transformKeys(wb.snakeCase)}constantCase(){return this.transformKeys(t=>wb.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[h,d]of Object.entries(r.fields)){var a;let u=t;(a=u)!=null&&a.value&&(u=Object.assign({},u,{parent:u.value,value:u.value[h]})),n.fields[h]=d.describe(u)}return n}}$5.prototype=j5.prototype;const LX=6,OX=$5({email:gS().email("Enter a valid email").required("Email is required"),password:gS().min(LX,({min:e})=>`Password should be of minimum ${e} characters length`).required("Password is required")}),DX=Yt(C9)(({theme:e})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:e.spacing(4),gap:e.spacing(2),margin:"auto",[e.breakpoints.up("sm")]:{maxWidth:"450px"},boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",...e.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})})),zX=Yt(vH)(({theme:e})=>({minHeight:"100%",padding:e.spacing(2),[e.breakpoints.up("sm")]:{padding:e.spacing(4)},"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...e.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}}));function FX(){const e=JL(),[t,r]=X.useState(!1),n=async({email:u,password:b})=>{try{await m6.post("login",{email:u,password:b}),sessionStorage.setItem(W2.IS_LOGGED_IN,"true"),e(Bw.MAP,{replace:!0})}catch(T){console.error(T),r(!0)}},a=(u,b)=>{b!=="clickaway"&&r(!1)},h=IK({initialValues:{email:"",password:""},validationSchema:OX,onSubmit:n}),d=We.jsx(j7,{size:"small","aria-label":"close",color:"inherit",onClick:a,children:We.jsx(l7,{fontSize:"small"})});return We.jsxs(db,{children:[We.jsx(L9,{enableColorScheme:!0}),We.jsx(zX,{direction:"column",justifyContent:"space-between",children:We.jsxs(DX,{variant:"outlined",children:[We.jsx(G7,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Log in"}),We.jsxs(db,{component:"form",onSubmit:h.handleSubmit,noValidate:!0,sx:{display:"flex",flexDirection:"column",width:"100%",gap:2},children:[We.jsxs(rS,{children:[We.jsx(nS,{htmlFor:"email",children:"Email"}),We.jsx(pP,{id:"email",type:"email",name:"email",placeholder:"your@email.com",autoComplete:"email",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:h.errors.email?"error":"primary",sx:{ariaLabel:"email"},value:h.values.email,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.email&&!!h.errors.email,helperText:h.touched.email&&h.errors.email})]}),We.jsxs(rS,{children:[We.jsx(db,{sx:{display:"flex",justifyContent:"space-between"},children:We.jsx(nS,{htmlFor:"password",children:"Password"})}),We.jsx(pP,{name:"password",placeholder:"••••••",type:"password",id:"password",autoComplete:"current-password",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:h.errors.password?"error":"primary",value:h.values.password,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.password&&!!h.errors.password,helperText:h.touched.password&&h.errors.password})]}),We.jsx(w9,{type:"submit",fullWidth:!0,variant:"contained",children:"Sign in"})]})]})}),We.jsx(_H,{open:t,autoHideDuration:6e3,onClose:a,message:"Invalid user or password",action:d})]})}var U5={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(r,n){e.exports=n()})(fF,function(){var r={},n={};function a(d,u,b){if(n[d]=b,d==="index"){var T="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",A={};return n.shared(A),n.index(r,A),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))),r}}a("shared",["exports"],function(d){function u(s,o,l,f){return new(l||(l=Promise))(function(g,v){function x(I){try{E(f.next(I))}catch(M){v(M)}}function w(I){try{E(f.throw(I))}catch(M){v(M)}}function E(I){var M;I.done?g(I.value):(M=I.value,M instanceof l?M:new l(function(O){O(M)})).then(x,w)}E((f=f.apply(s,o||[])).next())})}function b(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var T=A;function A(s,o){this.x=s,this.y=o}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,o){return this.clone()._rotateAround(s,o)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var o=s.x-this.x,l=s.y-this.y;return o*o+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,o){return Math.atan2(this.x*o-this.y*s,this.x*s+this.y*o)},_matMult:function(s){var o=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=o,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var o=Math.cos(s),l=Math.sin(s),f=l*this.x+o*this.y;return this.x=o*this.x-l*this.y,this.y=f,this},_rotateAround:function(s,o){var l=Math.cos(s),f=Math.sin(s),g=o.y+f*(this.x-o.x)+l*(this.y-o.y);return this.x=o.x+l*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(s){return s instanceof A?s:Array.isArray(s)?new A(s[0],s[1]):s};var P=b(T),R=U;function U(s,o,l,f){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=o,this.p2x=l,this.p2y=f}U.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,o){if(o===void 0&&(o=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,f=0;f<8;f++){var g=this.sampleCurveX(l)-s;if(Math.abs(g)<o)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=g/v}var x=0,w=1;for(l=s,f=0;f<20&&(g=this.sampleCurveX(l),!(Math.abs(g-s)<o));f++)s>g?x=l:w=l,l=.5*(w-x)+x;return l},solve:function(s,o){return this.sampleCurveY(this.solveCurveX(s,o))}};var j=b(R);let W,ee;function B(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function H(){if(ee==null&&(ee=!1,B())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let f=0;f<5*5;f++){const g=4*f;o.fillStyle=`rgb(${g},${g+1},${g+2})`,o.fillRect(f%5,Math.floor(f/5),1,1)}const l=o.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){ee=!0;break}}}return ee||!1}function V(s,o,l,f){const g=new j(s,o,l,f);return v=>g.solve(v)}const te=V(.25,.1,.25,1);function me(s,o,l){return Math.min(l,Math.max(o,s))}function fe(s,o,l){const f=l-o,g=((s-o)%f+f)%f+o;return g===o?l:g}function ge(s,...o){for(const l of o)for(const f in l)s[f]=l[f];return s}let ie=1;function Re(s,o,l){const f={};for(const g in s)f[g]=o.call(this,s[g],g,s);return f}function Z(s,o,l){const f={};for(const g in s)o.call(this,s[g],g,s)&&(f[g]=s[g]);return f}function Te(s){return Array.isArray(s)?s.map(Te):typeof s=="object"&&s?Re(s,Te):s}const Ue={};function Fe(s){Ue[s]||(typeof console<"u"&&console.warn(s),Ue[s]=!0)}function Ze(s,o,l){return(l.y-s.y)*(o.x-s.x)>(o.y-s.y)*(l.x-s.x)}function Xe(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let it=null;function Et(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ye(s,o,l,f,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),E=new Uint8ClampedArray(f*g*4);if(yield v.copyTo(E,function(I,M,O,F,q){const K=4*Math.max(-M,0),Y=(Math.max(0,O)-O)*F*4+K,ae=4*F,he=Math.max(0,M),ke=Math.max(0,O);return{rect:{x:he,y:ke,width:Math.min(I.width,M+F)-he,height:Math.min(I.height,O+q)-ke},layout:[{offset:Y,stride:ae}]}}(s,o,l,f,g)),w)for(let I=0;I<E.length;I+=4){const M=E[I];E[I]=E[I+2],E[I+2]=M}return E}finally{v.close()}})}let vt,Ct;const Lt="AbortError";function Nt(){return new Error(Lt)}const zt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function er(s){return zt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const lr="global-dispatcher";class sr extends Error{constructor(o,l,f,g){super(`AJAXError: ${l} (${o}): ${f}`),this.status=o,this.statusText=l,this.url=f,this.body=g}}const br=()=>Xe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ar=function(s,o){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const f=er(s.url);if(f)return f(s,o);if(Xe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:lr},o)}if(!(/^file:/.test(l=s.url)||/^file:/.test(br())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,g){return u(this,void 0,void 0,function*(){const v=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:br(),signal:g.signal});f.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const I=yield x.blob();throw new sr(x.status,x.statusText,f.url,I)}let w;w=f.type==="arrayBuffer"||f.type==="image"?x.arrayBuffer():f.type==="json"?x.json():x.text();const E=yield w;if(g.signal.aborted)throw Nt();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,o);if(Xe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:lr},o)}var l;return function(f,g){return new Promise((v,x)=>{var w;const E=new XMLHttpRequest;E.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(E.responseType="arraybuffer");for(const I in f.headers)E.setRequestHeader(I,f.headers[I]);f.type==="json"&&(E.responseType="text",!((w=f.headers)===null||w===void 0)&&w.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=f.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let I=E.response;if(f.type==="json")try{I=JSON.parse(E.response)}catch(M){return void x(M)}v({data:I,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const I=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new sr(E.status,E.statusText,f.url,I))}},g.signal.addEventListener("abort",()=>{E.abort(),x(Nt())}),E.send(f.body)})}(s,o)};function Zt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const o=new URL(s),l=window.location;return o.protocol===l.protocol&&o.host===l.host}function fr(s,o,l){l[s]&&l[s].indexOf(o)!==-1||(l[s]=l[s]||[],l[s].push(o))}function ir(s,o,l){if(l&&l[s]){const f=l[s].indexOf(o);f!==-1&&l[s].splice(f,1)}}class Fr{constructor(o,l={}){ge(this,l),this.type=o}}class $t extends Fr{constructor(o,l={}){super("error",ge({error:o},l))}}class hr{on(o,l){return this._listeners=this._listeners||{},fr(o,l,this._listeners),this}off(o,l){return ir(o,l,this._listeners),ir(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},fr(o,l,this._oneTimeListeners),this):new Promise(f=>this.once(o,f))}fire(o,l){typeof o=="string"&&(o=new Fr(o,l||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const w of g)w.call(this,o);const v=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const w of v)ir(f,w,this._oneTimeListeners),w.call(this,o);const x=this._eventedParent;x&&(ge(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(o))}else o instanceof $t&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const mn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rr(s,o){const l={};for(const f in s)f!=="ref"&&(l[f]=s[f]);return mn.forEach(f=>{f in o&&(l[f]=o[f])}),l}function Vt(s,o){if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!Vt(s[l],o[l]))return!1;return!0}if(typeof s=="object"&&s!==null&&o!==null){if(typeof o!="object"||Object.keys(s).length!==Object.keys(o).length)return!1;for(const l in s)if(!Vt(s[l],o[l]))return!1;return!0}return s===o}function _r(s,o){s.push(o)}function Sr(s,o,l){_r(l,{command:"addSource",args:[s,o[s]]})}function Me(s,o,l){_r(o,{command:"removeSource",args:[s]}),l[s]=!0}function $e(s,o,l,f){Me(s,l,f),Sr(s,o,l)}function mt(s,o,l){let f;for(f in s[l])if(Object.prototype.hasOwnProperty.call(s[l],f)&&f!=="data"&&!Vt(s[l][f],o[l][f]))return!1;for(f in o[l])if(Object.prototype.hasOwnProperty.call(o[l],f)&&f!=="data"&&!Vt(s[l][f],o[l][f]))return!1;return!0}function kt(s,o,l,f,g,v){s=s||{},o=o||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(Vt(s[x],o[x])||l.push({command:v,args:[f,x,o[x],g]}));for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Vt(s[x],o[x])||l.push({command:v,args:[f,x,o[x],g]}))}function Ft(s){return s.id}function tr(s,o){return s[o.id]=o,s}class He{constructor(o,l,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function Mr(s,...o){for(const l of o)for(const f in l)s[f]=l[f];return s}class Tr extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}class rr{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[f,g]of l)this.bindings[f]=g}concat(o){return new rr(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const qn={kind:"null"},et={kind:"number"},rt={kind:"string"},at={kind:"boolean"},Er={kind:"color"},Mn={kind:"object"},Wt={kind:"value"},ao={kind:"collator"},lo={kind:"formatted"},Gi={kind:"padding"},Zi={kind:"resolvedImage"},ue={kind:"variableAnchorOffsetCollection"};function N(s,o){return{kind:"array",itemType:s,N:o}}function $(s){if(s.kind==="array"){const o=$(s.itemType);return typeof s.N=="number"?`array<${o}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${o}>`}return s.kind}const J=[qn,et,rt,at,Er,lo,Mn,N(Wt),Gi,Zi,ue];function oe(s,o){if(o.kind==="error")return null;if(s.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!oe(s.itemType,o.itemType))&&(typeof s.N!="number"||s.N===o.N))return null}else{if(s.kind===o.kind)return null;if(s.kind==="value"){for(const l of J)if(!oe(l,o))return null}}return`Expected ${$(s)} but found ${$(o)} instead.`}function ve(s,o){return o.some(l=>l.kind===s.kind)}function Se(s,o){return o.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}function Ae(s,o){return s.kind==="array"&&o.kind==="array"?s.itemType.kind===o.itemType.kind&&typeof s.N=="number":s.kind===o.kind}const ye=.96422,Oe=.82521,Ge=4/29,Le=6/29,ne=3*Le*Le,ce=Le*Le*Le,be=Math.PI/180,ze=180/Math.PI;function Ke(s){return(s%=360)<0&&(s+=360),s}function ot([s,o,l,f]){let g,v;const x=nt((.2225045*(s=ft(s))+.7168786*(o=ft(o))+.0606169*(l=ft(l)))/1);s===o&&o===l?g=v=x:(g=nt((.4360747*s+.3850649*o+.1430804*l)/ye),v=nt((.0139322*s+.0971045*o+.7141733*l)/Oe));const w=116*x-16;return[w<0?0:w,500*(g-x),200*(x-v),f]}function ft(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function nt(s){return s>ce?Math.pow(s,1/3):s/ne+Ge}function St([s,o,l,f]){let g=(s+16)/116,v=isNaN(o)?g:g+o/500,x=isNaN(l)?g:g-l/200;return g=1*ut(g),v=ye*ut(v),x=Oe*ut(x),[Qe(3.1338561*v-1.6168667*g-.4906146*x),Qe(-.9787684*v+1.9161415*g+.033454*x),Qe(.0719453*v-.2289914*g+1.4052427*x),f]}function Qe(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function ut(s){return s>Le?s*s*s:ne*(s-Ge)}function qt(s){return parseInt(s.padEnd(2,s),16)/255}function or(s,o){return dr(o?s/100:s,0,1)}function dr(s,o,l){return Math.min(Math.max(o,s),l)}function nr(s){return!s.some(Number.isNaN)}const un={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Jt{constructor(o,l,f,g=1,v=!0){this.r=o,this.g=l,this.b=f,this.a=g,v||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[o,l,f,g]))}static parse(o){if(o instanceof Jt)return o;if(typeof o!="string")return;const l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=un[f];if(g){const[x,w,E]=g;return[x/255,w/255,E/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const x=f.length<6?1:2;let w=1;return[qt(f.slice(w,w+=x)),qt(f.slice(w,w+=x)),qt(f.slice(w,w+=x)),qt(f.slice(w,w+x)||"ff")]}if(f.startsWith("rgb")){const x=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,E,I,M,O,F,q,K,Y,ae,he,ke]=x,xe=[M||" ",q||" ",ae].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Ce=[I,F,Y].join(""),De=Ce==="%%%"?100:Ce===""?255:0;if(De){const Je=[dr(+E/De,0,1),dr(+O/De,0,1),dr(+K/De,0,1),he?or(+he,ke):1];if(nr(Je))return Je}}return}}const v=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,E,I,M,O,F,q,K]=v,Y=[E||" ",M||" ",F].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const ae=[+w,dr(+I,0,100),dr(+O,0,100),q?or(+q,K):1];if(nr(ae))return function([he,ke,xe,Ce]){function De(Je){const _t=(Je+he/30)%12,jt=ke*Math.min(xe,1-xe);return xe-jt*Math.max(-1,Math.min(_t-3,9-_t,1))}return he=Ke(he),ke/=100,xe/=100,[De(0),De(8),De(4),Ce]}(ae)}}}(o);return l?new Jt(...l,!1):void 0}get rgb(){const{r:o,g:l,b:f,a:g}=this,v=g||1/0;return this.overwriteGetter("rgb",[o/v,l/v,f/v,g])}get hcl(){return this.overwriteGetter("hcl",function(o){const[l,f,g,v]=ot(o),x=Math.sqrt(f*f+g*g);return[Math.round(1e4*x)?Ke(Math.atan2(g,f)*ze):NaN,x,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ot(this.rgb))}overwriteGetter(o,l){return Object.defineProperty(this,o,{value:l}),l}toString(){const[o,l,f,g]=this.rgb;return`rgba(${[o,l,f].map(v=>Math.round(255*v)).join(",")},${g})`}}Jt.black=new Jt(0,0,0,1),Jt.white=new Jt(1,1,1,1),Jt.transparent=new Jt(0,0,0,0),Jt.red=new Jt(1,0,0,1);class Ms{constructor(o,l,f){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ki{constructor(o,l,f,g,v){this.text=o,this.image=l,this.scale=f,this.fontStack=g,this.textColor=v}}class Bn{constructor(o){this.sections=o}static fromString(o){return new Bn([new Ki(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Bn?o:Bn.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class En{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof En)return o;if(typeof o=="number")return new En([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const l of o)if(typeof l!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new En(o)}}toString(){return JSON.stringify(this.values)}}const vl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Cn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Cn)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let l=0;l<o.length;l+=2){const f=o[l],g=o[l+1];if(typeof f!="string"||!vl.has(f)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Cn(o)}}toString(){return JSON.stringify(this.values)}}class Zn{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Zn({name:o,available:!1}):null}}function Ro(s,o,l,f){return typeof s=="number"&&s>=0&&s<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,o,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,o,l,f]:[s,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function uo(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Jt||s instanceof Ms||s instanceof Bn||s instanceof En||s instanceof Cn||s instanceof Zn)return!0;if(Array.isArray(s)){for(const o of s)if(!uo(o))return!1;return!0}if(typeof s=="object"){for(const o in s)if(!uo(s[o]))return!1;return!0}return!1}function Bt(s){if(s===null)return qn;if(typeof s=="string")return rt;if(typeof s=="boolean")return at;if(typeof s=="number")return et;if(s instanceof Jt)return Er;if(s instanceof Ms)return ao;if(s instanceof Bn)return lo;if(s instanceof En)return Gi;if(s instanceof Cn)return ue;if(s instanceof Zn)return Zi;if(Array.isArray(s)){const o=s.length;let l;for(const f of s){const g=Bt(f);if(l){if(l===g)continue;l=Wt;break}l=g}return N(l||Wt,o)}return Mn}function Gr(s){const o=typeof s;return s===null?"":o==="string"||o==="number"||o==="boolean"?String(s):s instanceof Jt||s instanceof Bn||s instanceof En||s instanceof Cn||s instanceof Zn?s.toString():JSON.stringify(s)}class cn{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(o.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!uo(o[1]))return l.error("invalid value");const f=o[1];let g=Bt(f);const v=l.expectedType;return g.kind!=="array"||g.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(g=v),new cn(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ur{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const Mi={string:rt,number:et,boolean:at,object:Mn};class Li{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let f,g=1;const v=o[0];if(v==="array"){let w,E;if(o.length>2){const I=o[1];if(typeof I!="string"||!(I in Mi)||I==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);w=Mi[I],g++}else w=Wt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=o[2],g++}f=N(w,E)}else{if(!Mi[v])throw new Error(`Types doesn't contain name = ${v}`);f=Mi[v]}const x=[];for(;g<o.length;g++){const w=l.parse(o[g],g,Wt);if(!w)return null;x.push(w)}return new Li(f,x)}evaluate(o){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(o);if(!oe(this.type,Bt(f)))return f;if(l===this.args.length-1)throw new ur(`Expected value to be of type ${$(this.type)}, but found ${$(Bt(f))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Mu={"to-boolean":at,"to-color":Er,"to-number":et,"to-string":rt};class Mo{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const f=o[0];if(!Mu[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&o.length!==2)return l.error("Expected one argument.");const g=Mu[f],v=[];for(let x=1;x<o.length;x++){const w=l.parse(o[x],x,Wt);if(!w)return null;v.push(w)}return new Mo(g,v)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let l,f;for(const g of this.args){if(l=g.evaluate(o),f=null,l instanceof Jt)return l;if(typeof l=="string"){const v=o.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Ro(l[0],l[1],l[2],l[3]),!f))return new Jt(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new ur(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const f of this.args){l=f.evaluate(o);const g=En.parse(l);if(g)return g}throw new ur(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const f of this.args){l=f.evaluate(o);const g=Cn.parse(l);if(g)return g}throw new ur(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const f of this.args){if(l=f.evaluate(o),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new ur(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Bn.fromString(Gr(this.args[0].evaluate(o)));case"resolvedImage":return Zn.fromString(Gr(this.args[0].evaluate(o)));default:return Gr(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const ux=["Unknown","Point","LineString","Polygon"];class eh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ux[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let l=this._parseColorCache[o];return l||(l=this._parseColorCache[o]=Jt.parse(o)),l}}class Da{constructor(o,l,f=[],g,v=new rr,x=[]){this.registry=o,this.path=f,this.key=f.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=g,this._isConstant=l}parse(o,l,f,g,v={}){return l?this.concat(l,f,g)._parse(o,v):this._parse(o,v)}_parse(o,l){function f(g,v,x){return x==="assert"?new Li(v,[g]):x==="coerce"?new Mo(v,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[g];if(v){let x=v.parse(o,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,E=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||E.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(w.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(w,E))return null}else x=f(x,w,l.typeAnnotation||"coerce");else x=f(x,w,l.typeAnnotation||"coerce");else x=f(x,w,l.typeAnnotation||"coerce");else x=f(x,w,l.typeAnnotation||"assert")}if(!(x instanceof cn)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new eh;try{x=new cn(x.type,x.evaluate(w))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,f){const g=typeof o=="number"?this.path.concat(o):this.path,v=f?this.scope.concat(f):this.scope;return new Da(this.registry,this._isConstant,g,l||null,v,this.errors)}error(o,...l){const f=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new Tr(f,o))}checkSubtype(o,l){const f=oe(o,l);return f&&this.error(f),f}}class na{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let v=1;v<o.length-1;v+=2){const x=o[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=l.parse(o[v+1],v+1);if(!w)return null;f.push([x,w])}const g=l.parse(o[o.length-1],o.length-1,l.expectedType,f);return g?new na(f,g):null}outputDefined(){return this.result.outputDefined()}}class Lr{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(o.length!==2||typeof o[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=o[1];return l.scope.has(f)?new Lr(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class pf{constructor(o,l,f){this.type=o,this.index=l,this.input=f}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,et),g=l.parse(o[2],2,N(l.expectedType||Wt));return f&&g?new pf(g.type.itemType,f,g):null}evaluate(o){const l=this.index.evaluate(o),f=this.input.evaluate(o);if(l<0)throw new ur(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new ur(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new ur(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class mf{constructor(o,l){this.type=at,this.needle=o,this.haystack=l}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Wt),g=l.parse(o[2],2,Wt);return f&&g?ve(f.type,[at,rt,et,qn,Wt])?new mf(f,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(f.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!f)return!1;if(!Se(l,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${$(Bt(l))} instead.`);if(!Se(f,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${$(Bt(f))} instead.`);return f.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class xl{constructor(o,l,f){this.type=et,this.needle=o,this.haystack=l,this.fromIndex=f}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Wt),g=l.parse(o[2],2,Wt);if(!f||!g)return null;if(!ve(f.type,[at,rt,et,qn,Wt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(f.type)} instead`);if(o.length===4){const v=l.parse(o[3],3,et);return v?new xl(f,g,v):null}return new xl(f,g)}evaluate(o){const l=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!Se(l,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${$(Bt(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(o)),Se(f,["string"])){const v=f.indexOf(l,g);return v===-1?-1:[...f.slice(0,v)].length}if(Se(f,["array"]))return f.indexOf(l,g);throw new ur(`Expected second argument to be of type array or string, but found ${$(Bt(f))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class gf{constructor(o,l,f,g,v,x){this.inputType=o,this.type=l,this.input=f,this.cases=g,this.outputs=v,this.otherwise=x}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let f,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const v={},x=[];for(let I=2;I<o.length-1;I+=2){let M=o[I];const O=o[I+1];Array.isArray(M)||(M=[M]);const F=l.concat(I);if(M.length===0)return F.error("Expected at least one branch label.");for(const K of M){if(typeof K!="number"&&typeof K!="string")return F.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return F.error("Numeric branch labels must be integer values.");if(f){if(F.checkSubtype(f,Bt(K)))return null}else f=Bt(K);if(v[String(K)]!==void 0)return F.error("Branch labels must be unique.");v[String(K)]=x.length}const q=l.parse(O,I,g);if(!q)return null;g=g||q.type,x.push(q)}const w=l.parse(o[1],1,Wt);if(!w)return null;const E=l.parse(o[o.length-1],o.length-1,g);return E?w.type.kind!=="value"&&l.concat(1).checkSubtype(f,w.type)?null:new gf(f,g,w,v,x,E):null}evaluate(o){const l=this.input.evaluate(o);return(Bt(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class th{constructor(o,l,f){this.type=o,this.branches=l,this.otherwise=f}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const g=[];for(let x=1;x<o.length-1;x+=2){const w=l.parse(o[x],x,at);if(!w)return null;const E=l.parse(o[x+1],x+1,f);if(!E)return null;g.push([w,E]),f=f||E.type}const v=l.parse(o[o.length-1],o.length-1,f);if(!v)return null;if(!f)throw new Error("Can't infer output type");return new th(f,g,v)}evaluate(o){for(const[l,f]of this.branches)if(l.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,f]of this.branches)o(l),o(f);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Lu{constructor(o,l,f,g){this.type=o,this.input=l,this.beginIndex=f,this.endIndex=g}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Wt),g=l.parse(o[2],2,et);if(!f||!g)return null;if(!ve(f.type,[N(Wt),rt,Wt]))return l.error(`Expected first argument to be of type array or string, but found ${$(f.type)} instead`);if(o.length===4){const v=l.parse(o[3],3,et);return v?new Lu(f.type,f,g,v):null}return new Lu(f.type,f,g)}evaluate(o){const l=this.input.evaluate(o),f=this.beginIndex.evaluate(o);let g;if(this.endIndex&&(g=this.endIndex.evaluate(o)),Se(l,["string"]))return[...l].slice(f,g).join("");if(Se(l,["array"]))return l.slice(f,g);throw new ur(`Expected first argument to be of type array or string, but found ${$(Bt(l))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function rh(s,o){const l=s.length-1;let f,g,v=0,x=l,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),f=s[w],g=s[w+1],f<=o){if(w===l||o<g)return w;v=w+1}else{if(!(f>o))throw new ur("Input is not a number.");x=w-1}return 0}class bl{constructor(o,l,f){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[g,v]of f)this.labels.push(g),this.outputs.push(v)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(o[1],1,et);if(!f)return null;const g=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<o.length;x+=2){const w=x===1?-1/0:o[x],E=o[x+1],I=x,M=x+1;if(typeof w!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(g.length&&g[g.length-1][0]>=w)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const O=l.parse(E,M,v);if(!O)return null;v=v||O.type,g.push([w,O])}return new bl(v,f,g)}evaluate(o){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return f[0].evaluate(o);const v=l.length;return g>=l[v-1]?f[v-1].evaluate(o):f[rh(l,g)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function fg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cx=pg;function pg(s,o,l,f){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=o,this.p2x=l,this.p2y=f}pg.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,o){if(o===void 0&&(o=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,f=0;f<8;f++){var g=this.sampleCurveX(l)-s;if(Math.abs(g)<o)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=g/v}var x=0,w=1;for(l=s,f=0;f<20&&(g=this.sampleCurveX(l),!(Math.abs(g-s)<o));f++)s>g?x=l:w=l,l=.5*(w-x)+x;return l},solve:function(s,o){return this.sampleCurveY(this.solveCurveX(s,o))}};var hx=fg(cx);function za(s,o,l){return s+l*(o-s)}function Ou(s,o,l){return s.map((f,g)=>za(f,o[g],l))}const Oi={number:za,color:function(s,o,l,f="rgb"){switch(f){case"rgb":{const[g,v,x,w]=Ou(s.rgb,o.rgb,l);return new Jt(g,v,x,w,!1)}case"hcl":{const[g,v,x,w]=s.hcl,[E,I,M,O]=o.hcl;let F,q;if(isNaN(g)||isNaN(E))isNaN(g)?isNaN(E)?F=NaN:(F=E,x!==1&&x!==0||(q=I)):(F=g,M!==1&&M!==0||(q=v));else{let ke=E-g;E>g&&ke>180?ke-=360:E<g&&g-E>180&&(ke+=360),F=g+l*ke}const[K,Y,ae,he]=function([ke,xe,Ce,De]){return ke=isNaN(ke)?0:ke*be,St([Ce,Math.cos(ke)*xe,Math.sin(ke)*xe,De])}([F,q??za(v,I,l),za(x,M,l),za(w,O,l)]);return new Jt(K,Y,ae,he,!1)}case"lab":{const[g,v,x,w]=St(Ou(s.lab,o.lab,l));return new Jt(g,v,x,w,!1)}}},array:Ou,padding:function(s,o,l){return new En(Ou(s.values,o.values,l))},variableAnchorOffsetCollection:function(s,o,l){const f=s.values,g=o.values;if(f.length!==g.length)throw new ur(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${o.toString()}`);const v=[];for(let x=0;x<f.length;x+=2){if(f[x]!==g[x])throw new ur(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${f[x]}, to[${x}]: ${g[x]}`);v.push(f[x]);const[w,E]=f[x+1],[I,M]=g[x+1];v.push([za(w,I,l),za(E,M,l)])}return new Cn(v)}};class Di{constructor(o,l,f,g,v){this.type=o,this.operator=l,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(o,l,f,g){let v=0;if(o.name==="exponential")v=nh(l,o.base,f,g);else if(o.name==="linear")v=nh(l,1,f,g);else if(o.name==="cubic-bezier"){const x=o.controlPoints;v=new hx(x[0],x[1],x[2],x[3]).solve(nh(l,1,f,g))}return v}static parse(o,l){let[f,g,v,...x]=o;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const I=g[1];if(typeof I!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:I}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const I=g.slice(1);if(I.length!==4||I.some(M=>typeof M!="number"||M<0||M>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:I}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,et),!v)return null;const w=[];let E=null;f==="interpolate-hcl"||f==="interpolate-lab"?E=Er:l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType);for(let I=0;I<x.length;I+=2){const M=x[I],O=x[I+1],F=I+3,q=I+4;if(typeof M!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(w.length&&w[w.length-1][0]>=M)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const K=l.parse(O,q,E);if(!K)return null;E=E||K.type,w.push([M,K])}return Ae(E,et)||Ae(E,Er)||Ae(E,Gi)||Ae(E,ue)||Ae(E,N(et))?new Di(E,f,g,v,w):l.error(`Type ${$(E)} is not interpolatable.`)}evaluate(o){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return f[0].evaluate(o);const v=l.length;if(g>=l[v-1])return f[v-1].evaluate(o);const x=rh(l,g),w=Di.interpolationFactor(this.interpolation,g,l[x],l[x+1]),E=f[x].evaluate(o),I=f[x+1].evaluate(o);switch(this.operator){case"interpolate":return Oi[this.type.kind](E,I,w);case"interpolate-hcl":return Oi.color(E,I,w,"hcl");case"interpolate-lab":return Oi.color(E,I,w,"lab")}}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function nh(s,o,l,f){const g=f-l,v=s-l;return g===0?0:o===1?v/g:(Math.pow(o,v)-1)/(Math.pow(o,g)-1)}class ih{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expectected at least one argument.");let f=null;const g=l.expectedType;g&&g.kind!=="value"&&(f=g);const v=[];for(const w of o.slice(1)){const E=l.parse(w,1+v.length,f,void 0,{typeAnnotation:"omit"});if(!E)return null;f=f||E.type,v.push(E)}if(!f)throw new Error("No output type");const x=g&&v.some(w=>oe(g,w.type));return new ih(x?Wt:f,v)}evaluate(o){let l,f=null,g=0;for(const v of this.args)if(g++,f=v.evaluate(o),f&&f instanceof Zn&&!f.available&&(l||(l=f.name),f=null,g===this.args.length&&(f=l)),f!==null)break;return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function oh(s,o){return s==="=="||s==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function mg(s,o,l,f){return f.compare(o,l)===0}function wl(s,o,l){const f=s!=="=="&&s!=="!=";return class V5{constructor(v,x,w){this.type=at,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let E=x.parse(v[1],1,Wt);if(!E)return null;if(!oh(w,E.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${$(E.type)}'.`);let I=x.parse(v[2],2,Wt);if(!I)return null;if(!oh(w,I.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${$(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${$(E.type)}' and '${$(I.type)}'.`);f&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new Li(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new Li(E.type,[I])));let M=null;if(v.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(M=x.parse(v[3],3,ao),!M)return null}return new V5(E,I,M)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(f&&this.hasUntypedArgument){const E=Bt(x),I=Bt(w);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new ur(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const E=Bt(x),I=Bt(w);if(E.kind!=="string"||I.kind!=="string")return o(v,x,w)}return this.collator?l(v,x,w,this.collator.evaluate(v)):o(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const dx=wl("==",function(s,o,l){return o===l},mg),gg=wl("!=",function(s,o,l){return o!==l},function(s,o,l,f){return!mg(0,o,l,f)}),yg=wl("<",function(s,o,l){return o<l},function(s,o,l,f){return f.compare(o,l)<0}),fx=wl(">",function(s,o,l){return o>l},function(s,o,l,f){return f.compare(o,l)>0}),px=wl("<=",function(s,o,l){return o<=l},function(s,o,l,f){return f.compare(o,l)<=0}),_g=wl(">=",function(s,o,l){return o>=l},function(s,o,l,f){return f.compare(o,l)>=0});class Du{constructor(o,l,f){this.type=ao,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(o.length!==2)return l.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const g=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,at);if(!g)return null;const v=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,at);if(!v)return null;let x=null;return f.locale&&(x=l.parse(f.locale,1,rt),!x)?null:new Du(g,v,x)}evaluate(o){return new Ms(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class yf{constructor(o,l,f,g,v){this.type=rt,this.number=o,this.locale=l,this.currency=f,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(o,l){if(o.length!==3)return l.error("Expected two arguments.");const f=l.parse(o[1],1,et);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let v=null;if(g.locale&&(v=l.parse(g.locale,1,rt),!v))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,rt),!x))return null;let w=null;if(g["min-fraction-digits"]&&(w=l.parse(g["min-fraction-digits"],1,et),!w))return null;let E=null;return g["max-fraction-digits"]&&(E=l.parse(g["max-fraction-digits"],1,et),!E)?null:new yf(f,v,x,w,E)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class sh{constructor(o){this.type=lo,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const g=[];let v=!1;for(let x=1;x<=o.length-1;++x){const w=o[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let E=null;if(w["font-scale"]&&(E=l.parse(w["font-scale"],1,et),!E))return null;let I=null;if(w["text-font"]&&(I=l.parse(w["text-font"],1,N(rt)),!I))return null;let M=null;if(w["text-color"]&&(M=l.parse(w["text-color"],1,Er),!M))return null;const O=g[g.length-1];O.scale=E,O.font=I,O.textColor=M}else{const E=l.parse(o[x],1,Wt);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,g.push({content:E,scale:null,font:null,textColor:null})}}return new sh(g)}evaluate(o){return new Bn(this.sections.map(l=>{const f=l.content.evaluate(o);return Bt(f)===Zi?new Ki("",f,null,null,null):new Ki(Gr(f),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor)}outputDefined(){return!1}}class _f{constructor(o){this.type=Zi,this.input=o}static parse(o,l){if(o.length!==2)return l.error("Expected two arguments.");const f=l.parse(o[1],1,rt);return f?new _f(f):l.error("No image name provided.")}evaluate(o){const l=this.input.evaluate(o),f=Zn.fromString(l);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(l)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}}class vf{constructor(o){this.type=et,this.input=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=l.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${$(f.type)} instead.`):new vf(f):null}evaluate(o){const l=this.input.evaluate(o);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new ur(`Expected value to be of type string or array, but found ${$(Bt(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const ls=8192;function mx(s,o){const l=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(l*g*ls),Math.round(f*g*ls)]}function xf(s,o){const l=Math.pow(2,o.z);return[(g=(s[0]/ls+o.x)/l,360*g-180),(f=(s[1]/ls+o.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,g}function Fa(s,o){s[0]=Math.min(s[0],o[0]),s[1]=Math.min(s[1],o[1]),s[2]=Math.max(s[2],o[0]),s[3]=Math.max(s[3],o[1])}function ia(s,o){return!(s[0]<=o[0]||s[2]>=o[2]||s[1]<=o[1]||s[3]>=o[3])}function zr(s,o,l){const f=s[0]-o[0],g=s[1]-o[1],v=s[0]-l[0],x=s[1]-l[1];return f*x-v*g==0&&f*v<=0&&g*x<=0}function ah(s,o,l,f){return(g=[f[0]-l[0],f[1]-l[1]])[0]*(v=[o[0]-s[0],o[1]-s[1]])[1]-g[1]*v[0]!=0&&!(!xg(s,o,l,f)||!xg(l,f,s,o));var g,v}function gx(s,o,l){for(const f of l)for(let g=0;g<f.length-1;++g)if(ah(s,o,f[g],f[g+1]))return!0;return!1}function Sl(s,o,l=!1){let f=!1;for(const w of o)for(let E=0;E<w.length-1;E++){if(zr(s,w[E],w[E+1]))return l;(v=w[E])[1]>(g=s)[1]!=(x=w[E+1])[1]>g[1]&&g[0]<(x[0]-v[0])*(g[1]-v[1])/(x[1]-v[1])+v[0]&&(f=!f)}var g,v,x;return f}function yx(s,o){for(const l of o)if(Sl(s,l))return!0;return!1}function vg(s,o){for(const l of s)if(!Sl(l,o))return!1;for(let l=0;l<s.length-1;++l)if(gx(s[l],s[l+1],o))return!1;return!0}function _x(s,o){for(const l of o)if(vg(s,l))return!0;return!1}function xg(s,o,l,f){const g=f[0]-l[0],v=f[1]-l[1],x=(s[0]-l[0])*v-g*(s[1]-l[1]),w=(o[0]-l[0])*v-g*(o[1]-l[1]);return x>0&&w<0||x<0&&w>0}function bf(s,o,l){const f=[];for(let g=0;g<s.length;g++){const v=[];for(let x=0;x<s[g].length;x++){const w=mx(s[g][x],l);Fa(o,w),v.push(w)}f.push(v)}return f}function bg(s,o,l){const f=[];for(let g=0;g<s.length;g++){const v=bf(s[g],o,l);f.push(v)}return f}function wg(s,o,l,f){if(s[0]<l[0]||s[0]>l[2]){const g=.5*f;let v=s[0]-l[0]>g?-f:l[0]-s[0]>g?f:0;v===0&&(v=s[0]-l[2]>g?-f:l[2]-s[0]>g?f:0),s[0]+=v}Fa(o,s)}function Sg(s,o,l,f){const g=Math.pow(2,f.z)*ls,v=[f.x*ls,f.y*ls],x=[];for(const w of s)for(const E of w){const I=[E.x+v[0],E.y+v[1]];wg(I,o,l,g),x.push(I)}return x}function Tg(s,o,l,f){const g=Math.pow(2,f.z)*ls,v=[f.x*ls,f.y*ls],x=[];for(const E of s){const I=[];for(const M of E){const O=[M.x+v[0],M.y+v[1]];Fa(o,O),I.push(O)}x.push(I)}if(o[2]-o[0]<=g/2){(w=o)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const E of x)for(const I of E)wg(I,o,l,g)}var w;return x}class Ba{constructor(o,l){this.type=at,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(uo(o[1])){const f=o[1];if(f.type==="FeatureCollection"){const g=[];for(const v of f.features){const{type:x,coordinates:w}=v.geometry;x==="Polygon"&&g.push(w),x==="MultiPolygon"&&g.push(...w)}if(g.length)return new Ba(f,{type:"MultiPolygon",coordinates:g})}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Ba(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Ba(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,f){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(f.type==="Polygon"){const w=bf(f.coordinates,v,x),E=Sg(l.geometry(),g,v,x);if(!ia(g,v))return!1;for(const I of E)if(!Sl(I,w))return!1}if(f.type==="MultiPolygon"){const w=bg(f.coordinates,v,x),E=Sg(l.geometry(),g,v,x);if(!ia(g,v))return!1;for(const I of E)if(!yx(I,w))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,f){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(f.type==="Polygon"){const w=bf(f.coordinates,v,x),E=Tg(l.geometry(),g,v,x);if(!ia(g,v))return!1;for(const I of E)if(!vg(I,w))return!1}if(f.type==="MultiPolygon"){const w=bg(f.coordinates,v,x),E=Tg(l.geometry(),g,v,x);if(!ia(g,v))return!1;for(const I of E)if(!_x(I,w))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Eg=class{constructor(s=[],o=(l,f)=>l<f?-1:l>f?1:0){if(this.data=s,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:o,compare:l}=this,f=o[s];for(;s>0;){const g=s-1>>1,v=o[g];if(l(f,v)>=0)break;o[s]=v,s=g}o[s]=f}_down(s){const{data:o,compare:l}=this,f=this.length>>1,g=o[s];for(;s<f;){let v=1+(s<<1);const x=v+1;if(x<this.length&&l(o[x],o[v])<0&&(v=x),l(o[v],g)>=0)break;o[s]=o[v],s=v}o[s]=g}};function vx(s,o,l,f,g){Cg(s,o,l,f||s.length-1,g||xx)}function Cg(s,o,l,f,g){for(;f>l;){if(f-l>600){var v=f-l+1,x=o-l+1,w=Math.log(v),E=.5*Math.exp(2*w/3),I=.5*Math.sqrt(w*E*(v-E)/v)*(x-v/2<0?-1:1);Cg(s,o,Math.max(l,Math.floor(o-x*E/v+I)),Math.min(f,Math.floor(o+(v-x)*E/v+I)),g)}var M=s[o],O=l,F=f;for(zu(s,l,o),g(s[f],M)>0&&zu(s,l,f);O<F;){for(zu(s,O,F),O++,F--;g(s[O],M)<0;)O++;for(;g(s[F],M)>0;)F--}g(s[l],M)===0?zu(s,l,F):zu(s,++F,f),F<=o&&(l=F+1),o<=F&&(f=F-1)}}function zu(s,o,l){var f=s[o];s[o]=s[l],s[l]=f}function xx(s,o){return s<o?-1:s>o?1:0}function lh(s,o){if(s.length<=1)return[s];const l=[];let f,g;for(const v of s){const x=wx(v);x!==0&&(v.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(f&&l.push(f),f=[v]):f.push(v))}if(f&&l.push(f),o>1)for(let v=0;v<l.length;v++)l[v].length<=o||(vx(l[v],o,1,l[v].length-1,bx),l[v]=l[v].slice(0,o));return l}function bx(s,o){return o.area-s.area}function wx(s){let o=0;for(let l,f,g=0,v=s.length,x=v-1;g<v;x=g++)l=s[g],f=s[x],o+=(f.x-l.x)*(l.y+f.y);return o}const Ag=1/298.257223563,kg=Ag*(2-Ag),Pg=Math.PI/180;class wf{constructor(o){const l=6378.137*Pg*1e3,f=Math.cos(o*Pg),g=1/(1-kg*(1-f*f)),v=Math.sqrt(g);this.kx=l*v*f,this.ky=l*v*g*(1-kg)}distance(o,l){const f=this.wrap(o[0]-l[0])*this.kx,g=(o[1]-l[1])*this.ky;return Math.sqrt(f*f+g*g)}pointOnLine(o,l){let f,g,v,x,w=1/0;for(let E=0;E<o.length-1;E++){let I=o[E][0],M=o[E][1],O=this.wrap(o[E+1][0]-I)*this.kx,F=(o[E+1][1]-M)*this.ky,q=0;O===0&&F===0||(q=(this.wrap(l[0]-I)*this.kx*O+(l[1]-M)*this.ky*F)/(O*O+F*F),q>1?(I=o[E+1][0],M=o[E+1][1]):q>0&&(I+=O/this.kx*q,M+=F/this.ky*q)),O=this.wrap(l[0]-I)*this.kx,F=(l[1]-M)*this.ky;const K=O*O+F*F;K<w&&(w=K,f=I,g=M,v=E,x=q)}return{point:[f,g],index:v,t:Math.max(0,Math.min(1,x))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function Ig(s,o){return o[0]-s[0]}function uh(s){return s[1]-s[0]+1}function Ls(s,o){return s[1]>=s[0]&&s[1]<o}function Sf(s,o){if(s[0]>s[1])return[null,null];const l=uh(s);if(o){if(l===2)return[s,null];const g=Math.floor(l/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(l===1)return[s,null];const f=Math.floor(l/2)-1;return[[s[0],s[0]+f],[s[0]+f+1,s[1]]]}function Tf(s,o){if(!Ls(o,s.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let f=o[0];f<=o[1];++f)Fa(l,s[f]);return l}function Ef(s){const o=[1/0,1/0,-1/0,-1/0];for(const l of s)for(const f of l)Fa(o,f);return o}function ch(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Cf(s,o,l){if(!ch(s)||!ch(o))return NaN;let f=0,g=0;return s[2]<o[0]&&(f=o[0]-s[2]),s[0]>o[2]&&(f=s[0]-o[2]),s[1]>o[3]&&(g=s[1]-o[3]),s[3]<o[1]&&(g=o[1]-s[3]),l.distance([0,0],[f,g])}function Na(s,o,l){const f=l.pointOnLine(o,s);return l.distance(s,f.point)}function Af(s,o,l,f,g){const v=Math.min(Na(s,[l,f],g),Na(o,[l,f],g)),x=Math.min(Na(l,[s,o],g),Na(f,[s,o],g));return Math.min(v,x)}function Sx(s,o,l,f,g){if(!Ls(o,s.length)||!Ls(f,l.length))return 1/0;let v=1/0;for(let x=o[0];x<o[1];++x){const w=s[x],E=s[x+1];for(let I=f[0];I<f[1];++I){const M=l[I],O=l[I+1];if(ah(w,E,M,O))return 0;v=Math.min(v,Af(w,E,M,O,g))}}return v}function An(s,o,l,f,g){if(!Ls(o,s.length)||!Ls(f,l.length))return NaN;let v=1/0;for(let x=o[0];x<=o[1];++x)for(let w=f[0];w<=f[1];++w)if(v=Math.min(v,g.distance(s[x],l[w])),v===0)return v;return v}function Tx(s,o,l){if(Sl(s,o,!0))return 0;let f=1/0;for(const g of o){const v=g[0],x=g[g.length-1];if(v!==x&&(f=Math.min(f,Na(s,[x,v],l)),f===0))return f;const w=l.pointOnLine(g,s);if(f=Math.min(f,l.distance(s,w.point)),f===0)return f}return f}function mr(s,o,l,f){if(!Ls(o,s.length))return NaN;for(let v=o[0];v<=o[1];++v)if(Sl(s[v],l,!0))return 0;let g=1/0;for(let v=o[0];v<o[1];++v){const x=s[v],w=s[v+1];for(const E of l)for(let I=0,M=E.length,O=M-1;I<M;O=I++){const F=E[O],q=E[I];if(ah(x,w,F,q))return 0;g=Math.min(g,Af(x,w,F,q,f))}}return g}function hh(s,o){for(const l of s)for(const f of l)if(Sl(f,o,!0))return!0;return!1}function Kr(s,o,l,f=1/0){const g=Ef(s),v=Ef(o);if(f!==1/0&&Cf(g,v,l)>=f)return f;if(ia(g,v)){if(hh(s,o))return 0}else if(hh(o,s))return 0;let x=1/0;for(const w of s)for(let E=0,I=w.length,M=I-1;E<I;M=E++){const O=w[M],F=w[E];for(const q of o)for(let K=0,Y=q.length,ae=Y-1;K<Y;ae=K++){const he=q[ae],ke=q[K];if(ah(O,F,he,ke))return 0;x=Math.min(x,Af(O,F,he,ke,l))}}return x}function Ur(s,o,l,f,g,v){if(!v)return;const x=Cf(Tf(f,v),g,l);x<o&&s.push([x,v,[0,0]])}function $a(s,o,l,f,g,v,x){if(!v||!x)return;const w=Cf(Tf(f,v),Tf(g,x),l);w<o&&s.push([w,v,x])}function Fu(s,o,l,f,g=1/0){let v=Math.min(f.distance(s[0],l[0][0]),g);if(v===0)return v;const x=new Eg([[0,[0,s.length-1],[0,0]]],Ig),w=Ef(l);for(;x.length>0;){const E=x.pop();if(E[0]>=v)continue;const I=E[1],M=o?50:100;if(uh(I)<=M){if(!Ls(I,s.length))return NaN;if(o){const O=mr(s,I,l,f);if(isNaN(O)||O===0)return O;v=Math.min(v,O)}else for(let O=I[0];O<=I[1];++O){const F=Tx(s[O],l,f);if(v=Math.min(v,F),v===0)return 0}}else{const O=Sf(I,o);Ur(x,v,f,s,w,O[0]),Ur(x,v,f,s,w,O[1])}}return v}function Bu(s,o,l,f,g,v=1/0){let x=Math.min(v,g.distance(s[0],l[0]));if(x===0)return x;const w=new Eg([[0,[0,s.length-1],[0,l.length-1]]],Ig);for(;w.length>0;){const E=w.pop();if(E[0]>=x)continue;const I=E[1],M=E[2],O=o?50:100,F=f?50:100;if(uh(I)<=O&&uh(M)<=F){if(!Ls(I,s.length)&&Ls(M,l.length))return NaN;let q;if(o&&f)q=Sx(s,I,l,M,g),x=Math.min(x,q);else if(o&&!f){const K=s.slice(I[0],I[1]+1);for(let Y=M[0];Y<=M[1];++Y)if(q=Na(l[Y],K,g),x=Math.min(x,q),x===0)return x}else if(!o&&f){const K=l.slice(M[0],M[1]+1);for(let Y=I[0];Y<=I[1];++Y)if(q=Na(s[Y],K,g),x=Math.min(x,q),x===0)return x}else q=An(s,I,l,M,g),x=Math.min(x,q)}else{const q=Sf(I,o),K=Sf(M,f);$a(w,x,g,s,l,q[0],K[0]),$a(w,x,g,s,l,q[0],K[1]),$a(w,x,g,s,l,q[1],K[0]),$a(w,x,g,s,l,q[1],K[1])}}return x}function kf(s){return s.type==="MultiPolygon"?s.coordinates.map(o=>({type:"Polygon",coordinates:o})):s.type==="MultiLineString"?s.coordinates.map(o=>({type:"LineString",coordinates:o})):s.type==="MultiPoint"?s.coordinates.map(o=>({type:"Point",coordinates:o})):[s]}class ja{constructor(o,l){this.type=et,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(uo(o[1])){const f=o[1];if(f.type==="FeatureCollection")return new ja(f,f.features.map(g=>kf(g.geometry)).flat());if(f.type==="Feature")return new ja(f,kf(f.geometry));if("type"in f&&"coordinates"in f)return new ja(f,kf(f))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,f){const g=l.geometry(),v=g.flat().map(E=>xf([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new wf(v[0][1]);let w=1/0;for(const E of f){switch(E.type){case"Point":w=Math.min(w,Bu(v,!1,[E.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Bu(v,!1,E.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Fu(v,!1,E.coordinates,x,w))}if(w===0)return w}return w}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,f){const g=l.geometry(),v=g.flat().map(E=>xf([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new wf(v[0][1]);let w=1/0;for(const E of f){switch(E.type){case"Point":w=Math.min(w,Bu(v,!0,[E.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Bu(v,!0,E.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Fu(v,!0,E.coordinates,x,w))}if(w===0)return w}return w}(o,this.geometries);if(o.geometryType()==="Polygon")return function(l,f){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const v=lh(g,0).map(E=>E.map(I=>I.map(M=>xf([M.x,M.y],l.canonical)))),x=new wf(v[0][0][0][1]);let w=1/0;for(const E of f)for(const I of v){switch(E.type){case"Point":w=Math.min(w,Fu([E.coordinates],!1,I,x,w));break;case"LineString":w=Math.min(w,Fu(E.coordinates,!0,I,x,w));break;case"Polygon":w=Math.min(w,Kr(I,E.coordinates,x,w))}if(w===0)return w}return w}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Tl={"==":dx,"!=":gg,">":fx,"<":yg,">=":_g,"<=":px,array:Li,at:pf,boolean:Li,case:th,coalesce:ih,collator:Du,format:sh,image:_f,in:mf,"index-of":xl,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:vf,let:na,literal:cn,match:gf,number:Li,"number-format":yf,object:Li,slice:Lu,step:bl,string:Li,"to-boolean":Mo,"to-color":Mo,"to-number":Mo,"to-string":Mo,var:Lr,within:Ba,distance:ja};class co{constructor(o,l,f,g){this.name=o,this.type=l,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,l){const f=o[0],g=co.definitions[f];if(!g)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,w=x.filter(([I])=>!Array.isArray(I)||I.length===o.length-1);let E=null;for(const[I,M]of w){E=new Da(l.registry,Nu,l.path,null,l.scope);const O=[];let F=!1;for(let q=1;q<o.length;q++){const K=o[q],Y=Array.isArray(I)?I[q-1]:I.type,ae=E.parse(K,1+O.length,Y);if(!ae){F=!0;break}O.push(ae)}if(!F)if(Array.isArray(I)&&I.length!==O.length)E.error(`Expected ${I.length} arguments, but found ${O.length} instead.`);else{for(let q=0;q<O.length;q++){const K=Array.isArray(I)?I[q]:I.type,Y=O[q];E.concat(q+1).checkSubtype(K,Y.type)}if(E.errors.length===0)return new co(f,v,M,O)}}if(w.length===1)l.errors.push(...E.errors);else{const I=(w.length?w:x).map(([O])=>{return F=O,Array.isArray(F)?`(${F.map($).join(", ")})`:`(${$(F.type)}...)`;var F}).join(" | "),M=[];for(let O=1;O<o.length;O++){const F=l.parse(o[O],1+M.length);if(!F)return null;M.push($(F.type))}l.error(`Expected arguments of type ${I}, but found (${M.join(", ")}) instead.`)}return null}static register(o,l){co.definitions=l;for(const f in l)o[f]=co}}function Pf(s,[o,l,f,g]){o=o.evaluate(s),l=l.evaluate(s),f=f.evaluate(s);const v=g?g.evaluate(s):1,x=Ro(o,l,f,v);if(x)throw new ur(x);return new Jt(o/255,l/255,f/255,v,!1)}function If(s,o){return s in o}function Rf(s,o){const l=o[s];return l===void 0?null:l}function Ua(s){return{type:s}}function Nu(s){if(s instanceof Lr)return Nu(s.boundExpression);if(s instanceof co&&s.name==="error"||s instanceof Du||s instanceof Ba||s instanceof ja)return!1;const o=s instanceof Mo||s instanceof Li;let l=!0;return s.eachChild(f=>{l=o?l&&Nu(f):l&&f instanceof cn}),!!l&&$u(s)&&ju(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function $u(s){if(s instanceof co&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Ba||s instanceof ja)return!1;let o=!0;return s.eachChild(l=>{o&&!$u(l)&&(o=!1)}),o}function El(s){if(s instanceof co&&s.name==="feature-state")return!1;let o=!0;return s.eachChild(l=>{o&&!El(l)&&(o=!1)}),o}function ju(s,o){if(s instanceof co&&o.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(f=>{l&&!ju(f,o)&&(l=!1)}),l}function dh(s){return{result:"success",value:s}}function Cl(s){return{result:"error",value:s}}function Al(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Rg(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Mf(s){return!!s.expression&&s.expression.interpolated}function kr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function fh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Ex(s){return s}function Mg(s,o){const l=o.type==="color",f=s.stops&&typeof s.stops[0][0]=="object",g=f||!(f||s.property!==void 0),v=s.type||(Mf(o)?"exponential":"interval");if(l||o.type==="padding"){const M=l?Jt.parse:En.parse;(s=Mr({},s)).stops&&(s.stops=s.stops.map(O=>[O[0],M(O[1])])),s.default=M(s.default?s.default:o.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let w,E,I;if(v==="exponential")w=Og;else if(v==="interval")w=ph;else if(v==="categorical"){w=Lg,E=Object.create(null);for(const M of s.stops)E[M[0]]=M[1];I=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Dg}if(f){const M={},O=[];for(let K=0;K<s.stops.length;K++){const Y=s.stops[K],ae=Y[0].zoom;M[ae]===void 0&&(M[ae]={zoom:ae,type:s.type,property:s.property,default:s.default,stops:[]},O.push(ae)),M[ae].stops.push([Y[0].value,Y[1]])}const F=[];for(const K of O)F.push([M[K].zoom,Mg(M[K],o)]);const q={name:"linear"};return{kind:"composite",interpolationType:q,interpolationFactor:Di.interpolationFactor.bind(void 0,q),zoomStops:F.map(K=>K[0]),evaluate:({zoom:K},Y)=>Og({stops:F,base:s.base},o,K).evaluate(K,Y)}}if(g){const M=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Di.interpolationFactor.bind(void 0,M),zoomStops:s.stops.map(O=>O[0]),evaluate:({zoom:O})=>w(s,o,O,E,I)}}return{kind:"source",evaluate(M,O){const F=O&&O.properties?O.properties[s.property]:void 0;return F===void 0?kl(s.default,o.default):w(s,o,F,E,I)}}}function kl(s,o,l){return s!==void 0?s:o!==void 0?o:l!==void 0?l:void 0}function Lg(s,o,l,f,g){return kl(typeof l===g?f[l]:void 0,s.default,o.default)}function ph(s,o,l){if(kr(l)!=="number")return kl(s.default,o.default);const f=s.stops.length;if(f===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[f-1][0])return s.stops[f-1][1];const g=rh(s.stops.map(v=>v[0]),l);return s.stops[g][1]}function Og(s,o,l){const f=s.base!==void 0?s.base:1;if(kr(l)!=="number")return kl(s.default,o.default);const g=s.stops.length;if(g===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[g-1][0])return s.stops[g-1][1];const v=rh(s.stops.map(M=>M[0]),l),x=function(M,O,F,q){const K=q-F,Y=M-F;return K===0?0:O===1?Y/K:(Math.pow(O,Y)-1)/(Math.pow(O,K)-1)}(l,f,s.stops[v][0],s.stops[v+1][0]),w=s.stops[v][1],E=s.stops[v+1][1],I=Oi[o.type]||Ex;return typeof w.evaluate=="function"?{evaluate(...M){const O=w.evaluate.apply(void 0,M),F=E.evaluate.apply(void 0,M);if(O!==void 0&&F!==void 0)return I(O,F,x,s.colorSpace)}}:I(w,E,x,s.colorSpace)}function Dg(s,o,l){switch(o.type){case"color":l=Jt.parse(l);break;case"formatted":l=Bn.fromString(l.toString());break;case"resolvedImage":l=Zn.fromString(l.toString());break;case"padding":l=En.parse(l);break;default:kr(l)===o.type||o.type==="enum"&&o.values[l]||(l=void 0)}return kl(l,s.default,o.default)}co.register(Tl,{error:[{kind:"error"},[rt],(s,[o])=>{throw new ur(o.evaluate(s))}],typeof:[rt,[Wt],(s,[o])=>$(Bt(o.evaluate(s)))],"to-rgba":[N(et,4),[Er],(s,[o])=>{const[l,f,g,v]=o.evaluate(s).rgb;return[255*l,255*f,255*g,v]}],rgb:[Er,[et,et,et],Pf],rgba:[Er,[et,et,et,et],Pf],has:{type:at,overloads:[[[rt],(s,[o])=>If(o.evaluate(s),s.properties())],[[rt,Mn],(s,[o,l])=>If(o.evaluate(s),l.evaluate(s))]]},get:{type:Wt,overloads:[[[rt],(s,[o])=>Rf(o.evaluate(s),s.properties())],[[rt,Mn],(s,[o,l])=>Rf(o.evaluate(s),l.evaluate(s))]]},"feature-state":[Wt,[rt],(s,[o])=>Rf(o.evaluate(s),s.featureState||{})],properties:[Mn,[],s=>s.properties()],"geometry-type":[rt,[],s=>s.geometryType()],id:[Wt,[],s=>s.id()],zoom:[et,[],s=>s.globals.zoom],"heatmap-density":[et,[],s=>s.globals.heatmapDensity||0],"line-progress":[et,[],s=>s.globals.lineProgress||0],accumulated:[Wt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[et,Ua(et),(s,o)=>{let l=0;for(const f of o)l+=f.evaluate(s);return l}],"*":[et,Ua(et),(s,o)=>{let l=1;for(const f of o)l*=f.evaluate(s);return l}],"-":{type:et,overloads:[[[et,et],(s,[o,l])=>o.evaluate(s)-l.evaluate(s)],[[et],(s,[o])=>-o.evaluate(s)]]},"/":[et,[et,et],(s,[o,l])=>o.evaluate(s)/l.evaluate(s)],"%":[et,[et,et],(s,[o,l])=>o.evaluate(s)%l.evaluate(s)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(s,[o,l])=>Math.pow(o.evaluate(s),l.evaluate(s))],sqrt:[et,[et],(s,[o])=>Math.sqrt(o.evaluate(s))],log10:[et,[et],(s,[o])=>Math.log(o.evaluate(s))/Math.LN10],ln:[et,[et],(s,[o])=>Math.log(o.evaluate(s))],log2:[et,[et],(s,[o])=>Math.log(o.evaluate(s))/Math.LN2],sin:[et,[et],(s,[o])=>Math.sin(o.evaluate(s))],cos:[et,[et],(s,[o])=>Math.cos(o.evaluate(s))],tan:[et,[et],(s,[o])=>Math.tan(o.evaluate(s))],asin:[et,[et],(s,[o])=>Math.asin(o.evaluate(s))],acos:[et,[et],(s,[o])=>Math.acos(o.evaluate(s))],atan:[et,[et],(s,[o])=>Math.atan(o.evaluate(s))],min:[et,Ua(et),(s,o)=>Math.min(...o.map(l=>l.evaluate(s)))],max:[et,Ua(et),(s,o)=>Math.max(...o.map(l=>l.evaluate(s)))],abs:[et,[et],(s,[o])=>Math.abs(o.evaluate(s))],round:[et,[et],(s,[o])=>{const l=o.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[et,[et],(s,[o])=>Math.floor(o.evaluate(s))],ceil:[et,[et],(s,[o])=>Math.ceil(o.evaluate(s))],"filter-==":[at,[rt,Wt],(s,[o,l])=>s.properties()[o.value]===l.value],"filter-id-==":[at,[Wt],(s,[o])=>s.id()===o.value],"filter-type-==":[at,[rt],(s,[o])=>s.geometryType()===o.value],"filter-<":[at,[rt,Wt],(s,[o,l])=>{const f=s.properties()[o.value],g=l.value;return typeof f==typeof g&&f<g}],"filter-id-<":[at,[Wt],(s,[o])=>{const l=s.id(),f=o.value;return typeof l==typeof f&&l<f}],"filter->":[at,[rt,Wt],(s,[o,l])=>{const f=s.properties()[o.value],g=l.value;return typeof f==typeof g&&f>g}],"filter-id->":[at,[Wt],(s,[o])=>{const l=s.id(),f=o.value;return typeof l==typeof f&&l>f}],"filter-<=":[at,[rt,Wt],(s,[o,l])=>{const f=s.properties()[o.value],g=l.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[at,[Wt],(s,[o])=>{const l=s.id(),f=o.value;return typeof l==typeof f&&l<=f}],"filter->=":[at,[rt,Wt],(s,[o,l])=>{const f=s.properties()[o.value],g=l.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[at,[Wt],(s,[o])=>{const l=s.id(),f=o.value;return typeof l==typeof f&&l>=f}],"filter-has":[at,[Wt],(s,[o])=>o.value in s.properties()],"filter-has-id":[at,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[at,[N(rt)],(s,[o])=>o.value.indexOf(s.geometryType())>=0],"filter-id-in":[at,[N(Wt)],(s,[o])=>o.value.indexOf(s.id())>=0],"filter-in-small":[at,[rt,N(Wt)],(s,[o,l])=>l.value.indexOf(s.properties()[o.value])>=0],"filter-in-large":[at,[rt,N(Wt)],(s,[o,l])=>function(f,g,v,x){for(;v<=x;){const w=v+x>>1;if(g[w]===f)return!0;g[w]>f?x=w-1:v=w+1}return!1}(s.properties()[o.value],l.value,0,l.value.length-1)],all:{type:at,overloads:[[[at,at],(s,[o,l])=>o.evaluate(s)&&l.evaluate(s)],[Ua(at),(s,o)=>{for(const l of o)if(!l.evaluate(s))return!1;return!0}]]},any:{type:at,overloads:[[[at,at],(s,[o,l])=>o.evaluate(s)||l.evaluate(s)],[Ua(at),(s,o)=>{for(const l of o)if(l.evaluate(s))return!0;return!1}]]},"!":[at,[at],(s,[o])=>!o.evaluate(s)],"is-supported-script":[at,[rt],(s,[o])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(o.evaluate(s))}],upcase:[rt,[rt],(s,[o])=>o.evaluate(s).toUpperCase()],downcase:[rt,[rt],(s,[o])=>o.evaluate(s).toLowerCase()],concat:[rt,Ua(Wt),(s,o)=>o.map(l=>Gr(l.evaluate(s))).join("")],"resolved-locale":[rt,[ao],(s,[o])=>o.evaluate(s).resolvedLocale()]});class mh{constructor(o,l){var f;this.expression=o,this._warningHistory={},this._evaluator=new eh,this._defaultValue=l?(f=l).type==="color"&&fh(f.default)?new Jt(0,0,0,0):f.type==="color"?Jt.parse(f.default)||null:f.type==="padding"?En.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Cn.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(o,l,f,g,v,x){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(o,l,f,g,v,x){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function gh(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Tl}function Pl(s,o){const l=new Da(Tl,Nu,[],o?function(g){const v={color:Er,string:rt,number:et,enum:rt,boolean:at,formatted:lo,padding:Gi,resolvedImage:Zi,variableAnchorOffsetCollection:ue};return g.type==="array"?N(v[g.value]||Wt,g.length):v[g.type]}(o):void 0),f=l.parse(s,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?dh(new mh(f,o)):Cl(l.errors)}class Il{constructor(o,l){this.kind=o,this._styleExpression=l,this.isStateDependent=o!=="constant"&&!El(l.expression)}evaluateWithoutErrorHandling(o,l,f,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(o,l,f,g,v,x)}evaluate(o,l,f,g,v,x){return this._styleExpression.evaluate(o,l,f,g,v,x)}}class Rl{constructor(o,l,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=o!=="camera"&&!El(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,l,f,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(o,l,f,g,v,x)}evaluate(o,l,f,g,v,x){return this._styleExpression.evaluate(o,l,f,g,v,x)}interpolationFactor(o,l,f){return this.interpolationType?Di.interpolationFactor(this.interpolationType,o,l,f):0}}function Lf(s,o){const l=Pl(s,o);if(l.result==="error")return l;const f=l.value.expression,g=$u(f);if(!g&&!Al(o))return Cl([new Tr("","data expressions not supported")]);const v=ju(f,["zoom"]);if(!v&&!Rg(o))return Cl([new Tr("","zoom expressions not supported")]);const x=Uu(f);return x||v?x instanceof Tr?Cl([x]):x instanceof Di&&!Mf(o)?Cl([new Tr("",'"interpolate" expressions cannot be used with this property')]):dh(x?new Rl(g?"camera":"composite",l.value,x.labels,x instanceof Di?x.interpolation:void 0):new Il(g?"constant":"source",l.value)):Cl([new Tr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ml{constructor(o,l){this._parameters=o,this._specification=l,Mr(this,Mg(this._parameters,this._specification))}static deserialize(o){return new Ml(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Uu(s){let o=null;if(s instanceof na)o=Uu(s.result);else if(s instanceof ih){for(const l of s.args)if(o=Uu(l),o)break}else(s instanceof bl||s instanceof Di)&&s.input instanceof co&&s.input.name==="zoom"&&(o=s);return o instanceof Tr||s.eachChild(l=>{const f=Uu(l);f instanceof Tr?o=f:!o&&f?o=new Tr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new Tr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function yh(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const o of s.slice(1))if(!yh(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const _h={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Of(s){if(s==null)return{filter:()=>!0,needGeometry:!1};yh(s)||(s=vh(s));const o=Pl(s,_h);if(o.result==="error")throw new Error(o.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,g)=>o.value.evaluate(l,f,{},g),needGeometry:zg(s)}}function Cx(s,o){return s<o?-1:s>o?1:0}function zg(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let o=1;o<s.length;o++)if(zg(s[o]))return!0;return!1}function vh(s){if(!s)return!0;const o=s[0];return s.length<=1?o!=="any":o==="=="?Df(s[1],s[2],"=="):o==="!="?ai(Df(s[1],s[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Df(s[1],s[2],o):o==="any"?(l=s.slice(1),["any"].concat(l.map(vh))):o==="all"?["all"].concat(s.slice(1).map(vh)):o==="none"?["all"].concat(s.slice(1).map(vh).map(ai)):o==="in"?Vu(s[1],s.slice(2)):o==="!in"?ai(Vu(s[1],s.slice(2))):o==="has"?qu(s[1]):o!=="!has"||ai(qu(s[1]));var l}function Df(s,o,l){switch(s){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,s,o]}}function Vu(s,o){if(o.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",s,["literal",o.sort(Cx)]]:["filter-in-small",s,["literal",o]]}}function qu(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function ai(s){return["!",s]}function Va(s){const o=typeof s;if(o==="number"||o==="boolean"||o==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const v of s)g+=`${Va(v)},`;return`${g}]`}const l=Object.keys(s).sort();let f="{";for(let g=0;g<l.length;g++)f+=`${JSON.stringify(l[g])}:${Va(s[l[g]])},`;return`${f}}`}function Fg(s){let o="";for(const l of mn)o+=`/${Va(s[l])}`;return o}function Bg(s){const o=s.value;return o?[new He(s.key,o,"constants have been deprecated as of v8")]:[]}function kn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Lo(s){if(Array.isArray(s))return s.map(Lo);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const o={};for(const l in s)o[l]=Lo(s[l]);return o}return kn(s)}function Xi(s){const o=s.key,l=s.value,f=s.valueSpec||{},g=s.objectElementValidators||{},v=s.style,x=s.styleSpec,w=s.validateSpec;let E=[];const I=kr(l);if(I!=="object")return[new He(o,l,`object expected, ${I} found`)];for(const M in l){const O=M.split(".")[0],F=f[O]||f["*"];let q;if(g[O])q=g[O];else if(f[O])q=w;else if(g["*"])q=g["*"];else{if(!f["*"]){E.push(new He(o,l[M],`unknown property "${M}"`));continue}q=w}E=E.concat(q({key:(o&&`${o}.`)+M,value:l[M],valueSpec:F,style:v,styleSpec:x,object:l,objectKey:M,validateSpec:w},l))}for(const M in f)g[M]||f[M].required&&f[M].default===void 0&&l[M]===void 0&&E.push(new He(o,l,`missing required property "${M}"`));return E}function Hu(s){const o=s.value,l=s.valueSpec,f=s.style,g=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(kr(o)!=="array")return[new He(v,o,`array expected, ${kr(o)} found`)];if(l.length&&o.length!==l.length)return[new He(v,o,`array length ${l.length} expected, length ${o.length} found`)];if(l["min-length"]&&o.length<l["min-length"])return[new He(v,o,`array length at least ${l["min-length"]} expected, length ${o.length} found`)];let w={type:l.value,values:l.values};g.$version<7&&(w.function=l.function),kr(l.value)==="object"&&(w=l.value);let E=[];for(let I=0;I<o.length;I++)E=E.concat(x({array:o,arrayIndex:I,value:o[I],valueSpec:w,validateSpec:s.validateSpec,style:f,styleSpec:g,key:`${v}[${I}]`}));return E}function zf(s){const o=s.key,l=s.value,f=s.valueSpec;let g=kr(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new He(o,l,`number expected, ${g} found`)]:"minimum"in f&&l<f.minimum?[new He(o,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new He(o,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function xh(s){const o=s.valueSpec,l=kn(s.value.type);let f,g,v,x={};const w=l!=="categorical"&&s.value.property===void 0,E=!w,I=kr(s.value.stops)==="array"&&kr(s.value.stops[0])==="array"&&kr(s.value.stops[0][0])==="object",M=Xi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(q){if(l==="identity")return[new He(q.key,q.value,'identity function may not have a "stops" property')];let K=[];const Y=q.value;return K=K.concat(Hu({key:q.key,value:Y,valueSpec:q.valueSpec,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec,arrayElementValidator:O})),kr(Y)==="array"&&Y.length===0&&K.push(new He(q.key,Y,"array must have at least one stop")),K},default:function(q){return q.validateSpec({key:q.key,value:q.value,valueSpec:o,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec})}}});return l==="identity"&&w&&M.push(new He(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||M.push(new He(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!Mf(s.valueSpec)&&M.push(new He(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(E&&!Al(s.valueSpec)?M.push(new He(s.key,s.value,"property functions not supported")):w&&!Rg(s.valueSpec)&&M.push(new He(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!I||s.value.property!==void 0||M.push(new He(s.key,s.value,'"property" property is required')),M;function O(q){let K=[];const Y=q.value,ae=q.key;if(kr(Y)!=="array")return[new He(ae,Y,`array expected, ${kr(Y)} found`)];if(Y.length!==2)return[new He(ae,Y,`array length 2 expected, length ${Y.length} found`)];if(I){if(kr(Y[0])!=="object")return[new He(ae,Y,`object expected, ${kr(Y[0])} found`)];if(Y[0].zoom===void 0)return[new He(ae,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new He(ae,Y,"object stop key must have value")];if(v&&v>kn(Y[0].zoom))return[new He(ae,Y[0].zoom,"stop zoom values must appear in ascending order")];kn(Y[0].zoom)!==v&&(v=kn(Y[0].zoom),g=void 0,x={}),K=K.concat(Xi({key:`${ae}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec,objectElementValidators:{zoom:zf,value:F}}))}else K=K.concat(F({key:`${ae}[0]`,value:Y[0],valueSpec:{},validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec},Y));return gh(Lo(Y[1]))?K.concat([new He(`${ae}[1]`,Y[1],"expressions are not allowed in function stops.")]):K.concat(q.validateSpec({key:`${ae}[1]`,value:Y[1],valueSpec:o,validateSpec:q.validateSpec,style:q.style,styleSpec:q.styleSpec}))}function F(q,K){const Y=kr(q.value),ae=kn(q.value),he=q.value!==null?q.value:K;if(f){if(Y!==f)return[new He(q.key,he,`${Y} stop domain type must match previous stop domain type ${f}`)]}else f=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new He(q.key,he,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&l!=="categorical"){let ke=`number expected, ${Y} found`;return Al(o)&&l===void 0&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(q.key,he,ke)]}return l!=="categorical"||Y!=="number"||isFinite(ae)&&Math.floor(ae)===ae?l!=="categorical"&&Y==="number"&&g!==void 0&&ae<g?[new He(q.key,he,"stop domain values must appear in ascending order")]:(g=ae,l==="categorical"&&ae in x?[new He(q.key,he,"stop domain values must be unique")]:(x[ae]=!0,[])):[new He(q.key,he,`integer expected, found ${ae}`)]}}function Ll(s){const o=(s.expressionContext==="property"?Lf:Pl)(Lo(s.value),s.valueSpec);if(o.result==="error")return o.value.map(f=>new He(`${s.key}${f.key}`,s.value,f.message));const l=o.value.expression||o.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new He(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!El(l))return[new He(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!El(l))return[new He(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!ju(l,["zoom","feature-state"]))return[new He(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!$u(l))return[new He(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Os(s){const o=s.key,l=s.value,f=s.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(kn(l))===-1&&g.push(new He(o,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(kn(l))===-1&&g.push(new He(o,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Ff(s){return yh(Lo(s.value))?Ll(Mr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bh(s)}function bh(s){const o=s.value,l=s.key;if(kr(o)!=="array")return[new He(l,o,`array expected, ${kr(o)} found`)];const f=s.styleSpec;let g,v=[];if(o.length<1)return[new He(l,o,"filter array must have at least 1 element")];switch(v=v.concat(Os({key:`${l}[0]`,value:o[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),kn(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&kn(o[1])==="$type"&&v.push(new He(l,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&v.push(new He(l,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=kr(o[1]),g!=="string"&&v.push(new He(`${l}[1]`,o[1],`string expected, ${g} found`)));for(let x=2;x<o.length;x++)g=kr(o[x]),kn(o[1])==="$type"?v=v.concat(Os({key:`${l}[${x}]`,value:o[x],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&v.push(new He(`${l}[${x}]`,o[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<o.length;x++)v=v.concat(bh({key:`${l}[${x}]`,value:o[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=kr(o[1]),o.length!==2?v.push(new He(l,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&v.push(new He(`${l}[1]`,o[1],`string expected, ${g} found`))}return v}function Bf(s,o){const l=s.key,f=s.validateSpec,g=s.style,v=s.styleSpec,x=s.value,w=s.objectKey,E=v[`${o}_${s.layerType}`];if(!E)return[];const I=w.match(/^(.*)-transition$/);if(o==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return f({key:l,value:x,valueSpec:v.transition,style:g,styleSpec:v});const M=s.valueSpec||E[w];if(!M)return[new He(l,x,`unknown property "${w}"`)];let O;if(kr(x)==="string"&&Al(M)&&!M.tokens&&(O=/^{([^}]+)}$/.exec(x)))return[new He(l,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const F=[];return s.layerType==="symbol"&&(w==="text-field"&&g&&!g.glyphs&&F.push(new He(l,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&fh(Lo(x))&&kn(x.type)==="identity"&&F.push(new He(l,x,'"text-font" does not support identity functions'))),F.concat(f({key:s.key,value:x,valueSpec:M,style:g,styleSpec:v,expressionContext:"property",propertyType:o,propertyKey:w}))}function wh(s){return Bf(s,"paint")}function Nf(s){return Bf(s,"layout")}function $f(s){let o=[];const l=s.value,f=s.key,g=s.style,v=s.styleSpec;l.type||l.ref||o.push(new He(f,l,'either "type" or "ref" is required'));let x=kn(l.type);const w=kn(l.ref);if(l.id){const E=kn(l.id);for(let I=0;I<s.arrayIndex;I++){const M=g.layers[I];kn(M.id)===E&&o.push(new He(f,l.id,`duplicate layer id "${l.id}", previously used at line ${M.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in l&&o.push(new He(f,l[I],`"${I}" is prohibited for ref layers`))}),g.layers.forEach(I=>{kn(I.id)===w&&(E=I)}),E?E.ref?o.push(new He(f,l.ref,"ref cannot reference another ref layer")):x=kn(E.type):o.push(new He(f,l.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(l.source){const E=g.sources&&g.sources[l.source],I=E&&kn(E.type);E?I==="vector"&&x==="raster"?o.push(new He(f,l.source,`layer "${l.id}" requires a raster source`)):I!=="raster-dem"&&x==="hillshade"?o.push(new He(f,l.source,`layer "${l.id}" requires a raster-dem source`)):I==="raster"&&x!=="raster"?o.push(new He(f,l.source,`layer "${l.id}" requires a vector source`)):I!=="vector"||l["source-layer"]?I==="raster-dem"&&x!=="hillshade"?o.push(new He(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||I==="geojson"&&E.lineMetrics||o.push(new He(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new He(f,l,`layer "${l.id}" must specify a "source-layer"`)):o.push(new He(f,l.source,`source "${l.source}" not found`))}else o.push(new He(f,l,'missing required property "source"'));return o=o.concat(Xi({key:f,value:l,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:l.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:l,objectKey:"type"}),filter:Ff,layout:E=>Xi({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>Nf(Mr({layerType:x},I))}}),paint:E=>Xi({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>wh(Mr({layerType:x},I))}})}})),o}function qa(s){const o=s.value,l=s.key,f=kr(o);return f!=="string"?[new He(l,o,`string expected, ${f} found`)]:[]}const Sh={promoteId:function({key:s,value:o}){if(kr(o)==="string")return qa({key:s,value:o});{const l=[];for(const f in o)l.push(...qa({key:`${s}.${f}`,value:o[f]}));return l}}};function Wu(s){const o=s.value,l=s.key,f=s.styleSpec,g=s.style,v=s.validateSpec;if(!o.type)return[new He(l,o,'"type" is required')];const x=kn(o.type);let w;switch(x){case"vector":case"raster":return w=Xi({key:l,value:o,valueSpec:f[`source_${x.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:Sh,validateSpec:v}),w;case"raster-dem":return w=function(E){var I;const M=(I=E.sourceName)!==null&&I!==void 0?I:"",O=E.value,F=E.styleSpec,q=F.source_raster_dem,K=E.style;let Y=[];const ae=kr(O);if(O===void 0)return Y;if(ae!=="object")return Y.push(new He("source_raster_dem",O,`object expected, ${ae} found`)),Y;const he=kn(O.encoding)==="custom",ke=["redFactor","greenFactor","blueFactor","baseShift"],xe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const Ce in O)!he&&ke.includes(Ce)?Y.push(new He(Ce,O[Ce],`In "${M}": "${Ce}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):q[Ce]?Y=Y.concat(E.validateSpec({key:Ce,value:O[Ce],valueSpec:q[Ce],validateSpec:E.validateSpec,style:K,styleSpec:F})):Y.push(new He(Ce,O[Ce],`unknown property "${Ce}"`));return Y}({sourceName:l,value:o,style:s.style,styleSpec:f,validateSpec:v}),w;case"geojson":if(w=Xi({key:l,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,validateSpec:v,objectElementValidators:Sh}),o.cluster)for(const E in o.clusterProperties){const[I,M]=o.clusterProperties[E],O=typeof I=="string"?[I,["accumulated"],["get",E]]:I;w.push(...Ll({key:`${l}.${E}.map`,value:M,validateSpec:v,expressionContext:"cluster-map"})),w.push(...Ll({key:`${l}.${E}.reduce`,value:O,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return Xi({key:l,value:o,valueSpec:f.source_video,style:g,validateSpec:v,styleSpec:f});case"image":return Xi({key:l,value:o,valueSpec:f.source_image,style:g,validateSpec:v,styleSpec:f});case"canvas":return[new He(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Os({key:`${l}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:v,styleSpec:f})}}function jf(s){const o=s.value,l=s.styleSpec,f=l.light,g=s.style;let v=[];const x=kr(o);if(o===void 0)return v;if(x!=="object")return v=v.concat([new He("light",o,`object expected, ${x} found`)]),v;for(const w in o){const E=w.match(/^(.*)-transition$/);v=v.concat(E&&f[E[1]]&&f[E[1]].transition?s.validateSpec({key:w,value:o[w],valueSpec:l.transition,validateSpec:s.validateSpec,style:g,styleSpec:l}):f[w]?s.validateSpec({key:w,value:o[w],valueSpec:f[w],validateSpec:s.validateSpec,style:g,styleSpec:l}):[new He(w,o[w],`unknown property "${w}"`)])}return v}function Uf(s){const o=s.value,l=s.styleSpec,f=l.sky,g=s.style,v=kr(o);if(o===void 0)return[];if(v!=="object")return[new He("sky",o,`object expected, ${v} found`)];let x=[];for(const w in o)x=x.concat(f[w]?s.validateSpec({key:w,value:o[w],valueSpec:f[w],style:g,styleSpec:l}):[new He(w,o[w],`unknown property "${w}"`)]);return x}function Vf(s){const o=s.value,l=s.styleSpec,f=l.terrain,g=s.style;let v=[];const x=kr(o);if(o===void 0)return v;if(x!=="object")return v=v.concat([new He("terrain",o,`object expected, ${x} found`)]),v;for(const w in o)v=v.concat(f[w]?s.validateSpec({key:w,value:o[w],valueSpec:f[w],validateSpec:s.validateSpec,style:g,styleSpec:l}):[new He(w,o[w],`unknown property "${w}"`)]);return v}function qf(s){let o=[];const l=s.value,f=s.key;if(Array.isArray(l)){const g=[],v=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&o.push(new He(f,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&v.includes(l[x].url)&&o.push(new He(f,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),v.push(l[x].url),o=o.concat(Xi({key:`${f}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return o}return qa({key:f,value:l})}const Th={"*":()=>[],array:Hu,boolean:function(s){const o=s.value,l=s.key,f=kr(o);return f!=="boolean"?[new He(l,o,`boolean expected, ${f} found`)]:[]},number:zf,color:function(s){const o=s.key,l=s.value,f=kr(l);return f!=="string"?[new He(o,l,`color expected, ${f} found`)]:Jt.parse(String(l))?[]:[new He(o,l,`color expected, "${l}" found`)]},constants:Bg,enum:Os,filter:Ff,function:xh,layer:$f,object:Xi,source:Wu,light:jf,sky:Uf,terrain:Vf,projection:function(s){const o=s.value,l=s.styleSpec,f=l.projection,g=s.style,v=kr(o);if(o===void 0)return[];if(v!=="object")return[new He("projection",o,`object expected, ${v} found`)];let x=[];for(const w in o)x=x.concat(f[w]?s.validateSpec({key:w,value:o[w],valueSpec:f[w],style:g,styleSpec:l}):[new He(w,o[w],`unknown property "${w}"`)]);return x},string:qa,formatted:function(s){return qa(s).length===0?[]:Ll(s)},resolvedImage:function(s){return qa(s).length===0?[]:Ll(s)},padding:function(s){const o=s.key,l=s.value;if(kr(l)==="array"){if(l.length<1||l.length>4)return[new He(o,l,`padding requires 1 to 4 values; ${l.length} values found`)];const f={type:"number"};let g=[];for(let v=0;v<l.length;v++)g=g.concat(s.validateSpec({key:`${o}[${v}]`,value:l[v],validateSpec:s.validateSpec,valueSpec:f}));return g}return zf({key:o,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const o=s.key,l=s.value,f=kr(l),g=s.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new He(o,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<l.length;x+=2)v=v.concat(Os({key:`${o}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),v=v.concat(Hu({key:`${o}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return v},sprite:qf};function Ol(s){const o=s.value,l=s.valueSpec,f=s.styleSpec;return s.validateSpec=Ol,l.expression&&fh(kn(o))?xh(s):l.expression&&gh(Lo(o))?Ll(s):l.type&&Th[l.type]?Th[l.type](s):Xi(Mr({},s,{valueSpec:l.type?f[l.type]:l}))}function Ng(s){const o=s.value,l=s.key,f=qa(s);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new He(l,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new He(l,o,'"glyphs" url must include a "{range}" token'))),f}function ho(s,o=Ie){let l=[];return l=l.concat(Ol({key:"",value:s,valueSpec:o.$root,styleSpec:o,style:s,validateSpec:Ol,objectElementValidators:{glyphs:Ng,"*":()=>[]}})),s.constants&&(l=l.concat(Bg({key:"constants",value:s.constants,style:s,styleSpec:o,validateSpec:Ol}))),Hf(l)}function us(s){return function(o){return s({...o,validateSpec:Ol})}}function Hf(s){return[].concat(s).sort((o,l)=>o.line-l.line)}function Oo(s){return function(...o){return Hf(s.apply(this,o))}}ho.source=Oo(us(Wu)),ho.sprite=Oo(us(qf)),ho.glyphs=Oo(us(Ng)),ho.light=Oo(us(jf)),ho.sky=Oo(us(Uf)),ho.terrain=Oo(us(Vf)),ho.layer=Oo(us($f)),ho.filter=Oo(us(Ff)),ho.paintProperty=Oo(us(wh)),ho.layoutProperty=Oo(us(Nf));const Ha=ho,Ax=Ha.light,kx=Ha.sky,$g=Ha.paintProperty,jg=Ha.layoutProperty;function Wf(s,o){let l=!1;if(o&&o.length)for(const f of o)s.fire(new $t(new Error(f.message))),l=!0;return l}class Dl{constructor(o,l,f){const g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(l=x[1])+2*(f=x[2]);for(let E=0;E<this.d*this.d;E++){const I=x[3+E],M=x[3+E+1];g.push(I===M?null:x.subarray(I,M))}const w=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=o,this.padding=f,this.scale=l/o,this.uid=0;const v=f/l*o;this.min=-v,this.max=o+v}insert(o,l,f,g,v){this._forEachCell(l,f,g,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,l,f,g,v,x){this.cells[v].push(x)}query(o,l,f,g,v){const x=this.min,w=this.max;if(o<=x&&l<=x&&w<=f&&w<=g&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(o,l,f,g,this._queryCell,E,{},v),E}}_queryCell(o,l,f,g,v,x,w,E){const I=this.cells[v];if(I!==null){const M=this.keys,O=this.bboxes;for(let F=0;F<I.length;F++){const q=I[F];if(w[q]===void 0){const K=4*q;(E?E(O[K+0],O[K+1],O[K+2],O[K+3]):o<=O[K+2]&&l<=O[K+3]&&f>=O[K+0]&&g>=O[K+1])?(w[q]=!0,x.push(M[q])):w[q]=!1}}}}_forEachCell(o,l,f,g,v,x,w,E){const I=this._convertToCellCoord(o),M=this._convertToCellCoord(l),O=this._convertToCellCoord(f),F=this._convertToCellCoord(g);for(let q=I;q<=O;q++)for(let K=M;K<=F;K++){const Y=this.d*K+q;if((!E||E(this._convertFromCellCoord(q),this._convertFromCellCoord(K),this._convertFromCellCoord(q+1),this._convertFromCellCoord(K+1)))&&v.call(this,o,l,f,g,Y,x,w,E))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,l=3+this.cells.length+1+1;let f=0;for(let x=0;x<this.cells.length;x++)f+=this.cells[x].length;const g=new Int32Array(l+f+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let v=l;for(let x=0;x<o.length;x++){const w=o[x];g[3+x]=v,g.set(w,v),v+=w.length}return g[3+o.length]=v,g.set(this.keys,v),v+=this.keys.length,g[3+o.length+1]=v,g.set(this.bboxes,v),v+=this.bboxes.length,g.buffer}static serialize(o,l){const f=o.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(o){return new Dl(o.buffer)}}const fo={};function Tt(s,o,l={}){if(fo[s])throw new Error(`${s} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:s,writeable:!1}),fo[s]={klass:o,omit:l.omit||[],shallow:l.shallow||[]}}Tt("Object",Object),Tt("TransferableGridIndex",Dl),Tt("Color",Jt),Tt("Error",Error),Tt("AJAXError",sr),Tt("ResolvedImage",Zn),Tt("StylePropertyFunction",Ml),Tt("StyleExpression",mh,{omit:["_evaluator"]}),Tt("ZoomDependentExpression",Rl),Tt("ZoomConstantExpression",Il),Tt("CompoundExpression",co,{omit:["_evaluate"]});for(const s in Tl)Tl[s]._classRegistryKey||Tt(`Expression_${s}`,Tl[s]);function Eh(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Gf(s){return s.$name||s.constructor._classRegistryKey}function Ug(s){return!function(o){if(o===null||typeof o!="object")return!1;const l=Gf(o);return!(!l||l==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Eh(s)||Et(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function zl(s,o){if(Ug(s))return(Eh(s)||Et(s))&&o&&o.push(s),ArrayBuffer.isView(s)&&o&&o.push(s.buffer),s instanceof ImageData&&o&&o.push(s.data.buffer),s;if(Array.isArray(s)){const v=[];for(const x of s)v.push(zl(x,o));return v}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const l=Gf(s);if(!l)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!fo[l])throw new Error(`${l} is not registered.`);const{klass:f}=fo[l],g=f.serialize?f.serialize(s,o):{};if(f.serialize){if(o&&g===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||fo[l].omit.indexOf(v)>=0)continue;const x=s[v];g[v]=fo[l].shallow.indexOf(v)>=0?x:zl(x,o)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function Fl(s){if(Ug(s))return s;if(Array.isArray(s))return s.map(Fl);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const o=Gf(s)||"Object";if(!fo[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:l}=fo[o];if(!l)throw new Error(`can't deserialize unregistered class ${o}`);if(l.deserialize)return l.deserialize(s);const f=Object.create(l.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const v=s[g];f[g]=fo[o].shallow.indexOf(g)>=0?v:Fl(v)}return f}class Zf{constructor(){this.first=!0}update(o,l){const f=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=f,!0))}}const vr={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Kf(s){for(const o of s)if(Yf(o.charCodeAt(0)))return!0;return!1}function Px(s){for(const o of s)if(!Bl(o.charCodeAt(0)))return!1;return!0}function Xf(s){const o=s.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(o.join("|"),"u")}const Ix=Xf(["Arab","Dupl","Mong","Ougr","Syrc"]);function Bl(s){return!Ix.test(String.fromCodePoint(s))}const Vg=Xf(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Yf(s){return!(s!==746&&s!==747&&(s<4352||!(vr["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||vr["CJK Compatibility"](s)||vr["CJK Strokes"](s)||!(!vr["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||vr["Enclosed CJK Letters and Months"](s)||vr["Ideographic Description Characters"](s)||vr.Kanbun(s)||vr.Katakana(s)&&s!==12540||!(!vr["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!vr["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||vr["Vertical Forms"](s)||vr["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||Vg.test(String.fromCodePoint(s)))))}function qg(s){return!(Yf(s)||function(o){return!!(vr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||vr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||vr["Letterlike Symbols"](o)||vr["Number Forms"](o)||vr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||vr["Control Pictures"](o)&&o!==9251||vr["Optical Character Recognition"](o)||vr["Enclosed Alphanumerics"](o)||vr["Geometric Shapes"](o)||vr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||vr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||vr["CJK Symbols and Punctuation"](o)||vr.Katakana(o)||vr["Private Use Area"](o)||vr["CJK Compatibility Forms"](o)||vr["Small Form Variants"](o)||vr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(s))}const Rx=Xf(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Jf(s){return Rx.test(String.fromCodePoint(s))}function Mx(s,o){return!(!o&&Jf(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||vr.Khmer(s))}function Lx(s){for(const o of s)if(Jf(o.charCodeAt(0)))return!0;return!1}const Yi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Qr{constructor(o,l){this.zoom=o,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zf,this.transition={})}isSupportedScript(o){return function(l,f){for(const g of l)if(!Mx(g.charCodeAt(0),f))return!1;return!0}(o,Yi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,l=o-Math.floor(o),f=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class Nl{constructor(o,l){this.property=o,this.value=l,this.expression=function(f,g){if(fh(f))return new Ml(f,g);if(gh(f)){const v=Lf(f,g);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=f;return g.type==="color"&&typeof f=="string"?v=Jt.parse(f):g.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(v=Cn.parse(f)):v=En.parse(f),{kind:"constant",evaluate:()=>v}}}(l===void 0?o.specification.default:l,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,l,f){return this.property.possiblyEvaluate(this,o,l,f)}}class Ch{constructor(o){this.property=o,this.value=new Nl(o,void 0)}transitioned(o,l){return new Hg(this.property,this.value,l,ge({},o.transition,this.transition),o.now)}untransitioned(){return new Hg(this.property,this.value,null,{},0)}}class Ah{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Te(this._values[o].value.value)}setValue(o,l){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ch(this._values[o].property)),this._values[o].value=new Nl(this._values[o].property,l===null?void 0:Te(l))}getTransition(o){return Te(this._values[o].transition)}setTransition(o,l){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ch(this._values[o].property)),this._values[o].transition=Te(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(o[l]=f);const g=this.getTransition(l);g!==void 0&&(o[`${l}-transition`]=g)}return o}transitioned(o,l){const f=new Gu(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,l._values[g]);return f}untransitioned(){const o=new Gu(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class Hg{constructor(o,l,f,g,v){this.property=o,this.value=l,this.begin=v+g.delay||0,this.end=this.begin+g.duration||0,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,l,f){const g=o.now||0,v=this.value.possiblyEvaluate(o,l,f),x=this.prior;if(x){if(g>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(g<this.begin)return x.possiblyEvaluate(o,l,f);{const w=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(o,l,f),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,M=I*E;return 4*(E<.5?M:3*(E-I)+M-.75)}(w))}}return v}}class Gu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,f){const g=new Ku(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(o,l,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Zu{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Te(this._values[o].value)}setValue(o,l){this._values[o]=new Nl(this._values[o].property,l===null?void 0:Te(l))}serialize(){const o={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(o[l]=f)}return o}possiblyEvaluate(o,l,f){const g=new Ku(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(o,l,f);return g}}class cs{constructor(o,l,f){this.property=o,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,l,f,g){return this.property.evaluate(this.value,this.parameters,o,l,f,g)}}class Ku{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Pt{constructor(o){this.specification=o}possiblyEvaluate(o,l){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(l)}interpolate(o,l,f){const g=Oi[this.specification.type];return g?g(o,l,f):o}}class Ht{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,f,g){return new cs(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(l,null,{},f,g)}:o.expression,l)}interpolate(o,l,f){if(o.value.kind!=="constant"||l.value.kind!=="constant")return o;if(o.value.value===void 0||l.value.value===void 0)return new cs(this,{kind:"constant",value:void 0},o.parameters);const g=Oi[this.specification.type];if(g){const v=g(o.value.value,l.value.value,f);return new cs(this,{kind:"constant",value:v},o.parameters)}return o}evaluate(o,l,f,g,v,x){return o.kind==="constant"?o.value:o.evaluate(l,f,g,v,x)}}class kh extends Ht{possiblyEvaluate(o,l,f,g){if(o.value===void 0)return new cs(this,{kind:"constant",value:void 0},l);if(o.expression.kind==="constant"){const v=o.expression.evaluate(l,null,{},f,g),x=o.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,l);return new cs(this,{kind:"constant",value:w},l)}if(o.expression.kind==="camera"){const v=this._calculate(o.expression.evaluate({zoom:l.zoom-1}),o.expression.evaluate({zoom:l.zoom}),o.expression.evaluate({zoom:l.zoom+1}),l);return new cs(this,{kind:"constant",value:v},l)}return new cs(this,o.expression,l)}evaluate(o,l,f,g,v,x){if(o.kind==="source"){const w=o.evaluate(l,f,g,v,x);return this._calculate(w,w,w,l)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(l.zoom)-1},f,g),o.evaluate({zoom:Math.floor(l.zoom)},f,g),o.evaluate({zoom:Math.floor(l.zoom)+1},f,g),l):o.value}_calculate(o,l,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:l}:{from:f,to:l}}interpolate(o){return o}}class Ph{constructor(o){this.specification=o}possiblyEvaluate(o,l,f,g){if(o.value!==void 0){if(o.expression.kind==="constant"){const v=o.expression.evaluate(l,null,{},f,g);return this._calculate(v,v,v,l)}return this._calculate(o.expression.evaluate(new Qr(Math.floor(l.zoom-1),l)),o.expression.evaluate(new Qr(Math.floor(l.zoom),l)),o.expression.evaluate(new Qr(Math.floor(l.zoom+1),l)),l)}}_calculate(o,l,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:l}:{from:f,to:l}}interpolate(o){return o}}class Qf{constructor(o){this.specification=o}possiblyEvaluate(o,l,f,g){return!!o.expression.evaluate(l,null,{},f,g)}interpolate(){return!1}}class _{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in o){const f=o[l];f.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new Nl(f,void 0),v=this.defaultTransitionablePropertyValues[l]=new Ch(f);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}Tt("DataDrivenProperty",Ht),Tt("DataConstantProperty",Pt),Tt("CrossFadedDataDrivenProperty",kh),Tt("CrossFadedProperty",Ph),Tt("ColorRampProperty",Qf);const i="-transition";class c extends hr{constructor(o,l){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),l.layout&&(this._unevaluatedLayout=new Zu(l.layout)),l.paint)){this._transitionablePaint=new Ah(l.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ku(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,l,f={}){l!=null&&this._validate(jg,`layers.${this.id}.layout.${o}`,o,l,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,l):this.visibility=l)}getPaintProperty(o){return o.endsWith(i)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l,f={}){if(l!=null&&this._validate($g,`layers.${this.id}.paint.${o}`,o,l,f))return!1;if(o.endsWith(i))return this._transitionablePaint.setTransition(o.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[o],v=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(o,l),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value;return E.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(o,w,E)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,l,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Z(o,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(o,l,f,g,v={}){return(!v||v.validate!==!1)&&Wf(this,o.call(Ha,{key:l,layerType:this.type,objectKey:f,value:g,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof cs&&Al(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(s,o=1){let l=0,f=0;return{members:s.map(g=>{const v=p[g.type].BYTES_PER_ELEMENT,x=l=C(l,Math.max(o,v)),w=g.components||1;return f=Math.max(f,v),l+=v*w,{name:g.name,type:g.type,components:w,offset:x}}),size:C(l,Math.max(f,o)),alignment:o}}function C(s,o){return Math.ceil(s/o)*o}class k extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const g=2*o;return this.int16[g+0]=l,this.int16[g+1]=f,o}}k.prototype.bytesPerElement=4,Tt("StructArrayLayout2i4",k);class L extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const v=3*o;return this.int16[v+0]=l,this.int16[v+1]=f,this.int16[v+2]=g,o}}L.prototype.bytesPerElement=6,Tt("StructArrayLayout3i6",L);class D extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,o,l,f,g)}emplace(o,l,f,g,v){const x=4*o;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=g,this.int16[x+3]=v,o}}D.prototype.bytesPerElement=8,Tt("StructArrayLayout4i8",D);class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,v,x)}emplace(o,l,f,g,v,x,w){const E=6*o;return this.int16[E+0]=l,this.int16[E+1]=f,this.int16[E+2]=g,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=w,o}}z.prototype.bytesPerElement=12,Tt("StructArrayLayout2i4i12",z);class G extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,v,x)}emplace(o,l,f,g,v,x,w){const E=4*o,I=8*o;return this.int16[E+0]=l,this.int16[E+1]=f,this.uint8[I+4]=g,this.uint8[I+5]=v,this.uint8[I+6]=x,this.uint8[I+7]=w,o}}G.prototype.bytesPerElement=8,Tt("StructArrayLayout2i4ub8",G);class Q extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const g=2*o;return this.float32[g+0]=l,this.float32[g+1]=f,o}}Q.prototype.bytesPerElement=8,Tt("StructArrayLayout2f8",Q);class re extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x,w,E,I,M){const O=this.length;return this.resize(O+1),this.emplace(O,o,l,f,g,v,x,w,E,I,M)}emplace(o,l,f,g,v,x,w,E,I,M,O){const F=10*o;return this.uint16[F+0]=l,this.uint16[F+1]=f,this.uint16[F+2]=g,this.uint16[F+3]=v,this.uint16[F+4]=x,this.uint16[F+5]=w,this.uint16[F+6]=E,this.uint16[F+7]=I,this.uint16[F+8]=M,this.uint16[F+9]=O,o}}re.prototype.bytesPerElement=20,Tt("StructArrayLayout10ui20",re);class le extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x,w,E,I,M,O,F){const q=this.length;return this.resize(q+1),this.emplace(q,o,l,f,g,v,x,w,E,I,M,O,F)}emplace(o,l,f,g,v,x,w,E,I,M,O,F,q){const K=12*o;return this.int16[K+0]=l,this.int16[K+1]=f,this.int16[K+2]=g,this.int16[K+3]=v,this.uint16[K+4]=x,this.uint16[K+5]=w,this.uint16[K+6]=E,this.uint16[K+7]=I,this.int16[K+8]=M,this.int16[K+9]=O,this.int16[K+10]=F,this.int16[K+11]=q,o}}le.prototype.bytesPerElement=24,Tt("StructArrayLayout4i4ui4i24",le);class de extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const v=3*o;return this.float32[v+0]=l,this.float32[v+1]=f,this.float32[v+2]=g,o}}de.prototype.bytesPerElement=12,Tt("StructArrayLayout3f12",de);class pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}pe.prototype.bytesPerElement=4,Tt("StructArrayLayout1ul4",pe);class _e extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x,w,E,I){const M=this.length;return this.resize(M+1),this.emplace(M,o,l,f,g,v,x,w,E,I)}emplace(o,l,f,g,v,x,w,E,I,M){const O=10*o,F=5*o;return this.int16[O+0]=l,this.int16[O+1]=f,this.int16[O+2]=g,this.int16[O+3]=v,this.int16[O+4]=x,this.int16[O+5]=w,this.uint32[F+3]=E,this.uint16[O+8]=I,this.uint16[O+9]=M,o}}_e.prototype.bytesPerElement=20,Tt("StructArrayLayout6i1ul2ui20",_e);class se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,v,x)}emplace(o,l,f,g,v,x,w){const E=6*o;return this.int16[E+0]=l,this.int16[E+1]=f,this.int16[E+2]=g,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=w,o}}se.prototype.bytesPerElement=12,Tt("StructArrayLayout2i2i2i12",se);class we extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,f,g,v)}emplace(o,l,f,g,v,x){const w=4*o,E=8*o;return this.float32[w+0]=l,this.float32[w+1]=f,this.float32[w+2]=g,this.int16[E+6]=v,this.int16[E+7]=x,o}}we.prototype.bytesPerElement=16,Tt("StructArrayLayout2f1f2i16",we);class Ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,v,x)}emplace(o,l,f,g,v,x,w){const E=16*o,I=4*o,M=8*o;return this.uint8[E+0]=l,this.uint8[E+1]=f,this.float32[I+1]=g,this.float32[I+2]=v,this.int16[M+6]=x,this.int16[M+7]=w,o}}Ee.prototype.bytesPerElement=16,Tt("StructArrayLayout2ub2f2i16",Ee);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const v=3*o;return this.uint16[v+0]=l,this.uint16[v+1]=f,this.uint16[v+2]=g,o}}Pe.prototype.bytesPerElement=6,Tt("StructArrayLayout3ui6",Pe);class qe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x,w,E,I,M,O,F,q,K,Y,ae,he){const ke=this.length;return this.resize(ke+1),this.emplace(ke,o,l,f,g,v,x,w,E,I,M,O,F,q,K,Y,ae,he)}emplace(o,l,f,g,v,x,w,E,I,M,O,F,q,K,Y,ae,he,ke){const xe=24*o,Ce=12*o,De=48*o;return this.int16[xe+0]=l,this.int16[xe+1]=f,this.uint16[xe+2]=g,this.uint16[xe+3]=v,this.uint32[Ce+2]=x,this.uint32[Ce+3]=w,this.uint32[Ce+4]=E,this.uint16[xe+10]=I,this.uint16[xe+11]=M,this.uint16[xe+12]=O,this.float32[Ce+7]=F,this.float32[Ce+8]=q,this.uint8[De+36]=K,this.uint8[De+37]=Y,this.uint8[De+38]=ae,this.uint32[Ce+10]=he,this.int16[xe+22]=ke,o}}qe.prototype.bytesPerElement=48,Tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);class tt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,v,x,w,E,I,M,O,F,q,K,Y,ae,he,ke,xe,Ce,De,Je,_t,jt,gt,dt,Mt,At){const bt=this.length;return this.resize(bt+1),this.emplace(bt,o,l,f,g,v,x,w,E,I,M,O,F,q,K,Y,ae,he,ke,xe,Ce,De,Je,_t,jt,gt,dt,Mt,At)}emplace(o,l,f,g,v,x,w,E,I,M,O,F,q,K,Y,ae,he,ke,xe,Ce,De,Je,_t,jt,gt,dt,Mt,At,bt){const je=32*o,Ot=16*o;return this.int16[je+0]=l,this.int16[je+1]=f,this.int16[je+2]=g,this.int16[je+3]=v,this.int16[je+4]=x,this.int16[je+5]=w,this.int16[je+6]=E,this.int16[je+7]=I,this.uint16[je+8]=M,this.uint16[je+9]=O,this.uint16[je+10]=F,this.uint16[je+11]=q,this.uint16[je+12]=K,this.uint16[je+13]=Y,this.uint16[je+14]=ae,this.uint16[je+15]=he,this.uint16[je+16]=ke,this.uint16[je+17]=xe,this.uint16[je+18]=Ce,this.uint16[je+19]=De,this.uint16[je+20]=Je,this.uint16[je+21]=_t,this.uint16[je+22]=jt,this.uint32[Ot+12]=gt,this.float32[Ot+13]=dt,this.float32[Ot+14]=Mt,this.uint16[je+30]=At,this.uint16[je+31]=bt,o}}tt.prototype.bytesPerElement=64,Tt("StructArrayLayout8i15ui1ul2f2ui64",tt);class pt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}pt.prototype.bytesPerElement=4,Tt("StructArrayLayout1f4",pt);class xt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const v=3*o;return this.uint16[6*o+0]=l,this.float32[v+1]=f,this.float32[v+2]=g,o}}xt.prototype.bytesPerElement=12,Tt("StructArrayLayout1ui2f12",xt);class ct extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const v=4*o;return this.uint32[2*o+0]=l,this.uint16[v+2]=f,this.uint16[v+3]=g,o}}ct.prototype.bytesPerElement=8,Tt("StructArrayLayout1ul2ui8",ct);class lt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const g=2*o;return this.uint16[g+0]=l,this.uint16[g+1]=f,o}}lt.prototype.bytesPerElement=4,Tt("StructArrayLayout2ui4",lt);class It extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}It.prototype.bytesPerElement=2,Tt("StructArrayLayout1ui2",It);class Qt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,o,l,f,g)}emplace(o,l,f,g,v){const x=4*o;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=g,this.float32[x+3]=v,o}}Qt.prototype.bytesPerElement=16,Tt("StructArrayLayout4f16",Qt);class ht extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}ht.prototype.size=20;class yt extends _e{get(o){return new ht(this,o)}}Tt("CollisionBoxArray",yt);class Kt extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Kt.prototype.size=48;class en extends qe{get(o){return new Kt(this,o)}}Tt("PlacedSymbolArray",en);class cr extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}cr.prototype.size=64;class yr extends tt{get(o){return new cr(this,o)}}Tt("SymbolInstanceArray",yr);class tn extends pt{getoffsetX(o){return this.float32[1*o+0]}}Tt("GlyphOffsetArray",tn);class li extends L{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Tt("SymbolLineVertexArray",li);class Do extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Do.prototype.size=12;class rn extends xt{get(o){return new Do(this,o)}}Tt("TextAnchorOffsetArray",rn);class zi extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}zi.prototype.size=8;class bi extends ct{get(o){return new zi(this,o)}}Tt("FeatureIndexArray",bi);class ui extends k{}class wi extends k{}class hs extends k{}class $l extends z{}class Ih extends G{}class jl extends Q{}class po extends re{}class Rh extends le{}class ep extends de{}class mo extends pe{}class go extends se{}class oa extends Ee{}class zo extends Pe{}class ni extends lt{}const ci=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ji}=ci;class xr{constructor(o=[]){this.segments=o}prepareSegment(o,l,f,g){let v=this.segments[this.segments.length-1];return o>xr.MAX_VERTEX_ARRAY_LENGTH&&Fe(`Max vertices per segment is ${xr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!v||v.vertexLength+o>xr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==g)&&(v={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(v.sortKey=g),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,f,g){return new xr([{vertexOffset:o,primitiveOffset:l,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function Wa(s,o){return 256*(s=me(Math.floor(s),0,255))+me(Math.floor(o),0,255)}xr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tt("SegmentVector",xr);const Ul=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Vl={exports:{}},Wg={exports:{}};Wg.exports=function(s,o){var l,f,g,v,x,w,E,I;for(f=s.length-(l=3&s.length),g=o,x=3432918353,w=461845907,I=0;I<f;)E=255&s.charCodeAt(I)|(255&s.charCodeAt(++I))<<8|(255&s.charCodeAt(++I))<<16|(255&s.charCodeAt(++I))<<24,++I,g=27492+(65535&(v=5*(65535&(g=(g^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,l){case 3:E^=(255&s.charCodeAt(I+2))<<16;case 2:E^=(255&s.charCodeAt(I+1))<<8;case 1:g^=E=(65535&(E=(E=(65535&(E^=255&s.charCodeAt(I)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Ox=Wg.exports,Gg={exports:{}};Gg.exports=function(s,o){for(var l,f=s.length,g=o^f,v=0;f>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++v;switch(f){case 3:g^=(255&s.charCodeAt(v+2))<<16;case 2:g^=(255&s.charCodeAt(v+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(v)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var sa=Ox,Zg=Gg.exports;Vl.exports=sa,Vl.exports.murmur3=sa,Vl.exports.murmur2=Zg;var Mh=b(Vl.exports);class Xu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,l,f,g){this.ids.push(Lh(o)),this.positions.push(l,f,g)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Lh(o);let f=0,g=this.ids.length-1;for(;f<g;){const x=f+g>>1;this.ids[x]>=l?g=x:f=x+1}const v=[];for(;this.ids[f]===l;)v.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return v}static serialize(o,l){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return Oh(f,g,0,f.length-1),l&&l.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const l=new Xu;return l.ids=o.ids,l.positions=o.positions,l.indexed=!0,l}}function Lh(s){const o=+s;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Mh(String(s))}function Oh(s,o,l,f){for(;l<f;){const g=s[l+f>>1];let v=l-1,x=f+1;for(;;){do v++;while(s[v]<g);do x--;while(s[x]>g);if(v>=x)break;ql(s,v,x),ql(o,3*v,3*x),ql(o,3*v+1,3*x+1),ql(o,3*v+2,3*x+2)}x-l<f-x?(Oh(s,o,l,x),l=x+1):(Oh(s,o,x+1,f),f=x)}}function ql(s,o,l){const f=s[o];s[o]=s[l],s[l]=f}Tt("FeaturePositionMap",Xu);class Yu{constructor(o,l){this.gl=o.gl,this.location=l}}class Kg extends Yu{constructor(o,l){super(o,l),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class GT extends Yu{constructor(o,l){super(o,l),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class ZT extends Yu{constructor(o,l){super(o,l),this.current=Jt.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const _z=new Float32Array(16);function Dx(s){return[Wa(255*s.r,255*s.g),Wa(255*s.b,255*s.a)]}class tp{constructor(o,l,f){this.value=o,this.uniformNames=l.map(g=>`u_${g}`),this.type=f}setUniform(o,l,f){o.set(f.constantOr(this.value))}getBinding(o,l,f){return this.type==="color"?new ZT(o,l):new Kg(o,l)}}class Dh{constructor(o,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=o.tlbr}setUniform(o,l,f,g){const v=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&o.set(v)}getBinding(o,l,f){return f.substr(0,9)==="u_pattern"?new GT(o,l):new Kg(o,l)}}class Ga{constructor(o,l,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,l,f,g,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Qr(0),l,{},g,[],v);this.paintVertexArray.resize(o),this._setPaintValue(x,o,w)}updatePaintArray(o,l,f,g){const v=this.expression.evaluate({zoom:0},f,g);this._setPaintValue(o,l,v)}_setPaintValue(o,l,f){if(this.type==="color"){const g=Dx(f);for(let v=o;v<l;v++)this.paintVertexArray.emplace(v,g[0],g[1])}else{for(let g=o;g<l;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ds{constructor(o,l,f,g,v,x){this.expression=o,this.uniformNames=l.map(w=>`u_${w}_t`),this.type=f,this.useIntegerZoom=g,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,l,f,g,v){const x=this.expression.evaluate(new Qr(this.zoom),l,{},g,[],v),w=this.expression.evaluate(new Qr(this.zoom+1),l,{},g,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(E,o,x,w)}updatePaintArray(o,l,f,g){const v=this.expression.evaluate({zoom:this.zoom},f,g),x=this.expression.evaluate({zoom:this.zoom+1},f,g);this._setPaintValue(o,l,v,x)}_setPaintValue(o,l,f,g){if(this.type==="color"){const v=Dx(f),x=Dx(g);for(let w=o;w<l;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=o;v<l;v++)this.paintVertexArray.emplace(v,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l){const f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=me(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);o.set(g)}getBinding(o,l,f){return new Kg(o,l)}}class Hl{constructor(o,l,f,g,v,x){this.expression=o,this.type=l,this.useIntegerZoom=f,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(o,l,f){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(g,o,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(o,l,f,g,v){this._setPaintValues(o,l,f.patterns&&f.patterns[this.layerId],v)}_setPaintValues(o,l,f,g){if(!g||!f)return;const{min:v,mid:x,max:w}=f,E=g[v],I=g[x],M=g[w];if(E&&I&&M)for(let O=o;O<l;O++)this.zoomInPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],I.pixelRatio,M.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Ul.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Ul.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class KT{constructor(o,l,f){this.binders={},this._buffers=[];const g=[];for(const v in o.paint._values){if(!f(v))continue;const x=o.paint.get(v);if(!(x instanceof cs&&Al(x.property.specification)))continue;const w=vz(v,o.type),E=x.value,I=x.property.specification.type,M=x.property.useIntegerZoom,O=x.property.specification["property-type"],F=O==="cross-faded"||O==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=F?new Dh(E.value,w):new tp(E.value,w,I),g.push(`/u_${v}`);else if(E.kind==="source"||F){const q=XT(v,I,"source");this.binders[v]=F?new Hl(E,I,M,l,q,o.id):new Ga(E,w,I,q),g.push(`/a_${v}`)}else{const q=XT(v,I,"composite");this.binders[v]=new Ds(E,w,I,M,l,q),g.push(`/z_${v}`)}}this.cacheKey=g.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof Ga||l instanceof Ds?l.maxValue:0}populatePaintArrays(o,l,f,g,v){for(const x in this.binders){const w=this.binders[x];(w instanceof Ga||w instanceof Ds||w instanceof Hl)&&w.populatePaintArray(o,l,f,g,v)}}setConstantPatternPositions(o,l){for(const f in this.binders){const g=this.binders[f];g instanceof Dh&&g.setConstantPatternPositions(o,l)}}updatePaintArrays(o,l,f,g,v){let x=!1;for(const w in o){const E=l.getPositions(w);for(const I of E){const M=f.feature(I.index);for(const O in this.binders){const F=this.binders[O];if((F instanceof Ga||F instanceof Ds||F instanceof Hl)&&F.expression.isStateDependent===!0){const q=g.paint.get(O);F.expression=q.value,F.updatePaintArray(I.start,I.end,M,o[w],v),x=!0}}}}return x}defines(){const o=[];for(const l in this.binders){const f=this.binders[l];(f instanceof tp||f instanceof Dh)&&o.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof Ga||f instanceof Ds)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name);else if(f instanceof Hl)for(let g=0;g<Ul.members.length;g++)o.push(Ul.members[g].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof tp||f instanceof Dh||f instanceof Ds)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,l){const f=[];for(const g in this.binders){const v=this.binders[g];if(v instanceof tp||v instanceof Dh||v instanceof Ds){for(const x of v.uniformNames)if(l[x]){const w=v.getBinding(o,l[x],x);f.push({name:x,property:g,binding:w})}}}return f}setUniforms(o,l,f,g){for(const{name:v,property:x,binding:w}of l)this.binders[x].setUniform(w,g,f.get(x),v)}updatePaintBuffers(o){this._buffers=[];for(const l in this.binders){const f=this.binders[l];if(o&&f instanceof Hl){const g=o.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(f instanceof Ga||f instanceof Ds)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(o){for(const l in this.binders){const f=this.binders[l];(f instanceof Ga||f instanceof Ds||f instanceof Hl)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof Ga||l instanceof Ds||l instanceof Hl)&&l.destroy()}}}class Ju{constructor(o,l,f=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new KT(g,l,f);this.needsUpload=!1,this._featureMap=new Xu,this._bufferOffset=0}populatePaintArrays(o,l,f,g,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(o,l,g,v,x);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,f,g){for(const v of f)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(o,this._featureMap,l,v,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function vz(s,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${o}-`,"").replace(/-/g,"_")]}function XT(s,o,l){const f={color:{source:Q,composite:Qt},number:{source:pt,composite:Q}},g=function(v){return{"line-pattern":{source:po,composite:po},"fill-pattern":{source:po,composite:po},"fill-extrusion-pattern":{source:po,composite:po}}[v]}(s);return g&&g[l]||f[o][l]}Tt("ConstantBinder",tp),Tt("CrossFadedConstantBinder",Dh),Tt("SourceExpressionBinder",Ga),Tt("CrossFadedCompositeBinder",Hl),Tt("CompositeExpressionBinder",Ds),Tt("ProgramConfiguration",KT,{omit:["_buffers"]}),Tt("ProgramConfigurationSet",Ju);const Nn=8192,zx=Math.pow(2,14)-1,YT=-zx-1;function Qu(s){const o=Nn/s.extent,l=s.loadGeometry();for(let f=0;f<l.length;f++){const g=l[f];for(let v=0;v<g.length;v++){const x=g[v],w=Math.round(x.x*o),E=Math.round(x.y*o);x.x=me(w,YT,zx),x.y=me(E,YT,zx),(w<x.x||w>x.x+1||E<x.y||E>x.y+1)&&Fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function ec(s,o){return{type:s.type,id:s.id,properties:s.properties,geometry:o?Qu(s):[]}}function Xg(s,o,l,f,g){s.emplaceBack(2*o+(f+1)/2,2*l+(g+1)/2)}class Fx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new wi,this.indexArray=new zo,this.segments=new xr,this.programConfigurations=new Ju(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,f){const g=this.layers[0],v=[];let x=null,w=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:E,id:I,index:M,sourceLayerIndex:O}of o){const F=this.layers[0]._featureFilter.needGeometry,q=ec(E,F);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),q,f))continue;const K=w?x.evaluate(q,{},f):void 0,Y={id:I,properties:E.properties,type:E.type,sourceLayerIndex:O,index:M,geometry:F?q.geometry:Qu(E),patterns:{},sortKey:K};v.push(Y)}w&&v.sort((E,I)=>E.sortKey-I.sortKey);for(const E of v){const{geometry:I,index:M,sourceLayerIndex:O}=E,F=o[M].feature;this.addFeature(E,I,M,f),l.featureIndex.insert(F,I,M,O,this.index)}}update(o,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Ji),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,f,g){for(const v of l)for(const x of v){const w=x.x,E=x.y;if(w<0||w>=Nn||E<0||E>=Nn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),M=I.vertexLength;Xg(this.layoutVertexArray,w,E,-1,-1),Xg(this.layoutVertexArray,w,E,1,-1),Xg(this.layoutVertexArray,w,E,1,1),Xg(this.layoutVertexArray,w,E,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g)}}function JT(s,o){for(let l=0;l<s.length;l++)if(zh(o,s[l]))return!0;for(let l=0;l<o.length;l++)if(zh(s,o[l]))return!0;return!!Bx(s,o)}function xz(s,o,l){return!!zh(s,o)||!!Nx(o,s,l)}function QT(s,o){if(s.length===1)return tE(o,s[0]);for(let l=0;l<o.length;l++){const f=o[l];for(let g=0;g<f.length;g++)if(zh(s,f[g]))return!0}for(let l=0;l<s.length;l++)if(tE(o,s[l]))return!0;for(let l=0;l<o.length;l++)if(Bx(s,o[l]))return!0;return!1}function bz(s,o,l){if(s.length>1){if(Bx(s,o))return!0;for(let f=0;f<o.length;f++)if(Nx(o[f],s,l))return!0}for(let f=0;f<s.length;f++)if(Nx(s[f],o,l))return!0;return!1}function Bx(s,o){if(s.length===0||o.length===0)return!1;for(let l=0;l<s.length-1;l++){const f=s[l],g=s[l+1];for(let v=0;v<o.length-1;v++)if(wz(f,g,o[v],o[v+1]))return!0}return!1}function wz(s,o,l,f){return Ze(s,l,f)!==Ze(o,l,f)&&Ze(s,o,l)!==Ze(s,o,f)}function Nx(s,o,l){const f=l*l;if(o.length===1)return s.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(eE(s,o[g-1],o[g])<f)return!0;return!1}function eE(s,o,l){const f=o.distSqr(l);if(f===0)return s.distSqr(o);const g=((s.x-o.x)*(l.x-o.x)+(s.y-o.y)*(l.y-o.y))/f;return s.distSqr(g<0?o:g>1?l:l.sub(o)._mult(g)._add(o))}function tE(s,o){let l,f,g,v=!1;for(let x=0;x<s.length;x++){l=s[x];for(let w=0,E=l.length-1;w<l.length;E=w++)f=l[w],g=l[E],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(v=!v)}return v}function zh(s,o){let l=!1;for(let f=0,g=s.length-1;f<s.length;g=f++){const v=s[f],x=s[g];v.y>o.y!=x.y>o.y&&o.x<(x.x-v.x)*(o.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function Sz(s,o,l){const f=l[0],g=l[2];if(s.x<f.x&&o.x<f.x||s.x>g.x&&o.x>g.x||s.y<f.y&&o.y<f.y||s.y>g.y&&o.y>g.y)return!1;const v=Ze(s,o,l[0]);return v!==Ze(s,o,l[1])||v!==Ze(s,o,l[2])||v!==Ze(s,o,l[3])}function rp(s,o,l){const f=o.paint.get(s).value;return f.kind==="constant"?f.value:l.programConfigurations.get(o.id).getMaxValue(s)}function Yg(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Jg(s,o,l,f,g){if(!o[0]&&!o[1])return s;const v=P.convert(o)._mult(g);l==="viewport"&&v._rotate(-f);const x=[];for(let w=0;w<s.length;w++)x.push(s[w].sub(v));return x}let rE,nE;Tt("CircleBucket",Fx,{omit:["layers"]});var Tz={get paint(){return nE=nE||new _({"circle-radius":new Ht(Ie.paint_circle["circle-radius"]),"circle-color":new Ht(Ie.paint_circle["circle-color"]),"circle-blur":new Ht(Ie.paint_circle["circle-blur"]),"circle-opacity":new Ht(Ie.paint_circle["circle-opacity"]),"circle-translate":new Pt(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new Pt(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pt(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pt(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(Ie.paint_circle["circle-stroke-opacity"])})},get layout(){return rE=rE||new _({"circle-sort-key":new Ht(Ie.layout_circle["circle-sort-key"])})}},Fi=1e-6,Fh=typeof Float32Array<"u"?Float32Array:Array;function $x(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function iE(s,o,l){var f=o[0],g=o[1],v=o[2],x=o[3],w=o[4],E=o[5],I=o[6],M=o[7],O=o[8],F=o[9],q=o[10],K=o[11],Y=o[12],ae=o[13],he=o[14],ke=o[15],xe=l[0],Ce=l[1],De=l[2],Je=l[3];return s[0]=xe*f+Ce*w+De*O+Je*Y,s[1]=xe*g+Ce*E+De*F+Je*ae,s[2]=xe*v+Ce*I+De*q+Je*he,s[3]=xe*x+Ce*M+De*K+Je*ke,s[4]=(xe=l[4])*f+(Ce=l[5])*w+(De=l[6])*O+(Je=l[7])*Y,s[5]=xe*g+Ce*E+De*F+Je*ae,s[6]=xe*v+Ce*I+De*q+Je*he,s[7]=xe*x+Ce*M+De*K+Je*ke,s[8]=(xe=l[8])*f+(Ce=l[9])*w+(De=l[10])*O+(Je=l[11])*Y,s[9]=xe*g+Ce*E+De*F+Je*ae,s[10]=xe*v+Ce*I+De*q+Je*he,s[11]=xe*x+Ce*M+De*K+Je*ke,s[12]=(xe=l[12])*f+(Ce=l[13])*w+(De=l[14])*O+(Je=l[15])*Y,s[13]=xe*g+Ce*E+De*F+Je*ae,s[14]=xe*v+Ce*I+De*q+Je*he,s[15]=xe*x+Ce*M+De*K+Je*ke,s}Math.hypot||(Math.hypot=function(){for(var s=0,o=arguments.length;o--;)s+=arguments[o]*arguments[o];return Math.sqrt(s)});var np,Ez=iE;function Qg(s,o,l){var f=o[0],g=o[1],v=o[2],x=o[3];return s[0]=l[0]*f+l[4]*g+l[8]*v+l[12]*x,s[1]=l[1]*f+l[5]*g+l[9]*v+l[13]*x,s[2]=l[2]*f+l[6]*g+l[10]*v+l[14]*x,s[3]=l[3]*f+l[7]*g+l[11]*v+l[15]*x,s}np=new Fh(4),Fh!=Float32Array&&(np[0]=0,np[1]=0,np[2]=0,np[3]=0);class Cz extends c{constructor(o){super(o,Tz)}createBucket(o){return new Fx(o)}queryRadius(o){const l=o;return rp("circle-radius",this,l)+rp("circle-stroke-width",this,l)+Yg(this.paint.get("circle-translate"))}queryIntersectsFeature(o,l,f,g,v,x,w,E){const I=Jg(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),M=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),O=this.paint.get("circle-pitch-alignment")==="map",F=O?I:function(K,Y){return K.map(ae=>oE(ae,Y))}(I,E),q=O?M*w:M;for(const K of g)for(const Y of K){const ae=O?Y:oE(Y,E);let he=q;const ke=Qg([],[Y.x,Y.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?he*=ke[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(he*=x.cameraToCenterDistance/ke[3]),xz(F,ae,he))return!0}return!1}}function oE(s,o){const l=Qg([],[s.x,s.y,0,1],o);return new P(l[0]/l[3],l[1]/l[3])}class sE extends Fx{}let aE;Tt("HeatmapBucket",sE,{omit:["layers"]});var Az={get paint(){return aE=aE||new _({"heatmap-radius":new Ht(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pt(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qf(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pt(Ie.paint_heatmap["heatmap-opacity"])})}};function jx(s,{width:o,height:l},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*l*f)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${o*l*f}`)}else g=new Uint8Array(o*l*f);return s.width=o,s.height=l,s.data=g,s}function lE(s,{width:o,height:l},f){if(o===s.width&&l===s.height)return;const g=jx({},{width:o,height:l},f);Ux(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,o),height:Math.min(s.height,l)},f),s.width=o,s.height=l,s.data=g.data}function Ux(s,o,l,f,g,v){if(g.width===0||g.height===0)return o;if(g.width>s.width||g.height>s.height||l.x>s.width-g.width||l.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,w=o.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const I=((l.y+E)*s.width+l.x)*v,M=((f.y+E)*o.width+f.x)*v;for(let O=0;O<g.width*v;O++)w[M+O]=x[I+O]}return o}class ip{constructor(o,l){jx(this,o,1,l)}resize(o){lE(this,o,1)}clone(){return new ip({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,f,g,v){Ux(o,l,f,g,v,1)}}class Fo{constructor(o,l){jx(this,o,4,l)}resize(o){lE(this,o,4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Fo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,f,g,v){Ux(o,l,f,g,v,4)}}function uE(s){const o={},l=s.resolution||256,f=s.clips?s.clips.length:1,g=s.image||new Fo({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(x,w,E)=>{o[s.evaluationKey]=E;const I=s.expression.evaluate(o);g.data[x+w+0]=Math.floor(255*I.r/I.a),g.data[x+w+1]=Math.floor(255*I.g/I.a),g.data[x+w+2]=Math.floor(255*I.b/I.a),g.data[x+w+3]=Math.floor(255*I.a)};if(s.clips)for(let x=0,w=0;x<f;++x,w+=4*l)for(let E=0,I=0;E<l;E++,I+=4){const M=E/(l-1),{start:O,end:F}=s.clips[x];v(w,I,O*(1-M)+F*M)}else for(let x=0,w=0;x<l;x++,w+=4)v(0,w,x/(l-1));return g}Tt("AlphaImage",ip),Tt("RGBAImage",Fo);const Vx="big-fb";class kz extends c{createBucket(o){return new sE(o)}constructor(o){super(o,Az),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Vx)&&this.heatmapFbos.delete(Vx)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let cE;var Pz={get paint(){return cE=cE||new _({"hillshade-illumination-direction":new Pt(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pt(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pt(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pt(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pt(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pt(Ie.paint_hillshade["hillshade-accent-color"])})}};class Iz extends c{constructor(o){super(o,Pz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Rz=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:Mz}=Rz;function hE(s,o,l=2){const f=o&&o.length,g=f?o[0]*l:s.length;let v=dE(s,0,g,l,!0);const x=[];if(!v||v.next===v.prev)return x;let w,E,I;if(f&&(v=function(M,O,F,q){const K=[];for(let Y=0,ae=O.length;Y<ae;Y++){const he=dE(M,O[Y]*q,Y<ae-1?O[Y+1]*q:M.length,q,!1);he===he.next&&(he.steiner=!0),K.push($z(he))}K.sort(Fz);for(let Y=0;Y<K.length;Y++)F=Bz(K[Y],F);return F}(s,o,v,l)),s.length>80*l){w=1/0,E=1/0;let M=-1/0,O=-1/0;for(let F=l;F<g;F+=l){const q=s[F],K=s[F+1];q<w&&(w=q),K<E&&(E=K),q>M&&(M=q),K>O&&(O=K)}I=Math.max(M-w,O-E),I=I!==0?32767/I:0}return op(v,x,l,w,E,I,0),x}function dE(s,o,l,f,g){let v;if(g===function(x,w,E,I){let M=0;for(let O=w,F=E-I;O<E;O+=I)M+=(x[F]-x[O])*(x[O+1]+x[F+1]),F=O;return M}(s,o,l,f)>0)for(let x=o;x<l;x+=f)v=mE(x/f|0,s[x],s[x+1],v);else for(let x=l-f;x>=o;x-=f)v=mE(x/f|0,s[x],s[x+1],v);return v&&ey(v,v.next)&&(ap(v),v=v.next),v}function tc(s,o){if(!s)return s;o||(o=s);let l,f=s;do if(l=!1,f.steiner||!ey(f,f.next)&&Ln(f.prev,f,f.next)!==0)f=f.next;else{if(ap(f),f=o=f.prev,f===f.next)break;l=!0}while(l||f!==o);return o}function op(s,o,l,f,g,v,x){if(!s)return;!x&&v&&function(E,I,M,O){let F=E;do F.z===0&&(F.z=qx(F.x,F.y,I,M,O)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==E);F.prevZ.nextZ=null,F.prevZ=null,function(q){let K,Y=1;do{let ae,he=q;q=null;let ke=null;for(K=0;he;){K++;let xe=he,Ce=0;for(let Je=0;Je<Y&&(Ce++,xe=xe.nextZ,xe);Je++);let De=Y;for(;Ce>0||De>0&&xe;)Ce!==0&&(De===0||!xe||he.z<=xe.z)?(ae=he,he=he.nextZ,Ce--):(ae=xe,xe=xe.nextZ,De--),ke?ke.nextZ=ae:q=ae,ae.prevZ=ke,ke=ae;he=xe}ke.nextZ=null,Y*=2}while(K>1)}(F)}(s,f,g,v);let w=s;for(;s.prev!==s.next;){const E=s.prev,I=s.next;if(v?Oz(s,f,g,v):Lz(s))o.push(E.i,s.i,I.i),ap(s),s=I.next,w=I.next;else if((s=I)===w){x?x===1?op(s=Dz(tc(s),o),o,l,f,g,v,2):x===2&&zz(s,o,l,f,g,v):op(tc(s),o,l,f,g,v,1);break}}}function Lz(s){const o=s.prev,l=s,f=s.next;if(Ln(o,l,f)>=0)return!1;const g=o.x,v=l.x,x=f.x,w=o.y,E=l.y,I=f.y,M=g<v?g<x?g:x:v<x?v:x,O=w<E?w<I?w:I:E<I?E:I,F=g>v?g>x?g:x:v>x?v:x,q=w>E?w>I?w:I:E>I?E:I;let K=f.next;for(;K!==o;){if(K.x>=M&&K.x<=F&&K.y>=O&&K.y<=q&&Bh(g,w,v,E,x,I,K.x,K.y)&&Ln(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function Oz(s,o,l,f){const g=s.prev,v=s,x=s.next;if(Ln(g,v,x)>=0)return!1;const w=g.x,E=v.x,I=x.x,M=g.y,O=v.y,F=x.y,q=w<E?w<I?w:I:E<I?E:I,K=M<O?M<F?M:F:O<F?O:F,Y=w>E?w>I?w:I:E>I?E:I,ae=M>O?M>F?M:F:O>F?O:F,he=qx(q,K,o,l,f),ke=qx(Y,ae,o,l,f);let xe=s.prevZ,Ce=s.nextZ;for(;xe&&xe.z>=he&&Ce&&Ce.z<=ke;){if(xe.x>=q&&xe.x<=Y&&xe.y>=K&&xe.y<=ae&&xe!==g&&xe!==x&&Bh(w,M,E,O,I,F,xe.x,xe.y)&&Ln(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Ce.x>=q&&Ce.x<=Y&&Ce.y>=K&&Ce.y<=ae&&Ce!==g&&Ce!==x&&Bh(w,M,E,O,I,F,Ce.x,Ce.y)&&Ln(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;xe&&xe.z>=he;){if(xe.x>=q&&xe.x<=Y&&xe.y>=K&&xe.y<=ae&&xe!==g&&xe!==x&&Bh(w,M,E,O,I,F,xe.x,xe.y)&&Ln(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Ce&&Ce.z<=ke;){if(Ce.x>=q&&Ce.x<=Y&&Ce.y>=K&&Ce.y<=ae&&Ce!==g&&Ce!==x&&Bh(w,M,E,O,I,F,Ce.x,Ce.y)&&Ln(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function Dz(s,o){let l=s;do{const f=l.prev,g=l.next.next;!ey(f,g)&&fE(f,l,l.next,g)&&sp(f,g)&&sp(g,f)&&(o.push(f.i,l.i,g.i),ap(l),ap(l.next),l=s=g),l=l.next}while(l!==s);return tc(l)}function zz(s,o,l,f,g,v){let x=s;do{let w=x.next.next;for(;w!==x.prev;){if(x.i!==w.i&&jz(x,w)){let E=pE(x,w);return x=tc(x,x.next),E=tc(E,E.next),op(x,o,l,f,g,v,0),void op(E,o,l,f,g,v,0)}w=w.next}x=x.next}while(x!==s)}function Fz(s,o){return s.x-o.x}function Bz(s,o){const l=function(g,v){let x=v;const w=g.x,E=g.y;let I,M=-1/0;do{if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){const Y=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(Y<=w&&Y>M&&(M=Y,I=x.x<x.next.x?x:x.next,Y===w))return I}x=x.next}while(x!==v);if(!I)return null;const O=I,F=I.x,q=I.y;let K=1/0;x=I;do{if(w>=x.x&&x.x>=F&&w!==x.x&&Bh(E<q?w:M,E,F,q,E<q?M:w,E,x.x,x.y)){const Y=Math.abs(E-x.y)/(w-x.x);sp(x,g)&&(Y<K||Y===K&&(x.x>I.x||x.x===I.x&&Nz(I,x)))&&(I=x,K=Y)}x=x.next}while(x!==O);return I}(s,o);if(!l)return o;const f=pE(l,s);return tc(f,f.next),tc(l,l.next)}function Nz(s,o){return Ln(s.prev,s,o.prev)<0&&Ln(o.next,s,s.next)<0}function qx(s,o,l,f,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function $z(s){let o=s,l=s;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==s);return l}function Bh(s,o,l,f,g,v,x,w){return(g-x)*(o-w)>=(s-x)*(v-w)&&(s-x)*(f-w)>=(l-x)*(o-w)&&(l-x)*(v-w)>=(g-x)*(f-w)}function jz(s,o){return s.next.i!==o.i&&s.prev.i!==o.i&&!function(l,f){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==f.i&&g.next.i!==f.i&&fE(g,g.next,l,f))return!0;g=g.next}while(g!==l);return!1}(s,o)&&(sp(s,o)&&sp(o,s)&&function(l,f){let g=l,v=!1;const x=(l.x+f.x)/2,w=(l.y+f.y)/2;do g.y>w!=g.next.y>w&&g.next.y!==g.y&&x<(g.next.x-g.x)*(w-g.y)/(g.next.y-g.y)+g.x&&(v=!v),g=g.next;while(g!==l);return v}(s,o)&&(Ln(s.prev,s,o.prev)||Ln(s,o.prev,o))||ey(s,o)&&Ln(s.prev,s,s.next)>0&&Ln(o.prev,o,o.next)>0)}function Ln(s,o,l){return(o.y-s.y)*(l.x-o.x)-(o.x-s.x)*(l.y-o.y)}function ey(s,o){return s.x===o.x&&s.y===o.y}function fE(s,o,l,f){const g=ry(Ln(s,o,l)),v=ry(Ln(s,o,f)),x=ry(Ln(l,f,s)),w=ry(Ln(l,f,o));return g!==v&&x!==w||!(g!==0||!ty(s,l,o))||!(v!==0||!ty(s,f,o))||!(x!==0||!ty(l,s,f))||!(w!==0||!ty(l,o,f))}function ty(s,o,l){return o.x<=Math.max(s.x,l.x)&&o.x>=Math.min(s.x,l.x)&&o.y<=Math.max(s.y,l.y)&&o.y>=Math.min(s.y,l.y)}function ry(s){return s>0?1:s<0?-1:0}function sp(s,o){return Ln(s.prev,s,s.next)<0?Ln(s,o,s.next)>=0&&Ln(s,s.prev,o)>=0:Ln(s,o,s.prev)<0||Ln(s,s.next,o)<0}function pE(s,o){const l=Hx(s.i,s.x,s.y),f=Hx(o.i,o.x,o.y),g=s.next,v=o.prev;return s.next=o,o.prev=s,l.next=g,g.prev=l,f.next=l,l.prev=f,v.next=f,f.prev=v,f}function mE(s,o,l,f){const g=Hx(s,o,l);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function ap(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Hx(s,o,l){return{i:s,x:o,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Wx(s,o,l){const f=l.patternDependencies;let g=!1;for(const v of o){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(g=!0);const w=x.constantOr(null);w&&(g=!0,f[w.to]=!0,f[w.from]=!0)}return g}function Gx(s,o,l,f,g){const v=g.patternDependencies;for(const x of o){const w=x.paint.get(`${s}-pattern`).value;if(w.kind!=="constant"){let E=w.evaluate({zoom:f-1},l,{},g.availableImages),I=w.evaluate({zoom:f},l,{},g.availableImages),M=w.evaluate({zoom:f+1},l,{},g.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,M=M&&M.name?M.name:M,v[E]=!0,v[I]=!0,v[M]=!0,l.patterns[x.id]={min:E,mid:I,max:M}}}return l}class Zx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hs,this.indexArray=new zo,this.indexArray2=new ni,this.programConfigurations=new Ju(o.layers,o.zoom),this.segments=new xr,this.segments2=new xr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,f){this.hasPattern=Wx("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),v=!g.isConstant(),x=[];for(const{feature:w,id:E,index:I,sourceLayerIndex:M}of o){const O=this.layers[0]._featureFilter.needGeometry,F=ec(w,O);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),F,f))continue;const q=v?g.evaluate(F,{},f,l.availableImages):void 0,K={id:E,properties:w.properties,type:w.type,sourceLayerIndex:M,index:I,geometry:O?F.geometry:Qu(w),patterns:{},sortKey:q};x.push(K)}v&&x.sort((w,E)=>w.sortKey-E.sortKey);for(const w of x){const{geometry:E,index:I,sourceLayerIndex:M}=w;if(this.hasPattern){const O=Gx("fill",this.layers,w,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(w,E,I,f,{});l.featureIndex.insert(o[I].feature,E,I,M,this.index)}}update(o,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,f)}addFeatures(o,l,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Mz),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,l,f,g,v){for(const x of lh(l,500)){let w=0;for(const q of x)w+=q.length;const E=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),I=E.vertexLength,M=[],O=[];for(const q of x){if(q.length===0)continue;q!==x[0]&&O.push(M.length/2);const K=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),Y=K.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack(Y+q.length-1,Y),M.push(q[0].x),M.push(q[0].y);for(let ae=1;ae<q.length;ae++)this.layoutVertexArray.emplaceBack(q[ae].x,q[ae].y),this.indexArray2.emplaceBack(Y+ae-1,Y+ae),M.push(q[ae].x),M.push(q[ae].y);K.vertexLength+=q.length,K.primitiveLength+=q.length}const F=hE(M,O);for(let q=0;q<F.length;q+=3)this.indexArray.emplaceBack(I+F[q],I+F[q+1],I+F[q+2]);E.vertexLength+=w,E.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,v,g)}}let gE,yE;Tt("FillBucket",Zx,{omit:["layers","patternFeatures"]});var Uz={get paint(){return yE=yE||new _({"fill-antialias":new Pt(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Ht(Ie.paint_fill["fill-opacity"]),"fill-color":new Ht(Ie.paint_fill["fill-color"]),"fill-outline-color":new Ht(Ie.paint_fill["fill-outline-color"]),"fill-translate":new Pt(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new Pt(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new kh(Ie.paint_fill["fill-pattern"])})},get layout(){return gE=gE||new _({"fill-sort-key":new Ht(Ie.layout_fill["fill-sort-key"])})}};class Vz extends c{constructor(o){super(o,Uz)}recalculate(o,l){super.recalculate(o,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Zx(o)}queryRadius(){return Yg(this.paint.get("fill-translate"))}queryIntersectsFeature(o,l,f,g,v,x,w){return QT(Jg(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),g)}isTileClipped(){return!0}}const qz=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Hz=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Wz}=qz;var Wl={},Gz=T,_E=Nh;function Nh(s,o,l,f,g){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=f,this._values=g,s.readFields(Zz,this,o)}function Zz(s,o,l){s==1?o.id=l.readVarint():s==2?function(f,g){for(var v=f.readVarint()+f.pos;f.pos<v;){var x=g._keys[f.readVarint()],w=g._values[f.readVarint()];g.properties[x]=w}}(l,o):s==3?o.type=l.readVarint():s==4&&(o._geometry=l.pos)}function Kz(s){for(var o,l,f=0,g=0,v=s.length,x=v-1;g<v;x=g++)f+=((l=s[x]).x-(o=s[g]).x)*(o.y+l.y);return f}Nh.types=["Unknown","Point","LineString","Polygon"],Nh.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var o,l=s.readVarint()+s.pos,f=1,g=0,v=0,x=0,w=[];s.pos<l;){if(g<=0){var E=s.readVarint();f=7&E,g=E>>3}if(g--,f===1||f===2)v+=s.readSVarint(),x+=s.readSVarint(),f===1&&(o&&w.push(o),o=[]),o.push(new Gz(v,x));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&w.push(o),w},Nh.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var o=s.readVarint()+s.pos,l=1,f=0,g=0,v=0,x=1/0,w=-1/0,E=1/0,I=-1/0;s.pos<o;){if(f<=0){var M=s.readVarint();l=7&M,f=M>>3}if(f--,l===1||l===2)(g+=s.readSVarint())<x&&(x=g),g>w&&(w=g),(v+=s.readSVarint())<E&&(E=v),v>I&&(I=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,E,w,I]},Nh.prototype.toGeoJSON=function(s,o,l){var f,g,v=this.extent*Math.pow(2,l),x=this.extent*s,w=this.extent*o,E=this.loadGeometry(),I=Nh.types[this.type];function M(q){for(var K=0;K<q.length;K++){var Y=q[K];q[K]=[360*(Y.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(f=0;f<E.length;f++)O[f]=E[f][0];M(E=O);break;case 2:for(f=0;f<E.length;f++)M(E[f]);break;case 3:for(E=function(q){var K=q.length;if(K<=1)return[q];for(var Y,ae,he=[],ke=0;ke<K;ke++){var xe=Kz(q[ke]);xe!==0&&(ae===void 0&&(ae=xe<0),ae===xe<0?(Y&&he.push(Y),Y=[q[ke]]):Y.push(q[ke]))}return Y&&he.push(Y),he}(E),f=0;f<E.length;f++)for(g=0;g<E[f].length;g++)M(E[f][g])}E.length===1?E=E[0]:I="Multi"+I;var F={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&(F.id=this.id),F};var Xz=_E,vE=xE;function xE(s,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Yz,this,o),this.length=this._features.length}function Yz(s,o,l){s===15?o.version=l.readVarint():s===1?o.name=l.readString():s===5?o.extent=l.readVarint():s===2?o._features.push(l.pos):s===3?o._keys.push(l.readString()):s===4&&o._values.push(function(f){for(var g=null,v=f.readVarint()+f.pos;f.pos<v;){var x=f.readVarint()>>3;g=x===1?f.readString():x===2?f.readFloat():x===3?f.readDouble():x===4?f.readVarint64():x===5?f.readVarint():x===6?f.readSVarint():x===7?f.readBoolean():null}return g}(l))}xE.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var o=this._pbf.readVarint()+this._pbf.pos;return new Xz(this._pbf,o,this.extent,this._keys,this._values)};var Jz=vE;function Qz(s,o,l){if(s===3){var f=new Jz(l,l.readVarint()+l.pos);f.length&&(o[f.name]=f)}}Wl.VectorTile=function(s,o){this.layers=s.readFields(Qz,{},o)},Wl.VectorTileFeature=_E,Wl.VectorTileLayer=vE;const e3=Wl.VectorTileFeature.types,Kx=Math.pow(2,13);function lp(s,o,l,f,g,v,x,w){s.emplaceBack(o,l,2*Math.floor(f*Kx)+x,g*Kx*2,v*Kx*2,Math.round(w))}class Xx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new $l,this.centroidVertexArray=new ui,this.indexArray=new zo,this.programConfigurations=new Ju(o.layers,o.zoom),this.segments=new xr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,f){this.features=[],this.hasPattern=Wx("fill-extrusion",this.layers,l);for(const{feature:g,id:v,index:x,sourceLayerIndex:w}of o){const E=this.layers[0]._featureFilter.needGeometry,I=ec(g,E);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),I,f))continue;const M={id:v,sourceLayerIndex:w,index:x,geometry:E?I.geometry:Qu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Gx("fill-extrusion",this.layers,M,this.zoom,l)):this.addFeature(M,M.geometry,x,f,{}),l.featureIndex.insert(g,M.geometry,x,w,this.index,!0)}}addFeatures(o,l,f){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,l,f)}}update(o,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Wz),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Hz.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,l,f,g,v){for(const x of lh(l,500)){const w={x:0,y:0,vertexCount:0};let E=0;for(const K of x)E+=K.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const K of x){if(K.length===0||r3(K))continue;let Y=0;for(let ae=0;ae<K.length;ae++){const he=K[ae];if(ae>=1){const ke=K[ae-1];if(!t3(he,ke)){I.vertexLength+4>xr.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xe=he.sub(ke)._perp()._unit(),Ce=ke.dist(he);Y+Ce>32768&&(Y=0),lp(this.layoutVertexArray,he.x,he.y,xe.x,xe.y,0,0,Y),lp(this.layoutVertexArray,he.x,he.y,xe.x,xe.y,0,1,Y),w.x+=2*he.x,w.y+=2*he.y,w.vertexCount+=2,Y+=Ce,lp(this.layoutVertexArray,ke.x,ke.y,xe.x,xe.y,0,0,Y),lp(this.layoutVertexArray,ke.x,ke.y,xe.x,xe.y,0,1,Y),w.x+=2*ke.x,w.y+=2*ke.y,w.vertexCount+=2;const De=I.vertexLength;this.indexArray.emplaceBack(De,De+2,De+1),this.indexArray.emplaceBack(De+1,De+2,De+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>xr.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),e3[o.type]!=="Polygon")continue;const M=[],O=[],F=I.vertexLength;for(const K of x)if(K.length!==0){K!==x[0]&&O.push(M.length/2);for(let Y=0;Y<K.length;Y++){const ae=K[Y];lp(this.layoutVertexArray,ae.x,ae.y,0,0,1,1,0),w.x+=ae.x,w.y+=ae.y,w.vertexCount+=1,M.push(ae.x),M.push(ae.y)}}const q=hE(M,O);for(let K=0;K<q.length;K+=3)this.indexArray.emplaceBack(F+q[K],F+q[K+2],F+q[K+1]);I.primitiveLength+=q.length/3,I.vertexLength+=E;for(let K=0;K<w.vertexCount;K++){const Y=Math.floor(w.x/w.vertexCount),ae=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(Y,ae)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,v,g)}}function t3(s,o){return s.x===o.x&&(s.x<0||s.x>Nn)||s.y===o.y&&(s.y<0||s.y>Nn)}function r3(s){return s.every(o=>o.x<0)||s.every(o=>o.x>Nn)||s.every(o=>o.y<0)||s.every(o=>o.y>Nn)}let bE;Tt("FillExtrusionBucket",Xx,{omit:["layers","features"]});var n3={get paint(){return bE=bE||new _({"fill-extrusion-opacity":new Pt(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pt(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pt(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kh(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pt(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class i3 extends c{constructor(o){super(o,n3)}createBucket(o){return new Xx(o)}queryRadius(){return Yg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,l,f,g,v,x,w,E){const I=Jg(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),M=this.paint.get("fill-extrusion-height").evaluate(l,f),O=this.paint.get("fill-extrusion-base").evaluate(l,f),F=function(K,Y,ae,he){const ke=[];for(const xe of K){const Ce=[xe.x,xe.y,0,1];Qg(Ce,Ce,Y),ke.push(new P(Ce[0]/Ce[3],Ce[1]/Ce[3]))}return ke}(I,E),q=function(K,Y,ae,he){const ke=[],xe=[],Ce=he[8]*Y,De=he[9]*Y,Je=he[10]*Y,_t=he[11]*Y,jt=he[8]*ae,gt=he[9]*ae,dt=he[10]*ae,Mt=he[11]*ae;for(const At of K){const bt=[],je=[];for(const Ot of At){const Rt=Ot.x,Xt=Ot.y,Zr=he[0]*Rt+he[4]*Xt+he[12],qr=he[1]*Rt+he[5]*Xt+he[13],Kn=he[2]*Rt+he[6]*Xt+he[14],ds=he[3]*Rt+he[7]*Xt+he[15],di=Kn+Je,Xn=ds+_t,Bi=Zr+jt,Ni=qr+gt,$i=Kn+dt,Pn=ds+Mt,Yn=new P((Zr+Ce)/Xn,(qr+De)/Xn);Yn.z=di/Xn,bt.push(Yn);const Si=new P(Bi/Pn,Ni/Pn);Si.z=$i/Pn,je.push(Si)}ke.push(bt),xe.push(je)}return[ke,xe]}(g,O,M,E);return function(K,Y,ae){let he=1/0;QT(ae,Y)&&(he=wE(ae,Y[0]));for(let ke=0;ke<Y.length;ke++){const xe=Y[ke],Ce=K[ke];for(let De=0;De<xe.length-1;De++){const Je=xe[De],_t=[Je,xe[De+1],Ce[De+1],Ce[De],Je];JT(ae,_t)&&(he=Math.min(he,wE(ae,_t)))}}return he!==1/0&&he}(q[0],q[1],F)}}function up(s,o){return s.x*o.x+s.y*o.y}function wE(s,o){if(s.length===1){let l=0;const f=o[l++];let g;for(;!g||f.equals(g);)if(g=o[l++],!g)return 1/0;for(;l<o.length;l++){const v=o[l],x=s[0],w=g.sub(f),E=v.sub(f),I=x.sub(f),M=up(w,w),O=up(w,E),F=up(E,E),q=up(I,w),K=up(I,E),Y=M*F-O*O,ae=(F*q-O*K)/Y,he=(M*K-O*q)/Y,ke=f.z*(1-ae-he)+g.z*ae+v.z*he;if(isFinite(ke))return ke}return 1/0}{let l=1/0;for(const f of o)l=Math.min(l,f.z);return l}}const o3=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:s3}=o3,a3=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:l3}=a3,u3=Wl.VectorTileFeature.types,c3=Math.cos(Math.PI/180*37.5),SE=Math.pow(2,14)/.5;class Yx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Ih,this.layoutVertexArray2=new jl,this.indexArray=new zo,this.programConfigurations=new Ju(o.layers,o.zoom),this.segments=new xr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,f){this.hasPattern=Wx("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),v=!g.isConstant(),x=[];for(const{feature:w,id:E,index:I,sourceLayerIndex:M}of o){const O=this.layers[0]._featureFilter.needGeometry,F=ec(w,O);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),F,f))continue;const q=v?g.evaluate(F,{},f):void 0,K={id:E,properties:w.properties,type:w.type,sourceLayerIndex:M,index:I,geometry:O?F.geometry:Qu(w),patterns:{},sortKey:q};x.push(K)}v&&x.sort((w,E)=>w.sortKey-E.sortKey);for(const w of x){const{geometry:E,index:I,sourceLayerIndex:M}=w;if(this.hasPattern){const O=Gx("line",this.layers,w,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(w,E,I,f,{});l.featureIndex.insert(o[I].feature,E,I,M,this.index)}}update(o,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,f)}addFeatures(o,l,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,l3)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,s3),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,f,g,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(o,{}),E=x.get("line-cap"),I=x.get("line-miter-limit"),M=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const O of l)this.addLine(O,o,w,E,I,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,v,g)}addLine(o,l,f,g,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<o.length-1;he++)this.totalDistance+=o[he].dist(o[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=u3[l.type]==="Polygon";let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let I=0;for(;I<E-1&&o[I].equals(o[I+1]);)I++;if(E<(w?3:2))return;f==="bevel"&&(v=1.05);const M=this.overscaling<=16?15*Nn/(512*this.overscaling):0,O=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let F,q,K,Y,ae;this.e1=this.e2=-1,w&&(F=o[E-2],ae=o[I].sub(F)._unit()._perp());for(let he=I;he<E;he++){if(K=he===E-1?w?o[I+1]:void 0:o[he+1],K&&o[he].equals(K))continue;ae&&(Y=ae),F&&(q=F),F=o[he],ae=K?K.sub(F)._unit()._perp():Y,Y=Y||ae;let ke=Y.add(ae);ke.x===0&&ke.y===0||ke._unit();const xe=Y.x*ae.x+Y.y*ae.y,Ce=ke.x*ae.x+ke.y*ae.y,De=Ce!==0?1/Ce:1/0,Je=2*Math.sqrt(2-2*Ce),_t=Ce<c3&&q&&K,jt=Y.x*ae.y-Y.y*ae.x>0;if(_t&&he>I){const Mt=F.dist(q);if(Mt>2*M){const At=F.sub(F.sub(q)._mult(M/Mt)._round());this.updateDistance(q,At),this.addCurrentVertex(At,Y,0,0,O),q=At}}const gt=q&&K;let dt=gt?f:w?"butt":g;if(gt&&dt==="round"&&(De<x?dt="miter":De<=2&&(dt="fakeround")),dt==="miter"&&De>v&&(dt="bevel"),dt==="bevel"&&(De>2&&(dt="flipbevel"),De<v&&(dt="miter")),q&&this.updateDistance(q,F),dt==="miter")ke._mult(De),this.addCurrentVertex(F,ke,0,0,O);else if(dt==="flipbevel"){if(De>100)ke=ae.mult(-1);else{const Mt=De*Y.add(ae).mag()/Y.sub(ae).mag();ke._perp()._mult(Mt*(jt?-1:1))}this.addCurrentVertex(F,ke,0,0,O),this.addCurrentVertex(F,ke.mult(-1),0,0,O)}else if(dt==="bevel"||dt==="fakeround"){const Mt=-Math.sqrt(De*De-1),At=jt?Mt:0,bt=jt?0:Mt;if(q&&this.addCurrentVertex(F,Y,At,bt,O),dt==="fakeround"){const je=Math.round(180*Je/Math.PI/20);for(let Ot=1;Ot<je;Ot++){let Rt=Ot/je;if(Rt!==.5){const Zr=Rt-.5;Rt+=Rt*Zr*(Rt-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Zr*Zr+(.848013+xe*(.215638*xe-1.06021)))}const Xt=ae.sub(Y)._mult(Rt)._add(Y)._unit()._mult(jt?-1:1);this.addHalfVertex(F,Xt.x,Xt.y,!1,jt,0,O)}}K&&this.addCurrentVertex(F,ae,-At,-bt,O)}else if(dt==="butt")this.addCurrentVertex(F,ke,0,0,O);else if(dt==="square"){const Mt=q?1:-1;this.addCurrentVertex(F,ke,Mt,Mt,O)}else dt==="round"&&(q&&(this.addCurrentVertex(F,Y,0,0,O),this.addCurrentVertex(F,Y,1,1,O,!0)),K&&(this.addCurrentVertex(F,ae,-1,-1,O,!0),this.addCurrentVertex(F,ae,0,0,O)));if(_t&&he<E-1){const Mt=F.dist(K);if(Mt>2*M){const At=F.add(K.sub(F)._mult(M/Mt)._round());this.updateDistance(F,At),this.addCurrentVertex(At,ae,0,0,O),F=At}}}}addCurrentVertex(o,l,f,g,v,x=!1){const w=l.y*g-l.x,E=-l.y-l.x*g;this.addHalfVertex(o,l.x+l.y*f,l.y-l.x*f,x,!1,f,v),this.addHalfVertex(o,w,E,x,!0,-g,v),this.distance>SE/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,l,f,g,v,x))}addHalfVertex({x:o,y:l},f,g,v,x,w,E){const I=.5*(this.lineClips?this.scaledDistance*(SE-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(w===0?0:w<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),x?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,l){this.distance+=o.dist(l),this.updateScaledDistance()}}let TE,EE;Tt("LineBucket",Yx,{omit:["layers","patternFeatures"]});var CE={get paint(){return EE=EE||new _({"line-opacity":new Ht(Ie.paint_line["line-opacity"]),"line-color":new Ht(Ie.paint_line["line-color"]),"line-translate":new Pt(Ie.paint_line["line-translate"]),"line-translate-anchor":new Pt(Ie.paint_line["line-translate-anchor"]),"line-width":new Ht(Ie.paint_line["line-width"]),"line-gap-width":new Ht(Ie.paint_line["line-gap-width"]),"line-offset":new Ht(Ie.paint_line["line-offset"]),"line-blur":new Ht(Ie.paint_line["line-blur"]),"line-dasharray":new Ph(Ie.paint_line["line-dasharray"]),"line-pattern":new kh(Ie.paint_line["line-pattern"]),"line-gradient":new Qf(Ie.paint_line["line-gradient"])})},get layout(){return TE=TE||new _({"line-cap":new Pt(Ie.layout_line["line-cap"]),"line-join":new Ht(Ie.layout_line["line-join"]),"line-miter-limit":new Pt(Ie.layout_line["line-miter-limit"]),"line-round-limit":new Pt(Ie.layout_line["line-round-limit"]),"line-sort-key":new Ht(Ie.layout_line["line-sort-key"])})}};class h3 extends Ht{possiblyEvaluate(o,l){return l=new Qr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(o,l)}evaluate(o,l,f,g){return l=ge({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(o,l,f,g)}}let ny;class d3 extends c{constructor(o){super(o,CE),this.gradientVersion=0,ny||(ny=new h3(CE.paint.properties["line-width"].specification),ny.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof bl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,l){super.recalculate(o,l),this.paint._values["line-floorwidth"]=ny.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Yx(o)}queryRadius(o){const l=o,f=AE(rp("line-width",this,l),rp("line-gap-width",this,l)),g=rp("line-offset",this,l);return f/2+Math.abs(g)+Yg(this.paint.get("line-translate"))}queryIntersectsFeature(o,l,f,g,v,x,w){const E=Jg(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),I=w/2*AE(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),M=this.paint.get("line-offset").evaluate(l,f);return M&&(g=function(O,F){const q=[];for(let K=0;K<O.length;K++){const Y=O[K],ae=[];for(let he=0;he<Y.length;he++){const ke=Y[he-1],xe=Y[he],Ce=Y[he+1],De=he===0?new P(0,0):xe.sub(ke)._unit()._perp(),Je=he===Y.length-1?new P(0,0):Ce.sub(xe)._unit()._perp(),_t=De._add(Je)._unit(),jt=_t.x*Je.x+_t.y*Je.y;jt!==0&&_t._mult(1/jt),ae.push(_t._mult(F)._add(xe))}q.push(ae)}return q}(g,M*w)),function(O,F,q){for(let K=0;K<F.length;K++){const Y=F[K];if(O.length>=3){for(let ae=0;ae<Y.length;ae++)if(zh(O,Y[ae]))return!0}if(bz(O,Y,q))return!0}return!1}(E,g,I)}isTileClipped(){return!0}}function AE(s,o){return o>0?o+2*s:s}const f3=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),p3=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const m3=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kE=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),g3=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function y3(s,o,l){return s.sections.forEach(f=>{f.text=function(g,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?g=g.toLocaleUpperCase():w==="lowercase"&&(g=g.toLocaleLowerCase()),Yi.applyArabicShaping&&(g=Yi.applyArabicShaping(g)),g}(f.text,o,l)}),s}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Hn=24,PE=Vr,IE=function(s,o,l,f,g){var v,x,w=8*g-f-1,E=(1<<w)-1,I=E>>1,M=-7,O=g-1,F=-1,q=s[o+O];for(O+=F,v=q&(1<<-M)-1,q>>=-M,M+=w;M>0;v=256*v+s[o+O],O+=F,M-=8);for(x=v&(1<<-M)-1,v>>=-M,M+=f;M>0;x=256*x+s[o+O],O+=F,M-=8);if(v===0)v=1-I;else{if(v===E)return x?NaN:1/0*(q?-1:1);x+=Math.pow(2,f),v-=I}return(q?-1:1)*x*Math.pow(2,v-f)},RE=function(s,o,l,f,g,v){var x,w,E,I=8*v-g-1,M=(1<<I)-1,O=M>>1,F=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=0,K=1,Y=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,x=M):(x=Math.floor(Math.log(o)/Math.LN2),o*(E=Math.pow(2,-x))<1&&(x--,E*=2),(o+=x+O>=1?F/E:F*Math.pow(2,1-O))*E>=2&&(x++,E/=2),x+O>=M?(w=0,x=M):x+O>=1?(w=(o*E-1)*Math.pow(2,g),x+=O):(w=o*Math.pow(2,O-1)*Math.pow(2,g),x=0));g>=8;s[l+q]=255&w,q+=K,w/=256,g-=8);for(x=x<<g|w,I+=g;I>0;s[l+q]=255&x,q+=K,x/=256,I-=8);s[l+q-K]|=128*Y};function Vr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var Jx=4294967296,ME=1/Jx,LE=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Za(s){return s.type===Vr.Bytes?s.readVarint()+s.pos:s.pos+1}function $h(s,o,l){return l?4294967296*o+(s>>>0):4294967296*(o>>>0)+(s>>>0)}function OE(s,o,l){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));l.realloc(f);for(var g=l.pos-1;g>=s;g--)l.buf[g+f]=l.buf[g]}function _3(s,o){for(var l=0;l<s.length;l++)o.writeVarint(s[l])}function v3(s,o){for(var l=0;l<s.length;l++)o.writeSVarint(s[l])}function x3(s,o){for(var l=0;l<s.length;l++)o.writeFloat(s[l])}function b3(s,o){for(var l=0;l<s.length;l++)o.writeDouble(s[l])}function w3(s,o){for(var l=0;l<s.length;l++)o.writeBoolean(s[l])}function S3(s,o){for(var l=0;l<s.length;l++)o.writeFixed32(s[l])}function T3(s,o){for(var l=0;l<s.length;l++)o.writeSFixed32(s[l])}function E3(s,o){for(var l=0;l<s.length;l++)o.writeFixed64(s[l])}function C3(s,o){for(var l=0;l<s.length;l++)o.writeSFixed64(s[l])}function iy(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+16777216*s[o+3]}function jh(s,o,l){s[l]=o,s[l+1]=o>>>8,s[l+2]=o>>>16,s[l+3]=o>>>24}function DE(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+(s[o+3]<<24)}Vr.prototype={destroy:function(){this.buf=null},readFields:function(s,o,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),g=f>>3,v=this.pos;this.type=7&f,s(g,o,this),this.pos===v&&this.skip(f)}return o},readMessage:function(s,o){return this.readFields(s,o,this.readVarint()+this.pos)},readFixed32:function(){var s=iy(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=DE(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=iy(this.buf,this.pos)+iy(this.buf,this.pos+4)*Jx;return this.pos+=8,s},readSFixed64:function(){var s=iy(this.buf,this.pos)+DE(this.buf,this.pos+4)*Jx;return this.pos+=8,s},readFloat:function(){var s=IE(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=IE(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var o,l,f=this.buf;return o=127&(l=f[this.pos++]),l<128?o:(o|=(127&(l=f[this.pos++]))<<7,l<128?o:(o|=(127&(l=f[this.pos++]))<<14,l<128?o:(o|=(127&(l=f[this.pos++]))<<21,l<128?o:function(g,v,x){var w,E,I=x.buf;if(w=(112&(E=I[x.pos++]))>>4,E<128||(w|=(127&(E=I[x.pos++]))<<3,E<128)||(w|=(127&(E=I[x.pos++]))<<10,E<128)||(w|=(127&(E=I[x.pos++]))<<17,E<128)||(w|=(127&(E=I[x.pos++]))<<24,E<128)||(w|=(1&(E=I[x.pos++]))<<31,E<128))return $h(g,w,v);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(l=f[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,o=this.pos;return this.pos=s,s-o>=12&&LE?function(l,f,g){return LE.decode(l.subarray(f,g))}(this.buf,o,s):function(l,f,g){for(var v="",x=f;x<g;){var w,E,I,M=l[x],O=null,F=M>239?4:M>223?3:M>191?2:1;if(x+F>g)break;F===1?M<128&&(O=M):F===2?(192&(w=l[x+1]))==128&&(O=(31&M)<<6|63&w)<=127&&(O=null):F===3?(E=l[x+2],(192&(w=l[x+1]))==128&&(192&E)==128&&((O=(15&M)<<12|(63&w)<<6|63&E)<=2047||O>=55296&&O<=57343)&&(O=null)):F===4&&(E=l[x+2],I=l[x+3],(192&(w=l[x+1]))==128&&(192&E)==128&&(192&I)==128&&((O=(15&M)<<18|(63&w)<<12|(63&E)<<6|63&I)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,F=1):O>65535&&(O-=65536,v+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),v+=String.fromCharCode(O),x+=F}return v}(this.buf,o,s)},readBytes:function(){var s=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,s);return this.pos=s,o},readPackedVarint:function(s,o){if(this.type!==Vr.Bytes)return s.push(this.readVarint(o));var l=Za(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(o));return s},readPackedSVarint:function(s){if(this.type!==Vr.Bytes)return s.push(this.readSVarint());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Vr.Bytes)return s.push(this.readBoolean());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Vr.Bytes)return s.push(this.readFloat());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Vr.Bytes)return s.push(this.readDouble());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Vr.Bytes)return s.push(this.readFixed32());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Vr.Bytes)return s.push(this.readSFixed32());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Vr.Bytes)return s.push(this.readFixed64());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Vr.Bytes)return s.push(this.readSFixed64());var o=Za(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed64());return s},skip:function(s){var o=7&s;if(o===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(o===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Vr.Fixed32)this.pos+=4;else{if(o!==Vr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(s,o){this.writeVarint(s<<3|o)},realloc:function(s){for(var o=this.length||16;o<this.pos+s;)o*=2;if(o!==this.length){var l=new Uint8Array(o);l.set(this.buf),this.buf=l,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),jh(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),jh(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),jh(this.buf,-1&s,this.pos),jh(this.buf,Math.floor(s*ME),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),jh(this.buf,-1&s,this.pos),jh(this.buf,Math.floor(s*ME),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(o,l){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(f,0,l),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(g,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var o=this.pos;this.pos=function(f,g,v){for(var x,w,E=0;E<g.length;E++){if((x=g.charCodeAt(E))>55295&&x<57344){if(!w){x>56319||E+1===g.length?(f[v++]=239,f[v++]=191,f[v++]=189):w=x;continue}if(x<56320){f[v++]=239,f[v++]=191,f[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(f[v++]=239,f[v++]=191,f[v++]=189,w=null);x<128?f[v++]=x:(x<2048?f[v++]=x>>6|192:(x<65536?f[v++]=x>>12|224:(f[v++]=x>>18|240,f[v++]=x>>12&63|128),f[v++]=x>>6&63|128),f[v++]=63&x|128)}return v}(this.buf,s,this.pos);var l=this.pos-o;l>=128&&OE(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),RE(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),RE(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var o=s.length;this.writeVarint(o),this.realloc(o);for(var l=0;l<o;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,o){this.pos++;var l=this.pos;s(o,this);var f=this.pos-l;f>=128&&OE(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(s,o,l){this.writeTag(s,Vr.Bytes),this.writeRawMessage(o,l)},writePackedVarint:function(s,o){o.length&&this.writeMessage(s,_3,o)},writePackedSVarint:function(s,o){o.length&&this.writeMessage(s,v3,o)},writePackedBoolean:function(s,o){o.length&&this.writeMessage(s,w3,o)},writePackedFloat:function(s,o){o.length&&this.writeMessage(s,x3,o)},writePackedDouble:function(s,o){o.length&&this.writeMessage(s,b3,o)},writePackedFixed32:function(s,o){o.length&&this.writeMessage(s,S3,o)},writePackedSFixed32:function(s,o){o.length&&this.writeMessage(s,T3,o)},writePackedFixed64:function(s,o){o.length&&this.writeMessage(s,E3,o)},writePackedSFixed64:function(s,o){o.length&&this.writeMessage(s,C3,o)},writeBytesField:function(s,o){this.writeTag(s,Vr.Bytes),this.writeBytes(o)},writeFixed32Field:function(s,o){this.writeTag(s,Vr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(s,o){this.writeTag(s,Vr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(s,o){this.writeTag(s,Vr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(s,o){this.writeTag(s,Vr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(s,o){this.writeTag(s,Vr.Varint),this.writeVarint(o)},writeSVarintField:function(s,o){this.writeTag(s,Vr.Varint),this.writeSVarint(o)},writeStringField:function(s,o){this.writeTag(s,Vr.Bytes),this.writeString(o)},writeFloatField:function(s,o){this.writeTag(s,Vr.Fixed32),this.writeFloat(o)},writeDoubleField:function(s,o){this.writeTag(s,Vr.Fixed64),this.writeDouble(o)},writeBooleanField:function(s,o){this.writeVarintField(s,!!o)}};var Qx=b(PE);const e1=3;function A3(s,o,l){s===1&&l.readMessage(k3,o)}function k3(s,o,l){if(s===3){const{id:f,bitmap:g,width:v,height:x,left:w,top:E,advance:I}=l.readMessage(P3,{});o.push({id:f,bitmap:new ip({width:v+2*e1,height:x+2*e1},g),metrics:{width:v,height:x,left:w,top:E,advance:I}})}}function P3(s,o,l){s===1?o.id=l.readVarint():s===2?o.bitmap=l.readBytes():s===3?o.width=l.readVarint():s===4?o.height=l.readVarint():s===5?o.left=l.readSVarint():s===6?o.top=l.readSVarint():s===7&&(o.advance=l.readVarint())}const zE=e1;function FE(s){let o=0,l=0;for(const x of s)o+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,w)=>w.h-x.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let g=0,v=0;for(const x of s)for(let w=f.length-1;w>=0;w--){const E=f[w];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const I=f.pop();w<f.length&&(f[w]=I)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(f.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:v,fill:o/(g*v)||0}}const Qi=1;class t1{constructor(o,{pixelRatio:l,version:f,stretchX:g,stretchY:v,content:x,textFitWidth:w,textFitHeight:E}){this.paddedRect=o,this.pixelRatio=l,this.stretchX=g,this.stretchY=v,this.content=x,this.version=f,this.textFitWidth=w,this.textFitHeight=E}get tl(){return[this.paddedRect.x+Qi,this.paddedRect.y+Qi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Qi,this.paddedRect.y+this.paddedRect.h-Qi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Qi)/this.pixelRatio,(this.paddedRect.h-2*Qi)/this.pixelRatio]}}class BE{constructor(o,l){const f={},g={};this.haveRenderCallbacks=[];const v=[];this.addImages(o,f,v),this.addImages(l,g,v);const{w:x,h:w}=FE(v),E=new Fo({width:x||1,height:w||1});for(const I in o){const M=o[I],O=f[I].paddedRect;Fo.copy(M.data,E,{x:0,y:0},{x:O.x+Qi,y:O.y+Qi},M.data)}for(const I in l){const M=l[I],O=g[I].paddedRect,F=O.x+Qi,q=O.y+Qi,K=M.data.width,Y=M.data.height;Fo.copy(M.data,E,{x:0,y:0},{x:F,y:q},M.data),Fo.copy(M.data,E,{x:0,y:Y-1},{x:F,y:q-1},{width:K,height:1}),Fo.copy(M.data,E,{x:0,y:0},{x:F,y:q+Y},{width:K,height:1}),Fo.copy(M.data,E,{x:K-1,y:0},{x:F-1,y:q},{width:1,height:Y}),Fo.copy(M.data,E,{x:0,y:0},{x:F+K,y:q},{width:1,height:Y})}this.image=E,this.iconPositions=f,this.patternPositions=g}addImages(o,l,f){for(const g in o){const v=o[g],x={x:0,y:0,w:v.data.width+2*Qi,h:v.data.height+2*Qi};f.push(x),l[g]=new t1(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,l){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),l)}patchUpdatedImage(o,l,f){if(!o||!l||o.version===l.version)return;o.version=l.version;const[g,v]=o.tl;f.update(l.data,void 0,{x:g,y:v})}}var Gl;Tt("ImagePosition",t1),Tt("ImageAtlas",BE),d.ah=void 0,(Gl=d.ah||(d.ah={}))[Gl.none=0]="none",Gl[Gl.horizontal=1]="horizontal",Gl[Gl.vertical=2]="vertical",Gl[Gl.horizontalOnly=3]="horizontalOnly";const hp=-17;class dp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,l){const f=new dp;return f.scale=o||1,f.fontStack=l,f}static forImage(o){const l=new dp;return l.imageName=o,l}}class Uh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l){const f=new Uh;for(let g=0;g<o.sections.length;g++){const v=o.sections[g];v.image?f.addImageSection(v):f.addTextSection(v,l)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let l="";for(let f=0;f<o.length;f++){const g=o.charCodeAt(f+1)||null,v=o.charCodeAt(f-1)||null;l+=g&&qg(g)&&!cp[o[f+1]]||v&&qg(v)&&!cp[o[f-1]]||!cp[o[f]]?o[f]:cp[o[f]]}return l}(this.text)}trim(){let o=0;for(let f=0;f<this.text.length&&sy[this.text.charCodeAt(f)];f++)o++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&sy[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const f=new Uh;return f.text=this.text.substring(o,l),f.sectionIndex=this.sectionIndex.slice(o,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}addTextSection(o,l){this.text+=o.text,this.sections.push(dp.forText(o.scale,o.fontStack||l));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const l=o.image?o.image.name:"";if(l.length===0)return void Fe("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(dp.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function oy(s,o,l,f,g,v,x,w,E,I,M,O,F,q,K){const Y=Uh.fromFeature(s,g);let ae;O===d.ah.vertical&&Y.verticalizePunctuation();const{processBidirectionalText:he,processStyledBidirectionalText:ke}=Yi;if(he&&Y.sections.length===1){ae=[];const De=he(Y.toString(),r1(Y,I,v,o,f,q));for(const Je of De){const _t=new Uh;_t.text=Je,_t.sections=Y.sections;for(let jt=0;jt<Je.length;jt++)_t.sectionIndex.push(0);ae.push(_t)}}else if(ke){ae=[];const De=ke(Y.text,Y.sectionIndex,r1(Y,I,v,o,f,q));for(const Je of De){const _t=new Uh;_t.text=Je[0],_t.sectionIndex=Je[1],_t.sections=Y.sections,ae.push(_t)}}else ae=function(De,Je){const _t=[],jt=De.text;let gt=0;for(const dt of Je)_t.push(De.substring(gt,dt)),gt=dt;return gt<jt.length&&_t.push(De.substring(gt,jt.length)),_t}(Y,r1(Y,I,v,o,f,q));const xe=[],Ce={positionedLines:xe,text:Y.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(De,Je,_t,jt,gt,dt,Mt,At,bt,je,Ot,Rt){let Xt=0,Zr=hp,qr=0,Kn=0;const ds=At==="right"?1:At==="left"?0:.5;let di=0;for(const Pn of gt){Pn.trim();const Yn=Pn.getMaxScale(),Si=(Yn-1)*Hn,fi={positionedGlyphs:[],lineOffset:0};De.positionedLines[di]=fi;const ji=fi.positionedGlyphs;let pi=0;if(!Pn.length()){Zr+=dt,++di;continue}for(let eo=0;eo<Pn.length();eo++){const Pr=Pn.getSection(eo),Xr=Pn.getSectionIndex(eo),nn=Pn.getCharCode(eo);let yo=0,xn=null,Wh=null,la=null,ua=Hn;const fs=!(bt===d.ah.horizontal||!Ot&&!Yf(nn)||Ot&&(sy[nn]||(Xn=nn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Xn)))));if(Pr.imageName){const $o=jt[Pr.imageName];if(!$o)continue;la=Pr.imageName,De.iconsInText=De.iconsInText||!0,Wh=$o.paddedRect;const ii=$o.displaySize;Pr.scale=Pr.scale*Hn/Rt,xn={width:ii[0],height:ii[1],left:Qi,top:-zE,advance:fs?ii[1]:ii[0]},yo=Si+(Hn-ii[1]*Pr.scale),ua=xn.advance;const Ka=fs?ii[0]*Pr.scale-Hn*Yn:ii[1]*Pr.scale-Hn*Yn;Ka>0&&Ka>pi&&(pi=Ka)}else{const $o=_t[Pr.fontStack],ii=$o&&$o[nn];if(ii&&ii.rect)Wh=ii.rect,xn=ii.metrics;else{const Ka=Je[Pr.fontStack],_p=Ka&&Ka[nn];if(!_p)continue;xn=_p.metrics}yo=(Yn-Pr.scale)*Hn}fs?(De.verticalizable=!0,ji.push({glyph:nn,imageName:la,x:Xt,y:Zr+yo,vertical:fs,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:Xr,metrics:xn,rect:Wh}),Xt+=ua*Pr.scale+je):(ji.push({glyph:nn,imageName:la,x:Xt,y:Zr+yo,vertical:fs,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:Xr,metrics:xn,rect:Wh}),Xt+=xn.advance*Pr.scale+je)}ji.length!==0&&(qr=Math.max(Xt-je,qr),L3(ji,0,ji.length-1,ds,pi)),Xt=0;const No=dt*Yn+pi;fi.lineOffset=Math.max(pi,Si),Zr+=No,Kn=Math.max(No,Kn),++di}var Xn;const Bi=Zr-hp,{horizontalAlign:Ni,verticalAlign:$i}=n1(Mt);(function(Pn,Yn,Si,fi,ji,pi,No,eo,Pr){const Xr=(Yn-Si)*ji;let nn=0;nn=pi!==No?-eo*fi-hp:(-fi*Pr+.5)*No;for(const yo of Pn)for(const xn of yo.positionedGlyphs)xn.x+=Xr,xn.y+=nn})(De.positionedLines,ds,Ni,$i,qr,Kn,dt,Bi,gt.length),De.top+=-$i*Bi,De.bottom=De.top+Bi,De.left+=-Ni*qr,De.right=De.left+qr}(Ce,o,l,f,ae,x,w,E,O,I,F,K),!function(De){for(const Je of De)if(Je.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Ce}const sy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},I3={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},R3={40:!0};function NE(s,o,l,f,g,v){if(o.imageName){const x=f[o.imageName];return x?x.displaySize[0]*o.scale*Hn/v+g:0}{const x=l[o.fontStack],w=x&&x[s];return w?w.metrics.advance*o.scale+g:0}}function $E(s,o,l,f){const g=Math.pow(s-o,2);return f?s<o?g/2:2*g:g+Math.abs(l)*l}function M3(s,o,l){let f=0;return s===10&&(f-=1e4),l&&(f+=150),s!==40&&s!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function jE(s,o,l,f,g,v){let x=null,w=$E(o,l,g,v);for(const E of f){const I=$E(o-E.x,l,g,v)+E.badness;I<=w&&(x=E,w=I)}return{index:s,x:o,priorBreak:x,badness:w}}function UE(s){return s?UE(s.priorBreak).concat(s.index):[]}function r1(s,o,l,f,g,v){if(!s)return[];const x=[],w=function(O,F,q,K,Y,ae){let he=0;for(let ke=0;ke<O.length();ke++){const xe=O.getSection(ke);he+=NE(O.getCharCode(ke),xe,K,Y,F,ae)}return he/Math.max(1,Math.ceil(he/q))}(s,o,l,f,g,v),E=s.text.indexOf("​")>=0;let I=0;for(let O=0;O<s.length();O++){const F=s.getSection(O),q=s.getCharCode(O);if(sy[q]||(I+=NE(q,F,f,g,o,v)),O<s.length()-1){const K=!((M=q)<11904)&&(!!vr["CJK Compatibility Forms"](M)||!!vr["CJK Compatibility"](M)||!!vr["CJK Strokes"](M)||!!vr["CJK Symbols and Punctuation"](M)||!!vr["Enclosed CJK Letters and Months"](M)||!!vr["Halfwidth and Fullwidth Forms"](M)||!!vr["Ideographic Description Characters"](M)||!!vr["Vertical Forms"](M)||Vg.test(String.fromCodePoint(M)));(I3[q]||K||F.imageName||O!==s.length()-2&&R3[s.getCharCode(O+1)])&&x.push(jE(O+1,I,w,x,M3(q,s.getCharCode(O+1),K&&E),!1))}}var M;return UE(jE(s.length(),I,w,x,0,!0))}function n1(s){let o=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function L3(s,o,l,f,g){if(!f&&!g)return;const v=s[l],x=(s[l].x+v.metrics.advance*v.scale)*f;for(let w=o;w<=l;w++)s[w].x-=x,s[w].y+=g}function O3(s,o,l){const{horizontalAlign:f,verticalAlign:g}=n1(l),v=o[0]-s.displaySize[0]*f,x=o[1]-s.displaySize[1]*g;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function VE(s){var o,l;let f=s.left,g=s.top,v=s.right-f,x=s.bottom-g;const w=(o=s.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",E=(l=s.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",I=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(E==="proportional"){if(w==="stretchOnly"&&v/x<I||w==="proportional"){const M=Math.ceil(x*I);f*=M/v,v=M}}else if(w==="proportional"&&E==="stretchOnly"&&I!==0&&v/x>I){const M=Math.ceil(v/I);g*=M/x,x=M}return{x1:f,y1:g,x2:f+v,y2:g+x}}function qE(s,o,l,f,g,v){const x=s.image;let w;if(x.content){const ae=x.content,he=x.pixelRatio||1;w=[ae[0]/he,ae[1]/he,x.displaySize[0]-ae[2]/he,x.displaySize[1]-ae[3]/he]}const E=o.left*v,I=o.right*v;let M,O,F,q;l==="width"||l==="both"?(q=g[0]+E-f[3],O=g[0]+I+f[1]):(q=g[0]+(E+I-x.displaySize[0])/2,O=q+x.displaySize[0]);const K=o.top*v,Y=o.bottom*v;return l==="height"||l==="both"?(M=g[1]+K-f[0],F=g[1]+Y+f[2]):(M=g[1]+(K+Y-x.displaySize[1])/2,F=M+x.displaySize[1]),{image:x,top:M,right:O,bottom:F,left:q,collisionPadding:w}}const fp=255,aa=128,Zl=fp*aa;function HE(s,o){const{expression:l}=o;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Qr(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=l;let v=0;for(;v<f.length&&f[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<f.length&&f[x]<s+1;)x++;x=Math.min(f.length-1,x);const w=f[v],E=f[x];return l.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:w,maxZoom:E,minSize:l.evaluate(new Qr(w)),maxSize:l.evaluate(new Qr(E)),interpolationType:g}}}function i1(s,o,l){let f="never";const g=s.get(o);return g?f=g:s.get(l)&&(f="always"),f}const D3=Wl.VectorTileFeature.types,z3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ay(s,o,l,f,g,v,x,w,E,I,M,O,F){const q=w?Math.min(Zl,Math.round(w[0])):0,K=w?Math.min(Zl,Math.round(w[1])):0;s.emplaceBack(o,l,Math.round(32*f),Math.round(32*g),v,x,(q<<1)+(E?1:0),K,16*I,16*M,256*O,256*F)}function o1(s,o,l){s.emplaceBack(o.x,o.y,l),s.emplaceBack(o.x,o.y,l),s.emplaceBack(o.x,o.y,l),s.emplaceBack(o.x,o.y,l)}function F3(s){for(const o of s.sections)if(Lx(o.text))return!0;return!1}class s1{constructor(o){this.layoutVertexArray=new Rh,this.indexArray=new zo,this.programConfigurations=o,this.segments=new xr,this.dynamicLayoutVertexArray=new ep,this.opacityVertexArray=new mo,this.hasVisibleVertices=!1,this.placedSymbolArray=new en}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,l,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,f3.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,p3.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,z3,!0),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tt("SymbolBuffers",s1);class a1{constructor(o,l,f){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new f,this.segments=new xr,this.collisionVertexArray=new oa}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,m3.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tt("CollisionBuffers",a1);class Vh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(x=>x.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$x([]),this.placementViewportMatrix=$x([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=HE(this.zoom,l["text-size"]),this.iconSizeData=HE(this.zoom,l["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),v=f.get("symbol-z-order");this.canOverlap=i1(f,"text-overlap","text-allow-overlap")!=="never"||i1(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=o.sourceID}createArrays(){this.text=new s1(new Ju(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new s1(new Ju(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new tn,this.lineVertexArray=new li,this.symbolInstances=new yr,this.textAnchorOffsets=new rn}calculateGlyphDependencies(o,l,f,g,v){for(let x=0;x<o.length;x++)if(l[o.charCodeAt(x)]=!0,(f||g)&&v){const w=cp[o.charAt(x)];w&&(l[w.charCodeAt(0)]=!0)}}populate(o,l,f){const g=this.layers[0],v=g.layout,x=v.get("text-font"),w=v.get("text-field"),E=v.get("icon-image"),I=(w.value.kind!=="constant"||w.value.value instanceof Bn&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),M=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,O=v.get("symbol-sort-key");if(this.features=[],!I&&!M)return;const F=l.iconDependencies,q=l.glyphDependencies,K=l.availableImages,Y=new Qr(this.zoom);for(const{feature:ae,id:he,index:ke,sourceLayerIndex:xe}of o){const Ce=g._featureFilter.needGeometry,De=ec(ae,Ce);if(!g._featureFilter.filter(Y,De,f))continue;let Je,_t;if(Ce||(De.geometry=Qu(ae)),I){const gt=g.getValueAndResolveTokens("text-field",De,f,K),dt=Bn.factory(gt),Mt=this.hasRTLText=this.hasRTLText||F3(dt);(!Mt||Yi.getRTLTextPluginStatus()==="unavailable"||Mt&&Yi.isParsed())&&(Je=y3(dt,g,De))}if(M){const gt=g.getValueAndResolveTokens("icon-image",De,f,K);_t=gt instanceof Zn?gt:Zn.fromString(gt)}if(!Je&&!_t)continue;const jt=this.sortFeaturesByKey?O.evaluate(De,{},f):void 0;if(this.features.push({id:he,text:Je,icon:_t,index:ke,sourceLayerIndex:xe,geometry:De.geometry,properties:ae.properties,type:D3[ae.type],sortKey:jt}),_t&&(F[_t.name]=!0),Je){const gt=x.evaluate(De,{},f).join(","),dt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const Mt of Je.sections)if(Mt.image)F[Mt.image.name]=!0;else{const At=Kf(Je.toString()),bt=Mt.fontStack||gt,je=q[bt]=q[bt]||{};this.calculateGlyphDependencies(Mt.text,je,dt,this.allowVerticalPlacement,At)}}}v.get("symbol-placement")==="line"&&(this.features=function(ae){const he={},ke={},xe=[];let Ce=0;function De(gt){xe.push(ae[gt]),Ce++}function Je(gt,dt,Mt){const At=ke[gt];return delete ke[gt],ke[dt]=At,xe[At].geometry[0].pop(),xe[At].geometry[0]=xe[At].geometry[0].concat(Mt[0]),At}function _t(gt,dt,Mt){const At=he[dt];return delete he[dt],he[gt]=At,xe[At].geometry[0].shift(),xe[At].geometry[0]=Mt[0].concat(xe[At].geometry[0]),At}function jt(gt,dt,Mt){const At=Mt?dt[0][dt[0].length-1]:dt[0][0];return`${gt}:${At.x}:${At.y}`}for(let gt=0;gt<ae.length;gt++){const dt=ae[gt],Mt=dt.geometry,At=dt.text?dt.text.toString():null;if(!At){De(gt);continue}const bt=jt(At,Mt),je=jt(At,Mt,!0);if(bt in ke&&je in he&&ke[bt]!==he[je]){const Ot=_t(bt,je,Mt),Rt=Je(bt,je,xe[Ot].geometry);delete he[bt],delete ke[je],ke[jt(At,xe[Rt].geometry,!0)]=Rt,xe[Ot].geometry=null}else bt in ke?Je(bt,je,Mt):je in he?_t(bt,je,Mt):(De(gt),he[bt]=Ce-1,ke[je]=Ce-1)}return xe.filter(gt=>gt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ae,he)=>ae.sortKey-he.sortKey)}update(o,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(o,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const f=this.lineVertexArray.length;if(o.segment!==void 0){let g=o.dist(l[o.segment+1]),v=o.dist(l[o.segment]);const x={};for(let w=o.segment+1;w<l.length;w++)x[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:g},w<l.length-1&&(g+=l[w+1].dist(l[w]));for(let w=o.segment||0;w>=0;w--)x[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=l[w-1].dist(l[w]));for(let w=0;w<l.length;w++){const E=x[w];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,l,f,g,v,x,w,E,I,M,O,F){const q=o.indexArray,K=o.layoutVertexArray,Y=o.segments.prepareSegment(4*l.length,K,q,this.canOverlap?x.sortKey:void 0),ae=this.glyphOffsetArray.length,he=Y.vertexLength,ke=this.allowVerticalPlacement&&w===d.ah.vertical?Math.PI/2:0,xe=x.text&&x.text.sections;for(let Ce=0;Ce<l.length;Ce++){const{tl:De,tr:Je,bl:_t,br:jt,tex:gt,pixelOffsetTL:dt,pixelOffsetBR:Mt,minFontScaleX:At,minFontScaleY:bt,glyphOffset:je,isSDF:Ot,sectionIndex:Rt}=l[Ce],Xt=Y.vertexLength,Zr=je[1];ay(K,E.x,E.y,De.x,Zr+De.y,gt.x,gt.y,f,Ot,dt.x,dt.y,At,bt),ay(K,E.x,E.y,Je.x,Zr+Je.y,gt.x+gt.w,gt.y,f,Ot,Mt.x,dt.y,At,bt),ay(K,E.x,E.y,_t.x,Zr+_t.y,gt.x,gt.y+gt.h,f,Ot,dt.x,Mt.y,At,bt),ay(K,E.x,E.y,jt.x,Zr+jt.y,gt.x+gt.w,gt.y+gt.h,f,Ot,Mt.x,Mt.y,At,bt),o1(o.dynamicLayoutVertexArray,E,ke),q.emplaceBack(Xt,Xt+1,Xt+2),q.emplaceBack(Xt+1,Xt+2,Xt+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(je[0]),Ce!==l.length-1&&Rt===l[Ce+1].sectionIndex||o.programConfigurations.populatePaintArrays(K.length,x,x.index,{},F,xe&&xe[Rt])}o.placedSymbolArray.emplaceBack(E.x,E.y,ae,this.glyphOffsetArray.length-ae,he,I,M,E.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],w,0,!1,0,O)}_addCollisionDebugVertex(o,l,f,g,v,x){return l.emplaceBack(0,0),o.emplaceBack(f.x,f.y,g,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(o,l,f,g,v,x,w){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=E.vertexLength,M=v.layoutVertexArray,O=v.collisionVertexArray,F=w.anchorX,q=w.anchorY;this._addCollisionDebugVertex(M,O,x,F,q,new P(o,l)),this._addCollisionDebugVertex(M,O,x,F,q,new P(f,l)),this._addCollisionDebugVertex(M,O,x,F,q,new P(f,g)),this._addCollisionDebugVertex(M,O,x,F,q,new P(o,g)),E.vertexLength+=4;const K=v.indexArray;K.emplaceBack(I,I+1),K.emplaceBack(I+1,I+2),K.emplaceBack(I+2,I+3),K.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(o,l,f,g){for(let v=o;v<l;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new a1(go,kE.members,ni),this.iconCollisionBox=new a1(go,kE.members,ni);for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(o,l,f,g,v,x,w,E,I){const M={};for(let O=l;O<f;O++){const F=o.get(O);M.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.textFeatureIndex=F.featureIndex;break}for(let O=g;O<v;O++){const F=o.get(O);M.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalTextFeatureIndex=F.featureIndex;break}for(let O=x;O<w;O++){const F=o.get(O);M.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.iconFeatureIndex=F.featureIndex;break}for(let O=E;O<I;O++){const F=o.get(O);M.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalIconFeatureIndex=F.featureIndex;break}return M}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,l){const f=o.placedSymbolArray.get(l),g=f.vertexStartIndex+4*f.numGlyphs;for(let v=f.vertexStartIndex;v<g;v+=4)o.indexArray.emplaceBack(v,v+1,v+2),o.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(o),f=Math.cos(o),g=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const E=this.symbolInstances.get(w);g.push(0|Math.round(l*E.anchorX+f*E.anchorY)),v.push(E.featureIndex)}return x.sort((w,E)=>g[w]-g[E]||v[E]-v[w]),x}addToSortKeyRanges(o,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((g,v,x)=>{g>=0&&x.indexOf(g)===v&&this.addIndicesForPlacedSymbol(this.text,g)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let WE,GE;Tt("SymbolBucket",Vh,{omit:["layers","collisionBoxArray","features","compareText"]}),Vh.MAX_GLYPHS=65535,Vh.addDynamicAttributes=o1;var l1={get paint(){return GE=GE||new _({"icon-opacity":new Ht(Ie.paint_symbol["icon-opacity"]),"icon-color":new Ht(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Ht(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new Pt(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pt(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(Ie.paint_symbol["text-opacity"]),"text-color":new Ht(Ie.paint_symbol["text-color"],{runtimeType:Er,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Ht(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(Ie.paint_symbol["text-halo-blur"]),"text-translate":new Pt(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new Pt(Ie.paint_symbol["text-translate-anchor"])})},get layout(){return WE=WE||new _({"symbol-placement":new Pt(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new Pt(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pt(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pt(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pt(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Pt(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Pt(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pt(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pt(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(Ie.layout_symbol["icon-size"]),"icon-text-fit":new Pt(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pt(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(Ie.layout_symbol["icon-image"]),"icon-rotate":new Ht(Ie.layout_symbol["icon-rotate"]),"icon-padding":new Ht(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new Pt(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Ht(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pt(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pt(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pt(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(Ie.layout_symbol["text-field"]),"text-font":new Ht(Ie.layout_symbol["text-font"]),"text-size":new Ht(Ie.layout_symbol["text-size"]),"text-max-width":new Ht(Ie.layout_symbol["text-max-width"]),"text-line-height":new Pt(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Ht(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pt(Ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ht(Ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ht(Ie.layout_symbol["text-anchor"]),"text-max-angle":new Pt(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new Pt(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(Ie.layout_symbol["text-rotate"]),"text-padding":new Pt(Ie.layout_symbol["text-padding"]),"text-keep-upright":new Pt(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Ht(Ie.layout_symbol["text-transform"]),"text-offset":new Ht(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new Pt(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new Pt(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new Pt(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new Pt(Ie.layout_symbol["text-optional"])})}};class ZE{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:qn,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tt("FormatSectionOverride",ZE,{omit:["defaultValue"]});class ly extends c{constructor(o){super(o,l1)}recalculate(o,l){if(super.recalculate(o,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const v of f)g.indexOf(v)<0&&g.push(v);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,l,f,g){const v=this.layout.get(o).evaluate(l,{},f,g),x=this._unevaluatedLayout._values[o];return x.isDataDriven()||gh(x.value)||!v?v:function(w,E){return E.replace(/{([^{}]+)}/g,(I,M)=>w&&M in w?String(w[M]):"")}(l.properties,v)}createBucket(o){return new Vh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of l1.paint.overridableProperties){if(!ly.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),f=new ZE(l),g=new mh(f,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new Il("source",g):new Rl("composite",g,l.value.zoomStops),this.paint._values[o]=new cs(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&ly.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const f=o.get("text-field"),g=l1.paint.properties[l];let v=!1;const x=w=>{for(const E of w)if(g.overrides&&g.overrides.hasOverride(E))return void(v=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Bn)x(f.value.value.sections);else if(f.value.kind==="source"){const w=I=>{v||(I instanceof cn&&Bt(I.value)===lo?x(I.value.sections):I instanceof sh?x(I.sections):I.eachChild(w))},E=f.value;E._styleExpression&&w(E._styleExpression.expression)}return v}}let KE;var B3={get paint(){return KE=KE||new _({"background-color":new Pt(Ie.paint_background["background-color"]),"background-pattern":new Ph(Ie.paint_background["background-pattern"]),"background-opacity":new Pt(Ie.paint_background["background-opacity"])})}};class N3 extends c{constructor(o){super(o,B3)}}let XE;var $3={get paint(){return XE=XE||new _({"raster-opacity":new Pt(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pt(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pt(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pt(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new Pt(Ie.paint_raster["raster-saturation"]),"raster-contrast":new Pt(Ie.paint_raster["raster-contrast"]),"raster-resampling":new Pt(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new Pt(Ie.paint_raster["raster-fade-duration"])})}};class j3 extends c{constructor(o){super(o,$3)}}class U3 extends c{constructor(o){super(o,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class V3{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const u1=63710088e-1;class Kl{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kl(fe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,f=this.lat*l,g=o.lat*l,v=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*l);return u1*Math.acos(Math.min(v,1))}static convert(o){if(o instanceof Kl)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Kl(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Kl(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const YE=2*Math.PI*u1;function JE(s){return YE*Math.cos(s*Math.PI/180)}function QE(s){return(180+s)/360}function eC(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function tC(s,o){return s/JE(o)}function c1(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class pp{constructor(o,l,f=0){this.x=+o,this.y=+l,this.z=+f}static fromLngLat(o,l=0){const f=Kl.convert(o);return new pp(QE(f.lng),eC(f.lat),tC(l,f.lat))}toLngLat(){return new Kl(360*this.x-180,c1(this.y))}toAltitude(){return this.z*JE(c1(this.y))}meterInMercatorCoordinateUnits(){return 1/YE*(o=c1(this.y),1/Math.cos(o*Math.PI/180));var o}}function rC(s,o,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[s*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class h1{constructor(o,l,f){if(!function(g,v,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||v<0||v>=Math.pow(2,g))}(o,l,f))throw new Error(`x=${l}, y=${f}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=l,this.y=f,this.key=mp(0,o,o,l,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l,f){const g=(x=this.y,w=this.z,E=rC(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),I=rC(256*(v+1),256*(x+1),w),E[0]+","+E[1]+","+I[0]+","+I[1]);var v,x,w,E,I;const M=function(O,F,q){let K,Y="";for(let ae=O;ae>0;ae--)K=1<<ae-1,Y+=(F&K?1:0)+(q&K?2:0);return Y}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,g)}isChildOf(o){const l=this.z-o.z;return l>0&&o.x===this.x>>l&&o.y===this.y>>l}getTilePoint(o){const l=Math.pow(2,this.z);return new P((o.x*l-this.x)*Nn,(o.y*l-this.y)*Nn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nC{constructor(o,l){this.wrap=o,this.canonical=l,this.key=mp(o,l.z,l.z,l.x,l.y)}}class Bo{constructor(o,l,f,g,v){if(o<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${f}`);this.overscaledZ=o,this.wrap=l,this.canonical=new h1(f,+g,+v),this.key=mp(l,o,f,g,v)}clone(){return new Bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-o;return o>this.canonical.z?new Bo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bo(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-o;return o>this.canonical.z?mp(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y):mp(this.wrap*+l,o,o,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new Bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new Bo(l,this.wrap,l,f,g),new Bo(l,this.wrap,l,f+1,g),new Bo(l,this.wrap,l,f,g+1),new Bo(l,this.wrap,l,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Bo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new pp(o.x-this.wrap,o.y))}}function mp(s,o,l,f,g){(s*=2)<0&&(s=-1*s-1);const v=1<<l;return(v*v*s+v*g+f).toString(36)+l.toString(36)+o.toString(36)}Tt("CanonicalTileID",h1),Tt("OverscaledTileID",Bo,{omit:["posMatrix"]});class iC{constructor(o,l,f,g=1,v=1,x=1,w=0){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Fe(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<E;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(E,I)]=this.data[this._idx(E-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,E)]=this.data[this._idx(I,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<E;I++)for(let M=0;M<E;M++){const O=this.get(I,M);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(o,l){const f=new Uint8Array(this.data.buffer),g=4*this._idx(o,l);return this.unpack(f[g],f[g+1],f[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}unpack(o,l,f){return o*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new Fo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,l,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,v=l*this.dim+this.dim,x=f*this.dim,w=f*this.dim+this.dim;switch(l){case-1:g=v-1;break;case 1:v=g+1}switch(f){case-1:x=w-1;break;case 1:w=x+1}const E=-l*this.dim,I=-f*this.dim;for(let M=x;M<w;M++)for(let O=g;O<v;O++)this.data[this._idx(O,M)]=o.data[this._idx(O+E,M+I)]}}Tt("DEMData",iC);class oC{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const f=o[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class sC{constructor(o,l,f,g,v){this.type="Feature",this._vectorTileFeature=o,o._z=l,o._x=f,o._y=g,this.properties=o.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(o[l]=this[l]);return o}}class aC{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Dl(Nn,16,0),this.grid3D=new Dl(Nn,16,0),this.featureIndexArray=new bi,this.promoteId=l}insert(o,l,f,g,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,v);const E=x?this.grid3D:this.grid;for(let I=0;I<l.length;I++){const M=l[I],O=[1/0,1/0,-1/0,-1/0];for(let F=0;F<M.length;F++){const q=M[F];O[0]=Math.min(O[0],q.x),O[1]=Math.min(O[1],q.y),O[2]=Math.max(O[2],q.x),O[3]=Math.max(O[3],q.y)}O[0]<Nn&&O[1]<Nn&&O[2]>=0&&O[3]>=0&&E.insert(w,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wl.VectorTile(new Qx(this.rawTileData)).layers,this.sourceLayerCoder=new oC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,l,f,g){this.loadVTLayers();const v=o.params||{},x=Nn/o.tileSize/o.scale,w=Of(v.filter),E=o.queryGeometry,I=o.queryPadding*x,M=uC(E),O=this.grid.query(M.minX-I,M.minY-I,M.maxX+I,M.maxY+I),F=uC(o.cameraQueryGeometry),q=this.grid3D.query(F.minX-I,F.minY-I,F.maxX+I,F.maxY+I,(ae,he,ke,xe)=>function(Ce,De,Je,_t,jt){for(const dt of Ce)if(De<=dt.x&&Je<=dt.y&&_t>=dt.x&&jt>=dt.y)return!0;const gt=[new P(De,Je),new P(De,jt),new P(_t,jt),new P(_t,Je)];if(Ce.length>2){for(const dt of gt)if(zh(Ce,dt))return!0}for(let dt=0;dt<Ce.length-1;dt++)if(Sz(Ce[dt],Ce[dt+1],gt))return!0;return!1}(o.cameraQueryGeometry,ae-I,he-I,ke+I,xe+I));for(const ae of q)O.push(ae);O.sort(q3);const K={};let Y;for(let ae=0;ae<O.length;ae++){const he=O[ae];if(he===Y)continue;Y=he;const ke=this.featureIndexArray.get(he);let xe=null;this.loadMatchingFeature(K,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,w,v.layers,v.availableImages,l,f,g,(Ce,De,Je)=>(xe||(xe=Qu(Ce)),De.queryIntersectsFeature(E,Ce,Je,xe,this.z,o.transform,x,o.pixelPosMatrix)))}return K}loadMatchingFeature(o,l,f,g,v,x,w,E,I,M,O){const F=this.bucketLayerIDs[l];if(x&&!function(ae,he){for(let ke=0;ke<ae.length;ke++)if(he.indexOf(ae[ke])>=0)return!0;return!1}(x,F))return;const q=this.sourceLayerCoder.decode(f),K=this.vtLayers[q].feature(g);if(v.needGeometry){const ae=ec(K,!0);if(!v.filter(new Qr(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!v.filter(new Qr(this.tileID.overscaledZ),K))return;const Y=this.getId(K,q);for(let ae=0;ae<F.length;ae++){const he=F[ae];if(x&&x.indexOf(he)<0)continue;const ke=E[he];if(!ke)continue;let xe={};Y&&M&&(xe=M.getState(ke.sourceLayer||"_geojsonTileLayer",Y));const Ce=ge({},I[he]);Ce.paint=lC(Ce.paint,ke.paint,K,xe,w),Ce.layout=lC(Ce.layout,ke.layout,K,xe,w);const De=!O||O(K,ke,xe);if(!De)continue;const Je=new sC(K,this.z,this.x,this.y,Y);Je.layer=Ce;let _t=o[he];_t===void 0&&(_t=o[he]=[]),_t.push({featureIndex:g,feature:Je,intersectionZ:De})}}lookupSymbolFeatures(o,l,f,g,v,x,w,E){const I={};this.loadVTLayers();const M=Of(v);for(const O of o)this.loadMatchingFeature(I,f,g,O,M,x,w,E,l);return I}hasLayer(o){for(const l of this.bucketLayerIDs)for(const f of l)if(o===f)return!0;return!1}getId(o,l){let f=o.id;return this.promoteId&&(f=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function lC(s,o,l,f,g){return Re(s,(v,x)=>{const w=o instanceof Ku?o.get(x):null;return w&&w.evaluate?w.evaluate(l,f,g):w})}function uC(s){let o=1/0,l=1/0,f=-1/0,g=-1/0;for(const v of s)o=Math.min(o,v.x),l=Math.min(l,v.y),f=Math.max(f,v.x),g=Math.max(g,v.y);return{minX:o,minY:l,maxX:f,maxY:g}}function q3(s,o){return o-s}function cC(s,o,l,f,g){const v=[];for(let x=0;x<s.length;x++){const w=s[x];let E;for(let I=0;I<w.length-1;I++){let M=w[I],O=w[I+1];M.x<o&&O.x<o||(M.x<o?M=new P(o,M.y+(o-M.x)/(O.x-M.x)*(O.y-M.y))._round():O.x<o&&(O=new P(o,M.y+(o-M.x)/(O.x-M.x)*(O.y-M.y))._round()),M.y<l&&O.y<l||(M.y<l?M=new P(M.x+(l-M.y)/(O.y-M.y)*(O.x-M.x),l)._round():O.y<l&&(O=new P(M.x+(l-M.y)/(O.y-M.y)*(O.x-M.x),l)._round()),M.x>=f&&O.x>=f||(M.x>=f?M=new P(f,M.y+(f-M.x)/(O.x-M.x)*(O.y-M.y))._round():O.x>=f&&(O=new P(f,M.y+(f-M.x)/(O.x-M.x)*(O.y-M.y))._round()),M.y>=g&&O.y>=g||(M.y>=g?M=new P(M.x+(g-M.y)/(O.y-M.y)*(O.x-M.x),g)._round():O.y>=g&&(O=new P(M.x+(g-M.y)/(O.y-M.y)*(O.x-M.x),g)._round()),E&&M.equals(E[E.length-1])||(E=[M],v.push(E)),E.push(O)))))}}return v}Tt("FeatureIndex",aC,{omit:["rawTileData","sourceLayerCoder"]});class Xl extends P{constructor(o,l,f,g){super(o,l),this.angle=f,g!==void 0&&(this.segment=g)}clone(){return new Xl(this.x,this.y,this.angle,this.segment)}}function hC(s,o,l,f,g){if(o.segment===void 0||l===0)return!0;let v=o,x=o.segment+1,w=0;for(;w>-l/2;){if(x--,x<0)return!1;w-=s[x].dist(v),v=s[x]}w+=s[x].dist(s[x+1]),x++;const E=[];let I=0;for(;w<l/2;){const M=s[x],O=s[x+1];if(!O)return!1;let F=s[x-1].angleTo(M)-M.angleTo(O);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:w,angleDelta:F}),I+=F;w-E[0].distance>f;)I-=E.shift().angleDelta;if(I>g)return!1;x++,w+=M.dist(O)}return!0}function dC(s){let o=0;for(let l=0;l<s.length-1;l++)o+=s[l].dist(s[l+1]);return o}function fC(s,o,l){return s?.6*o*l:0}function pC(s,o){return Math.max(s?s.right-s.left:0,o?o.right-o.left:0)}function H3(s,o,l,f,g,v){const x=fC(l,g,v),w=pC(l,f)*v;let E=0;const I=dC(s)/2;for(let M=0;M<s.length-1;M++){const O=s[M],F=s[M+1],q=O.dist(F);if(E+q>I){const K=(I-E)/q,Y=Oi.number(O.x,F.x,K),ae=Oi.number(O.y,F.y,K),he=new Xl(Y,ae,F.angleTo(O),M);return he._round(),!x||hC(s,he,w,x,o)?he:void 0}E+=q}}function W3(s,o,l,f,g,v,x,w,E){const I=fC(f,v,x),M=pC(f,g),O=M*x,F=s[0].x===0||s[0].x===E||s[0].y===0||s[0].y===E;return o-O<o/4&&(o=O+o/4),mC(s,F?o/2*w%o:(M/2+2*v)*x*w%o,o,I,l,O,F,!1,E)}function mC(s,o,l,f,g,v,x,w,E){const I=v/2,M=dC(s);let O=0,F=o-l,q=[];for(let K=0;K<s.length-1;K++){const Y=s[K],ae=s[K+1],he=Y.dist(ae),ke=ae.angleTo(Y);for(;F+l<O+he;){F+=l;const xe=(F-O)/he,Ce=Oi.number(Y.x,ae.x,xe),De=Oi.number(Y.y,ae.y,xe);if(Ce>=0&&Ce<E&&De>=0&&De<E&&F-I>=0&&F+I<=M){const Je=new Xl(Ce,De,ke,K);Je._round(),f&&!hC(s,Je,v,f,g)||q.push(Je)}}O+=he}return w||q.length||x||(q=mC(s,O/2,l,f,g,v,x,!0,E)),q}Tt("Anchor",Xl);const qh=Qi;function gC(s,o,l,f){const g=[],v=s.image,x=v.pixelRatio,w=v.paddedRect.w-2*qh,E=v.paddedRect.h-2*qh;let I={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const M=v.stretchX||[[0,w]],O=v.stretchY||[[0,E]],F=(je,Ot)=>je+Ot[1]-Ot[0],q=M.reduce(F,0),K=O.reduce(F,0),Y=w-q,ae=E-K;let he=0,ke=q,xe=0,Ce=K,De=0,Je=Y,_t=0,jt=ae;if(v.content&&f){const je=v.content,Ot=je[2]-je[0],Rt=je[3]-je[1];(v.textFitWidth||v.textFitHeight)&&(I=VE(s)),he=uy(M,0,je[0]),xe=uy(O,0,je[1]),ke=uy(M,je[0],je[2]),Ce=uy(O,je[1],je[3]),De=je[0]-he,_t=je[1]-xe,Je=Ot-ke,jt=Rt-Ce}const gt=I.x1,dt=I.y1,Mt=I.x2-gt,At=I.y2-dt,bt=(je,Ot,Rt,Xt)=>{const Zr=cy(je.stretch-he,ke,Mt,gt),qr=hy(je.fixed-De,Je,je.stretch,q),Kn=cy(Ot.stretch-xe,Ce,At,dt),ds=hy(Ot.fixed-_t,jt,Ot.stretch,K),di=cy(Rt.stretch-he,ke,Mt,gt),Xn=hy(Rt.fixed-De,Je,Rt.stretch,q),Bi=cy(Xt.stretch-xe,Ce,At,dt),Ni=hy(Xt.fixed-_t,jt,Xt.stretch,K),$i=new P(Zr,Kn),Pn=new P(di,Kn),Yn=new P(di,Bi),Si=new P(Zr,Bi),fi=new P(qr/x,ds/x),ji=new P(Xn/x,Ni/x),pi=o*Math.PI/180;if(pi){const Pr=Math.sin(pi),Xr=Math.cos(pi),nn=[Xr,-Pr,Pr,Xr];$i._matMult(nn),Pn._matMult(nn),Si._matMult(nn),Yn._matMult(nn)}const No=je.stretch+je.fixed,eo=Ot.stretch+Ot.fixed;return{tl:$i,tr:Pn,bl:Si,br:Yn,tex:{x:v.paddedRect.x+qh+No,y:v.paddedRect.y+qh+eo,w:Rt.stretch+Rt.fixed-No,h:Xt.stretch+Xt.fixed-eo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fi,pixelOffsetBR:ji,minFontScaleX:Je/x/Mt,minFontScaleY:jt/x/At,isSDF:l}};if(f&&(v.stretchX||v.stretchY)){const je=yC(M,Y,q),Ot=yC(O,ae,K);for(let Rt=0;Rt<je.length-1;Rt++){const Xt=je[Rt],Zr=je[Rt+1];for(let qr=0;qr<Ot.length-1;qr++)g.push(bt(Xt,Ot[qr],Zr,Ot[qr+1]))}}else g.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:E+1}));return g}function uy(s,o,l){let f=0;for(const g of s)f+=Math.max(o,Math.min(l,g[1]))-Math.max(o,Math.min(l,g[0]));return f}function yC(s,o,l){const f=[{fixed:-qh,stretch:0}];for(const[g,v]of s){const x=f[f.length-1];f.push({fixed:g-x.stretch,stretch:x.stretch}),f.push({fixed:g-x.stretch,stretch:x.stretch+(v-g)})}return f.push({fixed:o+qh,stretch:l}),f}function cy(s,o,l,f){return s/o*l+f}function hy(s,o,l,f){return s-o*l/f}class dy{constructor(o,l,f,g,v,x,w,E,I,M){var O;if(this.boxStartIndex=o.length,I){let F=x.top,q=x.bottom;const K=x.collisionPadding;K&&(F-=K[1],q+=K[3]);let Y=q-F;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{const F=!((O=x.image)===null||O===void 0)&&O.content&&(x.image.textFitWidth||x.image.textFitHeight)?VE(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};F.y1=F.y1*w-E[0],F.y2=F.y2*w+E[2],F.x1=F.x1*w-E[3],F.x2=F.x2*w+E[1];const q=x.collisionPadding;if(q&&(F.x1-=q[0]*w,F.y1-=q[1]*w,F.x2+=q[2]*w,F.y2+=q[3]*w),M){const K=new P(F.x1,F.y1),Y=new P(F.x2,F.y1),ae=new P(F.x1,F.y2),he=new P(F.x2,F.y2),ke=M*Math.PI/180;K._rotate(ke),Y._rotate(ke),ae._rotate(ke),he._rotate(ke),F.x1=Math.min(K.x,Y.x,ae.x,he.x),F.x2=Math.max(K.x,Y.x,ae.x,he.x),F.y1=Math.min(K.y,Y.y,ae.y,he.y),F.y2=Math.max(K.y,Y.y,ae.y,he.y)}o.emplaceBack(l.x,l.y,F.x1,F.y1,F.x2,F.y2,f,g,v)}this.boxEndIndex=o.length}}class G3{constructor(o=[],l=(f,g)=>f<g?-1:f>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:f}=this,g=l[o];for(;o>0;){const v=o-1>>1,x=l[v];if(f(g,x)>=0)break;l[o]=x,o=v}l[o]=g}_down(o){const{data:l,compare:f}=this,g=this.length>>1,v=l[o];for(;o<g;){let x=1+(o<<1);const w=x+1;if(w<this.length&&f(l[w],l[x])<0&&(x=w),f(l[x],v)>=0)break;l[o]=l[x],o=x}l[o]=v}}function Z3(s,o=1,l=!1){let f=1/0,g=1/0,v=-1/0,x=-1/0;const w=s[0];for(let q=0;q<w.length;q++){const K=w[q];(!q||K.x<f)&&(f=K.x),(!q||K.y<g)&&(g=K.y),(!q||K.x>v)&&(v=K.x),(!q||K.y>x)&&(x=K.y)}const E=Math.min(v-f,x-g);let I=E/2;const M=new G3([],K3);if(E===0)return new P(f,g);for(let q=f;q<v;q+=E)for(let K=g;K<x;K+=E)M.push(new Hh(q+I,K+I,I,s));let O=function(q){let K=0,Y=0,ae=0;const he=q[0];for(let ke=0,xe=he.length,Ce=xe-1;ke<xe;Ce=ke++){const De=he[ke],Je=he[Ce],_t=De.x*Je.y-Je.x*De.y;Y+=(De.x+Je.x)*_t,ae+=(De.y+Je.y)*_t,K+=3*_t}return new Hh(Y/K,ae/K,0,q)}(s),F=M.length;for(;M.length;){const q=M.pop();(q.d>O.d||!O.d)&&(O=q,l&&console.log("found best %d after %d probes",Math.round(1e4*q.d)/1e4,F)),q.max-O.d<=o||(I=q.h/2,M.push(new Hh(q.p.x-I,q.p.y-I,I,s)),M.push(new Hh(q.p.x+I,q.p.y-I,I,s)),M.push(new Hh(q.p.x-I,q.p.y+I,I,s)),M.push(new Hh(q.p.x+I,q.p.y+I,I,s)),F+=4)}return l&&(console.log(`num probes: ${F}`),console.log(`best distance: ${O.d}`)),O.p}function K3(s,o){return o.max-s.max}function Hh(s,o,l,f){this.p=new P(s,o),this.h=l,this.d=function(g,v){let x=!1,w=1/0;for(let E=0;E<v.length;E++){const I=v[E];for(let M=0,O=I.length,F=O-1;M<O;F=M++){const q=I[M],K=I[F];q.y>g.y!=K.y>g.y&&g.x<(K.x-q.x)*(g.y-q.y)/(K.y-q.y)+q.x&&(x=!x),w=Math.min(w,eE(g,q,K))}}return(x?1:-1)*Math.sqrt(w)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var hi;d.aq=void 0,(hi=d.aq||(d.aq={}))[hi.center=1]="center",hi[hi.left=2]="left",hi[hi.right=3]="right",hi[hi.top=4]="top",hi[hi.bottom=5]="bottom",hi[hi["top-left"]=6]="top-left",hi[hi["top-right"]=7]="top-right",hi[hi["bottom-left"]=8]="bottom-left",hi[hi["bottom-right"]=9]="bottom-right";const Yl=7,d1=Number.POSITIVE_INFINITY;function _C(s,o){return o[1]!==d1?function(l,f,g){let v=0,x=0;switch(f=Math.abs(f),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-Yl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Yl}switch(l){case"top-right":case"bottom-right":case"right":v=-f;break;case"top-left":case"bottom-left":case"left":v=f}return[v,x]}(s,o[0],o[1]):function(l,f){let g=0,v=0;f<0&&(f=0);const x=f/Math.SQRT2;switch(l){case"top-right":case"top-left":v=x-Yl;break;case"bottom-right":case"bottom-left":v=-x+Yl;break;case"bottom":v=-f+Yl;break;case"top":v=f-Yl}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=f;break;case"right":g=-f}return[g,v]}(s,o[0])}function vC(s,o,l){var f;const g=s.layout,v=(f=g.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(o,{},l);if(v){const w=v.values,E=[];for(let I=0;I<w.length;I+=2){const M=E[I]=w[I],O=w[I+1].map(F=>F*Hn);M.startsWith("top")?O[1]-=Yl:M.startsWith("bottom")&&(O[1]+=Yl),E[I+1]=O}return new Cn(E)}const x=g.get("text-variable-anchor");if(x){let w;w=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(o,{},l)*Hn,d1]:g.get("text-offset").evaluate(o,{},l).map(I=>I*Hn);const E=[];for(const I of x)E.push(I,_C(I,w));return new Cn(E)}return null}function f1(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function X3(s,o,l,f,g,v,x,w,E,I,M){let O=v.textMaxSize.evaluate(o,{});O===void 0&&(O=x);const F=s.layers[0].layout,q=F.get("icon-offset").evaluate(o,{},M),K=bC(l.horizontal),Y=x/24,ae=s.tilePixelRatio*Y,he=s.tilePixelRatio*O/24,ke=s.tilePixelRatio*w,xe=s.tilePixelRatio*F.get("symbol-spacing"),Ce=F.get("text-padding")*s.tilePixelRatio,De=function(je,Ot,Rt,Xt=1){const Zr=je.get("icon-padding").evaluate(Ot,{},Rt),qr=Zr&&Zr.values;return[qr[0]*Xt,qr[1]*Xt,qr[2]*Xt,qr[3]*Xt]}(F,o,M,s.tilePixelRatio),Je=F.get("text-max-angle")/180*Math.PI,_t=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",jt=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",gt=F.get("symbol-placement"),dt=xe/2,Mt=F.get("icon-text-fit");let At;f&&Mt!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(At=qE(f,l.vertical,Mt,F.get("icon-text-fit-padding"),q,Y)),K&&(f=qE(f,K,Mt,F.get("icon-text-fit-padding"),q,Y)));const bt=(je,Ot)=>{Ot.x<0||Ot.x>=Nn||Ot.y<0||Ot.y>=Nn||function(Rt,Xt,Zr,qr,Kn,ds,di,Xn,Bi,Ni,$i,Pn,Yn,Si,fi,ji,pi,No,eo,Pr,Xr,nn,yo,xn,Wh){const la=Rt.addToLineVertexArray(Xt,Zr);let ua,fs,$o,ii,Ka=0,_p=0,EC=0,CC=0,b1=-1,w1=-1;const Xa={};let AC=Mh("");if(Rt.allowVerticalPlacement&&qr.vertical){const Ti=Xn.layout.get("text-rotate").evaluate(Xr,{},xn)+90;$o=new dy(Bi,Xt,Ni,$i,Pn,qr.vertical,Yn,Si,fi,Ti),di&&(ii=new dy(Bi,Xt,Ni,$i,Pn,di,pi,No,fi,Ti))}if(Kn){const Ti=Xn.layout.get("icon-rotate").evaluate(Xr,{}),jo=Xn.layout.get("icon-text-fit")!=="none",rc=gC(Kn,Ti,yo,jo),Fs=di?gC(di,Ti,yo,jo):void 0;fs=new dy(Bi,Xt,Ni,$i,Pn,Kn,pi,No,!1,Ti),Ka=4*rc.length;const nc=Rt.iconSizeData;let ca=null;nc.kind==="source"?(ca=[aa*Xn.layout.get("icon-size").evaluate(Xr,{})],ca[0]>Zl&&Fe(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${fp}. Reduce your "icon-size".`)):nc.kind==="composite"&&(ca=[aa*nn.compositeIconSizes[0].evaluate(Xr,{},xn),aa*nn.compositeIconSizes[1].evaluate(Xr,{},xn)],(ca[0]>Zl||ca[1]>Zl)&&Fe(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${fp}. Reduce your "icon-size".`)),Rt.addSymbols(Rt.icon,rc,ca,Pr,eo,Xr,d.ah.none,Xt,la.lineStartIndex,la.lineLength,-1,xn),b1=Rt.icon.placedSymbolArray.length-1,Fs&&(_p=4*Fs.length,Rt.addSymbols(Rt.icon,Fs,ca,Pr,eo,Xr,d.ah.vertical,Xt,la.lineStartIndex,la.lineLength,-1,xn),w1=Rt.icon.placedSymbolArray.length-1)}const kC=Object.keys(qr.horizontal);for(const Ti of kC){const jo=qr.horizontal[Ti];if(!ua){AC=Mh(jo.text);const Fs=Xn.layout.get("text-rotate").evaluate(Xr,{},xn);ua=new dy(Bi,Xt,Ni,$i,Pn,jo,Yn,Si,fi,Fs)}const rc=jo.positionedLines.length===1;if(EC+=xC(Rt,Xt,jo,ds,Xn,fi,Xr,ji,la,qr.vertical?d.ah.horizontal:d.ah.horizontalOnly,rc?kC:[Ti],Xa,b1,nn,xn),rc)break}qr.vertical&&(CC+=xC(Rt,Xt,qr.vertical,ds,Xn,fi,Xr,ji,la,d.ah.vertical,["vertical"],Xa,w1,nn,xn));const Q3=ua?ua.boxStartIndex:Rt.collisionBoxArray.length,eF=ua?ua.boxEndIndex:Rt.collisionBoxArray.length,tF=$o?$o.boxStartIndex:Rt.collisionBoxArray.length,rF=$o?$o.boxEndIndex:Rt.collisionBoxArray.length,nF=fs?fs.boxStartIndex:Rt.collisionBoxArray.length,iF=fs?fs.boxEndIndex:Rt.collisionBoxArray.length,oF=ii?ii.boxStartIndex:Rt.collisionBoxArray.length,sF=ii?ii.boxEndIndex:Rt.collisionBoxArray.length;let zs=-1;const py=(Ti,jo)=>Ti&&Ti.circleDiameter?Math.max(Ti.circleDiameter,jo):jo;zs=py(ua,zs),zs=py($o,zs),zs=py(fs,zs),zs=py(ii,zs);const PC=zs>-1?1:0;PC&&(zs*=Wh/Hn),Rt.glyphOffsetArray.length>=Vh.MAX_GLYPHS&&Fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xr.sortKey!==void 0&&Rt.addToSortKeyRanges(Rt.symbolInstances.length,Xr.sortKey);const aF=vC(Xn,Xr,xn),[lF,uF]=function(Ti,jo){const rc=Ti.length,Fs=jo==null?void 0:jo.values;if((Fs==null?void 0:Fs.length)>0)for(let nc=0;nc<Fs.length;nc+=2){const ca=Fs[nc+1];Ti.emplaceBack(d.aq[Fs[nc]],ca[0],ca[1])}return[rc,Ti.length]}(Rt.textAnchorOffsets,aF);Rt.symbolInstances.emplaceBack(Xt.x,Xt.y,Xa.right>=0?Xa.right:-1,Xa.center>=0?Xa.center:-1,Xa.left>=0?Xa.left:-1,Xa.vertical||-1,b1,w1,AC,Q3,eF,tF,rF,nF,iF,oF,sF,Ni,EC,CC,Ka,_p,PC,0,Yn,zs,lF,uF)}(s,Ot,je,l,f,g,At,s.layers[0],s.collisionBoxArray,o.index,o.sourceLayerIndex,s.index,ae,[Ce,Ce,Ce,Ce],_t,E,ke,De,jt,q,o,v,I,M,x)};if(gt==="line")for(const je of cC(o.geometry,0,0,Nn,Nn)){const Ot=W3(je,xe,Je,l.vertical||K,f,24,he,s.overscaling,Nn);for(const Rt of Ot)K&&Y3(s,K.text,dt,Rt)||bt(je,Rt)}else if(gt==="line-center"){for(const je of o.geometry)if(je.length>1){const Ot=H3(je,Je,l.vertical||K,f,24,he);Ot&&bt(je,Ot)}}else if(o.type==="Polygon")for(const je of lh(o.geometry,0)){const Ot=Z3(je,16);bt(je[0],new Xl(Ot.x,Ot.y,0))}else if(o.type==="LineString")for(const je of o.geometry)bt(je,new Xl(je[0].x,je[0].y,0));else if(o.type==="Point")for(const je of o.geometry)for(const Ot of je)bt([Ot],new Xl(Ot.x,Ot.y,0))}function xC(s,o,l,f,g,v,x,w,E,I,M,O,F,q,K){const Y=function(ke,xe,Ce,De,Je,_t,jt,gt){const dt=De.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Mt=[];for(const At of xe.positionedLines)for(const bt of At.positionedGlyphs){if(!bt.rect)continue;const je=bt.rect||{};let Ot=zE+1,Rt=!0,Xt=1,Zr=0;const qr=(Je||gt)&&bt.vertical,Kn=bt.metrics.advance*bt.scale/2;if(gt&&xe.verticalizable&&(Zr=At.lineOffset/2-(bt.imageName?-(Hn-bt.metrics.width*bt.scale)/2:(bt.scale-1)*Hn)),bt.imageName){const Pr=jt[bt.imageName];Rt=Pr.sdf,Xt=Pr.pixelRatio,Ot=Qi/Xt}const ds=Je?[bt.x+Kn,bt.y]:[0,0];let di=Je?[0,0]:[bt.x+Kn+Ce[0],bt.y+Ce[1]-Zr],Xn=[0,0];qr&&(Xn=di,di=[0,0]);const Bi=bt.metrics.isDoubleResolution?2:1,Ni=(bt.metrics.left-Ot)*bt.scale-Kn+di[0],$i=(-bt.metrics.top-Ot)*bt.scale+di[1],Pn=Ni+je.w/Bi*bt.scale/Xt,Yn=$i+je.h/Bi*bt.scale/Xt,Si=new P(Ni,$i),fi=new P(Pn,$i),ji=new P(Ni,Yn),pi=new P(Pn,Yn);if(qr){const Pr=new P(-Kn,Kn-hp),Xr=-Math.PI/2,nn=Hn/2-Kn,yo=new P(5-hp-nn,-(bt.imageName?nn:0)),xn=new P(...Xn);Si._rotateAround(Xr,Pr)._add(yo)._add(xn),fi._rotateAround(Xr,Pr)._add(yo)._add(xn),ji._rotateAround(Xr,Pr)._add(yo)._add(xn),pi._rotateAround(Xr,Pr)._add(yo)._add(xn)}if(dt){const Pr=Math.sin(dt),Xr=Math.cos(dt),nn=[Xr,-Pr,Pr,Xr];Si._matMult(nn),fi._matMult(nn),ji._matMult(nn),pi._matMult(nn)}const No=new P(0,0),eo=new P(0,0);Mt.push({tl:Si,tr:fi,bl:ji,br:pi,tex:je,writingMode:xe.writingMode,glyphOffset:ds,sectionIndex:bt.sectionIndex,isSDF:Rt,pixelOffsetTL:No,pixelOffsetBR:eo,minFontScaleX:0,minFontScaleY:0})}return Mt}(0,l,w,g,v,x,f,s.allowVerticalPlacement),ae=s.textSizeData;let he=null;ae.kind==="source"?(he=[aa*g.layout.get("text-size").evaluate(x,{})],he[0]>Zl&&Fe(`${s.layerIds[0]}: Value for "text-size" is >= ${fp}. Reduce your "text-size".`)):ae.kind==="composite"&&(he=[aa*q.compositeTextSizes[0].evaluate(x,{},K),aa*q.compositeTextSizes[1].evaluate(x,{},K)],(he[0]>Zl||he[1]>Zl)&&Fe(`${s.layerIds[0]}: Value for "text-size" is >= ${fp}. Reduce your "text-size".`)),s.addSymbols(s.text,Y,he,w,v,x,I,o,E.lineStartIndex,E.lineLength,F,K);for(const ke of M)O[ke]=s.text.placedSymbolArray.length-1;return 4*Y.length}function bC(s){for(const o in s)return s[o];return null}function Y3(s,o,l,f){const g=s.compareText;if(o in g){const v=g[o];for(let x=v.length-1;x>=0;x--)if(f.dist(v[x])<l)return!0}else g[o]=[];return g[o].push(f),!1}const wC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class p1{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(o,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const v=wC[15&f];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(o,2,1),[w]=new Uint32Array(o,4,1);return new p1(w,x,v,o)}constructor(o,l=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const v=wC.indexOf(this.ArrayType),x=2*o*this.ArrayType.BYTES_PER_ELEMENT,w=o*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+w+E,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+E),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+w+E,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=o)}add(o,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=l,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return m1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,l,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,E=[0,v.length-1,0],I=[];for(;E.length;){const M=E.pop()||0,O=E.pop()||0,F=E.pop()||0;if(O-F<=w){for(let ae=F;ae<=O;ae++){const he=x[2*ae],ke=x[2*ae+1];he>=o&&he<=f&&ke>=l&&ke<=g&&I.push(v[ae])}continue}const q=F+O>>1,K=x[2*q],Y=x[2*q+1];K>=o&&K<=f&&Y>=l&&Y<=g&&I.push(v[q]),(M===0?o<=K:l<=Y)&&(E.push(F),E.push(q-1),E.push(1-M)),(M===0?f>=K:g>=Y)&&(E.push(q+1),E.push(O),E.push(1-M))}return I}within(o,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:x}=this,w=[0,g.length-1,0],E=[],I=f*f;for(;w.length;){const M=w.pop()||0,O=w.pop()||0,F=w.pop()||0;if(O-F<=x){for(let ae=F;ae<=O;ae++)TC(v[2*ae],v[2*ae+1],o,l)<=I&&E.push(g[ae]);continue}const q=F+O>>1,K=v[2*q],Y=v[2*q+1];TC(K,Y,o,l)<=I&&E.push(g[q]),(M===0?o-f<=K:l-f<=Y)&&(w.push(F),w.push(q-1),w.push(1-M)),(M===0?o+f>=K:l+f>=Y)&&(w.push(q+1),w.push(O),w.push(1-M))}return E}}function m1(s,o,l,f,g,v){if(g-f<=l)return;const x=f+g>>1;SC(s,o,x,f,g,v),m1(s,o,l,f,x-1,1-v),m1(s,o,l,x+1,g,1-v)}function SC(s,o,l,f,g,v){for(;g>f;){if(g-f>600){const I=g-f+1,M=l-f+1,O=Math.log(I),F=.5*Math.exp(2*O/3),q=.5*Math.sqrt(O*F*(I-F)/I)*(M-I/2<0?-1:1);SC(s,o,l,Math.max(f,Math.floor(l-M*F/I+q)),Math.min(g,Math.floor(l+(I-M)*F/I+q)),v)}const x=o[2*l+v];let w=f,E=g;for(gp(s,o,f,l),o[2*g+v]>x&&gp(s,o,f,g);w<E;){for(gp(s,o,w,E),w++,E--;o[2*w+v]<x;)w++;for(;o[2*E+v]>x;)E--}o[2*f+v]===x?gp(s,o,f,E):(E++,gp(s,o,E,g)),E<=l&&(f=E+1),l<=E&&(g=E-1)}}function gp(s,o,l,f){g1(s,l,f),g1(o,2*l,2*f),g1(o,2*l+1,2*f+1)}function g1(s,o,l){const f=s[o];s[o]=s[l],s[l]=f}function TC(s,o,l,f){const g=s-l,v=o-f;return g*g+v*v}var y1;d.bg=void 0,(y1=d.bg||(d.bg={})).create="create",y1.load="load",y1.fullLoad="fullLoad";let fy=null,yp=[];const _1=1e3/60,v1="loadTime",x1="fullLoadTime",J3={mark(s){performance.mark(s)},frame(s){const o=s;fy!=null&&yp.push(o-fy),fy=o},clearMetrics(){fy=null,yp=[],performance.clearMeasures(v1),performance.clearMeasures(x1);for(const s in d.bg)performance.clearMarks(d.bg[s])},getPerformanceMetrics(){performance.measure(v1,d.bg.create,d.bg.load),performance.measure(x1,d.bg.create,d.bg.fullLoad);const s=performance.getEntriesByName(v1)[0].duration,o=performance.getEntriesByName(x1)[0].duration,l=yp.length,f=1/(yp.reduce((v,x)=>v+x,0)/l/1e3),g=yp.filter(v=>v>_1).reduce((v,x)=>v+(x-_1)/_1,0);return{loadTime:s,fullLoadTime:o,fps:f,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};d.$=class extends D{},d.A=Fh,d.B=kx,d.C=function(s){if(it==null){const o=s.navigator?s.navigator.userAgent:null;it=!!s.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return it},d.D=Pt,d.E=hr,d.F=class{constructor(s,o){this.target=s,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new V3(()=>this.process()),this.subscription=function(l,f,g,v){return l.addEventListener(f,g,!1),{unsubscribe:()=>{l.removeEventListener(f,g,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Xe(self)?s:window}registerMessageHandler(s,o){this.messageHandlers[s]=o}sendAsync(s,o){return new Promise((l,f)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:l,reject:f},o&&o.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const w={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const v=[],x=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:zl(s.data,v)});this.target.postMessage(x,{transfer:v})})}receive(s){const o=s.data,l=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[l];const f=this.abortControllers[l];return delete this.abortControllers[l],void(f&&f.abort())}if(Xe(self)||o.mustQueue)return this.tasks[l]=o,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,o)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),o=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(s,o)}processTask(s,o){return u(this,void 0,void 0,function*(){if(o.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(o.error?g.reject(Fl(o.error)):g.resolve(Fl(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Fl(o.data),f=new AbortController;this.abortControllers[s]=f;try{const g=yield this.messageHandlers[o.type](o.sourceMapId,l,f);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,o,l){const f=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?zl(o):null,data:zl(l,f)};this.target.postMessage(g,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.G=lr,d.H=function(){var s=new Fh(16);return Fh!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},d.I=t1,d.J=function(s,o,l){var f,g,v,x,w,E,I,M,O,F,q,K,Y=l[0],ae=l[1],he=l[2];return o===s?(s[12]=o[0]*Y+o[4]*ae+o[8]*he+o[12],s[13]=o[1]*Y+o[5]*ae+o[9]*he+o[13],s[14]=o[2]*Y+o[6]*ae+o[10]*he+o[14],s[15]=o[3]*Y+o[7]*ae+o[11]*he+o[15]):(g=o[1],v=o[2],x=o[3],w=o[4],E=o[5],I=o[6],M=o[7],O=o[8],F=o[9],q=o[10],K=o[11],s[0]=f=o[0],s[1]=g,s[2]=v,s[3]=x,s[4]=w,s[5]=E,s[6]=I,s[7]=M,s[8]=O,s[9]=F,s[10]=q,s[11]=K,s[12]=f*Y+w*ae+O*he+o[12],s[13]=g*Y+E*ae+F*he+o[13],s[14]=v*Y+I*ae+q*he+o[14],s[15]=x*Y+M*ae+K*he+o[15]),s},d.K=function(s,o,l){var f=l[0],g=l[1],v=l[2];return s[0]=o[0]*f,s[1]=o[1]*f,s[2]=o[2]*f,s[3]=o[3]*f,s[4]=o[4]*g,s[5]=o[5]*g,s[6]=o[6]*g,s[7]=o[7]*g,s[8]=o[8]*v,s[9]=o[9]*v,s[10]=o[10]*v,s[11]=o[11]*v,s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},d.L=iE,d.M=function(s,o){const l={};for(let f=0;f<o.length;f++){const g=o[f];g in s&&(l[g]=s[g])}return l},d.N=Kl,d.O=QE,d.P=P,d.Q=eC,d.R=Fo,d.S=Bo,d.T=Ah,d.U=B,d.V=H,d.W=Ye,d.X=Nn,d.Y=S,d.Z=pp,d._=u,d.a=zt,d.a$=function(s,o){var l=s[0],f=s[1],g=s[2],v=s[3],x=s[4],w=s[5],E=s[6],I=s[7],M=s[8],O=s[9],F=s[10],q=s[11],K=s[12],Y=s[13],ae=s[14],he=s[15],ke=o[0],xe=o[1],Ce=o[2],De=o[3],Je=o[4],_t=o[5],jt=o[6],gt=o[7],dt=o[8],Mt=o[9],At=o[10],bt=o[11],je=o[12],Ot=o[13],Rt=o[14],Xt=o[15];return Math.abs(l-ke)<=Fi*Math.max(1,Math.abs(l),Math.abs(ke))&&Math.abs(f-xe)<=Fi*Math.max(1,Math.abs(f),Math.abs(xe))&&Math.abs(g-Ce)<=Fi*Math.max(1,Math.abs(g),Math.abs(Ce))&&Math.abs(v-De)<=Fi*Math.max(1,Math.abs(v),Math.abs(De))&&Math.abs(x-Je)<=Fi*Math.max(1,Math.abs(x),Math.abs(Je))&&Math.abs(w-_t)<=Fi*Math.max(1,Math.abs(w),Math.abs(_t))&&Math.abs(E-jt)<=Fi*Math.max(1,Math.abs(E),Math.abs(jt))&&Math.abs(I-gt)<=Fi*Math.max(1,Math.abs(I),Math.abs(gt))&&Math.abs(M-dt)<=Fi*Math.max(1,Math.abs(M),Math.abs(dt))&&Math.abs(O-Mt)<=Fi*Math.max(1,Math.abs(O),Math.abs(Mt))&&Math.abs(F-At)<=Fi*Math.max(1,Math.abs(F),Math.abs(At))&&Math.abs(q-bt)<=Fi*Math.max(1,Math.abs(q),Math.abs(bt))&&Math.abs(K-je)<=Fi*Math.max(1,Math.abs(K),Math.abs(je))&&Math.abs(Y-Ot)<=Fi*Math.max(1,Math.abs(Y),Math.abs(Ot))&&Math.abs(ae-Rt)<=Fi*Math.max(1,Math.abs(ae),Math.abs(Rt))&&Math.abs(he-Xt)<=Fi*Math.max(1,Math.abs(he),Math.abs(Xt))},d.a0=xr,d.a1=h1,d.a2=He,d.a3=s=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(l=>{o.onloadstart=()=>{l(o)};for(const f of s){const g=window.document.createElement("source");Zt(f)||(o.crossOrigin="Anonymous"),g.src=f,o.appendChild(g)}})},d.a4=function(){return ie++},d.a5=yt,d.a6=Vh,d.a7=Of,d.a8=ec,d.a9=sC,d.aA=function(s){if(s.type==="custom")return new U3(s);switch(s.type){case"background":return new N3(s);case"circle":return new Cz(s);case"fill":return new Vz(s);case"fill-extrusion":return new i3(s);case"heatmap":return new kz(s);case"hillshade":return new Iz(s);case"line":return new d3(s);case"raster":return new j3(s);case"symbol":return new ly(s)}},d.aB=Te,d.aC=function(s,o){if(!s)return[{command:"setStyle",args:[o]}];let l=[];try{if(!Vt(s.version,o.version))return[{command:"setStyle",args:[o]}];Vt(s.center,o.center)||l.push({command:"setCenter",args:[o.center]}),Vt(s.zoom,o.zoom)||l.push({command:"setZoom",args:[o.zoom]}),Vt(s.bearing,o.bearing)||l.push({command:"setBearing",args:[o.bearing]}),Vt(s.pitch,o.pitch)||l.push({command:"setPitch",args:[o.pitch]}),Vt(s.sprite,o.sprite)||l.push({command:"setSprite",args:[o.sprite]}),Vt(s.glyphs,o.glyphs)||l.push({command:"setGlyphs",args:[o.glyphs]}),Vt(s.transition,o.transition)||l.push({command:"setTransition",args:[o.transition]}),Vt(s.light,o.light)||l.push({command:"setLight",args:[o.light]}),Vt(s.terrain,o.terrain)||l.push({command:"setTerrain",args:[o.terrain]}),Vt(s.sky,o.sky)||l.push({command:"setSky",args:[o.sky]}),Vt(s.projection,o.projection)||l.push({command:"setProjection",args:[o.projection]});const f={},g=[];(function(x,w,E,I){let M;for(M in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(w,M)||Me(M,E,I));for(M in w)Object.prototype.hasOwnProperty.call(w,M)&&(Object.prototype.hasOwnProperty.call(x,M)?Vt(x[M],w[M])||(x[M].type==="geojson"&&w[M].type==="geojson"&&mt(x,w,M)?_r(E,{command:"setGeoJSONSourceData",args:[M,w[M].data]}):$e(M,w,E,I)):Sr(M,w,E))})(s.sources,o.sources,g,f);const v=[];s.layers&&s.layers.forEach(x=>{"source"in x&&f[x.source]?l.push({command:"removeLayer",args:[x.id]}):v.push(x)}),l=l.concat(g),function(x,w,E){w=w||[];const I=(x=x||[]).map(Ft),M=w.map(Ft),O=x.reduce(tr,{}),F=w.reduce(tr,{}),q=I.slice(),K=Object.create(null);let Y,ae,he,ke,xe;for(let Ce=0,De=0;Ce<I.length;Ce++)Y=I[Ce],Object.prototype.hasOwnProperty.call(F,Y)?De++:(_r(E,{command:"removeLayer",args:[Y]}),q.splice(q.indexOf(Y,De),1));for(let Ce=0,De=0;Ce<M.length;Ce++)Y=M[M.length-1-Ce],q[q.length-1-Ce]!==Y&&(Object.prototype.hasOwnProperty.call(O,Y)?(_r(E,{command:"removeLayer",args:[Y]}),q.splice(q.lastIndexOf(Y,q.length-De),1)):De++,ke=q[q.length-Ce],_r(E,{command:"addLayer",args:[F[Y],ke]}),q.splice(q.length-Ce,0,Y),K[Y]=!0);for(let Ce=0;Ce<M.length;Ce++)if(Y=M[Ce],ae=O[Y],he=F[Y],!K[Y]&&!Vt(ae,he))if(Vt(ae.source,he.source)&&Vt(ae["source-layer"],he["source-layer"])&&Vt(ae.type,he.type)){for(xe in kt(ae.layout,he.layout,E,Y,null,"setLayoutProperty"),kt(ae.paint,he.paint,E,Y,null,"setPaintProperty"),Vt(ae.filter,he.filter)||_r(E,{command:"setFilter",args:[Y,he.filter]}),Vt(ae.minzoom,he.minzoom)&&Vt(ae.maxzoom,he.maxzoom)||_r(E,{command:"setLayerZoomRange",args:[Y,he.minzoom,he.maxzoom]}),ae)Object.prototype.hasOwnProperty.call(ae,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?kt(ae[xe],he[xe],E,Y,xe.slice(6),"setPaintProperty"):Vt(ae[xe],he[xe])||_r(E,{command:"setLayerProperty",args:[Y,xe,he[xe]]}));for(xe in he)Object.prototype.hasOwnProperty.call(he,xe)&&!Object.prototype.hasOwnProperty.call(ae,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?kt(ae[xe],he[xe],E,Y,xe.slice(6),"setPaintProperty"):Vt(ae[xe],he[xe])||_r(E,{command:"setLayerProperty",args:[Y,xe,he[xe]]}))}else _r(E,{command:"removeLayer",args:[Y]}),ke=q[q.lastIndexOf(Y)+1],_r(E,{command:"addLayer",args:[he,ke]})}(v,o.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:"setStyle",args:[o]}]}return l},d.aD=function(s){const o=[],l=s.id;return l===void 0&&o.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&o.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},d.aE=function s(o,l){if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(let f=0;f<o.length;f++)if(!s(o[f],l[f]))return!1;return!0}if(typeof o=="object"&&o!==null&&l!==null){if(typeof l!="object"||Object.keys(o).length!==Object.keys(l).length)return!1;for(const f in o)if(!s(o[f],l[f]))return!1;return!0}return o===l},d.aF=Re,d.aG=Z,d.aH=class extends Yu{constructor(s,o){super(s,o),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},d.aI=Kg,d.aJ=class extends Yu{constructor(s,o){super(s,o),this.current=_z}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let o=1;o<16;o++)if(s[o]!==this.current[o]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},d.aK=GT,d.aL=ZT,d.aM=Jt,d.aN=class extends Yu{constructor(s,o){super(s,o),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},d.aO=class extends Yu{constructor(s,o){super(s,o),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},d.aP=function(s,o,l,f,g,v,x){var w=1/(o-l),E=1/(f-g),I=1/(v-x);return s[0]=-2*w,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*I,s[11]=0,s[12]=(o+l)*w,s[13]=(g+f)*E,s[14]=(x+v)*I,s[15]=1,s},d.aQ=Ez,d.aR=class extends we{},d.aS=g3,d.aT=class extends Pe{},d.aU=Vx,d.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},d.aW=uE,d.aX=ui,d.aY=zo,d.aZ=class extends It{},d.a_=function(s,o){return s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]&&s[3]===o[3]&&s[4]===o[4]&&s[5]===o[5]&&s[6]===o[6]&&s[7]===o[7]&&s[8]===o[8]&&s[9]===o[9]&&s[10]===o[10]&&s[11]===o[11]&&s[12]===o[12]&&s[13]===o[13]&&s[14]===o[14]&&s[15]===o[15]},d.aa=function(s){const o={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,g,v)=>{const x=g||v;return o[f]=!x||x.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o},d.ab=function(s,o){const l=[];for(const f in s)f in o||l.push(f);return l},d.ac=me,d.ad=function(s,o,l){var f=Math.sin(l),g=Math.cos(l),v=o[0],x=o[1],w=o[2],E=o[3],I=o[4],M=o[5],O=o[6],F=o[7];return o!==s&&(s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]),s[0]=v*g+I*f,s[1]=x*g+M*f,s[2]=w*g+O*f,s[3]=E*g+F*f,s[4]=I*g-v*f,s[5]=M*g-x*f,s[6]=O*g-w*f,s[7]=F*g-E*f,s},d.ae=function(s){var o=new Fh(16);return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o},d.af=Qg,d.ag=function(s,o){let l=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:v,maxZoom:x}=s,w=g?me(Di.interpolationFactor(g,o,v,x),0,1):0;s.kind==="camera"?f=Oi.number(s.minSize,s.maxSize,w):l=w}return{uSizeT:l,uSize:f}},d.ai=function(s,{uSize:o,uSizeT:l},{lowerSize:f,upperSize:g}){return s.kind==="source"?f/aa:s.kind==="composite"?Oi.number(f/aa,g/aa,l):o},d.aj=o1,d.ak=function(s,o,l,f){const g=o.y-s.y,v=o.x-s.x,x=f.y-l.y,w=f.x-l.x,E=x*v-w*g;if(E===0)return null;const I=(w*(s.y-l.y)-x*(s.x-l.x))/E;return new P(s.x+I*v,s.y+I*g)},d.al=cC,d.am=JT,d.an=$x,d.ao=function(s){let o=1/0,l=1/0,f=-1/0,g=-1/0;for(const v of s)o=Math.min(o,v.x),l=Math.min(l,v.y),f=Math.max(f,v.x),g=Math.max(g,v.y);return[o,l,f,g]},d.ap=Hn,d.ar=i1,d.as=function(s,o){var l=o[0],f=o[1],g=o[2],v=o[3],x=o[4],w=o[5],E=o[6],I=o[7],M=o[8],O=o[9],F=o[10],q=o[11],K=o[12],Y=o[13],ae=o[14],he=o[15],ke=l*w-f*x,xe=l*E-g*x,Ce=l*I-v*x,De=f*E-g*w,Je=f*I-v*w,_t=g*I-v*E,jt=M*Y-O*K,gt=M*ae-F*K,dt=M*he-q*K,Mt=O*ae-F*Y,At=O*he-q*Y,bt=F*he-q*ae,je=ke*bt-xe*At+Ce*Mt+De*dt-Je*gt+_t*jt;return je?(s[0]=(w*bt-E*At+I*Mt)*(je=1/je),s[1]=(g*At-f*bt-v*Mt)*je,s[2]=(Y*_t-ae*Je+he*De)*je,s[3]=(F*Je-O*_t-q*De)*je,s[4]=(E*dt-x*bt-I*gt)*je,s[5]=(l*bt-g*dt+v*gt)*je,s[6]=(ae*Ce-K*_t-he*xe)*je,s[7]=(M*_t-F*Ce+q*xe)*je,s[8]=(x*At-w*dt+I*jt)*je,s[9]=(f*dt-l*At-v*jt)*je,s[10]=(K*Je-Y*Ce+he*ke)*je,s[11]=(O*Ce-M*Je-q*ke)*je,s[12]=(w*gt-x*Mt-E*jt)*je,s[13]=(l*Mt-f*gt+g*jt)*je,s[14]=(Y*xe-K*De-ae*ke)*je,s[15]=(M*De-O*xe+F*ke)*je,s):null},d.at=f1,d.au=n1,d.av=p1,d.aw=function(){const s={},o=Ie.$version;for(const l in Ie.$root){const f=Ie.$root[l];if(f.required){let g=null;g=l==="version"?o:f.type==="array"?[]:{},g!=null&&(s[l]=g)}}return s},d.ax=Zf,d.ay=br,d.az=function(s){s=s.slice();const o=Object.create(null);for(let l=0;l<s.length;l++)o[s[l].id]=s[l];for(let l=0;l<s.length;l++)"ref"in s[l]&&(s[l]=Rr(s[l],o[s[l].ref]));return s},d.b=Et,d.b0=function(s,o){return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},d.b1=function(s,o,l){return s[0]=o[0]*l[0],s[1]=o[1]*l[1],s[2]=o[2]*l[2],s[3]=o[3]*l[3],s},d.b2=function(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3]},d.b3=fe,d.b4=nC,d.b5=tC,d.b6=function(s,o,l,f,g){var v,x=1/Math.tan(o/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+f)*(v=1/(f-g)),s[14]=2*g*f*v):(s[10]=-1,s[14]=-2*f),s},d.b7=function(s,o,l){var f=Math.sin(l),g=Math.cos(l),v=o[4],x=o[5],w=o[6],E=o[7],I=o[8],M=o[9],O=o[10],F=o[11];return o!==s&&(s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]),s[4]=v*g+I*f,s[5]=x*g+M*f,s[6]=w*g+O*f,s[7]=E*g+F*f,s[8]=I*g-v*f,s[9]=M*g-x*f,s[10]=O*g-w*f,s[11]=F*g-E*f,s},d.b8=V,d.b9=te,d.bA=PE,d.bB=function(s){return s.message===Lt},d.bC=Pl,d.bD=Yi,d.ba=function(s){return s*Math.PI/180},d.bb=function(s,o){const{x:l,y:f}=pp.fromLngLat(o);return!(s<0||s>25||f<0||f>=1||l<0||l>=1)},d.bc=function(s,o){return s[0]=o[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=o[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},d.bd=class extends L{},d.be=u1,d.bf=J3,d.bh=sr,d.bi=function(s,o){zt.REGISTERED_PROTOCOLS[s]=o},d.bj=function(s){delete zt.REGISTERED_PROTOCOLS[s]},d.bk=function(s,o){const l={};for(let g=0;g<s.length;g++){const v=o&&o[s[g].id]||Fg(s[g]);o&&(o[s[g].id]=v);let x=l[v];x||(x=l[v]=[]),x.push(s[g])}const f=[];for(const g in l)f.push(l[g]);return f},d.bl=Tt,d.bm=oC,d.bn=aC,d.bo=BE,d.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Nn/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const o=s.bucket.layers[0],l=o.layout,f=o._unevaluatedLayout._values,g={layoutIconSize:f["icon-size"].possiblyEvaluate(new Qr(s.bucket.zoom+1),s.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Qr(s.bucket.zoom+1),s.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Qr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:M}=s.bucket.textSizeData;g.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Qr(I),s.canonical),f["text-size"].possiblyEvaluate(new Qr(M),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:M}=s.bucket.iconSizeData;g.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Qr(I),s.canonical),f["icon-size"].possiblyEvaluate(new Qr(M),s.canonical)]}const v=l.get("text-line-height")*Hn,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",w=l.get("text-keep-upright"),E=l.get("text-size");for(const I of s.bucket.features){const M=l.get("text-font").evaluate(I,{},s.canonical).join(","),O=E.evaluate(I,{},s.canonical),F=g.layoutTextSize.evaluate(I,{},s.canonical),q=g.layoutIconSize.evaluate(I,{},s.canonical),K={horizontal:{},vertical:void 0},Y=I.text;let ae,he=[0,0];if(Y){const Ce=Y.toString(),De=l.get("text-letter-spacing").evaluate(I,{},s.canonical)*Hn,Je=Px(Ce)?De:0,_t=l.get("text-anchor").evaluate(I,{},s.canonical),jt=vC(o,I,s.canonical);if(!jt){const At=l.get("text-radial-offset").evaluate(I,{},s.canonical);he=At?_C(_t,[At*Hn,d1]):l.get("text-offset").evaluate(I,{},s.canonical).map(bt=>bt*Hn)}let gt=x?"center":l.get("text-justify").evaluate(I,{},s.canonical);const dt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(I,{},s.canonical)*Hn:1/0,Mt=()=>{s.bucket.allowVerticalPlacement&&Kf(Ce)&&(K.vertical=oy(Y,s.glyphMap,s.glyphPositions,s.imagePositions,M,dt,v,_t,"left",Je,he,d.ah.vertical,!0,F,O))};if(!x&&jt){const At=new Set;if(gt==="auto")for(let je=0;je<jt.values.length;je+=2)At.add(f1(jt.values[je]));else At.add(gt);let bt=!1;for(const je of At)if(!K.horizontal[je])if(bt)K.horizontal[je]=K.horizontal[0];else{const Ot=oy(Y,s.glyphMap,s.glyphPositions,s.imagePositions,M,dt,v,"center",je,Je,he,d.ah.horizontal,!1,F,O);Ot&&(K.horizontal[je]=Ot,bt=Ot.positionedLines.length===1)}Mt()}else{gt==="auto"&&(gt=f1(_t));const At=oy(Y,s.glyphMap,s.glyphPositions,s.imagePositions,M,dt,v,_t,gt,Je,he,d.ah.horizontal,!1,F,O);At&&(K.horizontal[gt]=At),Mt(),Kf(Ce)&&x&&w&&(K.vertical=oy(Y,s.glyphMap,s.glyphPositions,s.imagePositions,M,dt,v,_t,gt,Je,he,d.ah.vertical,!1,F,O))}}let ke=!1;if(I.icon&&I.icon.name){const Ce=s.imageMap[I.icon.name];Ce&&(ae=O3(s.imagePositions[I.icon.name],l.get("icon-offset").evaluate(I,{},s.canonical),l.get("icon-anchor").evaluate(I,{},s.canonical)),ke=!!Ce.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ke:s.bucket.sdfIcons!==ke&&Fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==s.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const xe=bC(K.horizontal)||K.vertical;s.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||ae)&&X3(s.bucket,I,K,ae,s.imageMap,g,F,q,he,ke,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},d.bq=Yx,d.br=Zx,d.bs=Xx,d.bt=Wl,d.bu=Qx,d.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},d.bw=function(s,o,l,f,g){return u(this,void 0,void 0,function*(){if(H())try{return yield Ye(s,o,l,f,g)}catch{}return function(v,x,w,E,I){const M=v.width,O=v.height;vt&&Ct||(vt=new OffscreenCanvas(M,O),Ct=vt.getContext("2d",{willReadFrequently:!0})),vt.width=M,vt.height=O,Ct.drawImage(v,0,0,M,O);const F=Ct.getImageData(x,w,E,I);return Ct.clearRect(0,0,M,O),F.data}(s,o,l,f,g)})},d.bx=iC,d.by=b,d.bz=T,d.c=Nt,d.d=s=>u(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(o)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=ge,d.f=s=>new Promise((o,l)=>{const f=new Image;f.onload=()=>{o(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=Ne})},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});f.src=s.byteLength?URL.createObjectURL(g):Ne}),d.g=er,d.h=(s,o)=>Ar(ge(s,{type:"json"}),o),d.i=Xe,d.j=$t,d.k=Fr,d.l=(s,o)=>Ar(ge(s,{type:"arrayBuffer"}),o),d.m=Ar,d.n=function(s){return new Qx(s).readFields(A3,[])},d.o=ip,d.p=FE,d.q=_,d.r=Ax,d.s=Zt,d.t=Wf,d.u=Ha,d.v=Ie,d.w=Fe,d.x=function([s,o,l]){return o+=90,o*=Math.PI/180,l*=Math.PI/180,{x:s*Math.cos(o)*Math.sin(l),y:s*Math.sin(o)*Math.sin(l),z:s*Math.cos(l)}},d.y=Oi,d.z=Qr}),a("worker",["./shared"],function(d){class u{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,$){for(const oe of N){this._layerConfigs[oe.id]=oe;const ve=this._layers[oe.id]=d.aA(oe);ve._featureFilter=d.a7(ve.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of $)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const J=d.bk(Object.values(this._layerConfigs),this.keyCache);for(const oe of J){const ve=oe.map(Le=>this._layers[Le.id]),Se=ve[0];if(Se.visibility==="none")continue;const Ae=Se.source||"";let ye=this.familiesBySource[Ae];ye||(ye=this.familiesBySource[Ae]={});const Oe=Se.sourceLayer||"_geojsonTileLayer";let Ge=ye[Oe];Ge||(Ge=ye[Oe]=[]),Ge.push(ve)}}}class b{constructor(N){const $={},J=[];for(const Ae in N){const ye=N[Ae],Oe=$[Ae]={};for(const Ge in ye){const Le=ye[+Ge];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const ne={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};J.push(ne),Oe[Ge]={rect:ne,metrics:Le.metrics}}}const{w:oe,h:ve}=d.p(J),Se=new d.o({width:oe||1,height:ve||1});for(const Ae in N){const ye=N[Ae];for(const Oe in ye){const Ge=ye[+Oe];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;const Le=$[Ae][Oe].rect;d.o.copy(Ge.bitmap,Se,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Ge.bitmap)}}this.image=Se,this.positions=$}}d.bl("GlyphAtlas",b);class T{constructor(N){this.tileID=new d.S(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId,this.inFlightDependencies=[]}parse(N,$,J,oe){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=N,this.collisionBoxArray=new d.a5;const ve=new d.bm(Object.keys(N.layers).sort()),Se=new d.bn(this.tileID,this.promoteId);Se.bucketLayerIDs=[];const Ae={},ye={featureIndex:Se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Oe=$.familiesBySource[this.source];for(const Qe in Oe){const ut=N.layers[Qe];if(!ut)continue;ut.version===1&&d.w(`Vector tile source "${this.source}" layer "${Qe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qt=ve.encode(Qe),or=[];for(let dr=0;dr<ut.length;dr++){const nr=ut.feature(dr),un=Se.getId(nr,Qe);or.push({feature:nr,id:un,index:dr,sourceLayerIndex:qt})}for(const dr of Oe[Qe]){const nr=dr[0];nr.source!==this.source&&d.w(`layer.source = ${nr.source} does not equal this.source = ${this.source}`),nr.minzoom&&this.zoom<Math.floor(nr.minzoom)||nr.maxzoom&&this.zoom>=nr.maxzoom||nr.visibility!=="none"&&(A(dr,this.zoom,J),(Ae[nr.id]=nr.createBucket({index:Se.bucketLayerIDs.length,layers:dr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qt,sourceID:this.source})).populate(or,ye,this.tileID.canonical),Se.bucketLayerIDs.push(dr.map(un=>un.id)))}}const Ge=d.aF(ye.glyphDependencies,Qe=>Object.keys(Qe).map(Number));this.inFlightDependencies.forEach(Qe=>Qe==null?void 0:Qe.abort()),this.inFlightDependencies=[];let Le=Promise.resolve({});if(Object.keys(Ge).length){const Qe=new AbortController;this.inFlightDependencies.push(Qe),Le=oe.sendAsync({type:"GG",data:{stacks:Ge,source:this.source,tileID:this.tileID,type:"glyphs"}},Qe)}const ne=Object.keys(ye.iconDependencies);let ce=Promise.resolve({});if(ne.length){const Qe=new AbortController;this.inFlightDependencies.push(Qe),ce=oe.sendAsync({type:"GI",data:{icons:ne,source:this.source,tileID:this.tileID,type:"icons"}},Qe)}const be=Object.keys(ye.patternDependencies);let ze=Promise.resolve({});if(be.length){const Qe=new AbortController;this.inFlightDependencies.push(Qe),ze=oe.sendAsync({type:"GI",data:{icons:be,source:this.source,tileID:this.tileID,type:"patterns"}},Qe)}const[Ke,ot,ft]=yield Promise.all([Le,ce,ze]),nt=new b(Ke),St=new d.bo(ot,ft);for(const Qe in Ae){const ut=Ae[Qe];ut instanceof d.a6?(A(ut.layers,this.zoom,J),d.bp({bucket:ut,glyphMap:Ke,glyphPositions:nt.positions,imageMap:ot,imagePositions:St.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ut.hasPattern&&(ut instanceof d.bq||ut instanceof d.br||ut instanceof d.bs)&&(A(ut.layers,this.zoom,J),ut.addFeatures(ye,this.tileID.canonical,St.patternPositions))}return this.status="done",{buckets:Object.values(Ae).filter(Qe=>!Qe.isEmpty()),featureIndex:Se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nt.image,imageAtlas:St,glyphMap:this.returnDependencies?Ke:null,iconMap:this.returnDependencies?ot:null,glyphPositions:this.returnDependencies?nt.positions:null}})}}function A(ue,N,$){const J=new d.z(N);for(const oe of ue)oe.recalculate(J,$)}class P{constructor(N,$,J){this.actor=N,this.layerIndex=$,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(N,$){return d._(this,void 0,void 0,function*(){const J=yield d.l(N.request,$);try{return{vectorTile:new d.bt.VectorTile(new d.bu(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(oe){const ve=new Uint8Array(J.data);let Se=`Unable to parse the tile at ${N.request.url}, `;throw Se+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${oe.message}`,new Error(Se)}})}loadTile(N){return d._(this,void 0,void 0,function*(){const $=N.uid,J=!!(N&&N.request&&N.request.collectResourceTiming)&&new d.bv(N.request),oe=new T(N);this.loading[$]=oe;const ve=new AbortController;oe.abort=ve;try{const Se=yield this.loadVectorTile(N,ve);if(delete this.loading[$],!Se)return null;const Ae=Se.rawData,ye={};Se.expires&&(ye.expires=Se.expires),Se.cacheControl&&(ye.cacheControl=Se.cacheControl);const Oe={};if(J){const Le=J.finish();Le&&(Oe.resourceTiming=JSON.parse(JSON.stringify(Le)))}oe.vectorTile=Se.vectorTile;const Ge=oe.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[$]=oe,this.fetching[$]={rawTileData:Ae,cacheControl:ye,resourceTiming:Oe};try{const Le=yield Ge;return d.e({rawTileData:Ae.slice(0)},Le,ye,Oe)}finally{delete this.fetching[$]}}catch(Se){throw delete this.loading[$],oe.status="done",this.loaded[$]=oe,Se}})}reloadTile(N){return d._(this,void 0,void 0,function*(){const $=N.uid;if(!this.loaded||!this.loaded[$])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const J=this.loaded[$];if(J.showCollisionBoxes=N.showCollisionBoxes,J.status==="parsing"){const oe=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[$]){const{rawTileData:Se,cacheControl:Ae,resourceTiming:ye}=this.fetching[$];delete this.fetching[$],ve=d.e({rawTileData:Se.slice(0)},oe,Ae,ye)}else ve=oe;return ve}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(N){return d._(this,void 0,void 0,function*(){const $=this.loading,J=N.uid;$&&$[J]&&$[J].abort&&($[J].abort.abort(),delete $[J])})}removeTile(N){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[N.uid]&&delete this.loaded[N.uid]})}}class R{constructor(){this.loaded={}}loadTile(N){return d._(this,void 0,void 0,function*(){const{uid:$,encoding:J,rawImageData:oe,redFactor:ve,greenFactor:Se,blueFactor:Ae,baseShift:ye}=N,Oe=oe.width+2,Ge=oe.height+2,Le=d.b(oe)?new d.R({width:Oe,height:Ge},yield d.bw(oe,-1,-1,Oe,Ge)):oe,ne=new d.bx($,Le,J,ve,Se,Ae,ye);return this.loaded=this.loaded||{},this.loaded[$]=ne,ne})}removeTile(N){const $=this.loaded,J=N.uid;$&&$[J]&&delete $[J]}}function U(ue,N){if(ue.length!==0){j(ue[0],N);for(var $=1;$<ue.length;$++)j(ue[$],!N)}}function j(ue,N){for(var $=0,J=0,oe=0,ve=ue.length,Se=ve-1;oe<ve;Se=oe++){var Ae=(ue[oe][0]-ue[Se][0])*(ue[Se][1]+ue[oe][1]),ye=$+Ae;J+=Math.abs($)>=Math.abs(Ae)?$-ye+Ae:Ae-ye+$,$=ye}$+J>=0!=!!N&&ue.reverse()}var W=d.by(function ue(N,$){var J,oe=N&&N.type;if(oe==="FeatureCollection")for(J=0;J<N.features.length;J++)ue(N.features[J],$);else if(oe==="GeometryCollection")for(J=0;J<N.geometries.length;J++)ue(N.geometries[J],$);else if(oe==="Feature")ue(N.geometry,$);else if(oe==="Polygon")U(N.coordinates,$);else if(oe==="MultiPolygon")for(J=0;J<N.coordinates.length;J++)U(N.coordinates[J],$);return N});const ee=d.bt.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},H=d.bz,V=d.bt.VectorTileFeature,te=me;function me(ue,N){this.options=N||{},this.features=ue,this.length=ue.length}function fe(ue,N){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=N||4096}me.prototype.feature=function(ue){return new fe(this.features[ue],this.options.extent)},fe.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var N=0;N<ue.length;N++){for(var $=ue[N],J=[],oe=0;oe<$.length;oe++)J.push(new H($[oe][0],$[oe][1]));this.geometry.push(J)}return this.geometry},fe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,N=1/0,$=-1/0,J=1/0,oe=-1/0,ve=0;ve<ue.length;ve++)for(var Se=ue[ve],Ae=0;Ae<Se.length;Ae++){var ye=Se[Ae];N=Math.min(N,ye.x),$=Math.max($,ye.x),J=Math.min(J,ye.y),oe=Math.max(oe,ye.y)}return[N,J,$,oe]},fe.prototype.toGeoJSON=V.prototype.toGeoJSON;var ge=d.bA,ie=te;function Re(ue){var N=new ge;return function($,J){for(var oe in $.layers)J.writeMessage(3,Z,$.layers[oe])}(ue,N),N.finish()}function Z(ue,N){var $;N.writeVarintField(15,ue.version||1),N.writeStringField(1,ue.name||""),N.writeVarintField(5,ue.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<ue.length;$++)J.feature=ue.feature($),N.writeMessage(2,Te,J);var oe=J.keys;for($=0;$<oe.length;$++)N.writeStringField(3,oe[$]);var ve=J.values;for($=0;$<ve.length;$++)N.writeMessage(4,it,ve[$])}function Te(ue,N){var $=ue.feature;$.id!==void 0&&N.writeVarintField(1,$.id),N.writeMessage(2,Ue,ue),N.writeVarintField(3,$.type),N.writeMessage(4,Xe,$)}function Ue(ue,N){var $=ue.feature,J=ue.keys,oe=ue.values,ve=ue.keycache,Se=ue.valuecache;for(var Ae in $.properties){var ye=$.properties[Ae],Oe=ve[Ae];if(ye!==null){Oe===void 0&&(J.push(Ae),ve[Ae]=Oe=J.length-1),N.writeVarint(Oe);var Ge=typeof ye;Ge!=="string"&&Ge!=="boolean"&&Ge!=="number"&&(ye=JSON.stringify(ye));var Le=Ge+":"+ye,ne=Se[Le];ne===void 0&&(oe.push(ye),Se[Le]=ne=oe.length-1),N.writeVarint(ne)}}}function Fe(ue,N){return(N<<3)+(7&ue)}function Ze(ue){return ue<<1^ue>>31}function Xe(ue,N){for(var $=ue.loadGeometry(),J=ue.type,oe=0,ve=0,Se=$.length,Ae=0;Ae<Se;Ae++){var ye=$[Ae],Oe=1;J===1&&(Oe=ye.length),N.writeVarint(Fe(1,Oe));for(var Ge=J===3?ye.length-1:ye.length,Le=0;Le<Ge;Le++){Le===1&&J!==1&&N.writeVarint(Fe(2,Ge-1));var ne=ye[Le].x-oe,ce=ye[Le].y-ve;N.writeVarint(Ze(ne)),N.writeVarint(Ze(ce)),oe+=ne,ve+=ce}J===3&&N.writeVarint(Fe(7,1))}}function it(ue,N){var $=typeof ue;$==="string"?N.writeStringField(1,ue):$==="boolean"?N.writeBooleanField(7,ue):$==="number"&&(ue%1!=0?N.writeDoubleField(3,ue):ue<0?N.writeSVarintField(6,ue):N.writeVarintField(5,ue))}B.exports=Re,B.exports.fromVectorTileJs=Re,B.exports.fromGeojsonVt=function(ue,N){N=N||{};var $={};for(var J in ue)$[J]=new ie(ue[J].features,N),$[J].name=J,$[J].version=N.version,$[J].extent=N.extent;return Re({layers:$})},B.exports.GeoJSONWrapper=ie;var Et=d.by(B.exports);const Ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},Ye=Math.fround||(vt=new Float32Array(1),ue=>(vt[0]=+ue,vt[0]));var vt;const Ct=3,Lt=5,Nt=6;class zt{constructor(N){this.options=Object.assign(Object.create(Ne),N),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(N){const{log:$,minZoom:J,maxZoom:oe}=this.options;$&&console.time("total time");const ve=`prepare ${N.length} points`;$&&console.time(ve),this.points=N;const Se=[];for(let ye=0;ye<N.length;ye++){const Oe=N[ye];if(!Oe.geometry)continue;const[Ge,Le]=Oe.geometry.coordinates,ne=Ye(sr(Ge)),ce=Ye(br(Le));Se.push(ne,ce,1/0,ye,-1,1),this.options.reduce&&Se.push(0)}let Ae=this.trees[oe+1]=this._createTree(Se);$&&console.timeEnd(ve);for(let ye=oe;ye>=J;ye--){const Oe=+Date.now();Ae=this.trees[ye]=this._createTree(this._cluster(Ae,ye)),$&&console.log("z%d: %d clusters in %dms",ye,Ae.numItems,+Date.now()-Oe)}return $&&console.timeEnd("total time"),this}getClusters(N,$){let J=((N[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,N[1]));let ve=N[2]===180?180:((N[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)J=-180,ve=180;else if(J>ve){const Le=this.getClusters([J,oe,180,Se],$),ne=this.getClusters([-180,oe,ve,Se],$);return Le.concat(ne)}const Ae=this.trees[this._limitZoom($)],ye=Ae.range(sr(J),br(Se),sr(ve),br(oe)),Oe=Ae.data,Ge=[];for(const Le of ye){const ne=this.stride*Le;Ge.push(Oe[ne+Lt]>1?er(Oe,ne,this.clusterProps):this.points[Oe[ne+Ct]])}return Ge}getChildren(N){const $=this._getOriginId(N),J=this._getOriginZoom(N),oe="No cluster with the specified id.",ve=this.trees[J];if(!ve)throw new Error(oe);const Se=ve.data;if($*this.stride>=Se.length)throw new Error(oe);const Ae=this.options.radius/(this.options.extent*Math.pow(2,J-1)),ye=ve.within(Se[$*this.stride],Se[$*this.stride+1],Ae),Oe=[];for(const Ge of ye){const Le=Ge*this.stride;Se[Le+4]===N&&Oe.push(Se[Le+Lt]>1?er(Se,Le,this.clusterProps):this.points[Se[Le+Ct]])}if(Oe.length===0)throw new Error(oe);return Oe}getLeaves(N,$,J){const oe=[];return this._appendLeaves(oe,N,$=$||10,J=J||0,0),oe}getTile(N,$,J){const oe=this.trees[this._limitZoom(N)],ve=Math.pow(2,N),{extent:Se,radius:Ae}=this.options,ye=Ae/Se,Oe=(J-ye)/ve,Ge=(J+1+ye)/ve,Le={features:[]};return this._addTileFeatures(oe.range(($-ye)/ve,Oe,($+1+ye)/ve,Ge),oe.data,$,J,ve,Le),$===0&&this._addTileFeatures(oe.range(1-ye/ve,Oe,1,Ge),oe.data,ve,J,ve,Le),$===ve-1&&this._addTileFeatures(oe.range(0,Oe,ye/ve,Ge),oe.data,-1,J,ve,Le),Le.features.length?Le:null}getClusterExpansionZoom(N){let $=this._getOriginZoom(N)-1;for(;$<=this.options.maxZoom;){const J=this.getChildren(N);if($++,J.length!==1)break;N=J[0].properties.cluster_id}return $}_appendLeaves(N,$,J,oe,ve){const Se=this.getChildren($);for(const Ae of Se){const ye=Ae.properties;if(ye&&ye.cluster?ve+ye.point_count<=oe?ve+=ye.point_count:ve=this._appendLeaves(N,ye.cluster_id,J,oe,ve):ve<oe?ve++:N.push(Ae),N.length===J)break}return ve}_createTree(N){const $=new d.av(N.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<N.length;J+=this.stride)$.add(N[J],N[J+1]);return $.finish(),$.data=N,$}_addTileFeatures(N,$,J,oe,ve,Se){for(const Ae of N){const ye=Ae*this.stride,Oe=$[ye+Lt]>1;let Ge,Le,ne;if(Oe)Ge=lr($,ye,this.clusterProps),Le=$[ye],ne=$[ye+1];else{const ze=this.points[$[ye+Ct]];Ge=ze.properties;const[Ke,ot]=ze.geometry.coordinates;Le=sr(Ke),ne=br(ot)}const ce={type:1,geometry:[[Math.round(this.options.extent*(Le*ve-J)),Math.round(this.options.extent*(ne*ve-oe))]],tags:Ge};let be;be=Oe||this.options.generateId?$[ye+Ct]:this.points[$[ye+Ct]].id,be!==void 0&&(ce.id=be),Se.features.push(ce)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(Math.floor(+N),this.options.maxZoom+1))}_cluster(N,$){const{radius:J,extent:oe,reduce:ve,minPoints:Se}=this.options,Ae=J/(oe*Math.pow(2,$)),ye=N.data,Oe=[],Ge=this.stride;for(let Le=0;Le<ye.length;Le+=Ge){if(ye[Le+2]<=$)continue;ye[Le+2]=$;const ne=ye[Le],ce=ye[Le+1],be=N.within(ye[Le],ye[Le+1],Ae),ze=ye[Le+Lt];let Ke=ze;for(const ot of be){const ft=ot*Ge;ye[ft+2]>$&&(Ke+=ye[ft+Lt])}if(Ke>ze&&Ke>=Se){let ot,ft=ne*ze,nt=ce*ze,St=-1;const Qe=((Le/Ge|0)<<5)+($+1)+this.points.length;for(const ut of be){const qt=ut*Ge;if(ye[qt+2]<=$)continue;ye[qt+2]=$;const or=ye[qt+Lt];ft+=ye[qt]*or,nt+=ye[qt+1]*or,ye[qt+4]=Qe,ve&&(ot||(ot=this._map(ye,Le,!0),St=this.clusterProps.length,this.clusterProps.push(ot)),ve(ot,this._map(ye,qt)))}ye[Le+4]=Qe,Oe.push(ft/Ke,nt/Ke,1/0,Qe,-1,Ke),ve&&Oe.push(St)}else{for(let ot=0;ot<Ge;ot++)Oe.push(ye[Le+ot]);if(Ke>1)for(const ot of be){const ft=ot*Ge;if(!(ye[ft+2]<=$)){ye[ft+2]=$;for(let nt=0;nt<Ge;nt++)Oe.push(ye[ft+nt])}}}}return Oe}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,$,J){if(N[$+Lt]>1){const Se=this.clusterProps[N[$+Nt]];return J?Object.assign({},Se):Se}const oe=this.points[N[$+Ct]].properties,ve=this.options.map(oe);return J&&ve===oe?Object.assign({},ve):ve}}function er(ue,N,$){return{type:"Feature",id:ue[N+Ct],properties:lr(ue,N,$),geometry:{type:"Point",coordinates:[(J=ue[N],360*(J-.5)),Ar(ue[N+1])]}};var J}function lr(ue,N,$){const J=ue[N+Lt],oe=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,ve=ue[N+Nt],Se=ve===-1?{}:Object.assign({},$[ve]);return Object.assign(Se,{cluster:!0,cluster_id:ue[N+Ct],point_count:J,point_count_abbreviated:oe})}function sr(ue){return ue/360+.5}function br(ue){const N=Math.sin(ue*Math.PI/180),$=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return $<0?0:$>1?1:$}function Ar(ue){const N=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function Zt(ue,N,$,J){let oe=J;const ve=N+($-N>>1);let Se,Ae=$-N;const ye=ue[N],Oe=ue[N+1],Ge=ue[$],Le=ue[$+1];for(let ne=N+3;ne<$;ne+=3){const ce=fr(ue[ne],ue[ne+1],ye,Oe,Ge,Le);if(ce>oe)Se=ne,oe=ce;else if(ce===oe){const be=Math.abs(ne-ve);be<Ae&&(Se=ne,Ae=be)}}oe>J&&(Se-N>3&&Zt(ue,N,Se,J),ue[Se+2]=oe,$-Se>3&&Zt(ue,Se,$,J))}function fr(ue,N,$,J,oe,ve){let Se=oe-$,Ae=ve-J;if(Se!==0||Ae!==0){const ye=((ue-$)*Se+(N-J)*Ae)/(Se*Se+Ae*Ae);ye>1?($=oe,J=ve):ye>0&&($+=Se*ye,J+=Ae*ye)}return Se=ue-$,Ae=N-J,Se*Se+Ae*Ae}function ir(ue,N,$,J){const oe={id:ue??null,type:N,geometry:$,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(N==="Point"||N==="MultiPoint"||N==="LineString")Fr(oe,$);else if(N==="Polygon")Fr(oe,$[0]);else if(N==="MultiLineString")for(const ve of $)Fr(oe,ve);else if(N==="MultiPolygon")for(const ve of $)Fr(oe,ve[0]);return oe}function Fr(ue,N){for(let $=0;$<N.length;$+=3)ue.minX=Math.min(ue.minX,N[$]),ue.minY=Math.min(ue.minY,N[$+1]),ue.maxX=Math.max(ue.maxX,N[$]),ue.maxY=Math.max(ue.maxY,N[$+1])}function $t(ue,N,$,J){if(!N.geometry)return;const oe=N.geometry.coordinates;if(oe&&oe.length===0)return;const ve=N.geometry.type,Se=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2);let Ae=[],ye=N.id;if($.promoteId?ye=N.properties[$.promoteId]:$.generateId&&(ye=J||0),ve==="Point")hr(oe,Ae);else if(ve==="MultiPoint")for(const Oe of oe)hr(Oe,Ae);else if(ve==="LineString")Ie(oe,Ae,Se,!1);else if(ve==="MultiLineString"){if($.lineMetrics){for(const Oe of oe)Ae=[],Ie(Oe,Ae,Se,!1),ue.push(ir(ye,"LineString",Ae,N.properties));return}mn(oe,Ae,Se,!1)}else if(ve==="Polygon")mn(oe,Ae,Se,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Oe of N.geometry.geometries)$t(ue,{id:ye,geometry:Oe,properties:N.properties},$,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Oe of oe){const Ge=[];mn(Oe,Ge,Se,!0),Ae.push(Ge)}}ue.push(ir(ye,ve,Ae,N.properties))}function hr(ue,N){N.push(Rr(ue[0]),Vt(ue[1]),0)}function Ie(ue,N,$,J){let oe,ve,Se=0;for(let ye=0;ye<ue.length;ye++){const Oe=Rr(ue[ye][0]),Ge=Vt(ue[ye][1]);N.push(Oe,Ge,0),ye>0&&(Se+=J?(oe*Ge-Oe*ve)/2:Math.sqrt(Math.pow(Oe-oe,2)+Math.pow(Ge-ve,2))),oe=Oe,ve=Ge}const Ae=N.length-3;N[2]=1,Zt(N,0,Ae,$),N[Ae+2]=1,N.size=Math.abs(Se),N.start=0,N.end=N.size}function mn(ue,N,$,J){for(let oe=0;oe<ue.length;oe++){const ve=[];Ie(ue[oe],ve,$,J),N.push(ve)}}function Rr(ue){return ue/360+.5}function Vt(ue){const N=Math.sin(ue*Math.PI/180),$=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return $<0?0:$>1?1:$}function _r(ue,N,$,J,oe,ve,Se,Ae){if(J/=N,ve>=($/=N)&&Se<J)return ue;if(Se<$||ve>=J)return null;const ye=[];for(const Oe of ue){const Ge=Oe.geometry;let Le=Oe.type;const ne=oe===0?Oe.minX:Oe.minY,ce=oe===0?Oe.maxX:Oe.maxY;if(ne>=$&&ce<J){ye.push(Oe);continue}if(ce<$||ne>=J)continue;let be=[];if(Le==="Point"||Le==="MultiPoint")Sr(Ge,be,$,J,oe);else if(Le==="LineString")Me(Ge,be,$,J,oe,!1,Ae.lineMetrics);else if(Le==="MultiLineString")mt(Ge,be,$,J,oe,!1);else if(Le==="Polygon")mt(Ge,be,$,J,oe,!0);else if(Le==="MultiPolygon")for(const ze of Ge){const Ke=[];mt(ze,Ke,$,J,oe,!0),Ke.length&&be.push(Ke)}if(be.length){if(Ae.lineMetrics&&Le==="LineString"){for(const ze of be)ye.push(ir(Oe.id,Le,ze,Oe.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(be.length===1?(Le="LineString",be=be[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=be.length===3?"Point":"MultiPoint"),ye.push(ir(Oe.id,Le,be,Oe.tags))}}return ye.length?ye:null}function Sr(ue,N,$,J,oe){for(let ve=0;ve<ue.length;ve+=3){const Se=ue[ve+oe];Se>=$&&Se<=J&&kt(N,ue[ve],ue[ve+1],ue[ve+2])}}function Me(ue,N,$,J,oe,ve,Se){let Ae=$e(ue);const ye=oe===0?Ft:tr;let Oe,Ge,Le=ue.start;for(let Ke=0;Ke<ue.length-3;Ke+=3){const ot=ue[Ke],ft=ue[Ke+1],nt=ue[Ke+2],St=ue[Ke+3],Qe=ue[Ke+4],ut=oe===0?ot:ft,qt=oe===0?St:Qe;let or=!1;Se&&(Oe=Math.sqrt(Math.pow(ot-St,2)+Math.pow(ft-Qe,2))),ut<$?qt>$&&(Ge=ye(Ae,ot,ft,St,Qe,$),Se&&(Ae.start=Le+Oe*Ge)):ut>J?qt<J&&(Ge=ye(Ae,ot,ft,St,Qe,J),Se&&(Ae.start=Le+Oe*Ge)):kt(Ae,ot,ft,nt),qt<$&&ut>=$&&(Ge=ye(Ae,ot,ft,St,Qe,$),or=!0),qt>J&&ut<=J&&(Ge=ye(Ae,ot,ft,St,Qe,J),or=!0),!ve&&or&&(Se&&(Ae.end=Le+Oe*Ge),N.push(Ae),Ae=$e(ue)),Se&&(Le+=Oe)}let ne=ue.length-3;const ce=ue[ne],be=ue[ne+1],ze=oe===0?ce:be;ze>=$&&ze<=J&&kt(Ae,ce,be,ue[ne+2]),ne=Ae.length-3,ve&&ne>=3&&(Ae[ne]!==Ae[0]||Ae[ne+1]!==Ae[1])&&kt(Ae,Ae[0],Ae[1],Ae[2]),Ae.length&&N.push(Ae)}function $e(ue){const N=[];return N.size=ue.size,N.start=ue.start,N.end=ue.end,N}function mt(ue,N,$,J,oe,ve){for(const Se of ue)Me(Se,N,$,J,oe,ve,!1)}function kt(ue,N,$,J){ue.push(N,$,J)}function Ft(ue,N,$,J,oe,ve){const Se=(ve-N)/(J-N);return kt(ue,ve,$+(oe-$)*Se,1),Se}function tr(ue,N,$,J,oe,ve){const Se=(ve-$)/(oe-$);return kt(ue,N+(J-N)*Se,ve,1),Se}function He(ue,N){const $=[];for(let J=0;J<ue.length;J++){const oe=ue[J],ve=oe.type;let Se;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Se=Mr(oe.geometry,N);else if(ve==="MultiLineString"||ve==="Polygon"){Se=[];for(const Ae of oe.geometry)Se.push(Mr(Ae,N))}else if(ve==="MultiPolygon"){Se=[];for(const Ae of oe.geometry){const ye=[];for(const Oe of Ae)ye.push(Mr(Oe,N));Se.push(ye)}}$.push(ir(oe.id,ve,Se,oe.tags))}return $}function Mr(ue,N){const $=[];$.size=ue.size,ue.start!==void 0&&($.start=ue.start,$.end=ue.end);for(let J=0;J<ue.length;J+=3)$.push(ue[J]+N,ue[J+1],ue[J+2]);return $}function Tr(ue,N){if(ue.transformed)return ue;const $=1<<ue.z,J=ue.x,oe=ue.y;for(const ve of ue.features){const Se=ve.geometry,Ae=ve.type;if(ve.geometry=[],Ae===1)for(let ye=0;ye<Se.length;ye+=2)ve.geometry.push(rr(Se[ye],Se[ye+1],N,$,J,oe));else for(let ye=0;ye<Se.length;ye++){const Oe=[];for(let Ge=0;Ge<Se[ye].length;Ge+=2)Oe.push(rr(Se[ye][Ge],Se[ye][Ge+1],N,$,J,oe));ve.geometry.push(Oe)}}return ue.transformed=!0,ue}function rr(ue,N,$,J,oe,ve){return[Math.round($*(ue*J-oe)),Math.round($*(N*J-ve))]}function qn(ue,N,$,J,oe){const ve=N===oe.maxZoom?0:oe.tolerance/((1<<N)*oe.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:ue.length,source:null,x:$,y:J,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ae of ue)et(Se,Ae,ve,oe);return Se}function et(ue,N,$,J){const oe=N.geometry,ve=N.type,Se=[];if(ue.minX=Math.min(ue.minX,N.minX),ue.minY=Math.min(ue.minY,N.minY),ue.maxX=Math.max(ue.maxX,N.maxX),ue.maxY=Math.max(ue.maxY,N.maxY),ve==="Point"||ve==="MultiPoint")for(let Ae=0;Ae<oe.length;Ae+=3)Se.push(oe[Ae],oe[Ae+1]),ue.numPoints++,ue.numSimplified++;else if(ve==="LineString")rt(Se,oe,ue,$,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Ae=0;Ae<oe.length;Ae++)rt(Se,oe[Ae],ue,$,ve==="Polygon",Ae===0);else if(ve==="MultiPolygon")for(let Ae=0;Ae<oe.length;Ae++){const ye=oe[Ae];for(let Oe=0;Oe<ye.length;Oe++)rt(Se,ye[Oe],ue,$,!0,Oe===0)}if(Se.length){let Ae=N.tags||null;if(ve==="LineString"&&J.lineMetrics){Ae={};for(const Oe in N.tags)Ae[Oe]=N.tags[Oe];Ae.mapbox_clip_start=oe.start/oe.size,Ae.mapbox_clip_end=oe.end/oe.size}const ye={geometry:Se,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Ae};N.id!==null&&(ye.id=N.id),ue.features.push(ye)}}function rt(ue,N,$,J,oe,ve){const Se=J*J;if(J>0&&N.size<(oe?Se:J))return void($.numPoints+=N.length/3);const Ae=[];for(let ye=0;ye<N.length;ye+=3)(J===0||N[ye+2]>Se)&&($.numSimplified++,Ae.push(N[ye],N[ye+1])),$.numPoints++;oe&&function(ye,Oe){let Ge=0;for(let Le=0,ne=ye.length,ce=ne-2;Le<ne;ce=Le,Le+=2)Ge+=(ye[Le]-ye[ce])*(ye[Le+1]+ye[ce+1]);if(Ge>0===Oe)for(let Le=0,ne=ye.length;Le<ne/2;Le+=2){const ce=ye[Le],be=ye[Le+1];ye[Le]=ye[ne-2-Le],ye[Le+1]=ye[ne-1-Le],ye[ne-2-Le]=ce,ye[ne-1-Le]=be}}(Ae,ve),ue.push(Ae)}const at={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Er{constructor(N,$){const J=($=this.options=function(ve,Se){for(const Ae in Se)ve[Ae]=Se[Ae];return ve}(Object.create(at),$)).debug;if(J&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");let oe=function(ve,Se){const Ae=[];if(ve.type==="FeatureCollection")for(let ye=0;ye<ve.features.length;ye++)$t(Ae,ve.features[ye],Se,ye);else $t(Ae,ve.type==="Feature"?ve:{geometry:ve},Se);return Ae}(N,$);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(ve,Se){const Ae=Se.buffer/Se.extent;let ye=ve;const Oe=_r(ve,1,-1-Ae,Ae,0,-1,2,Se),Ge=_r(ve,1,1-Ae,2+Ae,0,-1,2,Se);return(Oe||Ge)&&(ye=_r(ve,1,-Ae,1+Ae,0,-1,2,Se)||[],Oe&&(ye=He(Oe,1).concat(ye)),Ge&&(ye=ye.concat(He(Ge,-1)))),ye}(oe,$),oe.length&&this.splitTile(oe,0,0,0),J&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(N,$,J,oe,ve,Se,Ae){const ye=[N,$,J,oe],Oe=this.options,Ge=Oe.debug;for(;ye.length;){oe=ye.pop(),J=ye.pop(),$=ye.pop(),N=ye.pop();const Le=1<<$,ne=Mn($,J,oe);let ce=this.tiles[ne];if(!ce&&(Ge>1&&console.time("creation"),ce=this.tiles[ne]=qn(N,$,J,oe,Oe),this.tileCoords.push({z:$,x:J,y:oe}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,J,oe,ce.numFeatures,ce.numPoints,ce.numSimplified),console.timeEnd("creation"));const or=`z${$}`;this.stats[or]=(this.stats[or]||0)+1,this.total++}if(ce.source=N,ve==null){if($===Oe.indexMaxZoom||ce.numPoints<=Oe.indexMaxPoints)continue}else{if($===Oe.maxZoom||$===ve)continue;if(ve!=null){const or=ve-$;if(J!==Se>>or||oe!==Ae>>or)continue}}if(ce.source=null,N.length===0)continue;Ge>1&&console.time("clipping");const be=.5*Oe.buffer/Oe.extent,ze=.5-be,Ke=.5+be,ot=1+be;let ft=null,nt=null,St=null,Qe=null,ut=_r(N,Le,J-be,J+Ke,0,ce.minX,ce.maxX,Oe),qt=_r(N,Le,J+ze,J+ot,0,ce.minX,ce.maxX,Oe);N=null,ut&&(ft=_r(ut,Le,oe-be,oe+Ke,1,ce.minY,ce.maxY,Oe),nt=_r(ut,Le,oe+ze,oe+ot,1,ce.minY,ce.maxY,Oe),ut=null),qt&&(St=_r(qt,Le,oe-be,oe+Ke,1,ce.minY,ce.maxY,Oe),Qe=_r(qt,Le,oe+ze,oe+ot,1,ce.minY,ce.maxY,Oe),qt=null),Ge>1&&console.timeEnd("clipping"),ye.push(ft||[],$+1,2*J,2*oe),ye.push(nt||[],$+1,2*J,2*oe+1),ye.push(St||[],$+1,2*J+1,2*oe),ye.push(Qe||[],$+1,2*J+1,2*oe+1)}}getTile(N,$,J){N=+N,$=+$,J=+J;const oe=this.options,{extent:ve,debug:Se}=oe;if(N<0||N>24)return null;const Ae=1<<N,ye=Mn(N,$=$+Ae&Ae-1,J);if(this.tiles[ye])return Tr(this.tiles[ye],ve);Se>1&&console.log("drilling down to z%d-%d-%d",N,$,J);let Oe,Ge=N,Le=$,ne=J;for(;!Oe&&Ge>0;)Ge--,Le>>=1,ne>>=1,Oe=this.tiles[Mn(Ge,Le,ne)];return Oe&&Oe.source?(Se>1&&(console.log("found parent tile z%d-%d-%d",Ge,Le,ne),console.time("drilling down")),this.splitTile(Oe.source,Ge,Le,ne,N,$,J),Se>1&&console.timeEnd("drilling down"),this.tiles[ye]?Tr(this.tiles[ye],ve):null):null}}function Mn(ue,N,$){return 32*((1<<ue)*$+N)+ue}function Wt(ue,N){return N?ue.properties[N]:ue.id}function ao(ue,N){if(ue==null)return!0;if(ue.type==="Feature")return Wt(ue,N)!=null;if(ue.type==="FeatureCollection"){const $=new Set;for(const J of ue.features){const oe=Wt(J,N);if(oe==null||$.has(oe))return!1;$.add(oe)}return!0}return!1}function lo(ue,N){const $=new Map;if(ue!=null)if(ue.type==="Feature")$.set(Wt(ue,N),ue);else for(const J of ue.features)$.set(Wt(J,N),J);return $}class Gi extends P{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(N,$){return d._(this,void 0,void 0,function*(){const J=N.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const oe=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!oe)return null;const ve=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.X,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(ye){this._feature=ye,this.extent=d.X,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Oe of this._feature.geometry)ye.push([new d.P(Oe[0],Oe[1])]);return ye}{const ye=[];for(const Oe of this._feature.geometry){const Ge=[];for(const Le of Oe)Ge.push(new d.P(Le[0],Le[1]));ye.push(Ge)}return ye}}toGeoJSON(ye,Oe,Ge){return ee.call(this,ye,Oe,Ge)}}(this._features[Ae])}}(oe.features);let Se=Et(ve);return Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),{vectorTile:ve,rawData:Se.buffer}})}loadData(N){return d._(this,void 0,void 0,function*(){var $;($=this._pendingRequest)===null||$===void 0||$.abort();const J=!!(N&&N.request&&N.request.collectResourceTiming)&&new d.bv(N.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(N,this._pendingRequest),this._geoJSONIndex=N.cluster?new zt(function({superclusterOptions:Se,clusterProperties:Ae}){if(!Ae||!Se)return Se;const ye={},Oe={},Ge={accumulated:null,zoom:0},Le={properties:null},ne=Object.keys(Ae);for(const ce of ne){const[be,ze]=Ae[ce],Ke=d.bC(ze),ot=d.bC(typeof be=="string"?[be,["accumulated"],["get",ce]]:be);ye[ce]=Ke.value,Oe[ce]=ot.value}return Se.map=ce=>{Le.properties=ce;const be={};for(const ze of ne)be[ze]=ye[ze].evaluate(Ge,Le);return be},Se.reduce=(ce,be)=>{Le.properties=be;for(const ze of ne)Ge.accumulated=ce[ze],ce[ze]=Oe[ze].evaluate(Ge,Le)},Se}(N)).load((yield this._pendingData).features):(oe=yield this._pendingData,new Er(oe,N.geojsonVtOptions)),this.loaded={};const ve={};if(J){const Se=J.finish();Se&&(ve.resourceTiming={},ve.resourceTiming[N.source]=JSON.parse(JSON.stringify(Se)))}return ve}catch(ve){if(delete this._pendingRequest,d.bB(ve))return{abandoned:!0};throw ve}var oe})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(N){const $=this.loaded;return $&&$[N.uid]?super.reloadTile(N):this.loadTile(N)}loadAndProcessGeoJSON(N,$){return d._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON(N,$);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`);if(W(J,!0),N.filter){const oe=d.bC(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(Se=>`${Se.key}: ${Se.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(Se=>oe.value.evaluate({zoom:0},Se))}}return J})}loadGeoJSON(N,$){return d._(this,void 0,void 0,function*(){const{promoteId:J}=N;if(N.request){const oe=yield d.h(N.request,$);return this._dataUpdateable=ao(oe.data,J)?lo(oe.data,J):void 0,oe.data}if(typeof N.data=="string")try{const oe=JSON.parse(N.data);return this._dataUpdateable=ao(oe,J)?lo(oe,J):void 0,oe}catch{throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`)}if(!N.dataDiff)throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${N.source}`);return function(oe,ve,Se){var Ae,ye,Oe,Ge;if(ve.removeAll&&oe.clear(),ve.remove)for(const Le of ve.remove)oe.delete(Le);if(ve.add)for(const Le of ve.add){const ne=Wt(Le,Se);ne!=null&&oe.set(ne,Le)}if(ve.update)for(const Le of ve.update){let ne=oe.get(Le.id);if(ne==null)continue;const ce=!Le.removeAllProperties&&(((Ae=Le.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0||((ye=Le.addOrUpdateProperties)===null||ye===void 0?void 0:ye.length)>0);if((Le.newGeometry||Le.removeAllProperties||ce)&&(ne=Object.assign({},ne),oe.set(Le.id,ne),ce&&(ne.properties=Object.assign({},ne.properties))),Le.newGeometry&&(ne.geometry=Le.newGeometry),Le.removeAllProperties)ne.properties={};else if(((Oe=Le.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0)for(const be of Le.removeProperties)Object.prototype.hasOwnProperty.call(ne.properties,be)&&delete ne.properties[be];if(((Ge=Le.addOrUpdateProperties)===null||Ge===void 0?void 0:Ge.length)>0)for(const{key:be,value:ze}of Le.addOrUpdateProperties)ne.properties[be]=ze}}(this._dataUpdateable,N.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(N){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(N){return this._geoJSONIndex.getClusterExpansionZoom(N.clusterId)}getClusterChildren(N){return this._geoJSONIndex.getChildren(N.clusterId)}getClusterLeaves(N){return this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset)}}class Zi{constructor(N){this.self=N,this.actor=new d.F(N),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=($,J)=>{if(this.externalWorkerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.externalWorkerSourceTypes[$]=J},this.self.addProtocol=d.bi,this.self.removeProtocol=d.bj,this.self.registerRTLTextPlugin=$=>{if(d.bD.isParsed())throw new Error("RTL text plugin already registered.");d.bD.setMethods($)},this.actor.registerMessageHandler("LDT",($,J)=>this._getDEMWorkerSource($,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",($,J)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource($,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",($,J)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource($,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",($,J)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource($,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",($,J)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource($,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",($,J)=>this._getWorkerSource($,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",($,J)=>this._getWorkerSource($,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",($,J)=>this._getWorkerSource($,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",($,J)=>this._getWorkerSource($,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",($,J)=>this._getWorkerSource($,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",($,J)=>this._getWorkerSource($,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",($,J)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[$]||!this.workerSources[$][J.type]||!this.workerSources[$][J.type][J.source])return;const oe=this.workerSources[$][J.type][J.source];delete this.workerSources[$][J.type][J.source],oe.removeSource!==void 0&&oe.removeSource(J)})),this.actor.registerMessageHandler("RM",$=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$]})),this.actor.registerMessageHandler("SR",($,J)=>d._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",($,J)=>this._syncRTLPluginState($,J)),this.actor.registerMessageHandler("IS",($,J)=>d._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",($,J)=>this._setImages($,J)),this.actor.registerMessageHandler("UL",($,J)=>d._(this,void 0,void 0,function*(){this._getLayerIndex($).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",($,J)=>d._(this,void 0,void 0,function*(){this._getLayerIndex($).replace(J)}))}_setImages(N,$){return d._(this,void 0,void 0,function*(){this.availableImages[N]=$;for(const J in this.workerSources[N]){const oe=this.workerSources[N][J];for(const ve in oe)oe[ve].availableImages=$}})}_syncRTLPluginState(N,$){return d._(this,void 0,void 0,function*(){if(d.bD.isParsed())return d.bD.getState();if($.pluginStatus!=="loading")return d.bD.setState($),$;const J=$.pluginURL;if(this.self.importScripts(J),d.bD.isParsed()){const oe={pluginStatus:"loaded",pluginURL:J};return d.bD.setState(oe),oe}throw d.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${J}`)})}_getAvailableImages(N){let $=this.availableImages[N];return $||($=[]),$}_getLayerIndex(N){let $=this.layerIndexes[N];return $||($=this.layerIndexes[N]=new u),$}_getWorkerSource(N,$,J){if(this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][$]||(this.workerSources[N][$]={}),!this.workerSources[N][$][J]){const oe={sendAsync:(ve,Se)=>(ve.targetMapId=N,this.actor.sendAsync(ve,Se))};switch($){case"vector":this.workerSources[N][$][J]=new P(oe,this._getLayerIndex(N),this._getAvailableImages(N));break;case"geojson":this.workerSources[N][$][J]=new Gi(oe,this._getLayerIndex(N),this._getAvailableImages(N));break;default:this.workerSources[N][$][J]=new this.externalWorkerSourceTypes[$](oe,this._getLayerIndex(N),this._getAvailableImages(N))}}return this.workerSources[N][$][J]}_getDEMWorkerSource(N,$){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][$]||(this.demWorkerSources[N][$]=new R),this.demWorkerSources[N][$]}}return d.i(self)&&(self.worker=new Zi(self)),Zi}),a("index",["exports","./shared"],function(d,u){var b="4.7.1";let T,A;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((i,c)=>{const p=requestAnimationFrame(i);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),c(u.c())})}),getImageData(_,i=0){return this.getImageCanvasContext(_).getImageData(-i,-i,_.width+2*i,_.height+2*i)},getImageCanvasContext(_){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=_.width,i.height=_.height,c.drawImage(_,0,0,_.width,_.height),c},resolveURL:_=>(T||(T=document.createElement("a")),T.href=_,T.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(A==null&&(A=matchMedia("(prefers-reduced-motion: reduce)")),A.matches)}};class R{static testProp(i){if(!R.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in R.docStyle)return i[c];return i[0]}static create(i,c,p){const m=window.document.createElement(i);return c!==void 0&&(m.className=c),p&&p.appendChild(m),m}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(i,c){i.style[R.transformProp]=c}static addEventListener(i,c,p,m={}){i.addEventListener(c,p,"passive"in m?m:m.capture)}static removeEventListener(i,c,p,m={}){i.removeEventListener(c,p,"passive"in m?m:m.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",R.suppressClickInternal,!0)},0)}static getScale(i){const c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,p){const m=c.boundingClientRect;return new u.P((p.clientX-m.left)/c.x-i.clientLeft,(p.clientY-m.top)/c.y-i.clientTop)}static mousePos(i,c){const p=R.getScale(i);return R.getPoint(i,p,c)}static touchPos(i,c){const p=[],m=R.getScale(i);for(let y=0;y<c.length;y++)p.push(R.getPoint(i,m,c[y]));return p}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(_){!ee&&W&&(B?H(_):j=_)}};let j,W,ee=!1,B=!1;function H(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,W),_.isContextLost())return;U.supported=!0}catch{}_.deleteTexture(i),ee=!0}var V;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{j&&H(j),j=null,B=!0},W.onerror=()=>{ee=!0,j=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,c,p,m;_.resetRequestQueue=()=>{i=[],c=0,p=0,m={}},_.addThrottleControl=k=>{const L=p++;return m[L]=k,L},_.removeThrottleControl=k=>{delete m[k],S()},_.getImage=(k,L,D=!0)=>new Promise((z,G)=>{U.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),u.e(k,{type:"image"}),i.push({abortController:L,requestParameters:k,supportImageRefresh:D,state:"queued",onError:Q=>{G(Q)},onSuccess:Q=>{z(Q)}}),S()});const y=k=>u._(this,void 0,void 0,function*(){k.state="running";const{requestParameters:L,supportImageRefresh:D,onError:z,onSuccess:G,abortController:Q}=k,re=D===!1&&!u.i(self)&&!u.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce((pe,_e)=>pe&&_e==="accept",!0));c++;const le=re?C(L,Q):u.m(L,Q);try{const pe=yield le;delete k.abortController,k.state="completed",pe.data instanceof HTMLImageElement||u.b(pe.data)?G(pe):pe.data&&G({data:yield(de=pe.data,typeof createImageBitmap=="function"?u.d(de):u.f(de)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete k.abortController,z(pe)}finally{c--,S()}var de}),S=()=>{const k=(()=>{for(const L of Object.keys(m))if(m[L]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=c;L<k&&i.length>0;L++){const D=i.shift();D.abortController.signal.aborted?L--:y(D)}},C=(k,L)=>new Promise((D,z)=>{const G=new Image,Q=k.url,re=k.credentials;re&&re==="include"?G.crossOrigin="use-credentials":(re&&re==="same-origin"||!u.s(Q))&&(G.crossOrigin="anonymous"),L.signal.addEventListener("abort",()=>{G.src="",z(u.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,D({data:G})},G.onerror=()=>{G.onerror=G.onload=null,L.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Q})}(V||(V={})),V.resetRequestQueue();class te{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function me(_){var i=new u.A(3);return i[0]=_[0],i[1]=_[1],i[2]=_[2],i}var fe,ge=function(_,i,c){return _[0]=i[0]-c[0],_[1]=i[1]-c[1],_[2]=i[2]-c[2],_};fe=new u.A(3),u.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var ie=function(_){var i=_[0],c=_[1];return i*i+c*c};function Re(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const c=[];for(const{id:p,url:m}of _){const y=`${p}${m}`;c.indexOf(y)===-1&&(c.push(y),i.push({id:p,url:m}))}}return i}function Z(_,i,c){const p=_.split("?");return p[0]+=`${i}${c}`,p.join("?")}(function(){var _=new u.A(2);u.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Te{constructor(i,c,p,m){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(c,m)}update(i,c,p){const{width:m,height:y}=i,S=!(this.size&&this.size[0]===m&&this.size[1]===y||p),{context:C}=this,{gl:k}=C;if(this.useMipmap=!!(c&&c.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!c||c.premultiply!==!1)),S)this.size=[m,y],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,m,y,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:L,y:D}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?k.texSubImage2D(k.TEXTURE_2D,0,L,D,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,L,D,m,y,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(i,c,p){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),i!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||i),this.filter=i),c!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ue(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class Fe extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;const m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const m of i){if(m[0]<p||m[1]<m[0]||c<m[1])return!1;p=m[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const p=c.spriteData,m=p&&p.width||c.data.width,y=p&&p.height||c.data.height;return!(i[0]<0||m<i[0]||i[1]<0||y<i[1]||i[2]<0||m<i[2]||i[3]<0||y<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,p=!0){const m=this.getImage(i);if(p&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((c,p)=>{let m=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(m=!1);this.isLoaded()||m?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})})}_getImagesForIds(i){const c={};for(const p of i){let m=this.getImage(p);m||(this.fire(new u.k("styleimagemissing",{id:p})),m=this.getImage(p)),m?c[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new u.I(m,p);this.patterns[i]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Te(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const y in this.patterns)i.push(this.patterns[y].bin);const{w:c,h:p}=u.p(i),m=this.atlasImage;m.resize({width:c||1,height:p||1});for(const y in this.patterns){const{bin:S}=this.patterns[y],C=S.x+1,k=S.y+1,L=this.getImage(y).data,D=L.width,z=L.height;u.R.copy(L,m,{x:0,y:0},{x:C,y:k},{width:D,height:z}),u.R.copy(L,m,{x:0,y:z-1},{x:C,y:k-1},{width:D,height:1}),u.R.copy(L,m,{x:0,y:0},{x:C,y:k+z},{width:D,height:1}),u.R.copy(L,m,{x:D-1,y:0},{x:C-1,y:k},{width:1,height:z}),u.R.copy(L,m,{x:0,y:0},{x:C+D,y:k},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),Ue(p)&&this.updateImage(c,p)}}}const Ze=1e20;function Xe(_,i,c,p,m,y,S,C,k){for(let L=i;L<i+p;L++)it(_,c*y+L,y,m,S,C,k);for(let L=c;L<c+m;L++)it(_,L*y+i,1,p,S,C,k)}function it(_,i,c,p,m,y,S){y[0]=0,S[0]=-Ze,S[1]=Ze,m[0]=_[i];for(let C=1,k=0,L=0;C<p;C++){m[C]=_[i+C*c];const D=C*C;do{const z=y[k];L=(m[C]-m[z]+D-z*z)/(C-z)/2}while(L<=S[k]&&--k>-1);k++,y[k]=C,S[k]=L,S[k+1]=Ze}for(let C=0,k=0;C<p;C++){for(;S[k+1]<C;)k++;const L=y[k],D=C-L;_[i+C*c]=m[L]+D*D}}class Et{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return u._(this,void 0,void 0,function*(){const c=[];for(const y in i)for(const S of i[y])c.push(this._getAndCacheGlyphsPromise(y,S));const p=yield Promise.all(c),m={};for(const{stack:y,id:S,glyph:C}of p)m[y]||(m[y]={}),m[y][S]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return m})}_getAndCacheGlyphsPromise(i,c){return u._(this,void 0,void 0,function*(){let p=this.entries[i];p||(p=this.entries[i]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[c];if(m!==void 0)return{stack:i,id:c,glyph:m};if(m=this._tinySDF(p,i,c),m)return p.glyphs[c]=m,{stack:i,id:c,glyph:m};const y=Math.floor(c/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[y])return{stack:i,id:c,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[y]){const C=Et.loadGlyphRange(i,y,this.url,this.requestManager);p.requests[y]=C}const S=yield p.requests[y];for(const C in S)this._doesCharSupportLocalGlyph(+C)||(p.glyphs[+C]=S[+C]);return p.ranges[y]=!0,{stack:i,id:c,glyph:S[c]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,c,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let y=i.tinySDF;if(!y){let C="400";/bold/i.test(c)?C="900":/medium/i.test(c)?C="500":/light/i.test(c)&&(C="200"),y=i.tinySDF=new Et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:C})}const S=y.draw(String.fromCharCode(p));return{id:p,bitmap:new u.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Et.loadGlyphRange=function(_,i,c,p){return u._(this,void 0,void 0,function*(){const m=256*i,y=m+255,S=p.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${m}-${y}`),"Glyphs"),C=yield u.l(S,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${i}, ${m}-${y}`);const k={};for(const L of u.n(C.data))k[L.id]=L;return k})},Et.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:c=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=c;const C=this.size=_+4*i,k=this._createCanvas(C),L=this.ctx=k.getContext("2d",{willReadFrequently:!0});L.font=`${S} ${y} ${_}px ${m}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(_),S=Math.ceil(c),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),k=Math.min(this.size-this.buffer,S+Math.ceil(p)),L=C+2*this.buffer,D=k+2*this.buffer,z=Math.max(L*D,0),G=new Uint8ClampedArray(z),Q={data:G,width:L,height:D,glyphWidth:C,glyphHeight:k,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(C===0||k===0)return Q;const{ctx:re,buffer:le,gridInner:de,gridOuter:pe}=this;re.clearRect(le,le,C,k),re.fillText(_,le,le+S);const _e=re.getImageData(le,le,C,k);pe.fill(Ze,0,z),de.fill(0,0,z);for(let se=0;se<k;se++)for(let we=0;we<C;we++){const Ee=_e.data[4*(se*C+we)+3]/255;if(Ee===0)continue;const Pe=(se+le)*L+we+le;if(Ee===1)pe[Pe]=0,de[Pe]=Ze;else{const qe=.5-Ee;pe[Pe]=qe>0?qe*qe:0,de[Pe]=qe<0?qe*qe:0}}Xe(pe,0,0,L,D,L,this.f,this.v,this.z),Xe(de,le,le,C,k,L,this.f,this.v,this.z);for(let se=0;se<z;se++){const we=Math.sqrt(pe[se])-Math.sqrt(de[se]);G[se]=Math.round(255-255*(we/this.radius+this.cutoff))}return Q}};class Ne{constructor(){this.specification=u.v.light.position}possiblyEvaluate(i,c){return u.x(i.expression.evaluate(c))}interpolate(i,c,p){return{x:u.y.number(i.x,c.x,p),y:u.y.number(i.y,c.y,p),z:u.y.number(i.z,c.z,p)}}}let Ye;class vt extends u.E{constructor(i){super(),Ye=Ye||new u.q({anchor:new u.D(u.v.light.anchor),position:new Ne,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Ye),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.r,i,c))for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&u.t(this,i.call(u.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ct=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Lt extends u.E{constructor(i){super(),this._transitionable=new u.T(Ct),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(i,c={}){if(!this._validate(u.B,i,c)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p={}){return(p==null?void 0:p.validate)!==!1&&u.t(this,i.call(u.u,u.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Nt{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const p=i.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,c)),this.dashEntry[p]}getDashRanges(i,c,p){const m=[];let y=i.length%2==1?-i[i.length-1]*p:0,S=i[0]*p,C=!0;m.push({left:y,right:S,isDash:C,zeroLength:i[0]===0});let k=i[0];for(let L=1;L<i.length;L++){C=!C;const D=i[L];y=k*p,k+=D,S=k*p,m.push({left:y,right:S,isDash:C,zeroLength:D===0})}return m}addRoundDash(i,c,p){const m=c/2;for(let y=-p;y<=p;y++){const S=this.width*(this.nextRow+p+y);let C=0,k=i[C];for(let L=0;L<this.width;L++){L/k.right>1&&(k=i[++C]);const D=Math.abs(L-k.left),z=Math.abs(L-k.right),G=Math.min(D,z);let Q;const re=y/p*(m+1);if(k.isDash){const le=m-Math.abs(re);Q=Math.sqrt(G*G+le*le)}else Q=m-Math.sqrt(G*G+re*re);this.data[S+L]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){const k=i[C],L=i[C+1];k.zeroLength?i.splice(C,1):L&&L.isDash===k.isDash&&(L.left=k.left,i.splice(C,1))}const c=i[0],p=i[i.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const m=this.width*this.nextRow;let y=0,S=i[y];for(let C=0;C<this.width;C++){C/S.right>1&&(S=i[++y]);const k=Math.abs(C-S.left),L=Math.abs(C-S.right),D=Math.min(k,L);this.data[m+C]=Math.max(0,Math.min(255,(S.isDash?D:-D)+128))}}addDash(i,c){const p=c?7:0,m=2*p+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<i.length;C++)y+=i[C];if(y!==0){const C=this.width/y,k=this.getDashRanges(i,this.width,C);c?this.addRoundDash(k,C,p):this.addRegularDash(k)}const S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:y};return this.nextRow+=m,this.dirty=!0,S}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class er{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<er.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const lr=Math.floor(P.hardwareConcurrency/2);let sr,br;function Ar(){return sr||(sr=new er),sr}er.workerCount=u.C(globalThis)?Math.max(Math.min(lr,3),1):1;class Zt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let m=0;m<p.length;m++){const y=new u.F(p[m],c);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:i,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(const p of this.actors)p.registerMessageHandler(i,c)}}function fr(){return br||(br=new Zt(Ar(),u.G),br.registerMessageHandler("GR",(_,i,c)=>u.m(i,c))),br}function ir(_,i){const c=u.H();return u.J(c,c,[1,1,0]),u.K(c,c,[.5*_.width,.5*_.height,1]),u.L(c,c,_.calculatePosMatrix(i.toUnwrapped()))}function Fr(_,i,c,p,m,y){const S=function(z,G,Q){if(z)for(const re of z){const le=G[re];if(le&&le.source===Q&&le.type==="fill-extrusion")return!0}else for(const re in G){const le=G[re];if(le.source===Q&&le.type==="fill-extrusion")return!0}return!1}(m&&m.layers,i,_.id),C=y.maxPitchScaleFactor(),k=_.tilesIn(p,C,S);k.sort($t);const L=[];for(const z of k)L.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(i,c,_._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,m,y,C,ir(_.transform,z.tileID))});const D=function(z){const G={},Q={};for(const re of z){const le=re.queryResults,de=re.wrappedTileID,pe=Q[de]=Q[de]||{};for(const _e in le){const se=le[_e],we=pe[_e]=pe[_e]||{},Ee=G[_e]=G[_e]||[];for(const Pe of se)we[Pe.featureIndex]||(we[Pe.featureIndex]=!0,Ee.push(Pe))}}return G}(L);for(const z in D)D[z].forEach(G=>{const Q=G.feature,re=_.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=re});return D}function $t(_,i){const c=_.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function hr(_,i,c){return u._(this,void 0,void 0,function*(){let p=_;if(_.url?p=(yield u.h(i.transformRequest(_.url,"Source"),c)).data:yield P.frameAsync(c),!p)return null;const m=u.M(u.e(p,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(y=>y.id)),m})}class Ie{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.N?new u.N(i.lng,i.lat):u.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.N?new u.N(i.lng,i.lat):u.N.convert(i),this}extend(i){const c=this._sw,p=this._ne;let m,y;if(i instanceof u.N)m=i,y=i;else{if(!(i instanceof Ie))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ie.convert(i)):this.extend(u.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.N.convert(i)):this;if(m=i._sw,y=i._ne,!m||!y)return this}return c||p?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new u.N(m.lng,m.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:p}=u.N.convert(i);let m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(i){return i instanceof Ie?i:i&&new Ie(i)}static fromLngLat(i,c=0){const p=360*c/40075017,m=p/Math.cos(Math.PI/180*i.lat);return new Ie(new u.N(i.lng-m,i.lat-p),new u.N(i.lng+m,i.lat+p))}adjustAntiMeridian(){const i=new u.N(this._sw.lng,this._sw.lat),c=new u.N(this._ne.lng,this._ne.lat);return new Ie(i,i.lng>c.lng?new u.N(c.lng+360,c.lat):c)}}class mn{constructor(i,c,p){this.bounds=Ie.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(u.O(this.bounds.getWest())*c),m=Math.floor(u.Q(this.bounds.getNorth())*c),y=Math.ceil(u.O(this.bounds.getEast())*c),S=Math.ceil(u.Q(this.bounds.getSouth())*c);return i.x>=p&&i.x<y&&i.y>=m&&i.y<S}}class Rr extends u.E{constructor(i,c,p,m){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield hr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(u.e(this,i),i.bounds&&(this.tileBounds=new mn(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((y,S)=>{i.reloadPromise={resolve:y,reject:S}})}else i.actor=this.dispatcher.getActor(),m="LT";i.abortController=new AbortController;try{const y=yield i.actor.sendAsync({type:m,data:p},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,y)}catch(y){if(delete i.abortController,i.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){const p=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(p.resolve).catch(p.reject)}}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends u.E{constructor(i,c,p,m){super(),this.id=i,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.M(c,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield hr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(u.e(this,i),i.bounds&&(this.tileBounds=new mn(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return u.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const p=yield V.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,y=m.gl,S=p.data;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new Te(m,S,y.RGBA,{useMipmap:!0}),i.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class _r extends Vt{constructor(i,c,p,m){super(i,c,p,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const m=yield V.getImage(p,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&i.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const S=u.b(y)&&u.U()?y:yield this.readImageNow(y),C={type:this.type,uid:i.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const k=yield i.actor.sendAsync({type:"LDT",data:C});i.dem=k,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(m){if(delete i.abortController,i.aborted)i.state="unloaded";else if(m)throw i.state="errored",m}})}readImageNow(i){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const c=i.width+2,p=i.height+2;try{return new u.R({width:c,height:p},yield u.W(i,-1,-1,c,p))}catch{}}return P.getImageData(i,1)})}_getNeighboringTiles(i){const c=i.canonical,p=Math.pow(2,c.z),m=(c.x-1+p)%p,y=c.x===0?i.wrap-1:i.wrap,S=(c.x+1+p)%p,C=c.x+1===p?i.wrap+1:i.wrap,k={};return k[new u.S(i.overscaledZ,y,c.z,m,c.y).key]={backfilled:!1},k[new u.S(i.overscaledZ,C,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(k[new u.S(i.overscaledZ,y,c.z,m,c.y-1).key]={backfilled:!1},k[new u.S(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},k[new u.S(i.overscaledZ,C,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<p&&(k[new u.S(i.overscaledZ,y,c.z,m,c.y+1).key]={backfilled:!1},k[new u.S(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},k[new u.S(i.overscaledZ,C,c.z,S,c.y+1).key]={backfilled:!1}),k}unloadTile(i){return u._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Sr extends u.E{constructor(i,c,p,m){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const y=u.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*y,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.X,radius:(c.clusterRadius||50)*y,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return u._(this,void 0,void 0,function*(){const i=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:p}})}_updateWorkerData(i){return u._(this,void 0,void 0,function*(){const c=u.e({type:this.type},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(P.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(y,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.actor?"RT":"LT";i.actor=this.actor;const p={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const m=yield this.actor.sendAsync({type:c,data:p},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(m,this.map.painter,c==="RT")})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Me=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $e extends u.E{constructor(i,c,p,m){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}load(i){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield V.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.j(c))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.Z.fromLngLat);this.tileID=function(m){let y=1/0,S=1/0,C=-1/0,k=-1/0;for(const G of m)y=Math.min(y,G.x),S=Math.min(S,G.y),C=Math.max(C,G.x),k=Math.max(k,G.y);const L=Math.max(C-y,k-S),D=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),z=Math.pow(2,D);return new u.a1(D,Math.floor((y+C)/2*z),Math.floor((S+k)/2*z))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Te(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class mt extends $e{constructor(i,c,p,m){super(i,c,p,m),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Te(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class kt extends $e{constructor(i,c,p,m){super(i,c,p,m),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(S=>typeof S!="number"))||this.fire(new u.j(new u.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Te(c,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ft={},tr=_=>{switch(_){case"geojson":return Sr;case"image":return $e;case"raster":return Vt;case"raster-dem":return _r;case"vector":return Rr;case"video":return mt;case"canvas":return kt}return Ft[_]},He="RTLPluginLoaded";class Mr extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=fr()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return u._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(He))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Tr=null;function rr(){return Tr||(Tr=new Mr),Tr}class qn{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,y){const S={};if(!y)return S;for(const C of m){const k=C.layerIds.map(L=>y.getLayer(L)).filter(Boolean);if(k.length!==0){C.layers=k,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(L=>k.filter(D=>D.id===L)[0]));for(const L of k)S[L.id]=C}}return S}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!p)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,rr().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Te(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Te(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,p,m,y,S,C,k,L,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:S,tileSize:this.tileSize,pixelPosMatrix:D,transform:k,params:C,queryPadding:this.queryPadding*L},i,c,p):{}}querySourceFeatures(i,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),y=c&&c.sourceLayer?c.sourceLayer:"",S=m._geojsonTileLayer||m[y];if(!S)return;const C=u.a7(c&&c.filter),{z:k,x:L,y:D}=this.tileID.canonical,z={z:k,x:L,y:D};for(let G=0;G<S.length;G++){const Q=S.feature(G);if(C.needGeometry){const de=u.a8(Q,!0);if(!C.filter(new u.z(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!C.filter(new u.z(this.tileID.overscaledZ),Q))continue;const re=p.getId(Q,y),le=new u.a9(Q,k,L,D,re);le.tile=z,i.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const p=u.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(c)if(this.expirationTime<c)m=!0;else{const y=this.expirationTime-c;y?this.expirationTime=p+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!c.style.hasLayer(m))continue;const y=this.buckets[m],S=y.layers[0].sourceLayer||"_geojsonTileLayer",C=p[S],k=i[S];if(!C||!k||Object.keys(k).length===0)continue;y.update(k,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=c&&c.style&&c.style.getLayer(m);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=P.now()+i}setDependencies(i,c){const p={};for(const m of c)p[m]=!0;this.dependencies[i]=p}hasDependency(i,c){for(const p of i){const m=this.dependencies[p];if(m){for(const y of c)if(m[y])return!0}}return!1}}class et{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,p){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:c,timeout:void 0};if(p!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},p)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const p=i.wrapped().key,m=c===void 0?0:this.data[p].indexOf(c),y=this.data[p][m];return this.data[p].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(y.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const p in this.data)for(const m of this.data[p])i(m.value)||c.push(m);for(const p of c)this.remove(p.value.tileID,p)}}class rt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,p){const m=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},u.e(this.stateChanges[i][m],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==m&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const y in this.state[i][m])p[y]||(this.deletedStates[i][m][y]=null)}else for(const y in p)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][y]===null&&delete this.deletedStates[i][m][y]}removeFeatureState(i,c,p){if(this.deletedStates[i]===null)return;const m=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&c!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][p]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(p in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][p]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,c){const p=String(c),m=u.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][c];if(y===null)return{};for(const S in y)delete m[S]}return m}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const S in this.stateChanges[m])this.state[m][S]||(this.state[m][S]={}),u.e(this.state[m][S],this.stateChanges[m][S]),y[S]=this.state[m][S];p[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const S in this.state[m])y[S]={},this.state[m][S]={};else for(const S in this.deletedStates[m]){if(this.deletedStates[m][S]===null)this.state[m][S]={};else for(const C of Object.keys(this.deletedStates[m][S]))delete this.state[m][S][C];y[S]=this.state[m][S]}p[m]=p[m]||{},u.e(p[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in i)i[m].setFeatureState(p,c)}}class at extends u.E{constructor(i,c,p){super(),this.id=i,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,S,C)=>{const k=new(tr(y.type))(m,y,S,C);if(k.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${k.id}`);return k})(i,c,p,this),this._tiles={},this._cache=new et(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new rt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,p)}catch(m){i.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new u.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Er).map(i=>i.key)}getRenderableIds(i){const c=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&c.push(this._tiles[p]);return i?c.sort((p,m)=>{const y=p.tileID,S=m.tileID,C=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),k=new u.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-S.overscaledZ||k.y-C.y||k.x-C.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Er).map(p=>p.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){return u._(this,void 0,void 0,function*(){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,i,c))})}_tileLoaded(i,c,p){i.timeAdded=P.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let m=0;m<c.length;m++){const y=c[m];if(i.neighboringTiles&&i.neighboringTiles[y]){const S=this.getTileByID(y);p(i,S),p(S,i)}}function p(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let S=y.tileID.canonical.x-m.tileID.canonical.x;const C=y.tileID.canonical.y-m.tileID.canonical.y,k=Math.pow(2,m.tileID.canonical.z),L=y.tileID.key;S===0&&C===0||Math.abs(C)>1||(Math.abs(S)>1&&(Math.abs(S+k)===1?S+=k:Math.abs(S-k)===1&&(S-=k)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,S,C),m.neighboringTiles&&m.neighboringTiles[L]&&(m.neighboringTiles[L].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,p,m){for(const y in this._tiles){let S=this._tiles[y];if(m[y]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>p)continue;let C=S.tileID;for(;S&&S.tileID.overscaledZ>c+1;){const L=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[L.key],S&&S.hasData()&&(C=L)}let k=C;for(;k.overscaledZ>c;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){m[C.key]=C;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=i.overscaledZ-1;p>=c;p--){const m=i.scaledTo(p),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,m=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const p={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+c),p[y.tileID.key]=y}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(i,c,p,m,y,S){const C={},k={},L=Object.keys(i),D=P.now();for(const z of L){const G=i[z],Q=this._tiles[z];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=D)continue;const re=this.findLoadedParent(G,c),le=this.findLoadedSibling(G),de=re||le||null;de&&(this._addTile(de.tileID),C[de.tileID.key]=de.tileID),k[z]=G}this._retainLoadedChildren(k,m,p,i);for(const z in C)i[z]||(this._coveredTiles[z]=!0,i[z]=C[z]);if(S){const z={},G={};for(const Q of y)this._tiles[Q.key].hasData()?z[Q.key]=Q:G[Q.key]=Q;for(const Q in G){const re=G[Q].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(z[re[0].key]=i[re[0].key]=re[0],z[re[1].key]=i[re[1].key]=re[1],z[re[2].key]=i[re[2].key]=re[2],z[re[3].key]=i[re[3].key]=re[3],delete G[Q])}for(const Q in G){const re=G[Q],le=this.findLoadedParent(re,this._source.minzoom),de=this.findLoadedSibling(re),pe=le||de||null;if(pe){z[pe.tileID.key]=i[pe.tileID.key]=pe.tileID;for(const _e in z)z[_e].isChildOf(pe.tileID)&&delete z[_e]}}for(const Q in this._tiles)z[Q]||(this._coveredTiles[Q]=!0)}}update(i,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new u.S(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(D=>this._source.hasTile(D)))):p=[];const m=i.coveringZoomLevel(this._source),y=Math.max(m-at.maxOverzooming,this._source.minzoom),S=Math.max(m+at.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const D={};for(const z of p)if(z.canonical.z>this._source.minzoom){const G=z.scaledTo(z.canonical.z-1);D[G.key]=G;const Q=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));D[Q.key]=Q}p=p.concat(Object.values(D))}const C=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(p,m);Mn(this._source.type)&&this._updateCoveredAndRetainedTiles(k,y,S,m,p,c);for(const D in k)this._tiles[D].clearFadeHold();const L=u.ab(this._tiles,k);for(const D of L){const z=this._tiles[D];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var p;const m={},y={},S=Math.max(c-at.maxOverzooming,this._source.minzoom),C=Math.max(c+at.maxUnderzooming,this._source.minzoom),k={};for(const L of i){const D=this._addTile(L);m[L.key]=L,D.hasData()||c<this._source.maxzoom&&(k[L.key]=L)}this._retainLoadedChildren(k,c,C,m);for(const L of i){let D=this._tiles[L.key];if(D.hasData())continue;if(c+1>this._source.maxzoom){const G=L.children(this._source.maxzoom)[0],Q=this.getTile(G);if(Q&&Q.hasData()){m[G.key]=G;continue}}else{const G=L.children(this._source.maxzoom);if(m[G[0].key]&&m[G[1].key]&&m[G[2].key]&&m[G[3].key])continue}let z=D.wasRequested();for(let G=L.overscaledZ-1;G>=S;--G){const Q=L.scaledTo(G);if(y[Q.key])break;if(y[Q.key]=!0,D=this.getTile(Q),!D&&z&&(D=this._addTile(Q)),D){const re=D.hasData();if((re||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||z)&&(m[Q.key]=Q),z=D.wasRequested(),re)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let p,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}c.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(y),p)break;m=y}for(const y of c)this._loadedParentTiles[y]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const c=this._tiles[i].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const p=c;return c||(c=new qn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._tiles[i.key]=c,p||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=c.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){const c=i.sourceDataType;i.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,p){const m=[],y=this.transform;if(!y)return m;const S=p?y.getCameraQueryGeometry(i):i,C=i.map(re=>y.pointCoordinate(re,this.terrain)),k=S.map(re=>y.pointCoordinate(re,this.terrain)),L=this.getIds();let D=1/0,z=1/0,G=-1/0,Q=-1/0;for(const re of k)D=Math.min(D,re.x),z=Math.min(z,re.y),G=Math.max(G,re.x),Q=Math.max(Q,re.y);for(let re=0;re<L.length;re++){const le=this._tiles[L[re]];if(le.holdingForFade())continue;const de=le.tileID,pe=Math.pow(2,y.zoom-le.tileID.overscaledZ),_e=c*le.queryPadding*u.X/le.tileSize/pe,se=[de.getTilePoint(new u.Z(D,z)),de.getTilePoint(new u.Z(G,Q))];if(se[0].x-_e<u.X&&se[0].y-_e<u.X&&se[1].x+_e>=0&&se[1].y+_e>=0){const we=C.map(Pe=>de.getTilePoint(Pe)),Ee=k.map(Pe=>de.getTilePoint(Pe));m.push({tile:le,tileID:de,queryGeometry:we,cameraQueryGeometry:Ee,scale:pe})}}return m}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Mn(this._source.type)){const i=P.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,p){this._state.updateState(i=i||"_geojsonTileLayer",c,p)}removeFeatureState(i,c,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,p)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,p){const m=this._tiles[i];m&&m.setDependencies(c,p)}reloadTilesForDependencies(i,c){for(const p in this._tiles)this._tiles[p].hasDependency(i,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,c))}}function Er(_,i){const c=Math.abs(2*_.wrap)-+(_.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||p-c||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function Mn(_){return _==="raster"||_==="image"||_==="video"}at.maxOverzooming=10,at.maxUnderzooming=3;class Wt{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.ac(i,0,1);let c=1,p=this._distances[c];const m=i*this.paddedLength+this.padding;for(;p<m&&c<this._distances.length;)p=this._distances[++c];const y=c-1,S=this._distances[y],C=p-S,k=C>0?(m-S)/C:0;return this.points[y].mult(1-k).add(this.points[c].mult(k))}}function ao(_,i){let c=!0;return _==="always"||_!=="never"&&i!=="never"||(c=!1),c}class lo{constructor(i,c,p){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,m,y){this._forEachCell(c,p,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(i,c,p,m){this._forEachCell(c-m,p-m,c+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(m)}_insertBoxCell(i,c,p,m,y,S){this.boxCells[y].push(S)}_insertCircleCell(i,c,p,m,y,S){this.circleCells[y].push(S)}_query(i,c,p,m,y,S,C){if(p<0||i>this.width||m<0||c>this.height)return[];const k=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=m){if(y)return[{key:null,x1:i,y1:c,x2:p,y2:m}];for(let L=0;L<this.boxKeys.length;L++)k.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const D=this.circles[3*L],z=this.circles[3*L+1],G=this.circles[3*L+2];k.push({key:this.circleKeys[L],x1:D-G,y1:z-G,x2:D+G,y2:z+G})}}else this._forEachCell(i,c,p,m,this._queryCell,k,{hitTest:y,overlapMode:S,seenUids:{box:{},circle:{}}},C);return k}query(i,c,p,m){return this._query(i,c,p,m,!1,null)}hitTest(i,c,p,m,y,S){return this._query(i,c,p,m,!0,y,S).length>0}hitTestCircle(i,c,p,m,y){const S=i-p,C=i+p,k=c-p,L=c+p;if(C<0||S>this.width||L<0||k>this.height)return!1;const D=[];return this._forEachCell(S,k,C,L,this._queryCellCircle,D,{hitTest:!0,overlapMode:m,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},y),D.length>0}_queryCell(i,c,p,m,y,S,C,k){const{seenUids:L,hitTest:D,overlapMode:z}=C,G=this.boxCells[y];if(G!==null){const re=this.bboxes;for(const le of G)if(!L.box[le]){L.box[le]=!0;const de=4*le,pe=this.boxKeys[le];if(i<=re[de+2]&&c<=re[de+3]&&p>=re[de+0]&&m>=re[de+1]&&(!k||k(pe))&&(!D||!ao(z,pe.overlapMode))&&(S.push({key:pe,x1:re[de],y1:re[de+1],x2:re[de+2],y2:re[de+3]}),D))return!0}}const Q=this.circleCells[y];if(Q!==null){const re=this.circles;for(const le of Q)if(!L.circle[le]){L.circle[le]=!0;const de=3*le,pe=this.circleKeys[le];if(this._circleAndRectCollide(re[de],re[de+1],re[de+2],i,c,p,m)&&(!k||k(pe))&&(!D||!ao(z,pe.overlapMode))){const _e=re[de],se=re[de+1],we=re[de+2];if(S.push({key:pe,x1:_e-we,y1:se-we,x2:_e+we,y2:se+we}),D)return!0}}}return!1}_queryCellCircle(i,c,p,m,y,S,C,k){const{circle:L,seenUids:D,overlapMode:z}=C,G=this.boxCells[y];if(G!==null){const re=this.bboxes;for(const le of G)if(!D.box[le]){D.box[le]=!0;const de=4*le,pe=this.boxKeys[le];if(this._circleAndRectCollide(L.x,L.y,L.radius,re[de+0],re[de+1],re[de+2],re[de+3])&&(!k||k(pe))&&!ao(z,pe.overlapMode))return S.push(!0),!0}}const Q=this.circleCells[y];if(Q!==null){const re=this.circles;for(const le of Q)if(!D.circle[le]){D.circle[le]=!0;const de=3*le,pe=this.circleKeys[le];if(this._circlesCollide(re[de],re[de+1],re[de+2],L.x,L.y,L.radius)&&(!k||k(pe))&&!ao(z,pe.overlapMode))return S.push(!0),!0}}}_forEachCell(i,c,p,m,y,S,C,k){const L=this._convertToXCellCoord(i),D=this._convertToYCellCoord(c),z=this._convertToXCellCoord(p),G=this._convertToYCellCoord(m);for(let Q=L;Q<=z;Q++)for(let re=D;re<=G;re++)if(y.call(this,i,c,p,m,this.xCellCount*re+Q,S,C,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,m,y,S){const C=m-i,k=y-c,L=p+S;return L*L>C*C+k*k}_circleAndRectCollide(i,c,p,m,y,S,C){const k=(S-m)/2,L=Math.abs(i-(m+k));if(L>k+p)return!1;const D=(C-y)/2,z=Math.abs(c-(y+D));if(z>D+p)return!1;if(L<=k||z<=D)return!0;const G=L-k,Q=z-D;return G*G+Q*Q<=p*p}}function Gi(_,i,c,p,m){const y=u.H();return i?(u.K(y,y,[1/m,1/m,1]),c||u.ad(y,y,p.angle)):u.L(y,p.labelPlaneMatrix,_),y}function Zi(_,i,c,p,m){if(i){const y=u.ae(_);return u.K(y,y,[m,m,1]),c||u.ad(y,y,-p.angle),y}return p.glCoordMatrix}function ue(_,i,c,p){let m;p?(m=[_,i,p(_,i),1],u.af(m,m,c)):(m=[_,i,0,1],ze(m,m,c));const y=m[3];return{point:new u.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function N(_,i){return .5+_/i*.5}function $(_,i){return _.x>=-i[0]&&_.x<=i[0]&&_.y>=-i[1]&&_.y<=i[1]}function J(_,i,c,p,m,y,S,C,k,L,D,z,G,Q,re){const le=p?_.textSizeData:_.iconSizeData,de=u.ag(le,c.transform.zoom),pe=[256/c.width*2+1,256/c.height*2+1],_e=p?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;_e.clear();const se=_.lineVertexArray,we=p?_.text.placedSymbolArray:_.icon.placedSymbolArray,Ee=c.transform.width/c.transform.height;let Pe=!1;for(let qe=0;qe<we.length;qe++){const tt=we.get(qe);if(tt.hidden||tt.writingMode===u.ah.vertical&&!Pe){be(tt.numGlyphs,_e);continue}Pe=!1;const pt=ue(tt.anchorX,tt.anchorY,i,re);if(!$(pt.point,pe)){be(tt.numGlyphs,_e);continue}const xt=N(c.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),ct=u.ai(le,de,tt),lt=S?ct/xt:ct*xt,It={getElevation:re,labelPlaneMatrix:m,lineVertexArray:se,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:L,tileAnchorPoint:new u.P(tt.anchorX,tt.anchorY),unwrappedTileID:D,width:z,height:G,translation:Q},Qt=Se(It,tt,lt,!1,C,i,y,_.glyphOffsetArray,_e,Ee,k);Pe=Qt.useVertical,(Qt.notEnoughRoom||Pe||Qt.needsFlipping&&Se(It,tt,lt,!0,C,i,y,_.glyphOffsetArray,_e,Ee,k).notEnoughRoom)&&be(tt.numGlyphs,_e)}p?_.text.dynamicLayoutVertexBuffer.updateData(_e):_.icon.dynamicLayoutVertexBuffer.updateData(_e)}function oe(_,i,c,p,m,y,S,C){const k=y.glyphStartIndex+y.numGlyphs,L=y.lineStartIndex,D=y.lineStartIndex+y.lineLength,z=i.getoffsetX(y.glyphStartIndex),G=i.getoffsetX(k-1),Q=ne(_*z,c,p,m,y.segment,L,D,C,S);if(!Q)return null;const re=ne(_*G,c,p,m,y.segment,L,D,C,S);return re?C.projectionCache.anyProjectionOccluded?null:{first:Q,last:re}:null}function ve(_,i,c,p){return _===u.ah.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:(_===u.ah.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Se(_,i,c,p,m,y,S,C,k,L,D){const z=c/24,G=i.lineOffsetX*z,Q=i.lineOffsetY*z;let re;if(i.numGlyphs>1){const le=i.glyphStartIndex+i.numGlyphs,de=i.lineStartIndex,pe=i.lineStartIndex+i.lineLength,_e=oe(z,C,G,Q,p,i,D,_);if(!_e)return{notEnoughRoom:!0};const se=ue(_e.first.point.x,_e.first.point.y,S,_.getElevation).point,we=ue(_e.last.point.x,_e.last.point.y,S,_.getElevation).point;if(m&&!p){const Ee=ve(i.writingMode,se,we,L);if(Ee)return Ee}re=[_e.first];for(let Ee=i.glyphStartIndex+1;Ee<le-1;Ee++)re.push(ne(z*C.getoffsetX(Ee),G,Q,p,i.segment,de,pe,_,D));re.push(_e.last)}else{if(m&&!p){const de=ue(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,pe=i.lineStartIndex+i.segment+1,_e=new u.P(_.lineVertexArray.getx(pe),_.lineVertexArray.gety(pe)),se=ue(_e.x,_e.y,y,_.getElevation),we=se.signedDistanceFromCamera>0?se.point:function(Pe,qe,tt,pt,xt,ct){return Ae(Pe,qe,tt,1,xt,ct)}(_.tileAnchorPoint,_e,de,0,y,_),Ee=ve(i.writingMode,de,we,L);if(Ee)return Ee}const le=ne(z*C.getoffsetX(i.glyphStartIndex),G,Q,p,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,_,D);if(!le||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[le]}for(const le of re)u.aj(k,le.point,le.angle);return{}}function Ae(_,i,c,p,m,y){const S=_.add(_.sub(i)._unit()),C=m!==void 0?ue(S.x,S.y,m,y.getElevation).point:Oe(S.x,S.y,y).point,k=c.sub(C);return c.add(k._mult(p/k.mag()))}function ye(_,i,c){const p=i.projectionCache;if(p.projections[_])return p.projections[_];const m=new u.P(i.lineVertexArray.getx(_),i.lineVertexArray.gety(_)),y=Oe(m.x,m.y,i);if(y.signedDistanceFromCamera>0)return p.projections[_]=y.point,p.anyProjectionOccluded=p.anyProjectionOccluded||y.isOccluded,y.point;const S=_-c.direction;return function(C,k,L,D,z){return Ae(C,k,L,D,void 0,z)}(c.distanceFromAnchor===0?i.tileAnchorPoint:new u.P(i.lineVertexArray.getx(S),i.lineVertexArray.gety(S)),m,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Oe(_,i,c){const p=_+c.translation[0],m=i+c.translation[1];let y;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(y=c.projection.projectTileCoordinates(p,m,c.unwrappedTileID,c.getElevation),y.point.x=(.5*y.point.x+.5)*c.width,y.point.y=(.5*-y.point.y+.5)*c.height):(y=ue(p,m,c.labelPlaneMatrix,c.getElevation),y.isOccluded=!1),y}function Ge(_,i,c){return _._unit()._perp()._mult(i*c)}function Le(_,i,c,p,m,y,S,C,k){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const L=c.add(i);if(_+k.direction<p||_+k.direction>=m)return C.projectionCache.offsets[_]=L,L;const D=ye(_+k.direction,C,k),z=Ge(D.sub(c),S,k.direction),G=c.add(z),Q=D.add(z);return C.projectionCache.offsets[_]=u.ak(y,L,G,Q)||L,C.projectionCache.offsets[_]}function ne(_,i,c,p,m,y,S,C,k){const L=p?_-i:_+i;let D=L>0?1:-1,z=0;p&&(D*=-1,z=Math.PI),D<0&&(z+=Math.PI);let G,Q=D>0?y+m:y+m+1;C.projectionCache.cachedAnchorPoint?G=C.projectionCache.cachedAnchorPoint:(G=Oe(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=G);let re,le,de=G,pe=G,_e=0,se=0;const we=Math.abs(L),Ee=[];let Pe;for(;_e+se<=we;){if(Q+=D,Q<y||Q>=S)return null;_e+=se,pe=de,le=re;const pt={absOffsetX:we,direction:D,distanceFromAnchor:_e,previousVertex:pe};if(de=ye(Q,C,pt),c===0)Ee.push(pe),Pe=de.sub(pe);else{let xt;const ct=de.sub(pe);xt=ct.mag()===0?Ge(ye(Q+D,C,pt).sub(de),c,D):Ge(ct,c,D),le||(le=pe.add(xt)),re=Le(Q,xt,de,y,S,le,c,C,pt),Ee.push(le),Pe=re.sub(le)}se=Pe.mag()}const qe=Pe._mult((we-_e)/se)._add(le||pe),tt=z+Math.atan2(de.y-pe.y,de.x-pe.x);return Ee.push(qe),{point:qe,angle:k?tt:0,path:Ee}}const ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function be(_,i){for(let c=0;c<_;c++){const p=i.length;i.resize(p+4),i.float32.set(ce,3*p)}}function ze(_,i,c){const p=i[0],m=i[1];return _[0]=c[0]*p+c[4]*m+c[12],_[1]=c[1]*p+c[5]*m+c[13],_[3]=c[3]*p+c[7]*m+c[15],_}const Ke=100;class ot{constructor(i,c,p=new lo(i.width+200,i.height+200,25),m=new lo(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=c,this.grid=p,this.ignoredGrid=m,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Ke,this.screenBottomBoundary=i.height+Ke,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,p,m,y,S,C,k,L,D,z){const G=i.anchorPointX+k[0],Q=i.anchorPointY+k[1],re=this.projectAndGetPerspectiveRatio(m,G,Q,y,D),le=p*re.perspectiveRatio;let de;if(S||C)de=this._projectCollisionBox(i,le,m,y,S,C,k,re,D,z);else{const Ee=re.point.x+(z?z.x*le:0),Pe=re.point.y+(z?z.y*le:0);de={allPointsOccluded:!1,box:[Ee+i.x1*le,Pe+i.y1*le,Ee+i.x2*le,Pe+i.y2*le]}}const[pe,_e,se,we]=de.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?de.allPointsOccluded:this.mapProjection.isOccluded(G,Q,y))||re.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(pe,_e,se,we)||c!=="always"&&this.grid.hitTest(pe,_e,se,we,c,L)?{box:[pe,_e,se,we],placeable:!1,offscreen:!1}:{box:[pe,_e,se,we],placeable:!0,offscreen:this.isOffscreen(pe,_e,se,we)}}placeCollisionCircles(i,c,p,m,y,S,C,k,L,D,z,G,Q,re,le,de){const pe=[],_e=new u.P(c.anchorX,c.anchorY),se=this.getPerspectiveRatio(S,_e.x,_e.y,C,de),we=(z?y/se:y*se)/u.ap,Ee={getElevation:de,labelPlaneMatrix:k,lineVertexArray:p,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:_e,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:le},Pe=oe(we,m,c.lineOffsetX*we,c.lineOffsetY*we,!1,c,!1,Ee);let qe=!1,tt=!1,pt=!0;if(Pe){const xt=.5*Q*se+re,ct=new u.P(-100,-100),lt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),It=new Wt,Qt=Pe.first,ht=Pe.last;let yt=[];for(let cr=Qt.path.length-1;cr>=1;cr--)yt.push(Qt.path[cr]);for(let cr=1;cr<ht.path.length;cr++)yt.push(ht.path[cr]);const Kt=2.5*xt;if(L){const cr=this.projectPathToScreenSpace(yt,Ee,L);yt=cr.some(yr=>yr.signedDistanceFromCamera<=0)?[]:cr.map(yr=>yr.point)}let en=[];if(yt.length>0){const cr=yt[0].clone(),yr=yt[0].clone();for(let tn=1;tn<yt.length;tn++)cr.x=Math.min(cr.x,yt[tn].x),cr.y=Math.min(cr.y,yt[tn].y),yr.x=Math.max(yr.x,yt[tn].x),yr.y=Math.max(yr.y,yt[tn].y);en=cr.x>=ct.x&&yr.x<=lt.x&&cr.y>=ct.y&&yr.y<=lt.y?[yt]:yr.x<ct.x||cr.x>lt.x||yr.y<ct.y||cr.y>lt.y?[]:u.al([yt],ct.x,ct.y,lt.x,lt.y)}for(const cr of en){It.reset(cr,.25*xt);let yr=0;yr=It.length<=.5*xt?1:Math.ceil(It.paddedLength/Kt)+1;for(let tn=0;tn<yr;tn++){const li=tn/Math.max(yr-1,1),Do=It.lerp(li),rn=Do.x+Ke,zi=Do.y+Ke;pe.push(rn,zi,xt,0);const bi=rn-xt,ui=zi-xt,wi=rn+xt,hs=zi+xt;if(pt=pt&&this.isOffscreen(bi,ui,wi,hs),tt=tt||this.isInsideGrid(bi,ui,wi,hs),i!=="always"&&this.grid.hitTestCircle(rn,zi,xt,i,G)&&(qe=!0,!D))return{circles:[],offscreen:!1,collisionDetected:qe}}}}return{circles:!D&&qe||!tt||se<this.perspectiveRatioCutoff?[]:pe,offscreen:pt,collisionDetected:qe}}projectPathToScreenSpace(i,c,p){return i.map(m=>ue(m.x,m.y,p,c.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,m=1/0,y=-1/0,S=-1/0;for(const D of i){const z=new u.P(D.x+Ke,D.y+Ke);p=Math.min(p,z.x),m=Math.min(m,z.y),y=Math.max(y,z.x),S=Math.max(S,z.y),c.push(z)}const C=this.grid.query(p,m,y,S).concat(this.ignoredGrid.query(p,m,y,S)),k={},L={};for(const D of C){const z=D.key;if(k[z.bucketInstanceId]===void 0&&(k[z.bucketInstanceId]={}),k[z.bucketInstanceId][z.featureIndex])continue;const G=[new u.P(D.x1,D.y1),new u.P(D.x2,D.y1),new u.P(D.x2,D.y2),new u.P(D.x1,D.y2)];u.am(c,G)&&(k[z.bucketInstanceId][z.featureIndex]=!0,L[z.bucketInstanceId]===void 0&&(L[z.bucketInstanceId]=[]),L[z.bucketInstanceId].push(z.featureIndex))}return L}insertCollisionBox(i,c,p,m,y,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:S,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,m,y,S){const C=p?this.ignoredGrid:this.grid,k={bucketInstanceId:m,featureIndex:y,collisionGroupID:S,overlapMode:c};for(let L=0;L<i.length;L+=4)C.insertCircle(k,i[L],i[L+1],i[L+2])}projectAndGetPerspectiveRatio(i,c,p,m,y){let S;y?(S=[c,p,y(c,p),1],u.af(S,S,i)):(S=[c,p,0,1],ze(S,S,i));const C=S[3];return{point:new u.P((S[0]/C+1)/2*this.transform.width+Ke,(-S[1]/C+1)/2*this.transform.height+Ke),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}getPerspectiveRatio(i,c,p,m,y){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,m,y):ue(c,p,i,y);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(i,c,p,m){return p<Ke||i>=this.screenRightBoundary||m<Ke||c>this.screenBottomBoundary}isInsideGrid(i,c,p,m){return p>=0&&i<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.an([]);return u.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,p,m,y,S,C,k,L,D){let z=new u.P(1,0),G=new u.P(0,1);const Q=new u.P(i.anchorPointX+C[0],i.anchorPointY+C[1]);if(S&&!y){const pt=this.projectAndGetPerspectiveRatio(p,Q.x+1,Q.y,m,L).point.sub(k.point).unit(),xt=Math.atan(pt.y/pt.x)+(pt.x<0?Math.PI:0),ct=Math.sin(xt),lt=Math.cos(xt);z=new u.P(lt,ct),G=new u.P(-ct,lt)}else if(!S&&y){const pt=-this.transform.angle,xt=Math.sin(pt),ct=Math.cos(pt);z=new u.P(ct,xt),G=new u.P(-xt,ct)}let re=k.point,le=c;if(y){re=Q;const pt=this.transform.zoom-Math.floor(this.transform.zoom);le=Math.pow(2,-pt),le*=this.mapProjection.getPitchedTextCorrection(this.transform,Q,m),D||(le*=u.ac(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}D&&(re=re.add(z.mult(D.x*le)).add(G.mult(D.y*le)));const de=i.x1*le,pe=i.x2*le,_e=(de+pe)/2,se=i.y1*le,we=i.y2*le,Ee=(se+we)/2,Pe=[{offsetX:de,offsetY:se},{offsetX:_e,offsetY:se},{offsetX:pe,offsetY:se},{offsetX:pe,offsetY:Ee},{offsetX:pe,offsetY:we},{offsetX:_e,offsetY:we},{offsetX:de,offsetY:we},{offsetX:de,offsetY:Ee}];let qe=[];for(const{offsetX:pt,offsetY:xt}of Pe)qe.push(new u.P(re.x+z.x*pt+G.x*xt,re.y+z.y*pt+G.y*xt));let tt=!1;if(y){const pt=qe.map(xt=>this.projectAndGetPerspectiveRatio(p,xt.x,xt.y,m,L));tt=pt.some(xt=>!xt.isOccluded),qe=pt.map(xt=>xt.point)}else tt=!0;return{box:u.ao(qe),allPointsOccluded:!tt}}}function ft(_,i,c){return i*(u.X/(_.tileSize*Math.pow(2,c-_.tileID.overscaledZ)))}class nt{constructor(i,c,p,m){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class St{constructor(i,c,p,m,y){this.text=new nt(i?i.text:null,c,p,y),this.icon=new nt(i?i.icon:null,c,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qe{constructor(i,c,p){this.text=i,this.icon=c,this.skipFade=p}}class ut{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class qt{constructor(i,c,p,m,y){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=y}}class or{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function dr(_,i,c,p,m){const{horizontalAlign:y,verticalAlign:S}=u.au(_);return new u.P(-(y-.5)*i+p[0]*m,-(S-.5)*c+p[1]*m)}class nr{constructor(i,c,p,m,y,S){this.transform=i.clone(),this.terrain=p,this.collisionIndex=new ot(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new or(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const c=this.terrain;return c?(p,m)=>c.getElevation(i,p,m):null}getBucketParts(i,c,p,m){const y=p.getBucket(c),S=p.latestFeatureIndex;if(!y||!S||c.id!==y.layerIds[0])return;const C=p.collisionBoxArray,k=y.layers[0].layout,L=y.layers[0].paint,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),z=p.tileSize/u.X,G=p.tileID.toUnwrapped(),Q=this.transform.calculatePosMatrix(G),re=k.get("text-pitch-alignment")==="map",le=k.get("text-rotation-alignment")==="map",de=ft(p,1,this.transform.zoom),pe=this.collisionIndex.mapProjection.translatePosition(this.transform,p,L.get("text-translate"),L.get("text-translate-anchor")),_e=this.collisionIndex.mapProjection.translatePosition(this.transform,p,L.get("icon-translate"),L.get("icon-translate-anchor")),se=Gi(Q,re,le,this.transform,de);let we=null;if(re){const Pe=Zi(Q,re,le,this.transform,de);we=u.L([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[y.bucketInstanceId]=new qt(y.bucketInstanceId,S,y.sourceLayerIndex,y.index,p.tileID);const Ee={bucket:y,layout:k,translationText:pe,translationIcon:_e,posMatrix:Q,unwrappedTileID:G,textLabelPlaneMatrix:se,labelToScreenMatrix:we,scale:D,textPixelRatio:z,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const Pe of y.sortKeyRanges){const{sortKey:qe,symbolInstanceStart:tt,symbolInstanceEnd:pt}=Pe;i.push({sortKey:qe,symbolInstanceStart:tt,symbolInstanceEnd:pt,parameters:Ee})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(i,c,p,m,y,S,C,k,L,D,z,G,Q,re,le,de,pe,_e,se){const we=u.aq[i.textAnchor],Ee=[i.textOffset0,i.textOffset1],Pe=dr(we,p,m,Ee,y),qe=this.collisionIndex.placeCollisionBox(c,G,k,L,D,C,S,de,z.predicate,se,Pe);if((!_e||this.collisionIndex.placeCollisionBox(_e,G,k,L,D,C,S,pe,z.predicate,se,Pe).placeable)&&qe.placeable){let tt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(tt=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Ee,width:p,height:m,anchor:we,textBoxScale:y,prevAnchor:tt},this.markUsedJustification(re,we,Q,le),re.allowVerticalPlacement&&(this.markUsedOrientation(re,le,Q),this.placedOrientations[Q.crossTileID]=le),{shift:Pe,placedGlyphBoxes:qe}}}placeLayerBucketPart(i,c,p){const{bucket:m,layout:y,translationText:S,translationIcon:C,posMatrix:k,unwrappedTileID:L,textLabelPlaneMatrix:D,labelToScreenMatrix:z,textPixelRatio:G,holdingForFade:Q,collisionBoxArray:re,partiallyEvaluatedTextSize:le,collisionGroup:de}=i.parameters,pe=y.get("text-optional"),_e=y.get("icon-optional"),se=u.ar(y,"text-overlap","text-allow-overlap"),we=se==="always",Ee=u.ar(y,"icon-overlap","icon-allow-overlap"),Pe=Ee==="always",qe=y.get("text-rotation-alignment")==="map",tt=y.get("text-pitch-alignment")==="map",pt=y.get("icon-text-fit")!=="none",xt=y.get("symbol-z-order")==="viewport-y",ct=we&&(Pe||!m.hasIconData()||_e),lt=Pe&&(we||!m.hasTextData()||pe);!m.collisionArrays&&re&&m.deserializeCollisionBoxes(re);const It=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),Qt=(ht,yt,Kt)=>{var en,cr;if(c[ht.crossTileID])return;if(Q)return void(this.placements[ht.crossTileID]=new Qe(!1,!1,!1));let yr=!1,tn=!1,li=!0,Do=null,rn={box:null,placeable:!1,offscreen:null},zi={box:null,placeable:!1,offscreen:null},bi=null,ui=null,wi=null,hs=0,$l=0,Ih=0;yt.textFeatureIndex?hs=yt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(hs=ht.featureIndex),yt.verticalTextFeatureIndex&&($l=yt.verticalTextFeatureIndex);const jl=yt.textBox;if(jl){const mo=ni=>{let ci=u.ah.horizontal;if(m.allowVerticalPlacement&&!ni&&this.prevPlacement){const Ji=this.prevPlacement.placedOrientations[ht.crossTileID];Ji&&(this.placedOrientations[ht.crossTileID]=Ji,ci=Ji,this.markUsedOrientation(m,ci,ht))}return ci},go=(ni,ci)=>{if(m.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&yt.verticalTextBox){for(const Ji of m.writingModes)if(Ji===u.ah.vertical?(rn=ci(),zi=rn):rn=ni(),rn&&rn.placeable)break}else rn=ni()},oa=ht.textAnchorOffsetStartIndex,zo=ht.textAnchorOffsetEndIndex;if(zo===oa){const ni=(ci,Ji)=>{const xr=this.collisionIndex.placeCollisionBox(ci,se,G,k,L,tt,qe,S,de.predicate,It);return xr&&xr.placeable&&(this.markUsedOrientation(m,Ji,ht),this.placedOrientations[ht.crossTileID]=Ji),xr};go(()=>ni(jl,u.ah.horizontal),()=>{const ci=yt.verticalTextBox;return m.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&ci?ni(ci,u.ah.vertical):{box:null,offscreen:null}}),mo(rn&&rn.placeable)}else{let ni=u.aq[(cr=(en=this.prevPlacement)===null||en===void 0?void 0:en.variableOffsets[ht.crossTileID])===null||cr===void 0?void 0:cr.anchor];const ci=(xr,Wa,Ul)=>{const Vl=xr.x2-xr.x1,Wg=xr.y2-xr.y1,Ox=ht.textBoxScale,Gg=pt&&Ee==="never"?Wa:null;let sa=null,Zg=se==="never"?1:2,Mh="never";ni&&Zg++;for(let Xu=0;Xu<Zg;Xu++){for(let Lh=oa;Lh<zo;Lh++){const Oh=m.textAnchorOffsets.get(Lh);if(ni&&Oh.textAnchor!==ni)continue;const ql=this.attemptAnchorPlacement(Oh,xr,Vl,Wg,Ox,qe,tt,G,k,L,de,Mh,ht,m,Ul,S,C,Gg,It);if(ql&&(sa=ql.placedGlyphBoxes,sa&&sa.placeable))return yr=!0,Do=ql.shift,sa}ni?ni=null:Mh=se}return p&&!sa&&(sa={box:this.collisionIndex.placeCollisionBox(jl,"always",G,k,L,tt,qe,S,de.predicate,It,new u.P(0,0)).box,offscreen:!1,placeable:!1}),sa};go(()=>ci(jl,yt.iconBox,u.ah.horizontal),()=>{const xr=yt.verticalTextBox;return m.allowVerticalPlacement&&(!rn||!rn.placeable)&&ht.numVerticalGlyphVertices>0&&xr?ci(xr,yt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),rn&&(yr=rn.placeable,li=rn.offscreen);const Ji=mo(rn&&rn.placeable);if(!yr&&this.prevPlacement){const xr=this.prevPlacement.variableOffsets[ht.crossTileID];xr&&(this.variableOffsets[ht.crossTileID]=xr,this.markUsedJustification(m,xr.anchor,ht,Ji))}}}if(bi=rn,yr=bi&&bi.placeable,li=bi&&bi.offscreen,ht.useRuntimeCollisionCircles){const mo=m.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),go=u.ai(m.textSizeData,le,mo),oa=y.get("text-padding");ui=this.collisionIndex.placeCollisionCircles(se,mo,m.lineVertexArray,m.glyphOffsetArray,go,k,L,D,z,p,tt,de.predicate,ht.collisionCircleDiameter,oa,S,It),ui.circles.length&&ui.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),yr=we||ui.circles.length>0&&!ui.collisionDetected,li=li&&ui.offscreen}if(yt.iconFeatureIndex&&(Ih=yt.iconFeatureIndex),yt.iconBox){const mo=go=>this.collisionIndex.placeCollisionBox(go,Ee,G,k,L,tt,qe,C,de.predicate,It,pt&&Do?Do:void 0);zi&&zi.placeable&&yt.verticalIconBox?(wi=mo(yt.verticalIconBox),tn=wi.placeable):(wi=mo(yt.iconBox),tn=wi.placeable),li=li&&wi.offscreen}const po=pe||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,Rh=_e||ht.numIconVertices===0;po||Rh?Rh?po||(tn=tn&&yr):yr=tn&&yr:tn=yr=tn&&yr;const ep=tn&&wi.placeable;if(yr&&bi.placeable&&this.collisionIndex.insertCollisionBox(bi.box,se,y.get("text-ignore-placement"),m.bucketInstanceId,zi&&zi.placeable&&$l?$l:hs,de.ID),ep&&this.collisionIndex.insertCollisionBox(wi.box,Ee,y.get("icon-ignore-placement"),m.bucketInstanceId,Ih,de.ID),ui&&yr&&this.collisionIndex.insertCollisionCircles(ui.circles,se,y.get("text-ignore-placement"),m.bucketInstanceId,hs,de.ID),p&&this.storeCollisionData(m.bucketInstanceId,Kt,yt,bi,wi,ui),ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ht.crossTileID]=new Qe(yr||ct,tn||lt,li||m.justReloaded),c[ht.crossTileID]=!0};if(xt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ht=m.getSortedSymbolIndexes(this.transform.angle);for(let yt=ht.length-1;yt>=0;--yt){const Kt=ht[yt];Qt(m.symbolInstances.get(Kt),m.collisionArrays[Kt],Kt)}}else for(let ht=i.symbolInstanceStart;ht<i.symbolInstanceEnd;ht++)Qt(m.symbolInstances.get(ht),m.collisionArrays[ht],ht);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[m.bucketInstanceId];u.as(ht.invProjMatrix,k),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(i,c,p,m,y,S){if(p.textBox||p.iconBox){let C,k;this.collisionBoxArrays.has(i)?C=this.collisionBoxArrays.get(i):(C=new Map,this.collisionBoxArrays.set(i,C)),C.has(c)?k=C.get(c):(k={text:null,icon:null},C.set(c,k)),p.textBox&&(k.text=m.box),p.iconBox&&(k.icon=y.box)}if(S){let C=this.collisionCircleArrays[i];C===void 0&&(C=this.collisionCircleArrays[i]=new ut);for(let k=0;k<S.circles.length;k+=4)C.circles.push(S.circles[k+0]),C.circles.push(S.circles[k+1]),C.circles.push(S.circles[k+2]),C.circles.push(S.collisionDetected?1:0)}}markUsedJustification(i,c,p,m){let y;y=m===u.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.at(c)];const S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const C of S)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:p.crossTileID)}markUsedOrientation(i,c,p){const m=c===u.ah.horizontal||c===u.ah.horizontalOnly?c:0,y=c===u.ah.vertical?c:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const C of S)i.text.placedSymbolArray.get(C).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const m=c?c.symbolFadeChange(i):1,y=c?c.opacities:{},S=c?c.variableOffsets:{},C=c?c.placedOrientations:{};for(const k in this.placements){const L=this.placements[k],D=y[k];D?(this.opacities[k]=new St(D,m,L.text,L.icon),p=p||L.text!==D.text.placed||L.icon!==D.icon.placed):(this.opacities[k]=new St(null,m,L.text,L.icon,L.skipFade),p=p||L.text||L.icon)}for(const k in y){const L=y[k];if(!this.opacities[k]){const D=new St(L,m,!1,!1);D.isHidden()||(this.opacities[k]=D,p=p||L.text.placed||L.icon.placed)}}for(const k in S)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=S[k]);for(const k in C)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=C[k]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const m of c){const y=m.getBucket(i);y&&m.latestFeatureIndex&&i.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(i,c,p,m){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0],S=y.layout,C=new St(null,0,!1,!1,!0),k=S.get("text-allow-overlap"),L=S.get("icon-allow-overlap"),D=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=S.get("text-rotation-alignment")==="map",G=S.get("text-pitch-alignment")==="map",Q=S.get("icon-text-fit")!=="none",re=new St(null,0,k&&(L||!i.hasIconData()||S.get("icon-optional")),L&&(k||!i.hasTextData()||S.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const le=(pe,_e,se)=>{for(let we=0;we<_e/4;we++)pe.opacityVertexArray.emplaceBack(se);pe.hasVisibleVertices=pe.hasVisibleVertices||se!==Ro},de=this.collisionBoxArrays.get(i.bucketInstanceId);for(let pe=0;pe<i.symbolInstances.length;pe++){const _e=i.symbolInstances.get(pe),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:we,crossTileID:Ee}=_e;let Pe=this.opacities[Ee];p[Ee]?Pe=C:Pe||(Pe=re,this.opacities[Ee]=Pe),p[Ee]=!0;const qe=_e.numIconVertices>0,tt=this.placedOrientations[_e.crossTileID],pt=tt===u.ah.vertical,xt=tt===u.ah.horizontal||tt===u.ah.horizontalOnly;if(se>0||we>0){const lt=Zn(Pe.text);le(i.text,se,pt?Ro:lt),le(i.text,we,xt?Ro:lt);const It=Pe.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(yt=>{yt>=0&&(i.text.placedSymbolArray.get(yt).hidden=It||pt?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=It||xt?1:0);const Qt=this.variableOffsets[_e.crossTileID];Qt&&this.markUsedJustification(i,Qt.anchor,_e,tt);const ht=this.placedOrientations[_e.crossTileID];ht&&(this.markUsedJustification(i,"left",_e,ht),this.markUsedOrientation(i,ht,_e))}if(qe){const lt=Zn(Pe.icon),It=!(Q&&_e.verticalPlacedIconSymbolIndex&&pt);_e.placedIconSymbolIndex>=0&&(le(i.icon,_e.numIconVertices,It?lt:Ro),i.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(le(i.icon,_e.numVerticalIconVertices,It?Ro:lt),i.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const ct=de&&de.has(pe)?de.get(pe):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const lt=i.collisionArrays[pe];if(lt){let It=new u.P(0,0);if(lt.textBox||lt.verticalTextBox){let Qt=!0;if(D){const ht=this.variableOffsets[Ee];ht?(It=dr(ht.anchor,ht.width,ht.height,ht.textOffset,ht.textBoxScale),z&&It._rotate(G?this.transform.angle:-this.transform.angle)):Qt=!1}if(lt.textBox||lt.verticalTextBox){let ht;lt.textBox&&(ht=pt),lt.verticalTextBox&&(ht=xt),un(i.textCollisionBox.collisionVertexArray,Pe.text.placed,!Qt||ht,ct.text,It.x,It.y)}}if(lt.iconBox||lt.verticalIconBox){const Qt=!!(!xt&&lt.verticalIconBox);let ht;lt.iconBox&&(ht=Qt),lt.verticalIconBox&&(ht=!Qt),un(i.iconCollisionBox.collisionVertexArray,Pe.icon.placed,ht,ct.icon,Q?It.x:0,Q?It.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=pe.invProjMatrix,i.placementViewportMatrix=pe.viewportMatrix,i.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function un(_,i,c,p,m,y){p&&p.length!==0||(p=[0,0,0,0]);const S=p[0]-Ke,C=p[1]-Ke,k=p[2]-Ke,L=p[3]-Ke;_.emplaceBack(i?1:0,c?1:0,m||0,y||0,S,C),_.emplaceBack(i?1:0,c?1:0,m||0,y||0,k,C),_.emplaceBack(i?1:0,c?1:0,m||0,y||0,k,L),_.emplaceBack(i?1:0,c?1:0,m||0,y||0,S,L)}const Jt=Math.pow(2,25),Ms=Math.pow(2,24),Ki=Math.pow(2,17),Bn=Math.pow(2,16),En=Math.pow(2,9),vl=Math.pow(2,8),Cn=Math.pow(2,1);function Zn(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,c=Math.floor(127*_.opacity);return c*Jt+i*Ms+c*Ki+i*Bn+c*En+i*vl+c*Cn+i}const Ro=0;function uo(){return{isOccluded:(_,i,c)=>!1,getPitchedTextCorrection:(_,i,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,i,c,p){throw new Error("Not implemented.")},translatePosition:(_,i,c,p)=>function(m,y,S,C,k=!1){if(!S[0]&&!S[1])return[0,0];const L=k?C==="map"?m.angle:0:C==="viewport"?-m.angle:0;if(L){const D=Math.sin(L),z=Math.cos(L);S=[S[0]*z-S[1]*D,S[0]*D+S[1]*z]}return[k?S[0]:ft(y,S[0],m.zoom),k?S[1]:ft(y,S[1],m.zoom)]}(_,i,c,p),getCircleRadiusCorrection:_=>1}}class Bt{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,m,y){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(S,m,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((C,k)=>C.sortKey-k.sortKey));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,y())return!0;return!1}}class Gr{constructor(i,c,p,m,y,S,C,k){this.placement=new nr(i,uo(),c,S,C,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const m=P.now(),y=()=>!this._forceFullPlacement&&P.now()-m>2;for(;this._currentPlacementIndex>=0;){const S=c[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=C)&&(!S.maxzoom||S.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Bt(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const cn=512/u.X/2;class ur{constructor(i,c,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let y=0;y<c.length;y++){const S=c.get(y),C=S.key,k=m.get(C);k?k.push(S):m.set(C,[S])}for(const[y,S]of m){const C={positions:S.map(k=>({x:Math.floor(k.anchorX*cn),y:Math.floor(k.anchorY*cn)})),crossTileIDs:S.map(k=>k.crossTileID)};if(C.positions.length>128){const k=new u.av(C.positions.length,16,Uint16Array);for(const{x:L,y:D}of C.positions)k.add(L,D);k.finish(),delete C.positions,C.index=k}this._symbolsByKey[y]=C}}getScaledCoordinates(i,c){const{x:p,y:m,z:y}=this.tileID.canonical,{x:S,y:C,z:k}=c.canonical,L=cn/Math.pow(2,k-y),D=(C*u.X+i.anchorY)*L,z=m*u.X*cn;return{x:Math.floor((S*u.X+i.anchorX)*L-p*u.X*cn),y:Math.floor(D-z)}}findMatches(i,c,p){const m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let y=0;y<i.length;y++){const S=i.get(y);if(S.crossTileID)continue;const C=this._symbolsByKey[S.key];if(!C)continue;const k=this.getScaledCoordinates(S,c);if(C.index){const L=C.index.range(k.x-m,k.y-m,k.x+m,k.y+m).sort();for(const D of L){const z=C.crossTileIDs[D];if(!p[z]){p[z]=!0,S.crossTileID=z;break}}}else if(C.positions)for(let L=0;L<C.positions.length;L++){const D=C.positions[L],z=C.crossTileIDs[L];if(Math.abs(D.x-k.x)<=m&&Math.abs(D.y-k.y)<=m&&!p[z]){p[z]=!0,S.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Mi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Li{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const m=this.indexes[p],y={};for(const S in m){const C=m[S];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),y[C.tileID.key]=C}this.indexes[p]=y}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let y=0;y<c.symbolInstances.length;y++)c.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const m=this.usedCrossTileIDs[i.overscaledZ];for(const y in this.indexes){const S=this.indexes[y];if(Number(y)>i.overscaledZ)for(const C in S){const k=S[C];k.tileID.isChildOf(i)&&k.findMatches(c.symbolInstances,i,m)}else{const C=S[i.scaledTo(Number(y)).key];C&&C.findMatches(c.symbolInstances,i,m)}}for(let y=0;y<c.symbolInstances.length;y++){const S=c.symbolInstances.get(y);S.crossTileID||(S.crossTileID=p.generate(),m[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ur(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p of c.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[i][m]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const m=this.indexes[p];for(const y in m)i[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[y]),delete m[y],c=!0)}return c}}class Mu{constructor(){this.layerIndexes={},this.crossTileIDs=new Mi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p){let m=this.layerIndexes[i.id];m===void 0&&(m=this.layerIndexes[i.id]=new Li);let y=!1;const S={};m.handleWrapJump(p);for(const C of c){const k=C.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(C.tileID,k,this.crossTileIDs)&&(y=!0),S[k.bucketInstanceId]=!0)}return m.removeStaleBuckets(S)&&(y=!0),y}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const Mo=(_,i)=>u.t(_,i&&i.filter(c=>c.identifier!=="source.canvas")),ux=u.aw();class eh extends u.E{constructor(i,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=i,this.dispatcher=new Zt(Ar(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new Fe,this.imageManager.setEventedParent(this),this.glyphManager=new Et(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Nt(256,512),this.crossTileSymbolIndex=new Mu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),rr().on(He,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const S in this._layers){const C=this._layers[S];C.source===y.id&&this._validateLayer(C)}})}loadURL(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const m=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(m,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,c,p)}).catch(S=>{this._loadStyleRequest=null,S&&!y.signal.aborted&&this.fire(new u.j(S))})}loadJSON(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(ux,{validate:!1})}_load(i,c,p){var m;const y=c.transformStyle?c.transformStyle(p,i):i;if(!c.validate||!Mo(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const S in y.sources)this.addSource(S,y.sources[S],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new vt(this.stylesheet.light),this.sky=new Lt(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const i=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const p=u.aA(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(i,c=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,S,C,k){return u._(this,void 0,void 0,function*(){const L=Re(y),D=C>1?"@2x":"",z={},G={};for(const{id:Q,url:re}of L){const le=S.transformRequest(Z(re,D,".json"),"SpriteJSON");z[Q]=u.h(le,k);const de=S.transformRequest(Z(re,D,".png"),"SpriteImage");G[Q]=V.getImage(de,k)}return yield Promise.all([...Object.values(z),...Object.values(G)]),function(Q,re){return u._(this,void 0,void 0,function*(){const le={};for(const de in Q){le[de]={};const pe=P.getImageCanvasContext((yield re[de]).data),_e=(yield Q[de]).data;for(const se in _e){const{width:we,height:Ee,x:Pe,y:qe,sdf:tt,pixelRatio:pt,stretchX:xt,stretchY:ct,content:lt,textFitWidth:It,textFitHeight:Qt}=_e[se];le[de][se]={data:null,pixelRatio:pt,sdf:tt,stretchX:xt,stretchY:ct,content:lt,textFitWidth:It,textFitHeight:Qt,spriteData:{width:we,height:Ee,x:Pe,y:qe,context:pe}}}}return le})}(z,G)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const S in y){this._spritesImagesIds[S]=[];const C=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(k=>!(k in y)):[];for(const k of C)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in y[S]){const L=S==="default"?k:`${S}:${k}`;this._spritesImagesIds[S].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,y[S][k],!1):this.imageManager.addImage(L,y[S][k]),c&&(this._changedImages[L]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const p=i.sourceLayer;if(!p)return;const m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.j(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,c=!1){const p=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c?u.aB(p):p);const m=[];for(const y of i)if(p[y]){const S=c?u.aB(p[y]):p[y];m.push(S)}return m}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const m=this._layers[p];m.type!=="custom"&&(i[p]=m.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(c){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const S in this._updatedSources){const C=this._updatedSources[S];if(C==="reload")this._reloadSource(S);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];p[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(i,this._availableImages),!y.isHidden(i.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in p){const y=this.sourceCaches[m];!!p[m]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var p;this._checkLoaded();const m=this.serialize();if(i=c.transformStyle?c.transformStyle(m,i):i,((p=c.validate)===null||p===void 0||p)&&Mo(this,u.u(i)))return!1;(i=u.aB(i)).layers=u.az(i.layers);const y=u.aC(m,i),S=this._getOperationsToPerform(y);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const C of S.operations)C();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const c=[],p=[];for(const m of i)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":c.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":c.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":c.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":c.push(()=>{});break;default:p.push(m.command)}return{operations:c,unimplemented:p}}addImage(i,c){if(this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.u.source,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const m=this.sourceCaches[i]=new at(i,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:i})),m.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new u.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,p={}){this._checkLoaded();const m=i.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(i.type==="custom"){if(Mo(this,u.aD(i)))return;y=u.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(m,i.source),i=u.aB(i),i=u.e(i,{source:m})),this._validate(u.u.layer,`layers.${m}`,i,{arrayIndex:-1},p))return;y=u.aA(i),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const C=this._removedLayers[m];delete this._removedLayers[m],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(m,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,p){this._checkLoaded();const m=this.getLayer(i);m?m.minzoom===c&&m.maxzoom===p||(c!=null&&(m.minzoom=c),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,p={}){this._checkLoaded();const m=this.getLayer(i);if(m){if(!u.aE(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.u.filter,`layers.${m.id}.filter`,c,null,p)||(m.filter=u.aB(c),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.aB(this.getLayer(i).filter)}setLayoutProperty(i,c,p,m={}){this._checkLoaded();const y=this.getLayer(i);y?u.aE(y.getLayoutProperty(c),p)||(y.setLayoutProperty(c,p,m),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,p,m={}){this._checkLoaded();const y=this.getLayer(i);y?u.aE(y.getPaintProperty(c),p)||(y.setPaintProperty(c,p,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,m=i.sourceLayer,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const S=y.getSource().type;S==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||m?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,i.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const p=i.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const y=m.getSource().type,S=y==="vector"?i.sourceLayer:void 0;y!=="vector"||S?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(S,i.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,i.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=u.aF(this.sourceCaches,y=>y.serialize()),c=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:i,layers:c,terrain:p},y=>y!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=S=>this._layers[S].type==="fill-extrusion",p={},m=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(c(C)){p[C]=S;for(const k of i){const L=k[C];if(L)for(const D of L)m.push(D)}}}m.sort((S,C)=>C.intersectionZ-S.intersectionZ);const y=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(c(C))for(let k=m.length-1;k>=0;k--){const L=m[k].feature;if(p[L.layer.id]<S)break;y.push(L),m.pop()}else for(const k of i){const L=k[C];if(L)for(const D of L)y.push(D.feature)}}return y}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const C of c.layers){const k=this._layers[C];if(!k)return this.fire(new u.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];m[k.source]=!0}}const y=[];c.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const C in this.sourceCaches)c.layers&&!m[C]||y.push(Fr(this.sourceCaches[C],this._layers,S,i,c,p));return this.placement&&y.push(function(C,k,L,D,z,G,Q){const re={},le=G.queryRenderedSymbols(D),de=[];for(const pe of Object.keys(le).map(Number))de.push(Q[pe]);de.sort($t);for(const pe of de){const _e=pe.featureIndex.lookupSymbolFeatures(le[pe.bucketInstanceId],k,pe.bucketIndex,pe.sourceLayerIndex,z.filter,z.layers,z.availableImages,C);for(const se in _e){const we=re[se]=re[se]||[],Ee=_e[se];Ee.sort((Pe,qe)=>{const tt=pe.featureSortOrder;if(tt){const pt=tt.indexOf(Pe.featureIndex);return tt.indexOf(qe.featureIndex)-pt}return qe.featureIndex-Pe.featureIndex});for(const Pe of Ee)we.push(Pe)}}for(const pe in re)re[pe].forEach(_e=>{const se=_e.feature,we=L[C[pe].source].getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=we});return re}(this._layers,S,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[i];return p?function(m,y){const S=m.getRenderableIds().map(L=>m.getTileByID(L)),C=[],k={};for(let L=0;L<S.length;L++){const D=S[L],z=D.tileID.canonical.key;k[z]||(k[z]=!0,D.querySourceFeatures(C,y))}return C}(p,c):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const S in i)if(!u.aE(i[S],p[S])){m=!0;break}if(!m)return;const y={now:P.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(y)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,c={}){const p=this.getSky();let m=!1;if(!i&&!p)return;if(i&&!p)m=!0;else if(!i&&p)m=!0;else for(const S in i)if(!u.aE(i[S],p[S])){m=!0;break}if(!m)return;const y={now:P.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,c),this.sky.updateTransitions(y)}_validate(i,c,p,m,y={}){return(!y||y.validate!==!1)&&Mo(this,i.call(u.u,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.v},m)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),rr().off(He,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,p,m,y=!1){let S=!1,C=!1;const k={};for(const L of this._order){const D=this._layers[L];if(D.type!=="symbol")continue;if(!k[D.source]){const G=this.sourceCaches[D.source];k[D.source]=G.getRenderableIds(!0).map(Q=>G.getTileByID(Q)).sort((Q,re)=>re.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(re.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(D,k[D.source],i.center.lng);S=S||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),i.zoom))&&(this.pauseablePlacement=new Gr(i,this.map.terrain,this._order,y,c,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),C=!0),S&&this.pauseablePlacement.placement.setStale()),C||S)for(const L of this._order){const D=this._layers[L];D.type==="symbol"&&this.placement.updateLayerOpacities(D,k[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.u.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,p={},m){this._checkLoaded();const y=[{id:i,url:c}],S=[...Re(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(y,!0,m))}removeSprite(i){this._checkLoaded();const c=Re(this.stylesheet.sprite);if(c.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Re(this.stylesheet.sprite)}setSprite(i,c={},p){this._checkLoaded(),i&&this._validate(u.u.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}var Da=u.Y([{name:"a_pos",type:"Int16",components:2}]);const na={prelude:Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Lr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Lr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Lr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Lr(_,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=y?y.concat(m):m,C={};return{fragmentSource:_=_.replace(c,(k,L,D,z,G)=>(C[G]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${D} ${z} ${G};
#else
uniform ${D} ${z} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${D} ${z} ${G} = u_${G};
#endif
`)),vertexSource:i=i.replace(c,(k,L,D,z,G)=>{const Q=z==="float"?"vec2":"vec4",re=G.match(/color/)?"color":Q;return C[G]?L==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${D} ${Q} a_${G};
varying ${D} ${z} ${G};
#else
uniform ${D} ${z} u_${G};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${D} ${z} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${re}(a_${G}, u_${G}_t);
#else
    ${D} ${z} ${G} = u_${G};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${D} ${Q} a_${G};
#else
uniform ${D} ${z} u_${G};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${D} ${z} ${G} = a_${G};
#else
    ${D} ${z} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${D} ${z} ${G} = unpack_mix_${re}(a_${G}, u_${G}_t);
#else
    ${D} ${z} ${G} = u_${G};
#endif
`}),staticAttributes:p,staticUniforms:S}}class pf{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,m,y,S,C,k,L){this.context=i;let D=this.boundPaintVertexBuffers.length!==m.length;for(let z=0;!D&&z<m.length;z++)this.boundPaintVertexBuffers[z]!==m[z]&&(D=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||D||this.boundIndexBuffer!==y||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==L?this.freshBind(c,p,m,y,S,C,k,L):(i.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),k&&k.bind(),L&&L.bind())}freshBind(i,c,p,m,y,S,C,k){const L=i.numAttributes,D=this.context,z=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=k,c.enableAttributes(z,i);for(const G of p)G.enableAttributes(z,i);S&&S.enableAttributes(z,i),C&&C.enableAttributes(z,i),k&&k.enableAttributes(z,i),c.bind(),c.setVertexAttribPointers(z,i,y);for(const G of p)G.bind(),G.setVertexAttribPointers(z,i,y);S&&(S.bind(),S.setVertexAttribPointers(z,i,y)),m&&m.bind(),C&&(C.bind(),C.setVertexAttribPointers(z,i,y)),k&&(k.bind(),k.setVertexAttribPointers(z,i,y)),D.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const mf=(_,i,c,p,m)=>({u_matrix:_,u_texture:0,u_ele_delta:i,u_fog_matrix:c,u_fog_color:p?p.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(m):0,u_horizon_color:p?p.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function xl(_){const i=[];for(let c=0;c<_.length;c++){if(_[c]===null)continue;const p=_[c].split(" ");i.push(p.pop())}return i}class gf{constructor(i,c,p,m,y,S){const C=i.gl;this.program=C.createProgram();const k=xl(c.staticAttributes),L=p?p.getBinderAttributes():[],D=k.concat(L),z=na.prelude.staticUniforms?xl(na.prelude.staticUniforms):[],G=c.staticUniforms?xl(c.staticUniforms):[],Q=p?p.getBinderUniforms():[],re=z.concat(G).concat(Q),le=[];for(const Pe of re)le.indexOf(Pe)<0&&le.push(Pe);const de=p?p.defines():[];y&&de.push("#define OVERDRAW_INSPECTOR;"),S&&de.push("#define TERRAIN3D;");const pe=de.concat(na.prelude.fragmentSource,c.fragmentSource).join(`
`),_e=de.concat(na.prelude.vertexSource,c.vertexSource).join(`
`),se=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(se,pe),C.compileShader(se),!C.getShaderParameter(se,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(se)}`);C.attachShader(this.program,se);const we=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(we,_e),C.compileShader(we),!C.getShaderParameter(we,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(we)}`);C.attachShader(this.program,we),this.attributes={};const Ee={};this.numAttributes=D.length;for(let Pe=0;Pe<this.numAttributes;Pe++)D[Pe]&&(C.bindAttribLocation(this.program,Pe,D[Pe]),this.attributes[D[Pe]]=Pe);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(we),C.deleteShader(se);for(let Pe=0;Pe<le.length;Pe++){const qe=le[Pe];if(qe&&!Ee[qe]){const tt=C.getUniformLocation(this.program,qe);tt&&(Ee[qe]=tt)}}this.fixedUniforms=m(i,Ee),this.terrainUniforms=((Pe,qe)=>({u_depth:new u.aH(Pe,qe.u_depth),u_terrain:new u.aH(Pe,qe.u_terrain),u_terrain_dim:new u.aI(Pe,qe.u_terrain_dim),u_terrain_matrix:new u.aJ(Pe,qe.u_terrain_matrix),u_terrain_unpack:new u.aK(Pe,qe.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Pe,qe.u_terrain_exaggeration)}))(i,Ee),this.binderUniforms=p?p.getUniforms(i,Ee):[]}draw(i,c,p,m,y,S,C,k,L,D,z,G,Q,re,le,de,pe,_e){const se=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(m),i.setColorMode(y),i.setCullFace(S),k){i.activeTexture.set(se.TEXTURE2),se.bindTexture(se.TEXTURE_2D,k.depthTexture),i.activeTexture.set(se.TEXTURE3),se.bindTexture(se.TEXTURE_2D,k.texture);for(const Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(k[Ee])}for(const Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(C[Ee]);le&&le.setUniforms(i,this.binderUniforms,Q,{zoom:re});let we=0;switch(c){case se.LINES:we=2;break;case se.TRIANGLES:we=3;break;case se.LINE_STRIP:we=1}for(const Ee of G.get()){const Pe=Ee.vaos||(Ee.vaos={});(Pe[L]||(Pe[L]=new pf)).bind(i,this,D,le?le.getPaintVertexBuffers():[],z,Ee.vertexOffset,de,pe,_e),se.drawElements(c,Ee.primitiveLength*we,se.UNSIGNED_SHORT,Ee.primitiveOffset*we*2)}}}function th(_,i,c){const p=1/ft(c,1,i.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),y=c.tileSize*Math.pow(2,i.transform.tileZoom)/m,S=y*(c.tileID.canonical.x+c.tileID.wrap*m),C=y*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const Lu=(_,i,c,p)=>{const m=i.style.light,y=m.properties.get("position"),S=[y.x,y.y,y.z],C=function(){var L=new u.A(9);return u.A!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}();m.properties.get("anchor")==="viewport"&&function(L,D){var z=Math.sin(D),G=Math.cos(D);L[0]=G,L[1]=z,L[2]=0,L[3]=-z,L[4]=G,L[5]=0,L[6]=0,L[7]=0,L[8]=1}(C,-i.transform.angle),function(L,D,z){var G=D[0],Q=D[1],re=D[2];L[0]=G*z[0]+Q*z[3]+re*z[6],L[1]=G*z[1]+Q*z[4]+re*z[7],L[2]=G*z[2]+Q*z[5]+re*z[8]}(S,S,C);const k=m.properties.get("color");return{u_matrix:_,u_lightpos:S,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:p}},rh=(_,i,c,p,m,y,S)=>u.e(Lu(_,i,c,p),th(y,i,S),{u_height_factor:-Math.pow(2,m.overscaledZ)/S.tileSize/8}),bl=_=>({u_matrix:_}),fg=(_,i,c,p)=>u.e(bl(_),th(c,i,p)),cx=(_,i)=>({u_matrix:_,u_world:i}),pg=(_,i,c,p,m)=>u.e(fg(_,i,c,p),{u_world:m}),hx=(_,i,c,p)=>{const m=_.transform;let y,S;if(p.paint.get("circle-pitch-alignment")==="map"){const C=ft(c,1,m.zoom);y=!0,S=[C,C]}else y=!1,S=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(i.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:S}},za=(_,i,c)=>({u_matrix:_,u_inv_matrix:i,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Ou=(_,i,c=1)=>({u_matrix:_,u_color:i,u_overlay:0,u_overlay_scale:c}),Oi=_=>({u_matrix:_}),Di=(_,i,c,p)=>({u_matrix:_,u_extrude_scale:ft(i,1,c),u_intensity:p}),nh=(_,i,c,p)=>{const m=u.H();u.aP(m,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:c,u_color_ramp:p,u_opacity:i.paint.get("heatmap-opacity")}};function ih(_,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new u.Z(0,p/c).toLngLat().lat,new u.Z(0,(p+1)/c).toLngLat().lat]}const oh=(_,i,c,p)=>{const m=_.transform;return{u_matrix:yg(_,i,c,p),u_ratio:1/ft(i,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},mg=(_,i,c,p,m)=>u.e(oh(_,i,c,m),{u_image:0,u_image_height:p}),wl=(_,i,c,p,m)=>{const y=_.transform,S=gg(i,y);return{u_matrix:yg(_,i,c,m),u_texsize:i.imageAtlasTexture.size,u_ratio:1/ft(i,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},dx=(_,i,c,p,m,y)=>{const S=_.lineAtlas,C=gg(i,_.transform),k=c.layout.get("line-cap")==="round",L=S.getDash(p.from,k),D=S.getDash(p.to,k),z=L.width*m.fromScale,G=D.width*m.toScale;return u.e(oh(_,i,c,y),{u_patternscale_a:[C/z,-L.height/2],u_patternscale_b:[C/G,-D.height/2],u_sdfgamma:S.width/(256*Math.min(z,G)*_.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:D.y,u_mix:m.t})};function gg(_,i){return 1/ft(_,1,i.tileZoom)}function yg(_,i,c,p){return _.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const fx=(_,i,c,p,m)=>{return{u_matrix:_,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:px(m.paint.get("raster-hue-rotate"))};var y,S};function px(_){_*=Math.PI/180;const i=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const _g=(_,i,c,p,m,y,S,C,k,L,D,z,G,Q)=>{const re=S.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:re.width/re.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:k,u_coord_matrix:L,u_is_text:+z,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:G,u_texture:0,u_translation:D,u_pitched_scale:Q}},Du=(_,i,c,p,m,y,S,C,k,L,D,z,G,Q,re)=>{const le=S.transform;return u.e(_g(_,i,c,p,m,y,S,C,k,L,D,z,G,re),{u_gamma_scale:p?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+Q})},yf=(_,i,c,p,m,y,S,C,k,L,D,z,G,Q)=>u.e(Du(_,i,c,p,m,y,S,C,k,L,D,!0,z,!0,Q),{u_texsize_icon:G,u_texture_icon:1}),sh=(_,i,c)=>({u_matrix:_,u_opacity:i,u_color:c}),_f=(_,i,c,p,m,y)=>u.e(function(S,C,k,L){const D=k.imageManager.getPattern(S.from.toString()),z=k.imageManager.getPattern(S.to.toString()),{width:G,height:Q}=k.imageManager.getPixelSize(),re=Math.pow(2,L.tileID.overscaledZ),le=L.tileSize*Math.pow(2,k.transform.tileZoom)/re,de=le*(L.tileID.canonical.x+L.tileID.wrap*re),pe=le*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[G,Q],u_mix:C.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/ft(L,1,k.transform.tileZoom),u_pixel_coord_upper:[de>>16,pe>>16],u_pixel_coord_lower:[65535&de,65535&pe]}}(p,y,c,m),{u_matrix:_,u_opacity:i}),vf={fillExtrusion:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_lightpos:new u.aN(_,i.u_lightpos),u_lightintensity:new u.aI(_,i.u_lightintensity),u_lightcolor:new u.aN(_,i.u_lightcolor),u_vertical_gradient:new u.aI(_,i.u_vertical_gradient),u_opacity:new u.aI(_,i.u_opacity)}),fillExtrusionPattern:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_lightpos:new u.aN(_,i.u_lightpos),u_lightintensity:new u.aI(_,i.u_lightintensity),u_lightcolor:new u.aN(_,i.u_lightcolor),u_vertical_gradient:new u.aI(_,i.u_vertical_gradient),u_height_factor:new u.aI(_,i.u_height_factor),u_image:new u.aH(_,i.u_image),u_texsize:new u.aO(_,i.u_texsize),u_pixel_coord_upper:new u.aO(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,i.u_pixel_coord_lower),u_scale:new u.aN(_,i.u_scale),u_fade:new u.aI(_,i.u_fade),u_opacity:new u.aI(_,i.u_opacity)}),fill:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix)}),fillPattern:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_image:new u.aH(_,i.u_image),u_texsize:new u.aO(_,i.u_texsize),u_pixel_coord_upper:new u.aO(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,i.u_pixel_coord_lower),u_scale:new u.aN(_,i.u_scale),u_fade:new u.aI(_,i.u_fade)}),fillOutline:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_world:new u.aO(_,i.u_world)}),fillOutlinePattern:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_world:new u.aO(_,i.u_world),u_image:new u.aH(_,i.u_image),u_texsize:new u.aO(_,i.u_texsize),u_pixel_coord_upper:new u.aO(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,i.u_pixel_coord_lower),u_scale:new u.aN(_,i.u_scale),u_fade:new u.aI(_,i.u_fade)}),circle:(_,i)=>({u_camera_to_center_distance:new u.aI(_,i.u_camera_to_center_distance),u_scale_with_map:new u.aH(_,i.u_scale_with_map),u_pitch_with_map:new u.aH(_,i.u_pitch_with_map),u_extrude_scale:new u.aO(_,i.u_extrude_scale),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_matrix:new u.aJ(_,i.u_matrix)}),collisionBox:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_pixel_extrude_scale:new u.aO(_,i.u_pixel_extrude_scale)}),collisionCircle:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_inv_matrix:new u.aJ(_,i.u_inv_matrix),u_camera_to_center_distance:new u.aI(_,i.u_camera_to_center_distance),u_viewport_size:new u.aO(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new u.aL(_,i.u_color),u_matrix:new u.aJ(_,i.u_matrix),u_overlay:new u.aH(_,i.u_overlay),u_overlay_scale:new u.aI(_,i.u_overlay_scale)}),clippingMask:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix)}),heatmap:(_,i)=>({u_extrude_scale:new u.aI(_,i.u_extrude_scale),u_intensity:new u.aI(_,i.u_intensity),u_matrix:new u.aJ(_,i.u_matrix)}),heatmapTexture:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_world:new u.aO(_,i.u_world),u_image:new u.aH(_,i.u_image),u_color_ramp:new u.aH(_,i.u_color_ramp),u_opacity:new u.aI(_,i.u_opacity)}),hillshade:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_image:new u.aH(_,i.u_image),u_latrange:new u.aO(_,i.u_latrange),u_light:new u.aO(_,i.u_light),u_shadow:new u.aL(_,i.u_shadow),u_highlight:new u.aL(_,i.u_highlight),u_accent:new u.aL(_,i.u_accent)}),hillshadePrepare:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_image:new u.aH(_,i.u_image),u_dimension:new u.aO(_,i.u_dimension),u_zoom:new u.aI(_,i.u_zoom),u_unpack:new u.aK(_,i.u_unpack)}),line:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_ratio:new u.aI(_,i.u_ratio),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_ratio:new u.aI(_,i.u_ratio),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,i.u_units_to_pixels),u_image:new u.aH(_,i.u_image),u_image_height:new u.aI(_,i.u_image_height)}),linePattern:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_texsize:new u.aO(_,i.u_texsize),u_ratio:new u.aI(_,i.u_ratio),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_image:new u.aH(_,i.u_image),u_units_to_pixels:new u.aO(_,i.u_units_to_pixels),u_scale:new u.aN(_,i.u_scale),u_fade:new u.aI(_,i.u_fade)}),lineSDF:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_ratio:new u.aI(_,i.u_ratio),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,i.u_units_to_pixels),u_patternscale_a:new u.aO(_,i.u_patternscale_a),u_patternscale_b:new u.aO(_,i.u_patternscale_b),u_sdfgamma:new u.aI(_,i.u_sdfgamma),u_image:new u.aH(_,i.u_image),u_tex_y_a:new u.aI(_,i.u_tex_y_a),u_tex_y_b:new u.aI(_,i.u_tex_y_b),u_mix:new u.aI(_,i.u_mix)}),raster:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_tl_parent:new u.aO(_,i.u_tl_parent),u_scale_parent:new u.aI(_,i.u_scale_parent),u_buffer_scale:new u.aI(_,i.u_buffer_scale),u_fade_t:new u.aI(_,i.u_fade_t),u_opacity:new u.aI(_,i.u_opacity),u_image0:new u.aH(_,i.u_image0),u_image1:new u.aH(_,i.u_image1),u_brightness_low:new u.aI(_,i.u_brightness_low),u_brightness_high:new u.aI(_,i.u_brightness_high),u_saturation_factor:new u.aI(_,i.u_saturation_factor),u_contrast_factor:new u.aI(_,i.u_contrast_factor),u_spin_weights:new u.aN(_,i.u_spin_weights)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new u.aH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,i.u_is_size_feature_constant),u_size_t:new u.aI(_,i.u_size_t),u_size:new u.aI(_,i.u_size),u_camera_to_center_distance:new u.aI(_,i.u_camera_to_center_distance),u_pitch:new u.aI(_,i.u_pitch),u_rotate_symbol:new u.aH(_,i.u_rotate_symbol),u_aspect_ratio:new u.aI(_,i.u_aspect_ratio),u_fade_change:new u.aI(_,i.u_fade_change),u_matrix:new u.aJ(_,i.u_matrix),u_label_plane_matrix:new u.aJ(_,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,i.u_coord_matrix),u_is_text:new u.aH(_,i.u_is_text),u_pitch_with_map:new u.aH(_,i.u_pitch_with_map),u_is_along_line:new u.aH(_,i.u_is_along_line),u_is_variable_anchor:new u.aH(_,i.u_is_variable_anchor),u_texsize:new u.aO(_,i.u_texsize),u_texture:new u.aH(_,i.u_texture),u_translation:new u.aO(_,i.u_translation),u_pitched_scale:new u.aI(_,i.u_pitched_scale)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new u.aH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,i.u_is_size_feature_constant),u_size_t:new u.aI(_,i.u_size_t),u_size:new u.aI(_,i.u_size),u_camera_to_center_distance:new u.aI(_,i.u_camera_to_center_distance),u_pitch:new u.aI(_,i.u_pitch),u_rotate_symbol:new u.aH(_,i.u_rotate_symbol),u_aspect_ratio:new u.aI(_,i.u_aspect_ratio),u_fade_change:new u.aI(_,i.u_fade_change),u_matrix:new u.aJ(_,i.u_matrix),u_label_plane_matrix:new u.aJ(_,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,i.u_coord_matrix),u_is_text:new u.aH(_,i.u_is_text),u_pitch_with_map:new u.aH(_,i.u_pitch_with_map),u_is_along_line:new u.aH(_,i.u_is_along_line),u_is_variable_anchor:new u.aH(_,i.u_is_variable_anchor),u_texsize:new u.aO(_,i.u_texsize),u_texture:new u.aH(_,i.u_texture),u_gamma_scale:new u.aI(_,i.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_is_halo:new u.aH(_,i.u_is_halo),u_translation:new u.aO(_,i.u_translation),u_pitched_scale:new u.aI(_,i.u_pitched_scale)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new u.aH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,i.u_is_size_feature_constant),u_size_t:new u.aI(_,i.u_size_t),u_size:new u.aI(_,i.u_size),u_camera_to_center_distance:new u.aI(_,i.u_camera_to_center_distance),u_pitch:new u.aI(_,i.u_pitch),u_rotate_symbol:new u.aH(_,i.u_rotate_symbol),u_aspect_ratio:new u.aI(_,i.u_aspect_ratio),u_fade_change:new u.aI(_,i.u_fade_change),u_matrix:new u.aJ(_,i.u_matrix),u_label_plane_matrix:new u.aJ(_,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,i.u_coord_matrix),u_is_text:new u.aH(_,i.u_is_text),u_pitch_with_map:new u.aH(_,i.u_pitch_with_map),u_is_along_line:new u.aH(_,i.u_is_along_line),u_is_variable_anchor:new u.aH(_,i.u_is_variable_anchor),u_texsize:new u.aO(_,i.u_texsize),u_texsize_icon:new u.aO(_,i.u_texsize_icon),u_texture:new u.aH(_,i.u_texture),u_texture_icon:new u.aH(_,i.u_texture_icon),u_gamma_scale:new u.aI(_,i.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,i.u_device_pixel_ratio),u_is_halo:new u.aH(_,i.u_is_halo),u_translation:new u.aO(_,i.u_translation),u_pitched_scale:new u.aI(_,i.u_pitched_scale)}),background:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_opacity:new u.aI(_,i.u_opacity),u_color:new u.aL(_,i.u_color)}),backgroundPattern:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_opacity:new u.aI(_,i.u_opacity),u_image:new u.aH(_,i.u_image),u_pattern_tl_a:new u.aO(_,i.u_pattern_tl_a),u_pattern_br_a:new u.aO(_,i.u_pattern_br_a),u_pattern_tl_b:new u.aO(_,i.u_pattern_tl_b),u_pattern_br_b:new u.aO(_,i.u_pattern_br_b),u_texsize:new u.aO(_,i.u_texsize),u_mix:new u.aI(_,i.u_mix),u_pattern_size_a:new u.aO(_,i.u_pattern_size_a),u_pattern_size_b:new u.aO(_,i.u_pattern_size_b),u_scale_a:new u.aI(_,i.u_scale_a),u_scale_b:new u.aI(_,i.u_scale_b),u_pixel_coord_upper:new u.aO(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_texture:new u.aH(_,i.u_texture),u_ele_delta:new u.aI(_,i.u_ele_delta),u_fog_matrix:new u.aJ(_,i.u_fog_matrix),u_fog_color:new u.aL(_,i.u_fog_color),u_fog_ground_blend:new u.aI(_,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(_,i.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(_,i.u_horizon_color),u_horizon_fog_blend:new u.aI(_,i.u_horizon_fog_blend)}),terrainDepth:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_ele_delta:new u.aI(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_matrix:new u.aJ(_,i.u_matrix),u_texture:new u.aH(_,i.u_texture),u_terrain_coords_id:new u.aI(_,i.u_terrain_coords_id),u_ele_delta:new u.aI(_,i.u_ele_delta)}),sky:(_,i)=>({u_sky_color:new u.aL(_,i.u_sky_color),u_horizon_color:new u.aL(_,i.u_horizon_color),u_horizon:new u.aI(_,i.u_horizon),u_sky_horizon_blend:new u.aI(_,i.u_sky_horizon_blend)})};class ls{constructor(i,c,p){this.context=i;const m=i.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const mx={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xf{constructor(i,c,p,m){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=i;const y=i.gl;this.buffer=y.createBuffer(),i.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const m=c.attributes[this.attributes[p].name];m!==void 0&&i.enableVertexAttribArray(m)}}setVertexAttribPointers(i,c,p){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],S=c.attributes[y.name];S!==void 0&&i.vertexAttribPointer(S,y.components,i[mx[y.type]],!1,this.itemSize,y.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fa=new WeakMap;function ia(_){var i;if(Fa.has(_))return Fa.get(_);{const c=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Fa.set(_,c),c}}class zr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ah extends zr{getDefault(){return u.aM.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class gx extends zr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Sl extends zr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class yx extends zr{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class vg extends zr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class _x extends zr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class xg extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class bf extends zr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class bg extends zr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class wg extends zr{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Sg extends zr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Tg extends zr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ba extends zr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Eg extends zr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class vx extends zr{getDefault(){return u.aM.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Cg extends zr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class zu extends zr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class xx extends zr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class lh extends zr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class bx extends zr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class wx extends zr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ag extends zr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class kg extends zr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Pg extends zr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class wf extends zr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Ig extends zr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class uh extends zr{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ls extends zr{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const p=this.gl;ia(p)?p.bindVertexArray(i):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Sf extends zr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Tf extends zr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ef extends zr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ch extends zr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Cf extends ch{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Na extends ch{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Af extends ch{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Sx{constructor(i,c,p,m,y){this.context=i,this.width=c,this.height=p;const S=i.gl,C=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Cf(i,C),m)this.depthAttachment=y?new Af(i,C):new Na(i,C);else if(y)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class An{constructor(i,c,p){this.blendFunction=i,this.blendColor=c,this.mask=p}}An.Replace=[1,0],An.disabled=new An(An.Replace,u.aM.transparent,[!1,!1,!1,!1]),An.unblended=new An(An.Replace,u.aM.transparent,[!0,!0,!0,!0]),An.alphaBlended=new An([1,771],u.aM.transparent,[!0,!0,!0,!0]);class Tx{constructor(i){var c,p;if(this.gl=i,this.clearColor=new ah(this),this.clearDepth=new gx(this),this.clearStencil=new Sl(this),this.colorMask=new yx(this),this.depthMask=new vg(this),this.stencilMask=new _x(this),this.stencilFunc=new xg(this),this.stencilOp=new bf(this),this.stencilTest=new bg(this),this.depthRange=new wg(this),this.depthTest=new Sg(this),this.depthFunc=new Tg(this),this.blend=new Ba(this),this.blendFunc=new Eg(this),this.blendColor=new vx(this),this.blendEquation=new Cg(this),this.cullFace=new zu(this),this.cullFaceSide=new xx(this),this.frontFace=new lh(this),this.program=new bx(this),this.activeTexture=new wx(this),this.viewport=new Ag(this),this.bindFramebuffer=new kg(this),this.bindRenderbuffer=new Pg(this),this.bindTexture=new wf(this),this.bindVertexBuffer=new Ig(this),this.bindElementBuffer=new uh(this),this.bindVertexArray=new Ls(this),this.pixelStoreUnpack=new Sf(this),this.pixelStoreUnpackPremultiplyAlpha=new Tf(this),this.pixelStoreUnpackFlipY=new Ef(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),ia(i)){this.HALF_FLOAT=i.HALF_FLOAT;const m=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const m=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new ls(this,i,c)}createVertexBuffer(i,c,p){return new xf(this,i,c,p)}createRenderbuffer(i,c,p){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),y}createFramebuffer(i,c,p,m){return new Sx(this,i,c,p,m)}clear({color:i,depth:c,stencil:p}){const m=this.gl;let y=0;i&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.aE(i.blendFunction,An.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return ia(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return ia(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class mr{constructor(i,c,p){this.func=i,this.mask=c,this.range=p}}mr.ReadOnly=!1,mr.ReadWrite=!0,mr.disabled=new mr(519,mr.ReadOnly,[0,1]);const hh=7680;class Kr{constructor(i,c,p,m,y,S){this.test=i,this.ref=c,this.mask=p,this.fail=m,this.depthFail=y,this.pass=S}}Kr.disabled=new Kr({func:519,mask:0},0,0,hh,hh,hh);class Ur{constructor(i,c,p){this.enable=i,this.mode=c,this.frontFace=p}}let $a;function Fu(_,i,c,p,m){const y=_.context,S=y.gl,C=_.useProgram("collisionBox"),k=[];let L=0,D=0;for(let pe=0;pe<p.length;pe++){const _e=p[pe],se=i.getTile(_e).getBucket(c);if(!se)continue;const we=m?se.textCollisionBox:se.iconCollisionBox,Ee=se.collisionCircleArray;if(Ee.length>0){const Pe=u.H();u.aQ(Pe,se.placementInvProjMatrix,_.transform.glCoordMatrix),u.aQ(Pe,Pe,se.placementViewportMatrix),k.push({circleArray:Ee,circleOffset:D,transform:_e.posMatrix,invTransform:Pe,coord:_e}),L+=Ee.length/4,D=L}we&&C.draw(y,S.LINES,mr.disabled,Kr.disabled,_.colorModeForRenderPass(),Ur.disabled,{u_matrix:_e.posMatrix,u_pixel_extrude_scale:[1/(z=_.transform).width,1/z.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e),c.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,null,_.transform.zoom,null,null,we.collisionVertexBuffer)}var z;if(!m||!k.length)return;const G=_.useProgram("collisionCircle"),Q=new u.aR;Q.resize(4*L),Q._trim();let re=0;for(const pe of k)for(let _e=0;_e<pe.circleArray.length/4;_e++){const se=4*_e,we=pe.circleArray[se+0],Ee=pe.circleArray[se+1],Pe=pe.circleArray[se+2],qe=pe.circleArray[se+3];Q.emplace(re++,we,Ee,Pe,qe,0),Q.emplace(re++,we,Ee,Pe,qe,1),Q.emplace(re++,we,Ee,Pe,qe,2),Q.emplace(re++,we,Ee,Pe,qe,3)}(!$a||$a.length<2*L)&&($a=function(pe){const _e=2*pe,se=new u.aT;se.resize(_e),se._trim();for(let we=0;we<_e;we++){const Ee=6*we;se.uint16[Ee+0]=4*we+0,se.uint16[Ee+1]=4*we+1,se.uint16[Ee+2]=4*we+2,se.uint16[Ee+3]=4*we+2,se.uint16[Ee+4]=4*we+3,se.uint16[Ee+5]=4*we+0}return se}(L));const le=y.createIndexBuffer($a,!0),de=y.createVertexBuffer(Q,u.aS.members,!0);for(const pe of k){const _e=za(pe.transform,pe.invTransform,_.transform);G.draw(y,S.TRIANGLES,mr.disabled,Kr.disabled,_.colorModeForRenderPass(),Ur.disabled,_e,_.style.map.terrain&&_.style.map.terrain.getTerrainData(pe.coord),c.id,de,le,u.a0.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,_.transform.zoom,null,null,null)}de.destroy(),le.destroy()}Ur.disabled=new Ur(!1,1029,2305),Ur.backCCW=new Ur(!0,1029,2305);const Bu=u.an(new Float32Array(16));function kf(_,i,c,p,m,y){const{horizontalAlign:S,verticalAlign:C}=u.au(_);return new u.P((-(S-.5)*i/m+p[0])*y,(-(C-.5)*c/m+p[1])*y)}function ja(_,i,c,p,m,y){const S=i.tileAnchorPoint.add(new u.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let C=p.mult(y);c||(C=C.rotate(-m));const k=S.add(C);return ue(k.x,k.y,i.labelPlaneMatrix,i.getElevation).point}if(c){const C=Oe(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(_),k=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(p.rotate(k))}return _.add(p)}function Tl(_,i,c,p,m,y,S,C,k,L,D,z,G,Q){const re=_.text.placedSymbolArray,le=_.text.dynamicLayoutVertexArray,de=_.icon.dynamicLayoutVertexArray,pe={};le.clear();for(let _e=0;_e<re.length;_e++){const se=re.get(_e),we=se.hidden||!se.crossTileID||_.allowVerticalPlacement&&!se.placedOrientation?null:p[se.crossTileID];if(we){const Ee=new u.P(se.anchorX,se.anchorY),Pe={getElevation:Q,width:m.width,height:m.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:c,projection:D,projectionCache:null,tileAnchorPoint:Ee,translation:z,unwrappedTileID:G},qe=c?ue(Ee.x,Ee.y,S,Q):Oe(Ee.x,Ee.y,Pe),tt=N(m.cameraToCenterDistance,qe.signedDistanceFromCamera);let pt=u.ai(_.textSizeData,k,se)*tt/u.ap;c&&(pt*=_.tilePixelRatio/C);const{width:xt,height:ct,anchor:lt,textOffset:It,textBoxScale:Qt}=we,ht=kf(lt,xt,ct,It,Qt,pt),yt=D.getPitchedTextCorrection(m,Ee.add(new u.P(z[0],z[1])),G),Kt=ja(qe.point,Pe,i,ht,m.angle,yt),en=_.allowVerticalPlacement&&se.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let cr=0;cr<se.numGlyphs;cr++)u.aj(le,Kt,en);L&&se.associatedIconIndex>=0&&(pe[se.associatedIconIndex]={shiftedAnchor:Kt,angle:en})}else be(se.numGlyphs,le)}if(L){de.clear();const _e=_.icon.placedSymbolArray;for(let se=0;se<_e.length;se++){const we=_e.get(se);if(we.hidden)be(we.numGlyphs,de);else{const Ee=pe[se];if(Ee)for(let Pe=0;Pe<we.numGlyphs;Pe++)u.aj(de,Ee.shiftedAnchor,Ee.angle);else be(we.numGlyphs,de)}}_.icon.dynamicLayoutVertexBuffer.updateData(de)}_.text.dynamicLayoutVertexBuffer.updateData(le)}function co(_,i,c){return c.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Pf(_,i,c,p,m,y,S,C,k,L,D,z){const G=_.context,Q=G.gl,re=_.transform,le=uo(),de=C==="map",pe=k==="map",_e=C!=="viewport"&&c.layout.get("symbol-placement")!=="point",se=de&&!pe&&!_e,we=!pe&&_e,Ee=!c.layout.get("symbol-sort-key").isConstant();let Pe=!1;const qe=_.depthModeForSublayer(0,mr.ReadOnly),tt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),pt=[],xt=le.getCircleRadiusCorrection(re);for(const ct of p){const lt=i.getTile(ct),It=lt.getBucket(c);if(!It)continue;const Qt=m?It.text:It.icon;if(!Qt||!Qt.segments.get().length||!Qt.hasVisibleVertices)continue;const ht=Qt.programConfigurations.get(c.id),yt=m||It.sdfIcons,Kt=m?It.textSizeData:It.iconSizeData,en=pe||re.pitch!==0,cr=_.useProgram(co(yt,m,It),ht),yr=u.ag(Kt,re.zoom),tn=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ct);let li,Do,rn,zi,bi=[0,0],ui=null;if(m)Do=lt.glyphAtlasTexture,rn=Q.LINEAR,li=lt.glyphAtlasTexture.size,It.iconsInText&&(bi=lt.imageAtlasTexture.size,ui=lt.imageAtlasTexture,zi=en||_.options.rotating||_.options.zooming||Kt.kind==="composite"||Kt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const xr=c.layout.get("icon-size").constantOr(0)!==1||It.iconsNeedLinear;Do=lt.imageAtlasTexture,rn=yt||_.options.rotating||_.options.zooming||xr||en?Q.LINEAR:Q.NEAREST,li=lt.imageAtlasTexture.size}const wi=ft(lt,1,_.transform.zoom),hs=we?ct.posMatrix:Bu,$l=Gi(hs,pe,de,_.transform,wi),Ih=Zi(hs,pe,de,_.transform,wi),jl=Zi(ct.posMatrix,pe,de,_.transform,wi),po=le.translatePosition(_.transform,lt,y,S),Rh=tt&&It.hasTextData(),ep=c.layout.get("icon-text-fit")!=="none"&&Rh&&It.hasIconData();if(_e){const xr=_.style.map.terrain?(Ul,Vl)=>_.style.map.terrain.getElevation(ct,Ul,Vl):null,Wa=c.layout.get("text-rotation-alignment")==="map";J(It,ct.posMatrix,_,m,$l,jl,pe,L,Wa,le,ct.toUnwrapped(),re.width,re.height,po,xr)}const mo=ct.posMatrix,go=m&&tt||ep,oa=_e||go?Bu:$l,zo=Ih,ni=yt&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ci;ci=yt?It.iconsInText?yf(Kt.kind,yr,se,pe,_e,go,_,mo,oa,zo,po,li,bi,xt):Du(Kt.kind,yr,se,pe,_e,go,_,mo,oa,zo,po,m,li,!0,xt):_g(Kt.kind,yr,se,pe,_e,go,_,mo,oa,zo,po,m,li,xt);const Ji={program:cr,buffers:Qt,uniformValues:ci,atlasTexture:Do,atlasTextureIcon:ui,atlasInterpolation:rn,atlasInterpolationIcon:zi,isSDF:yt,hasHalo:ni};if(Ee&&It.canOverlap){Pe=!0;const xr=Qt.segments.get();for(const Wa of xr)pt.push({segments:new u.a0([Wa]),sortKey:Wa.sortKey,state:Ji,terrainData:tn})}else pt.push({segments:Qt.segments,sortKey:0,state:Ji,terrainData:tn})}Pe&&pt.sort((ct,lt)=>ct.sortKey-lt.sortKey);for(const ct of pt){const lt=ct.state;if(G.activeTexture.set(Q.TEXTURE0),lt.atlasTexture.bind(lt.atlasInterpolation,Q.CLAMP_TO_EDGE),lt.atlasTextureIcon&&(G.activeTexture.set(Q.TEXTURE1),lt.atlasTextureIcon&&lt.atlasTextureIcon.bind(lt.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),lt.isSDF){const It=lt.uniformValues;lt.hasHalo&&(It.u_is_halo=1,If(lt.buffers,ct.segments,c,_,lt.program,qe,D,z,It,ct.terrainData)),It.u_is_halo=0}If(lt.buffers,ct.segments,c,_,lt.program,qe,D,z,lt.uniformValues,ct.terrainData)}}function If(_,i,c,p,m,y,S,C,k,L){const D=p.context;m.draw(D,D.gl.TRIANGLES,y,S,C,Ur.disabled,k,L,c.id,_.layoutVertexBuffer,_.indexBuffer,i,c.paint,p.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Rf(_,i,c,p){const m=_.context,y=m.gl,S=Kr.disabled,C=new An([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),k=i.getBucket(c);if(!k)return;const L=p.key;let D=c.heatmapFbos.get(L);D||(D=Nu(m,i.tileSize,i.tileSize),c.heatmapFbos.set(L,D)),m.bindFramebuffer.set(D.framebuffer),m.viewport.set([0,0,i.tileSize,i.tileSize]),m.clear({color:u.aM.transparent});const z=k.programConfigurations.get(c.id),G=_.useProgram("heatmap",z),Q=_.style.map.terrain.getTerrainData(p);G.draw(m,y.TRIANGLES,mr.disabled,S,C,Ur.disabled,Di(p.posMatrix,i,_.transform.zoom,c.paint.get("heatmap-intensity")),Q,c.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,c.paint,_.transform.zoom,z)}function Ua(_,i,c){const p=_.context,m=p.gl;p.setColorMode(_.colorModeForRenderPass());const y=$u(p,i),S=c.key,C=i.heatmapFbos.get(S);C&&(p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,C.colorAttachment.get()),p.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(p,m.TRIANGLES,mr.disabled,Kr.disabled,_.colorModeForRenderPass(),Ur.disabled,nh(_,i,0,1),null,i.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,i.paint,_.transform.zoom),C.destroy(),i.heatmapFbos.delete(S))}function Nu(_,i,c){var p,m;const y=_.gl,S=y.createTexture();y.bindTexture(y.TEXTURE_2D,S),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(p=_.HALF_FLOAT)!==null&&p!==void 0?p:y.UNSIGNED_BYTE,k=(m=_.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,k,i,c,0,y.RGBA,C,null);const L=_.createFramebuffer(i,c,!1,!1);return L.colorAttachment.set(S),L}function $u(_,i){return i.colorRampTexture||(i.colorRampTexture=new Te(_,i.colorRamp,_.gl.RGBA)),i.colorRampTexture}function El(_,i,c,p,m){if(!c||!p||!p.imageAtlas)return;const y=p.imageAtlas.patternPositions;let S=y[c.to.toString()],C=y[c.from.toString()];if(!S&&C&&(S=C),!C&&S&&(C=S),!S||!C){const k=m.getPaintProperty(i);S=y[k],C=y[k]}S&&C&&_.setConstantPatternPositions(S,C)}function ju(_,i,c,p,m,y,S){const C=_.context.gl,k="fill-pattern",L=c.paint.get(k),D=L&&L.constantOr(1),z=c.getCrossfadeParameters();let G,Q,re,le,de;S?(Q=D&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=C.LINES):(Q=D?"fillPattern":"fill",G=C.TRIANGLES);const pe=L.constantOr(null);for(const _e of p){const se=i.getTile(_e);if(D&&!se.patternsLoaded())continue;const we=se.getBucket(c);if(!we)continue;const Ee=we.programConfigurations.get(c.id),Pe=_.useProgram(Q,Ee),qe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e);D&&(_.context.activeTexture.set(C.TEXTURE0),se.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Ee.updatePaintBuffers(z)),El(Ee,k,pe,se,c);const tt=qe?_e:null,pt=_.translatePosMatrix(tt?tt.posMatrix:_e.posMatrix,se,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(S){le=we.indexBuffer2,de=we.segments2;const xt=[C.drawingBufferWidth,C.drawingBufferHeight];re=Q==="fillOutlinePattern"&&D?pg(pt,_,z,se,xt):cx(pt,xt)}else le=we.indexBuffer,de=we.segments,re=D?fg(pt,_,z,se):bl(pt);Pe.draw(_.context,G,m,_.stencilModeForClipping(_e),y,Ur.disabled,re,qe,c.id,we.layoutVertexBuffer,le,de,c.paint,_.transform.zoom,Ee)}}function dh(_,i,c,p,m,y,S){const C=_.context,k=C.gl,L="fill-extrusion-pattern",D=c.paint.get(L),z=D.constantOr(1),G=c.getCrossfadeParameters(),Q=c.paint.get("fill-extrusion-opacity"),re=D.constantOr(null);for(const le of p){const de=i.getTile(le),pe=de.getBucket(c);if(!pe)continue;const _e=_.style.map.terrain&&_.style.map.terrain.getTerrainData(le),se=pe.programConfigurations.get(c.id),we=_.useProgram(z?"fillExtrusionPattern":"fillExtrusion",se);z&&(_.context.activeTexture.set(k.TEXTURE0),de.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),se.updatePaintBuffers(G)),El(se,L,re,de,c);const Ee=_.translatePosMatrix(le.posMatrix,de,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Pe=c.paint.get("fill-extrusion-vertical-gradient"),qe=z?rh(Ee,_,Pe,Q,le,G,de):Lu(Ee,_,Pe,Q);we.draw(C,C.gl.TRIANGLES,m,y,S,Ur.backCCW,qe,_e,c.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,c.paint,_.transform.zoom,se,_.style.map.terrain&&pe.centroidVertexBuffer)}}function Cl(_,i,c,p,m,y,S){const C=_.context,k=C.gl,L=c.fbo;if(!L)return;const D=_.useProgram("hillshade"),z=_.style.map.terrain&&_.style.map.terrain.getTerrainData(i);C.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,L.colorAttachment.get()),D.draw(C,k.TRIANGLES,m,y,S,Ur.disabled,((G,Q,re,le)=>{const de=re.paint.get("hillshade-shadow-color"),pe=re.paint.get("hillshade-highlight-color"),_e=re.paint.get("hillshade-accent-color");let se=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=G.transform.angle);const we=!G.options.moving;return{u_matrix:le?le.posMatrix:G.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),we),u_image:0,u_latrange:ih(0,Q.tileID),u_light:[re.paint.get("hillshade-exaggeration"),se],u_shadow:de,u_highlight:pe,u_accent:_e}})(_,c,p,z?i:null),z,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Al(_,i,c,p,m,y){const S=_.context,C=S.gl,k=i.dem;if(k&&k.data){const L=k.dim,D=k.stride,z=k.getPixels();if(S.activeTexture.set(C.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||_.getTileTexture(D),i.demTexture){const Q=i.demTexture;Q.update(z,{premultiply:!1}),Q.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else i.demTexture=new Te(S,z,C.RGBA,{premultiply:!1}),i.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);S.activeTexture.set(C.TEXTURE0);let G=i.fbo;if(!G){const Q=new Te(S,{width:L,height:L,data:null},C.RGBA);Q.bind(C.LINEAR,C.CLAMP_TO_EDGE),G=i.fbo=S.createFramebuffer(L,L,!0,!1),G.colorAttachment.set(Q.texture)}S.bindFramebuffer.set(G.framebuffer),S.viewport.set([0,0,L,L]),_.useProgram("hillshadePrepare").draw(S,C.TRIANGLES,p,m,y,Ur.disabled,((Q,re)=>{const le=re.stride,de=u.H();return u.aP(de,0,u.X,-u.X,0,0,1),u.J(de,de,[0,-u.X,0]),{u_matrix:de,u_image:1,u_dimension:[le,le],u_zoom:Q.overscaledZ,u_unpack:re.getUnpackVector()}})(i.tileID,k),null,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Rg(_,i,c,p,m,y){const S=p.paint.get("raster-fade-duration");if(!y&&S>0){const C=P.now(),k=(C-_.timeAdded)/S,L=i?(C-i.timeAdded)/S:-1,D=c.getSource(),z=m.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),G=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(_.tileID.overscaledZ-z),Q=G&&_.refreshedUponExpiration?1:u.ac(G?k:1-L,0,1);return _.refreshedUponExpiration&&k>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const Mf=new u.aM(1,0,0,1),kr=new u.aM(0,1,0,1),fh=new u.aM(0,0,1,1),Ex=new u.aM(1,0,1,1),Mg=new u.aM(0,1,1,1);function kl(_,i,c,p){ph(_,0,i+c/2,_.transform.width,c,p)}function Lg(_,i,c,p){ph(_,i-c/2,0,c,_.transform.height,p)}function ph(_,i,c,p,m,y){const S=_.context,C=S.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*_.pixelRatio,c*_.pixelRatio,p*_.pixelRatio,m*_.pixelRatio),S.clear({color:y}),C.disable(C.SCISSOR_TEST)}function Og(_,i,c){const p=_.context,m=p.gl,y=c.posMatrix,S=_.useProgram("debug"),C=mr.disabled,k=Kr.disabled,L=_.colorModeForRenderPass(),D="$debug",z=_.style.map.terrain&&_.style.map.terrain.getTerrainData(c);p.activeTexture.set(m.TEXTURE0);const G=i.getTileByID(c.key).latestRawTileData,Q=Math.floor((G&&G.byteLength||0)/1024),re=i.getTile(c).tileSize,le=512/Math.min(re,512)*(c.overscaledZ/_.transform.zoom)*.5;let de=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(de+=` => ${c.overscaledZ}`),function(pe,_e){pe.initDebugOverlayCanvas();const se=pe.debugOverlayCanvas,we=pe.context.gl,Ee=pe.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,se.width,se.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(_e,5,5),Ee.strokeText(_e,5,5),pe.debugOverlayTexture.update(se),pe.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(_,`${de} ${Q}kB`),S.draw(p,m.TRIANGLES,C,k,An.alphaBlended,Ur.disabled,Ou(y,u.aM.transparent,le),null,D,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),S.draw(p,m.LINE_STRIP,C,k,L,Ur.disabled,Ou(y,u.aM.red),z,D,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Dg(_,i,c){const p=_.context,m=p.gl,y=_.colorModeForRenderPass(),S=new mr(m.LEQUAL,mr.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),k=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,_.width,_.height]);for(const L of c){const D=_.renderToTexture.getTexture(L),z=i.getTerrainData(L.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,D.texture);const G=_.transform.calculatePosMatrix(L.tileID.toUnwrapped()),Q=i.getMeshFrameDelta(_.transform.zoom),re=_.transform.calculateFogMatrix(L.tileID.toUnwrapped()),le=mf(G,Q,re,_.style.sky,_.transform.pitch);C.draw(p,m.TRIANGLES,S,Kr.disabled,y,Ur.backCCW,le,z,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class mh{constructor(i,c,p){this.vertexBuffer=i,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class gh{constructor(i,c){this.context=new Tx(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mu}resize(i,c,p){if(this.width=Math.floor(i*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,c=new u.aX;c.emplaceBack(0,0),c.emplaceBack(u.X,0),c.emplaceBack(0,u.X),c.emplaceBack(u.X,u.X),this.tileExtentBuffer=i.createVertexBuffer(c,Da.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const p=new u.aX;p.emplaceBack(0,0),p.emplaceBack(u.X,0),p.emplaceBack(0,u.X),p.emplaceBack(u.X,u.X),this.debugBuffer=i.createVertexBuffer(p,Da.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const m=new u.$;m.emplaceBack(0,0,0,0),m.emplaceBack(u.X,0,u.X,0),m.emplaceBack(0,u.X,0,u.X),m.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=i.createVertexBuffer(m,Me.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(y,Da.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const S=new u.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);const C=new u.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C);const k=this.context.gl;this.stencilClearMode=new Kr({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.H();u.aP(p,0,this.width,this.height,0,0,1),u.K(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,mr.disabled,this.stencilClearMode,An.disabled,Ur.disabled,Oi(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const p=this.context,m=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(An.disabled),p.setDepthMode(mr.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of c){const C=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);y.draw(p,m.TRIANGLES,mr.disabled,new Kr({func:m.ALWAYS,mask:0},C,255,m.KEEP,m.KEEP,m.REPLACE),An.disabled,Ur.disabled,Oi(S.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Kr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Kr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((S,C)=>C.overscaledZ-S.overscaledZ),m=p[p.length-1].overscaledZ,y=p[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const S={};for(let C=0;C<y;C++)S[C+m]=new Kr({func:c.GEQUAL,mask:255},C+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=y,[S,p]}return[{[m]:Kr.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new An([i.CONSTANT_COLOR,i.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?An.unblended:An.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return mr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new mr(p||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const p=this.style._order,m=this.style.sourceCaches,y={},S={},C={};for(const k in m){const L=m[k];L.used&&L.prepare(this.context),y[k]=L.getVisibleCoordinates(),S[k]=y[k].slice().reverse(),C[k]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<p.length;k++)if(this.style._layers[p[k]].is3D()){this.opaquePassCutoff=k;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const k of p){const L=this.style._layers[k];if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const D=S[L.source];(L.type==="custom"||D.length)&&this.renderLayer(this,m[L.source],L,D)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(k,L){const D=k.context,z=D.gl,G=((pe,_e,se)=>({u_sky_color:pe.properties.get("sky-color"),u_horizon_color:pe.properties.get("horizon-color"),u_horizon:(_e.height/2+_e.getHorizon())*se,u_sky_horizon_blend:pe.properties.get("sky-horizon-blend")*_e.height/2*se}))(L,k.style.map.transform,k.pixelRatio),Q=new mr(z.LEQUAL,mr.ReadWrite,[0,1]),re=Kr.disabled,le=k.colorModeForRenderPass(),de=k.useProgram("sky");if(!L.mesh){const pe=new u.aX;pe.emplaceBack(-1,-1),pe.emplaceBack(1,-1),pe.emplaceBack(1,1),pe.emplaceBack(-1,1);const _e=new u.aY;_e.emplaceBack(0,1,2),_e.emplaceBack(0,2,3),L.mesh=new mh(D.createVertexBuffer(pe,Da.members),D.createIndexBuffer(_e),u.a0.simpleSegment(0,0,pe.length,_e.length))}de.draw(D,z.TRIANGLES,Q,re,le,Ur.disabled,G,void 0,"sky",L.mesh.vertexBuffer,L.mesh.indexBuffer,L.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[p[this.currentLayer]],L=m[k.source],D=y[k.source];this._renderTileClippingMasks(k,D),this.renderLayer(this,L,k,D)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const k=this.style._layers[p[this.currentLayer]],L=m[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const D=(k.type==="symbol"?C:S)[k.source];this._renderTileClippingMasks(k,y[k.source]),this.renderLayer(this,L,k,D)}if(this.options.showTileBoundaries){const k=function(L,D){let z=null;const G=Object.values(L._layers).flatMap(de=>de.source&&!de.isHidden(D)?[L.sourceCaches[de.source]]:[]),Q=G.filter(de=>de.getSource().type==="vector"),re=G.filter(de=>de.getSource().type!=="vector"),le=de=>{(!z||z.getSource().maxzoom<de.getSource().maxzoom)&&(z=de)};return Q.forEach(de=>le(de)),z||re.forEach(de=>le(de)),z}(this.style,this.transform.zoom);k&&function(L,D,z){for(let G=0;G<z.length;G++)Og(L,D,z[G])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const L=k.transform.padding;kl(k,k.transform.height-(L.top||0),3,Mf),kl(k,L.bottom||0,3,kr),Lg(k,L.left||0,3,fh),Lg(k,k.transform.width-(L.right||0),3,Ex);const D=k.transform.centerPoint;(function(z,G,Q,re){ph(z,G-1,Q-10,2,20,re),ph(z,G-10,Q-1,20,2,re)})(k,D.x,k.transform.height-D.y,Mg)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=i?!u.a_(c,p):!u.a$(c,p)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.b0(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,S){const C=y.context,k=C.gl,L=An.unblended,D=new mr(k.LEQUAL,mr.ReadWrite,[0,1]),z=S.getTerrainMesh(),G=S.sourceCache.getRenderableTiles(),Q=y.useProgram("terrainDepth");C.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1});for(const re of G){const le=S.getTerrainData(re.tileID),de={u_matrix:y.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};Q.draw(C,k.TRIANGLES,D,Kr.disabled,L,Ur.backCCW,de,le,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,S){const C=y.context,k=C.gl,L=An.unblended,D=new mr(k.LEQUAL,mr.ReadWrite,[0,1]),z=S.getTerrainMesh(),G=S.getCoordsTexture(),Q=S.sourceCache.getRenderableTiles(),re=y.useProgram("terrainCoords");C.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1}),S.coordsIndex=[];for(const le of Q){const de=S.getTerrainData(le.tileID);C.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,G.texture);const pe={u_matrix:y.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};re.draw(C,k.TRIANGLES,D,Kr.disabled,L,Ur.backCCW,pe,de,"terrain",z.vertexBuffer,z.indexBuffer,z.segments),S.coordsIndex.push(le.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(i,c,p,m){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(m||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(y,S,C,k,L){if(y.renderPass!=="translucent")return;const D=Kr.disabled,z=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(G,Q,re,le,de,pe,_e,se,we){const Ee=Q.transform,Pe=uo(),qe=de==="map",tt=pe==="map";for(const pt of G){const xt=le.getTile(pt),ct=xt.getBucket(re);if(!ct||!ct.text||!ct.text.segments.get().length)continue;const lt=u.ag(ct.textSizeData,Ee.zoom),It=ft(xt,1,Q.transform.zoom),Qt=Gi(pt.posMatrix,tt,qe,Q.transform,It),ht=re.layout.get("icon-text-fit")!=="none"&&ct.hasIconData();if(lt){const yt=Math.pow(2,Ee.zoom-xt.tileID.overscaledZ),Kt=Q.style.map.terrain?(cr,yr)=>Q.style.map.terrain.getElevation(pt,cr,yr):null,en=Pe.translatePosition(Ee,xt,_e,se);Tl(ct,qe,tt,we,Ee,Qt,pt.posMatrix,yt,lt,ht,Pe,en,pt.toUnwrapped(),Kt)}}}(k,y,C,S,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),L),C.paint.get("icon-opacity").constantOr(1)!==0&&Pf(y,S,C,k,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),D,z),C.paint.get("text-opacity").constantOr(1)!==0&&Pf(y,S,C,k,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),D,z),S.map.showCollisionBoxes&&(Fu(y,S,C,k,!0),Fu(y,S,C,k,!1))})(i,c,p,m,this.style.placement.variableOffsets);break;case"circle":(function(y,S,C,k){if(y.renderPass!=="translucent")return;const L=C.paint.get("circle-opacity"),D=C.paint.get("circle-stroke-width"),z=C.paint.get("circle-stroke-opacity"),G=!C.layout.get("circle-sort-key").isConstant();if(L.constantOr(1)===0&&(D.constantOr(1)===0||z.constantOr(1)===0))return;const Q=y.context,re=Q.gl,le=y.depthModeForSublayer(0,mr.ReadOnly),de=Kr.disabled,pe=y.colorModeForRenderPass(),_e=[];for(let se=0;se<k.length;se++){const we=k[se],Ee=S.getTile(we),Pe=Ee.getBucket(C);if(!Pe)continue;const qe=Pe.programConfigurations.get(C.id),tt=y.useProgram("circle",qe),pt=Pe.layoutVertexBuffer,xt=Pe.indexBuffer,ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(we),lt={programConfiguration:qe,program:tt,layoutVertexBuffer:pt,indexBuffer:xt,uniformValues:hx(y,we,Ee,C),terrainData:ct};if(G){const It=Pe.segments.get();for(const Qt of It)_e.push({segments:new u.a0([Qt]),sortKey:Qt.sortKey,state:lt})}else _e.push({segments:Pe.segments,sortKey:0,state:lt})}G&&_e.sort((se,we)=>se.sortKey-we.sortKey);for(const se of _e){const{programConfiguration:we,program:Ee,layoutVertexBuffer:Pe,indexBuffer:qe,uniformValues:tt,terrainData:pt}=se.state;Ee.draw(Q,re.TRIANGLES,le,de,pe,Ur.disabled,tt,pt,C.id,Pe,qe,se.segments,C.paint,y.transform.zoom,we)}})(i,c,p,m);break;case"heatmap":(function(y,S,C,k){if(C.paint.get("heatmap-opacity")===0)return;const L=y.context;if(y.style.map.terrain){for(const D of k){const z=S.getTile(D);S.hasRenderableParent(D)||(y.renderPass==="offscreen"?Rf(y,z,C,D):y.renderPass==="translucent"&&Ua(y,C,D))}L.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(D,z,G,Q){const re=D.context,le=re.gl,de=Kr.disabled,pe=new An([le.ONE,le.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(_e,se,we){const Ee=_e.gl;_e.activeTexture.set(Ee.TEXTURE1),_e.viewport.set([0,0,se.width/4,se.height/4]);let Pe=we.heatmapFbos.get(u.aU);Pe?(Ee.bindTexture(Ee.TEXTURE_2D,Pe.colorAttachment.get()),_e.bindFramebuffer.set(Pe.framebuffer)):(Pe=Nu(_e,se.width/4,se.height/4),we.heatmapFbos.set(u.aU,Pe))})(re,D,G),re.clear({color:u.aM.transparent});for(let _e=0;_e<Q.length;_e++){const se=Q[_e];if(z.hasRenderableParent(se))continue;const we=z.getTile(se),Ee=we.getBucket(G);if(!Ee)continue;const Pe=Ee.programConfigurations.get(G.id),qe=D.useProgram("heatmap",Pe),{zoom:tt}=D.transform;qe.draw(re,le.TRIANGLES,mr.disabled,de,pe,Ur.disabled,Di(se.posMatrix,we,tt,G.paint.get("heatmap-intensity")),null,G.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,G.paint,D.transform.zoom,Pe)}re.viewport.set([0,0,D.width,D.height])}(y,S,C,k):y.renderPass==="translucent"&&function(D,z){const G=D.context,Q=G.gl;G.setColorMode(D.colorModeForRenderPass());const re=z.heatmapFbos.get(u.aU);re&&(G.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,re.colorAttachment.get()),G.activeTexture.set(Q.TEXTURE1),$u(G,z).bind(Q.LINEAR,Q.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(G,Q.TRIANGLES,mr.disabled,Kr.disabled,D.colorModeForRenderPass(),Ur.disabled,nh(D,z,0,1),null,z.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,z.paint,D.transform.zoom))}(y,C)})(i,c,p,m);break;case"line":(function(y,S,C,k){if(y.renderPass!=="translucent")return;const L=C.paint.get("line-opacity"),D=C.paint.get("line-width");if(L.constantOr(1)===0||D.constantOr(1)===0)return;const z=y.depthModeForSublayer(0,mr.ReadOnly),G=y.colorModeForRenderPass(),Q=C.paint.get("line-dasharray"),re=C.paint.get("line-pattern"),le=re.constantOr(1),de=C.paint.get("line-gradient"),pe=C.getCrossfadeParameters(),_e=le?"linePattern":Q?"lineSDF":de?"lineGradient":"line",se=y.context,we=se.gl;let Ee=!0;for(const Pe of k){const qe=S.getTile(Pe);if(le&&!qe.patternsLoaded())continue;const tt=qe.getBucket(C);if(!tt)continue;const pt=tt.programConfigurations.get(C.id),xt=y.context.program.get(),ct=y.useProgram(_e,pt),lt=Ee||ct.program!==xt,It=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe),Qt=re.constantOr(null);if(Qt&&qe.imageAtlas){const Kt=qe.imageAtlas,en=Kt.patternPositions[Qt.to.toString()],cr=Kt.patternPositions[Qt.from.toString()];en&&cr&&pt.setConstantPatternPositions(en,cr)}const ht=It?Pe:null,yt=le?wl(y,qe,C,pe,ht):Q?dx(y,qe,C,Q,pe,ht):de?mg(y,qe,C,tt.lineClipsArray.length,ht):oh(y,qe,C,ht);if(le)se.activeTexture.set(we.TEXTURE0),qe.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),pt.updatePaintBuffers(pe);else if(Q&&(lt||y.lineAtlas.dirty))se.activeTexture.set(we.TEXTURE0),y.lineAtlas.bind(se);else if(de){const Kt=tt.gradients[C.id];let en=Kt.texture;if(C.gradientVersion!==Kt.version){let cr=256;if(C.stepInterpolant){const yr=S.getSource().maxzoom,tn=Pe.canonical.z===yr?Math.ceil(1<<y.transform.maxZoom-Pe.canonical.z):1;cr=u.ac(u.aV(tt.maxLineLength/u.X*1024*tn),256,se.maxTextureSize)}Kt.gradient=u.aW({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:cr,image:Kt.gradient||void 0,clips:tt.lineClipsArray}),Kt.texture?Kt.texture.update(Kt.gradient):Kt.texture=new Te(se,Kt.gradient,we.RGBA),Kt.version=C.gradientVersion,en=Kt.texture}se.activeTexture.set(we.TEXTURE0),en.bind(C.stepInterpolant?we.NEAREST:we.LINEAR,we.CLAMP_TO_EDGE)}ct.draw(se,we.TRIANGLES,z,y.stencilModeForClipping(Pe),G,Ur.disabled,yt,It,C.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,C.paint,y.transform.zoom,pt,tt.layoutVertexBuffer2),Ee=!1}})(i,c,p,m);break;case"fill":(function(y,S,C,k){const L=C.paint.get("fill-color"),D=C.paint.get("fill-opacity");if(D.constantOr(1)===0)return;const z=y.colorModeForRenderPass(),G=C.paint.get("fill-pattern"),Q=y.opaquePassEnabledForLayer()&&!G.constantOr(1)&&L.constantOr(u.aM.transparent).a===1&&D.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===Q){const re=y.depthModeForSublayer(1,y.renderPass==="opaque"?mr.ReadWrite:mr.ReadOnly);ju(y,S,C,k,re,z,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const re=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,mr.ReadOnly);ju(y,S,C,k,re,z,!0)}})(i,c,p,m);break;case"fill-extrusion":(function(y,S,C,k){const L=C.paint.get("fill-extrusion-opacity");if(L!==0&&y.renderPass==="translucent"){const D=new mr(y.context.gl.LEQUAL,mr.ReadWrite,y.depthRangeFor3D);if(L!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))dh(y,S,C,k,D,Kr.disabled,An.disabled),dh(y,S,C,k,D,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const z=y.colorModeForRenderPass();dh(y,S,C,k,D,Kr.disabled,z)}}})(i,c,p,m);break;case"hillshade":(function(y,S,C,k){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const L=y.context,D=y.depthModeForSublayer(0,mr.ReadOnly),z=y.colorModeForRenderPass(),[G,Q]=y.renderPass==="translucent"?y.stencilConfigForOverlap(k):[{},k];for(const re of Q){const le=S.getTile(re);le.needsHillshadePrepare!==void 0&&le.needsHillshadePrepare&&y.renderPass==="offscreen"?Al(y,le,C,D,Kr.disabled,z):y.renderPass==="translucent"&&Cl(y,re,le,C,D,G[re.overscaledZ],z)}L.viewport.set([0,0,y.width,y.height])})(i,c,p,m);break;case"raster":(function(y,S,C,k){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!k.length)return;const L=y.context,D=L.gl,z=S.getSource(),G=y.useProgram("raster"),Q=y.colorModeForRenderPass(),[re,le]=z instanceof $e?[{},k]:y.stencilConfigForOverlap(k),de=le[le.length-1].overscaledZ,pe=!y.options.moving;for(const _e of le){const se=y.depthModeForSublayer(_e.overscaledZ-de,C.paint.get("raster-opacity")===1?mr.ReadWrite:mr.ReadOnly,D.LESS),we=S.getTile(_e);we.registerFadeDuration(C.paint.get("raster-fade-duration"));const Ee=S.findLoadedParent(_e,0),Pe=S.findLoadedSibling(_e),qe=Rg(we,Ee||Pe||null,S,C,y.transform,y.style.map.terrain);let tt,pt;const xt=C.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;L.activeTexture.set(D.TEXTURE0),we.texture.bind(xt,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),L.activeTexture.set(D.TEXTURE1),Ee?(Ee.texture.bind(xt,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,Ee.tileID.overscaledZ-we.tileID.overscaledZ),pt=[we.tileID.canonical.x*tt%1,we.tileID.canonical.y*tt%1]):we.texture.bind(xt,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),we.texture.useMipmap&&L.extTextureFilterAnisotropic&&y.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(_e),lt=ct?_e:null,It=lt?lt.posMatrix:y.transform.calculatePosMatrix(_e.toUnwrapped(),pe),Qt=fx(It,pt||[0,0],tt||1,qe,C);z instanceof $e?G.draw(L,D.TRIANGLES,se,Kr.disabled,Q,Ur.disabled,Qt,ct,C.id,z.boundsBuffer,y.quadTriangleIndexBuffer,z.boundsSegments):G.draw(L,D.TRIANGLES,se,re[_e.overscaledZ],Q,Ur.disabled,Qt,ct,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(i,c,p,m);break;case"background":(function(y,S,C,k){const L=C.paint.get("background-color"),D=C.paint.get("background-opacity");if(D===0)return;const z=y.context,G=z.gl,Q=y.transform,re=Q.tileSize,le=C.paint.get("background-pattern");if(y.isPatternMissing(le))return;const de=!le&&L.a===1&&D===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==de)return;const pe=Kr.disabled,_e=y.depthModeForSublayer(0,de==="opaque"?mr.ReadWrite:mr.ReadOnly),se=y.colorModeForRenderPass(),we=y.useProgram(le?"backgroundPattern":"background"),Ee=k||Q.coveringTiles({tileSize:re,terrain:y.style.map.terrain});le&&(z.activeTexture.set(G.TEXTURE0),y.imageManager.bind(y.context));const Pe=C.getCrossfadeParameters();for(const qe of Ee){const tt=k?qe.posMatrix:y.transform.calculatePosMatrix(qe.toUnwrapped()),pt=le?_f(tt,D,y,le,{tileID:qe,tileSize:re},Pe):sh(tt,D,L),xt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(qe);we.draw(z,G.TRIANGLES,_e,pe,se,Ur.disabled,pt,xt,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(i,0,p,m);break;case"custom":(function(y,S,C){const k=y.context,L=C.implementation;if(y.renderPass==="offscreen"){const D=L.prerender;D&&(y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),D.call(L,k.gl,y.transform.customLayerMatrix()),k.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),k.setStencilMode(Kr.disabled);const D=L.renderingMode==="3d"?new mr(y.context.gl.LEQUAL,mr.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,mr.ReadOnly);k.setDepthMode(D),L.render(k.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),k.setDirty(),y.setBaseState(),k.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,c,p,m,y){if(!p[0]&&!p[1])return i;const S=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(S){const L=Math.sin(S),D=Math.cos(S);p=[p[0]*D-p[1]*L,p[0]*L+p[1]*D]}const C=[y?p[0]:ft(c,p[0],this.transform.zoom),y?p[1]:ft(c,p[1],this.transform.zoom),0],k=new Float32Array(16);return u.J(k,i,C),k}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}useProgram(i,c){this.cache=this.cache||{};const p=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new gf(this.context,na[i],c,vf[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Te(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Pl{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,p){const m=Math.pow(2,p),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const k=1/(C=u.af([],C,i))[3]/c*m;return u.b1(C,C,[k,k,1/C[3],k])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const k=function(G,Q){var re=Q[0],le=Q[1],de=Q[2],pe=re*re+le*le+de*de;return pe>0&&(pe=1/Math.sqrt(pe)),G[0]=Q[0]*pe,G[1]=Q[1]*pe,G[2]=Q[2]*pe,G}([],function(G,Q,re){var le=Q[0],de=Q[1],pe=Q[2],_e=re[0],se=re[1],we=re[2];return G[0]=de*we-pe*se,G[1]=pe*_e-le*we,G[2]=le*se-de*_e,G}([],ge([],y[C[0]],y[C[1]]),ge([],y[C[2]],y[C[1]]))),L=-((D=k)[0]*(z=y[C[1]])[0]+D[1]*z[1]+D[2]*z[2]);var D,z;return k.concat(L)});return new Pl(y,S)}}class Il{constructor(i,c){this.min=i,this.max=c,this.center=function(p,m,y){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p}([],function(p,m,y){return p[0]=m[0]+y[0],p[1]=m[1]+y[1],p[2]=m[2]+y[2],p}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],p=me(this.min),m=me(this.max);for(let y=0;y<c.length;y++)p[y]=c[y]?this.min[y]:this.center[y],m[y]=c[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Il(p,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<i.planes.length;m++){const y=i.planes[m];let S=0;for(let C=0;C<c.length;C++)u.b2(y,c[C])>=0&&S++;if(S===0)return 0;S!==c.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const k=i.points[C][m]-this.min[m];y=Math.min(y,k),S=Math.max(S,k)}if(S<0||y>this.max[m]-this.min[m])return 0}return 1}}class Rl{constructor(i=0,c=0,p=0,m=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=m}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=u.y.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.y.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=u.y.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=u.y.number(i.right,c.right,p)),this}getCenter(i,c){const p=u.ac((this.left+i-this.right)/2,0,i),m=u.ac((this.top+c-this.bottom)/2,0,c);return new u.P(p,m)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Rl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Lf=85.051129;class Ml{constructor(i,c,p,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Rl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new Ml(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.b3(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.A(4);return u.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,m,y){var S=m[0],C=m[1],k=m[2],L=m[3],D=Math.sin(y),z=Math.cos(y);p[0]=S*z+k*D,p[1]=C*z+L*D,p[2]=S*-D+k*z,p[3]=C*-D+L*z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.b4(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),S=this.pointCoordinate(new u.P(0,this.height)),C=Math.floor(Math.min(p.x,m.x,y.x,S.x)),k=Math.floor(Math.max(p.x,m.x,y.x,S.x)),L=1;for(let D=C-L;D<=k+L;D++)D!==0&&c.push(new u.b4(D,i))}return c}coveringTiles(i){var c,p;let m=this.coveringZoomLevel(i);const y=m;if(i.minzoom!==void 0&&m<i.minzoom)return[];i.maxzoom!==void 0&&m>i.maxzoom&&(m=i.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),C=u.Z.fromLngLat(this.center),k=Math.pow(2,m),L=[k*S.x,k*S.y,0],D=[k*C.x,k*C.y,0],z=Pl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let G=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=m);const Q=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,re=se=>({aabb:new Il([se*k,0,0],[(se+1)*k,k,0]),zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),le=[],de=[],pe=m,_e=i.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let se=1;se<=3;se++)le.push(re(-se)),le.push(re(se));for(le.push(re(0));le.length>0;){const se=le.pop(),we=se.x,Ee=se.y;let Pe=se.fullyVisible;if(!Pe){const ct=se.aabb.intersects(z);if(ct===0)continue;Pe=ct===2}const qe=i.terrain?L:D,tt=se.aabb.distanceX(qe),pt=se.aabb.distanceY(qe),xt=Math.max(Math.abs(tt),Math.abs(pt));if(se.zoom===pe||xt>Q+(1<<pe-se.zoom)-2&&se.zoom>=G){const ct=pe-se.zoom,lt=L[0]-.5-(we<<ct),It=L[1]-.5-(Ee<<ct);de.push({tileID:new u.S(se.zoom===pe?_e:se.zoom,se.wrap,se.zoom,we,Ee),distanceSq:ie([D[0]-.5-we,D[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(lt*lt+It*It)})}else for(let ct=0;ct<4;ct++){const lt=(we<<1)+ct%2,It=(Ee<<1)+(ct>>1),Qt=se.zoom+1;let ht=se.aabb.quadrant(ct);if(i.terrain){const yt=new u.S(Qt,se.wrap,Qt,lt,It),Kt=i.terrain.getMinMaxElevation(yt),en=(c=Kt.minElevation)!==null&&c!==void 0?c:this.elevation,cr=(p=Kt.maxElevation)!==null&&p!==void 0?p:this.elevation;ht=new Il([ht.min[0],ht.min[1],en],[ht.max[0],ht.max[1],cr])}le.push({aabb:ht,zoom:Qt,x:lt,y:It,wrap:se.wrap,fullyVisible:Pe})}}return de.sort((se,we)=>se.distanceSq-we.distanceSq).map(se=>se.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.ac(i.lat,-85.051129,Lf);return new u.P(u.O(i.lng)*this.worldSize,u.Q(c)*this.worldSize)}unproject(i){return new u.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,i),y=i.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const S=p+c-y,C=Math.cos(this._pitch)*this.cameraToCenterDistance/S/u.b5(1,m.lat),k=this.scaleZoom(C/this.tileSize);this._elevation=y,this._center=m,this.zoom=k}setLocationAtPoint(i,c){const p=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(i),S=new u.Z(y.x-(p.x-m.x),y.y-(p.y-m.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const G=c.pointCoordinate(i);if(G!=null)return G}const p=[i.x,i.y,0,1],m=[i.x,i.y,1,1];u.af(p,p,this.pixelMatrixInverse),u.af(m,m,this.pixelMatrixInverse);const y=p[3],S=m[3],C=p[1]/y,k=m[1]/S,L=p[2]/y,D=m[2]/S,z=L===D?0:(0-L)/(D-L);return new u.Z(u.y.number(p[0]/y,m[0]/S,z)/this.worldSize,u.y.number(C,k,z)/this.worldSize)}coordinatePoint(i,c=0,p=this.pixelMatrix){const m=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.af(m,m,p),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Ie().extend(this.pointLocation(new u.P(0,i))).extend(this.pointLocation(new u.P(this.width,i))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ie([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Lf])}calculateTileMatrix(i){const c=i.canonical,p=this.worldSize/this.zoomScale(c.z),m=c.x+Math.pow(2,c.z)*i.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[m*p,c.y*p,0]),u.K(y,y,[p/u.X,p/u.X,1]),y}calculatePosMatrix(i,c=!1){const p=i.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const y=this.calculateTileMatrix(i);return u.L(y,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[p]=new Float32Array(y),m[p]}calculateFogMatrix(i){const c=i.key,p=this._fogMatrixCache;if(p[c])return p[c];const m=this.calculateTileMatrix(i);return u.L(m,this.fogMatrix,m),p[c]=new Float32Array(m),p[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,c){c=u.ac(+c,this.minZoom,this.maxZoom);const p={center:new u.N(i.lng,i.lat),zoom:c};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const se=179.9999999999;m=[-se,se]}const y=this.tileSize*this.zoomScale(p.zoom);let S=0,C=y,k=0,L=y,D=0,z=0;const{x:G,y:Q}=this.size;if(this.latRange){const se=this.latRange;S=u.Q(se[1])*y,C=u.Q(se[0])*y,C-S<Q&&(D=Q/(C-S))}m&&(k=u.b3(u.O(m[0])*y,0,y),L=u.b3(u.O(m[1])*y,0,y),L<k&&(L+=y),L-k<G&&(z=G/(L-k)));const{x:re,y:le}=this.project.call({worldSize:y},i);let de,pe;const _e=Math.max(z||0,D||0);if(_e){const se=new u.P(z?(L+k)/2:re,D?(C+S)/2:le);return p.center=this.unproject.call({worldSize:y},se).wrap(),p.zoom+=this.scaleZoom(_e),p}if(this.latRange){const se=Q/2;le-se<S&&(pe=S+se),le+se>C&&(pe=C-se)}if(m){const se=(k+L)/2;let we=re;this._renderWorldCopies&&(we=u.b3(re,se-y/2,se+y/2));const Ee=G/2;we-Ee<k&&(de=k+Ee),we+Ee>L&&(de=L-Ee)}if(de!==void 0||pe!==void 0){const se=new u.P(de??re,pe??le);p.center=this.unproject.call({worldSize:y},se).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=p,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let m=u.an(new Float64Array(16));u.K(m,m,[this.width/2,-this.height/2,1]),u.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.an(new Float64Array(16)),u.K(m,m,[1,-1,1]),u.J(m,m,[-1,-1,0]),u.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),C=y-S*this._pixelPerMeter/Math.cos(this._pitch),k=S<0?C:y,L=Math.PI/2+this._pitch,D=this._fov*(.5+i.y/this.height),z=Math.sin(D)*k/Math.sin(u.ac(Math.PI-L-D,.01,Math.PI-.01)),G=this.getHorizon(),Q=2*Math.atan(G/this.cameraToCenterDistance)*(.5+i.y/(2*G)),re=Math.sin(Q)*k/Math.sin(u.ac(Math.PI-L-Q,.01,Math.PI-.01)),le=Math.min(z,re);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*le+k),this.nearZ=this.height/50,m=new Float64Array(16),u.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-i.x/this.width,m[9]=2*i.y/this.height,this.projectionMatrix=u.ae(m),u.K(m,m,[1,-1,1]),u.J(m,m,[0,0,-this.cameraToCenterDistance]),u.b7(m,m,this._pitch),u.ad(m,m,this.angle),u.J(m,m,[-c,-p,0]),this.mercatorMatrix=u.K([],m,[this.worldSize,this.worldSize,this.worldSize]),u.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,m),u.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=u.as([],m),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-c,-p,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,m);const de=this.width%2/2,pe=this.height%2/2,_e=Math.cos(this.angle),se=Math.sin(this.angle),we=c-Math.round(c)+_e*de+se*pe,Ee=p-Math.round(p)+_e*pe+se*de,Pe=new Float64Array(m);if(u.J(Pe,Pe,[we>.5?we-1:we,Ee>.5?Ee-1:Ee,0]),this.alignedModelViewProjectionMatrix=Pe,m=u.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let p=c.x,m=c.y,y=c.x,S=c.y;for(const C of i)p=Math.min(p,C.x),m=Math.min(m,C.y),y=Math.max(y,C.x),S=Math.max(S,C.y);return[new u.P(p,m),new u.P(y,m),new u.P(y,S),new u.P(p,S),new u.P(p,m)]}}lngLatToCameraDepth(i,c){const p=this.locationCoordinate(i),m=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Uu(_,i){let c,p=!1,m=null,y=null;const S=()=>{m=null,p&&(_.apply(y,c),m=setTimeout(S,i),p=!1)};return(...C)=>(p=!0,y=this,c=C,m||S(),m)}class yh{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const p=c.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let S=window.location.href.replace(/(#.+)?$/,y);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Uu(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),S=Math.round(c.lng*y)/y,C=Math.round(c.lat*y)/y,k=this._map.getBearing(),L=this._map.getPitch();let D="";if(D+=i?`/${S}/${C}/${p}`:`${p}/${C}/${S}`,(k||L)&&(D+="/"+Math.round(10*k)/10),L&&(D+=`/${Math.round(L)}`),this._hashName){const z=this._hashName;let G=!1;const Q=window.location.hash.slice(1).split("&").map(re=>{const le=re.split("=")[0];return le===z?(G=!0,`${le}=${D}`):re}).filter(re=>re);return G||Q.push(`${z}=${D}`),`#${Q.join("&")}`}return`#${D}`}}const _h={linearity:.3,easing:u.b8(0,0,.3,1)},Of=u.e({deceleration:2500,maxSpeed:1400},_h),Cx=u.e({deceleration:20,maxSpeed:1400},_h),zg=u.e({deceleration:1e3,maxSpeed:360},_h),vh=u.e({deceleration:1e3,maxSpeed:90},_h);class Df{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=P.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)c.zoom+=y.zoomDelta||0,c.bearing+=y.bearingDelta||0,c.pitch+=y.pitchDelta||0,y.panDelta&&c.pan._add(y.panDelta),y.around&&(c.around=y.around),y.pinchAround&&(c.pinchAround=y.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){const y=qu(c.pan.mag(),p,u.e({},Of,i||{}));m.offset=c.pan.mult(y.amount/c.pan.mag()),m.center=this._map.transform.center,Vu(m,y)}if(c.zoom){const y=qu(c.zoom,p,Cx);m.zoom=this._map.transform.zoom+y.amount,Vu(m,y)}if(c.bearing){const y=qu(c.bearing,p,zg);m.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),Vu(m,y)}if(c.pitch){const y=qu(c.pitch,p,vh);m.pitch=this._map.transform.pitch+y.amount,Vu(m,y)}if(m.zoom||m.bearing){const y=c.pinchAround===void 0?c.around:c.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function Vu(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function qu(_,i,c){const{maxSpeed:p,linearity:m,deceleration:y}=c,S=u.ac(_*m/(i/1e3),-p,p),C=Math.abs(S)/(y*m);return{easing:c.easing,duration:1e3*C,amount:S*(C/2)}}class ai extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,m={}){const y=R.mousePos(c.getCanvas(),p),S=c.unproject(y);super(i,u.e({point:y,lngLat:S,originalEvent:p},m)),this._defaultPrevented=!1,this.target=c}}class Va extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const m=i==="touchend"?p.changedTouches:p.touches,y=R.touchPos(c.getCanvasContainer(),m),S=y.map(k=>c.unproject(k)),C=y.reduce((k,L,D,z)=>k.add(L.div(z.length)),new u.P(0,0));super(i,{points:y,point:C,lngLats:S,lngLat:c.unproject(C),originalEvent:p}),this._defaultPrevented=!1}}class Fg extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Bg{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Fg(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new ai(i.type,this._map,i))}mouseup(i){this._map.fire(new ai(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ai(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ai(i.type,this._map,i))}mouseover(i){this._map.fire(new ai(i.type,this._map,i))}mouseout(i){this._map.fire(new ai(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Va(i.type,this._map,i))}touchmove(i){this._map.fire(new Va(i.type,this._map,i))}touchend(i){this._map.fire(new Va(i.type,this._map,i))}touchcancel(i){this._map.fire(new Va(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ai(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ai(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Lo{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.P.convert(i),this._map.terrain)}}class Xi{constructor(i,c){this._map=i,this._tr=new Lo(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(R.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=R.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const y=Math.min(m.x,p.x),S=Math.max(m.x,p.x),C=Math.min(m.y,p.y),k=Math.max(m.y,p.y);R.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=S-y+"px",this._box.style.height=k-C+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,m=c;if(this.reset(),R.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:i})),{cameraAnimation:y=>y.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.k(i,{originalEvent:c}))}}function Hu(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const c={};for(let p=0;p<_.length;p++)c[_[p].identifier]=i[p];return c}class zf{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const y=new u.P(0,0);for(const S of m)y._add(S);return y.div(m.length)}(c),this.touches=Hu(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const m=Hu(p,c);for(const y in this.touches){const S=m[y];(!S||S.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class xh{constructor(i){this.singleTap=new zf(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const m=this.singleTap.touchend(i,c,p);if(m){const y=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(m)<30;if(y&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ll{constructor(i){this._tr=new Lo(i),this._zoomIn=new xh({numTouches:1,numTaps:2}),this._zoomOut=new xh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const m=this._zoomIn.touchend(i,c,p),y=this._zoomOut.touchend(i,c,p),S=this._tr;return m?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(m)},{originalEvent:i})}):y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(y)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Os{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const m=c.length?c[0]:c;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&R.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ff={0:1,2:2};class bh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=R.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,p){const m=Ff[p];return c.buttons===void 0||(c.buttons&m)!==m}(i,this._eventButton)}isValidEndEvent(i){return R.mouseButton(i)===this._eventButton}}class Bf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const wh=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=i=>{i.preventDefault()}},Nf=({enable:_,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const p=new bh({checkCorrectEvent:m=>R.mouseButton(m)===0&&m.ctrlKey||R.mouseButton(m)===2});return new Os({clickTolerance:i,move:(m,y)=>({bearingDelta:(y.x-m.x)*c}),moveStateManager:p,enable:_,assignEvents:wh})},$f=({enable:_,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new bh({checkCorrectEvent:m=>R.mouseButton(m)===0&&m.ctrlKey||R.mouseButton(m)===2});return new Os({clickTolerance:i,move:(m,y)=>({pitchDelta:(y.y-m.y)*c}),moveStateManager:p,enable:_,assignEvents:wh})};class qa{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active){if(!this._shouldBePrevented(p.length))return i.preventDefault(),this._calculateTransform(i,c,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const m=Hu(p,c),y=new u.P(0,0),S=new u.P(0,0);let C=0;for(const L in m){const D=m[L],z=this._touches[L];z&&(y._add(D),S._add(D.sub(z)),C++,m[L]=D)}if(this._touches=m,this._shouldBePrevented(C)||!S.mag())return;const k=S.div(C);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){if(!this._firstTwoTouches)return;i.preventDefault();const[m,y]=this._firstTwoTouches,S=Wu(p,c,m),C=Wu(p,c,y);if(!S||!C)return;const k=this._aroundCenter?null:S.add(C).div(2);return this._move([S,C],k,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,S=Wu(p,c,m),C=Wu(p,c,y);S&&C||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Wu(_,i,c){for(let p=0;p<_.length;p++)if(_[p].identifier===c)return i[p]}function jf(_,i){return Math.log(_/i)/Math.LN2}class Uf extends Sh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(jf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jf(this._distance,p),pinchAround:c}}}function Vf(_,i){return 180*_.angleWith(i)/Math.PI}class qf extends Sh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,p){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vf(this._vector,m),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Vf(i,this._startVector);return Math.abs(p)<c}}function Th(_){return Math.abs(_.y)>Math.abs(_.x)}class Ol extends Sh{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,p){super.touchstart(i,c,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Th(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=i[0].sub(this._lastPoints[0]),y=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const m=i.mag()>=2,y=c.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const S=i.y>0==c.y>0;return Th(i)&&Th(c)&&S}}const Ng={panStep:100,bearingStep:15,pitchStep:10};class ho{constructor(i){this._tr=new Lo(i);const c=Ng;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,m=0,y=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),y=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),y=1);break;case 38:i.shiftKey?m=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?m=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:C=>{const k=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:us,zoom:c?Math.round(k.zoom)+c*(i.shiftKey?2:1):k.zoom,bearing:k.bearing+p*this._bearingStep,pitch:k.pitch+m*this._pitchStep,offset:[-y*this._panStep,-S*this._panStep],center:k.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function us(_){return _*(2-_)}const Hf=4.000244140625;class Oo{constructor(i,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Lo(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=P.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Hf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=R.mousePos(this._map.getCanvas(),i),p=this._tr;this._around=c.y>p.transform.height/2-p.transform.getHorizon()?u.N.convert(this._aroundCenter?p.center:p.unproject(c)):u.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Hf?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&L!==0&&(L=1/L);const D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*L))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,m=this._easing;let y,S=!1;const C=P.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&m&&C){const k=Math.min(C/200,1),L=m(k);y=u.y.number(p,c,L),k<1?this._frameId||(this._frameId=!0):S=!0}else y=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:y-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.b9;if(this._prevEase){const p=this._prevEase,m=(P.now()-p.start)/p.duration,y=p.easing(m+.01)-p.easing(m),S=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-S*S);c=u.b8(S,C,.25,1)}return this._prevEase={start:P.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ha{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ax{constructor(i){this._tr=new Lo(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kx{constructor(){this._tap=new xh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,p){if(!this._swipePoint)if(this._tapTime){const m=c[0],y=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(m)<30;y&&S?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,c,p)}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=c[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,i.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(i,c,p);m&&(this._tapTime=i.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $g{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jg{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wf{constructor(i,c,p,m){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Dl{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=R.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=c,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=p,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(R.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,c){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:i,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const fo=_=>_.zoom||_.drag||_.pitch||_.rotate;class Tt extends u.k{}function Eh(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Gf{constructor(i,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=m.type==="renderFrame"?void 0:m,C={needsRenderFrame:!1},k={},L={},D=m.touches,z=D?this._getMapTouches(D):void 0,G=z?R.touchPos(this._map.getCanvas(),z):R.mousePos(this._map.getCanvas(),m);for(const{handlerName:le,handler:de,allowed:pe}of this._handlers){if(!de.isEnabled())continue;let _e;this._blockedByActive(L,pe,le)?de.reset():de[y||m.type]&&(_e=de[y||m.type](m,G,z),this.mergeHandlerResult(C,k,_e,le,S),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()),(_e||de.isActive())&&(L[le]=de)}const Q={};for(const le in this._previousActiveHandlers)L[le]||(Q[le]=S);this._previousActiveHandlers=L,(Object.keys(Q).length||Eh(C))&&(this._changes.push([C,k,Q]),this._triggerRenderFrame()),(Object.keys(L).length||Eh(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=C;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Df(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,S]of this._listeners)R.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,c,p]of this._listeners)R.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Bg(c,i));const m=c.boxZoom=new Xi(c,i);this._add("boxZoom",m),i.interactive&&i.boxZoom&&m.enable();const y=c.cooperativeGestures=new Dl(c,i.cooperativeGestures);this._add("cooperativeGestures",y),i.cooperativeGestures&&y.enable();const S=new Ll(c),C=new Ax(c);c.doubleClickZoom=new Ha(C,S),this._add("tapZoom",S),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const k=new kx;this._add("tapDragZoom",k);const L=c.touchPitch=new Ol(c);this._add("touchPitch",L),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const D=Nf(i),z=$f(i);c.dragRotate=new jg(i,D,z),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const G=(({enable:_e,clickTolerance:se})=>{const we=new bh({checkCorrectEvent:Ee=>R.mouseButton(Ee)===0&&!Ee.ctrlKey});return new Os({clickTolerance:se,move:(Ee,Pe)=>({around:Pe,panDelta:Pe.sub(Ee)}),activateOnStart:!0,moveStateManager:we,enable:_e,assignEvents:wh})})(i),Q=new qa(i,c);c.dragPan=new $g(p,G,Q),this._add("mousePan",G),this._add("touchPan",Q,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const re=new qf,le=new Uf;c.touchZoomRotate=new Wf(p,le,re,k),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const de=c.scrollZoom=new Oo(c,()=>this._triggerRenderFrame());this._add("scrollZoom",de,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const pe=c.keyboard=new ho(c);this._add("keyboard",pe),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new kn(c))}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fo(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const m in i)if(m!==p&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(i,c,p,m,y){if(!p)return;u.e(i,p);const S={handlerName:m,originalEvent:p.originalEvent||y};p.zoomDelta!==void 0&&(c.zoom=S),p.panDelta!==void 0&&(c.drag=S),p.pitchDelta!==void 0&&(c.pitch=S),p.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const i={},c={},p={};for(const[m,y,S]of this._changes)m.panDelta&&(i.panDelta=(i.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(i.around=m.around),m.pinchAround!==void 0&&(i.pinchAround=m.pinchAround),m.noInertia&&(i.noInertia=m.noInertia),u.e(c,y),u.e(p,S);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const m=this._map,y=m._getTransformForUpdate(),S=m.terrain;if(!(Eh(i)||S&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:C,zoomDelta:k,bearingDelta:L,pitchDelta:D,around:z,pinchAround:G}=i;G!==void 0&&(z=G),m._stop(!0),z=z||m.transform.centerPoint;const Q=y.pointLocation(C?z.sub(C):z);L&&(y.bearing+=L),D&&(y.pitch+=D),k&&(y.zoom+=k),S?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(Q,z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(Q,z)):y.setLocationAtPoint(Q,z),m._applyUpdatedTransform(y),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const m=fo(this._eventsInProgress),y=fo(i),S={};for(const z in i){const{originalEvent:G}=i[z];this._eventsInProgress[z]||(S[`${z}start`]=G),this._eventsInProgress[z]=i[z]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const z in S)this._fireEvent(z,S[z]);y&&this._fireEvent("move",y.originalEvent);for(const z in i){const{originalEvent:G}=i[z];this._fireEvent(z,G)}const C={};let k;for(const z in this._eventsInProgress){const{handlerName:G,originalEvent:Q}=this._eventsInProgress[z];this._handlersById[G].isActive()||(delete this._eventsInProgress[z],k=c[G]||Q,C[`${z}end`]=k)}for(const z in C)this._fireEvent(z,C[z]);const L=fo(this._eventsInProgress),D=(m||y)&&!L;if(D&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const z=this._map._getTransformForUpdate();z.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(z)}if(p&&D){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!z||!z.essential&&P.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:k})),G(this._map.getBearing())&&this._map.resetNorth()):(G(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Tt("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ug extends u.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const p=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=u.P.convert(i).mult(-1),this.panTo(this.transform.center,u.e({offset:i},c),p)}panTo(i,c,p){return this.easeTo(u.e({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(u.e({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(u.e({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,u.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Ie.convert(i).adjustAntiMeridian();const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_cameraForBoxAndBearing(i,c,p,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ct=m.padding;m.padding={top:ct,bottom:ct,right:ct,left:ct}}m.padding=u.e(y,m.padding);const S=this.transform,C=S.padding,k=new Ie(i,c),L=S.project(k.getNorthWest()),D=S.project(k.getNorthEast()),z=S.project(k.getSouthEast()),G=S.project(k.getSouthWest()),Q=u.ba(-p),re=L.rotate(Q),le=D.rotate(Q),de=z.rotate(Q),pe=G.rotate(Q),_e=new u.P(Math.max(re.x,le.x,pe.x,de.x),Math.max(re.y,le.y,pe.y,de.y)),se=new u.P(Math.min(re.x,le.x,pe.x,de.x),Math.min(re.y,le.y,pe.y,de.y)),we=_e.sub(se),Ee=(S.width-(C.left+C.right+m.padding.left+m.padding.right))/we.x,Pe=(S.height-(C.top+C.bottom+m.padding.top+m.padding.bottom))/we.y;if(Pe<0||Ee<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const qe=Math.min(S.scaleZoom(S.scale*Math.min(Ee,Pe)),m.maxZoom),tt=u.P.convert(m.offset),pt=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.ba(p)),xt=tt.add(pt).mult(S.scale/S.zoomScale(qe));return{center:S.unproject(L.add(z).div(2).sub(xt)),zoom:qe,bearing:p}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}fitScreenCoordinates(i,c,p,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(i)),this.transform.pointLocation(u.P.convert(c)),p,m),m,y)}_fitInternal(i,c,p){return i?(delete(c=u.e(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=this._getTransformForUpdate();let m=!1,y=!1,S=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(m=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=u.N.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(y=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(S=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),m&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),y&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),S&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(i,c,p,m=0){const y=u.Z.fromLngLat(i,c),S=u.Z.fromLngLat(p,m),C=S.x-y.x,k=S.y-y.y,L=S.z-y.z,D=Math.hypot(C,k,L);if(D===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(C,k),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/D/this.transform.tileSize),Q=180*Math.atan2(C,-k)/Math.PI;let re=180*Math.acos(z/D)/Math.PI;return re=L<0?90-re:90+re,{center:S.toLngLat(),zoom:G,pitch:re,bearing:Q}}easeTo(i,c){var p;this._stop(!1,i.easeId),((i=u.e({offset:[0,0],duration:500,easing:u.b9},i)).animate===!1||!i.essential&&P.prefersReducedMotion)&&(i.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,S=m.bearing,C=m.pitch,k=m.padding,L="bearing"in i?this._normalizeBearing(i.bearing,S):S,D="pitch"in i?+i.pitch:C,z="padding"in i?i.padding:m.padding,G=u.P.convert(i.offset);let Q=m.centerPoint.add(G);const re=m.pointLocation(Q),{center:le,zoom:de}=m.getConstrained(u.N.convert(i.center||re),(p=i.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(le,m);const pe=m.project(re),_e=m.project(le).sub(pe),se=m.zoomScale(de-y);let we,Ee;i.around&&(we=u.N.convert(i.around),Ee=m.locationPoint(we));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||de!==y,this._rotating=this._rotating||S!==L,this._pitching=this._pitching||D!==C,this._padding=!m.isPaddingEqual(z),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Pe),this.terrain&&this._prepareElevation(le),this._ease(qe=>{if(this._zooming&&(m.zoom=u.y.number(y,de,qe)),this._rotating&&(m.bearing=u.y.number(S,L,qe)),this._pitching&&(m.pitch=u.y.number(C,D,qe)),this._padding&&(m.interpolatePadding(k,z,qe),Q=m.centerPoint.add(G)),this.terrain&&!i.freezeElevation&&this._updateElevation(qe),we)m.setLocationAtPoint(we,Ee);else{const tt=m.zoomScale(m.zoom-y),pt=de>y?Math.min(2,se):Math.max(.5,se),xt=Math.pow(pt,1-qe),ct=m.unproject(pe.add(_e.mult(qe*xt)).mult(tt));m.setLocationAtPoint(m.renderWorldCopies?ct.wrap():ct,Q)}this._applyUpdatedTransform(m),this._fireMoveEvents(c)},qe=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,qe)},i),this}_prepareEase(i,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new u.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new u.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new u.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(c-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){const c=i.getCameraPosition(),p=this.terrain.getElevationForLngLatZoom(c.lngLat,i.zoom);if(c.altitude<p){const m=this.calculateCameraOptionsFromTo(c.lngLat,p,i.center,i.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(i){const c=[];if(this.terrain&&c.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&c.push(m=>this.transformCameraUpdate(m)),!c.length)return;const p=i.clone();for(const m of c){const y=p.clone(),{center:S,zoom:C,pitch:k,bearing:L,elevation:D}=m(y);S&&(y.center=S),C!==void 0&&(y.zoom=C),k!==void 0&&(y.pitch=k),L!==void 0&&(y.bearing=L),D!==void 0&&(y.elevation=D),p.apply(y)}this.transform.apply(p)}_fireMoveEvents(i){this.fire(new u.k("move",i)),this._zooming&&this.fire(new u.k("zoom",i)),this._rotating&&this.fire(new u.k("rotate",i)),this._pitching&&this.fire(new u.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.k("zoomend",i)),m&&this.fire(new u.k("rotateend",i)),y&&this.fire(new u.k("pitchend",i)),this.fire(new u.k("moveend",i))}flyTo(i,c){var p;if(!i.essential&&P.prefersReducedMotion){const yt=u.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(yt,c)}this.stop(),i=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},i);const m=this._getTransformForUpdate(),y=m.zoom,S=m.bearing,C=m.pitch,k=m.padding,L="bearing"in i?this._normalizeBearing(i.bearing,S):S,D="pitch"in i?+i.pitch:C,z="padding"in i?i.padding:m.padding,G=u.P.convert(i.offset);let Q=m.centerPoint.add(G);const re=m.pointLocation(Q),{center:le,zoom:de}=m.getConstrained(u.N.convert(i.center||re),(p=i.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(le,m);const pe=m.zoomScale(de-y),_e=m.project(re),se=m.project(le).sub(_e);let we=i.curve;const Ee=Math.max(m.width,m.height),Pe=Ee/pe,qe=se.mag();if("minZoom"in i){const yt=u.ac(Math.min(i.minZoom,y,de),m.minZoom,m.maxZoom),Kt=Ee/m.zoomScale(yt-y);we=Math.sqrt(Kt/qe*2)}const tt=we*we;function pt(yt){const Kt=(Pe*Pe-Ee*Ee+(yt?-1:1)*tt*tt*qe*qe)/(2*(yt?Pe:Ee)*tt*qe);return Math.log(Math.sqrt(Kt*Kt+1)-Kt)}function xt(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function ct(yt){return(Math.exp(yt)+Math.exp(-yt))/2}const lt=pt(!1);let It=function(yt){return ct(lt)/ct(lt+we*yt)},Qt=function(yt){return Ee*((ct(lt)*(xt(Kt=lt+we*yt)/ct(Kt))-xt(lt))/tt)/qe;var Kt},ht=(pt(!0)-lt)/we;if(Math.abs(qe)<1e-6||!isFinite(ht)){if(Math.abs(Ee-Pe)<1e-6)return this.easeTo(i,c);const yt=Pe<Ee?-1:1;ht=Math.abs(Math.log(Pe/Ee))/we,Qt=()=>0,It=Kt=>Math.exp(yt*we*Kt)}return i.duration="duration"in i?+i.duration:1e3*ht/("screenSpeed"in i?+i.screenSpeed/we:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==L,this._pitching=D!==C,this._padding=!m.isPaddingEqual(z),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(le),this._ease(yt=>{const Kt=yt*ht,en=1/It(Kt);m.zoom=yt===1?de:y+m.scaleZoom(en),this._rotating&&(m.bearing=u.y.number(S,L,yt)),this._pitching&&(m.pitch=u.y.number(C,D,yt)),this._padding&&(m.interpolatePadding(k,z,yt),Q=m.centerPoint.add(G)),this.terrain&&!i.freezeElevation&&this._updateElevation(yt);const cr=yt===1?le:m.unproject(_e.add(se.mult(Qt(Kt))).mult(en));m.setLocationAtPoint(m.renderWorldCopies?cr.wrap():cr,Q),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}return i||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=P.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=u.b3(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i,c){if(!c.renderWorldCopies||c.lngRange)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const zl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fl{constructor(i=zl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const c=this._map.style.sourceCaches;for(const m in c){const y=c[m];if(y.used||y.usedForTerrain){const S=y.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(m=>String(m).trim()),i.sort((m,y)=>m.length-y.length),i=i.filter((m,y)=>{for(let S=y+1;S<i.length;S++)if(i[S].indexOf(m)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Zf{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl");const c=R.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const m of p)if(m.id===i)return void(m.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Kf=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Px extends u.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const p={};for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aP(m.posMatrix,0,u.X,0,u.X,0,1),this._tiles[m.key]=new qn(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(i){for(const c in this._tiles){const p=this._tiles[c];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(i.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),c[p]=y}else if(m.canonical.isChildOf(i.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16);const S=m.canonical.z-i.canonical.z,C=m.canonical.x-(m.canonical.x>>S<<S),k=m.canonical.y-(m.canonical.y>>S<<S),L=u.X>>S;u.aP(y.posMatrix,0,L,0,L,0,1),u.J(y.posMatrix,y.posMatrix,[-C*L,-k*L,0]),c[p]=y}else if(i.canonical.isChildOf(m.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16);const S=i.canonical.z-m.canonical.z,C=i.canonical.x-(i.canonical.x>>S<<S),k=i.canonical.y-(i.canonical.y>>S<<S),L=u.X>>S;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[C*L,k*L,0]),u.K(y.posMatrix,y.posMatrix,[1/2**S,1/2**S,0]),c[p]=y}}return c}getSourceTile(i,c){const p=this.sourceCache._source;let m=i.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!y||!y.dem)&&c)for(;m>=p.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(i.scaledTo(m--).key);return y}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class Xf{constructor(i,c,p){this.painter=i,this.sourceCache=new Px(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,p,m=u.X){var y;if(!(c>=0&&c<m&&p>=0&&p<m))return 0;const S=this.getTerrainData(i),C=(y=S.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const k=function(re,le,de){var pe=le[0],_e=le[1];return re[0]=de[0]*pe+de[4]*_e+de[12],re[1]=de[1]*pe+de[5]*_e+de[13],re}([],[c/m*u.X,p/m*u.X],S.u_terrain_matrix),L=[k[0]*C.dim,k[1]*C.dim],D=Math.floor(L[0]),z=Math.floor(L[1]),G=L[0]-D,Q=L[1]-z;return C.get(D,z)*(1-G)*(1-Q)+C.get(D+1,z)*G*(1-Q)+C.get(D,z+1)*(1-G)*Q+C.get(D+1,z+1)*G*Q}getElevationForLngLatZoom(i,c){if(!u.bb(c,i.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(p,m%u.X,y%u.X,u.X)}getElevation(i,c,p,m=u.X){return this.getDEMElevation(i,c,p,m)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const m=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Te(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Te(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Te(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=m?y=i.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=i.canonical.x-(i.canonical.x>>y<<y),C=i.canonical.y-(i.canonical.y>>y<<y),k=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(k,k,[S*u.X,C*u.X,0]),this._demMatrixCache[i.key]={matrix:k,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,p=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Te(c.context,{width:p,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Te(c.context,{width:p,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,S=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,S+=4)c[S+0]=255&C,c[S+1]=255&y,c[S+2]=C>>8<<4|y>>8,c[S+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new Te(i,p,i.gl.RGBA,{premultiply:!1});return m.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,m=p.gl,y=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,C-S-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const k=c[0]+(c[2]>>4<<8),L=c[1]+((15&c[2])<<8),D=this.coordsIndex[255-c[3]],z=D&&this.sourceCache.getTileByID(D);if(!z)return null;const G=this._coordsTextureSize,Q=(1<<z.tileID.canonical.z)*G;return new u.Z((z.tileID.canonical.x*G+k)/Q+z.tileID.wrap,(z.tileID.canonical.y*G+L)/Q,this.getElevation(z.tileID,k,L,G))}depthAtPoint(i){const c=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.bd,p=new u.aY,m=this.meshSize,y=u.X/m,S=m*m;for(let z=0;z<=m;z++)for(let G=0;G<=m;G++)c.emplaceBack(G*y,z*y,0);for(let z=0;z<S;z+=m+1)for(let G=0;G<m;G++)p.emplaceBack(G+z,m+G+z+1,m+G+z+2),p.emplaceBack(G+z,m+G+z+2,G+z+1);const C=c.length,k=C+2*(m+1);for(const z of[0,1])for(let G=0;G<=m;G++)for(const Q of[0,1])c.emplaceBack(G*y,z*u.X,Q);for(let z=0;z<2*m;z+=2)p.emplaceBack(k+z,k+z+1,k+z+3),p.emplaceBack(k+z,k+z+3,k+z+2),p.emplaceBack(C+z,C+z+3,C+z+1),p.emplaceBack(C+z,C+z+2,C+z+3);const L=c.length,D=L+2*(m+1);for(const z of[0,1])for(let G=0;G<=m;G++)for(const Q of[0,1])c.emplaceBack(z*u.X,G*y,Q);for(let z=0;z<2*m;z+=2)p.emplaceBack(L+z,L+z+1,L+z+3),p.emplaceBack(L+z,L+z+3,L+z+2),p.emplaceBack(D+z,D+z+3,D+z+1),p.emplaceBack(D+z,D+z+2,D+z+3);return this._mesh=new mh(i.createVertexBuffer(c,Kf.members),i.createIndexBuffer(p),u.a0.simpleSegment(0,0,c.length,p.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,c){const p=u.Z.fromLngLat(i.wrap()),m=(1<<c)*u.X,y=p.x*m,S=p.y*m,C=Math.floor(y/u.X),k=Math.floor(S/u.X);return{tileID:new u.S(c,0,c,C,k),mercatorX:y,mercatorY:S}}}class Ix{constructor(i,c,p){this._context=i,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Te(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:i,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Bl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Vg{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new Ix(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const m=i.sourceCaches[p].getVisibleCoordinates();for(const y of m){const S=this.terrain.sourceCache.getTerrainCoords(y);for(const C in S)this._coordsDescendingInv[p][C]||(this._coordsDescendingInv[p][C]=[]),this._coordsDescendingInv[p][C].push(S[C])}}this._coordsDescendingInvStr={};for(const p of i._order){const m=i._layers[p],y=m.source;if(Bl[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const S in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][S]=this._coordsDescendingInv[y][S].map(C=>C.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][p.tileID.key];y&&y!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Bl[c]&&(this._prevType&&Bl[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!m))return!0;if(Bl[this._prevType]||Bl[c]&&m){this._prevType=c;const y=this._stacks.length-1,S=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Dg(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const L=this.pool.getObjectForId(C.rtt[y].id);if(L.stamp===C.rtt[y].stamp){this.pool.useObject(L);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),C.rtt[y]={id:k.id,stamp:k.stamp},p.context.bindFramebuffer.set(k.fbo.framebuffer),p.context.clear({color:u.aM.transparent,stencil:0}),p.currentStencilSource=void 0;for(let L=0;L<S.length;L++){const D=p.style._layers[S[L]],z=D.source?this._coordsDescendingInv[D.source][C.tileID.key]:[C.tileID];p.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),p._renderTileClippingMasks(D,z),p.renderLayer(p,p.style.sourceCaches[D.source],D,z),D.source&&(C.rttCoords[D.source]=this._coordsDescendingInvStr[D.source][C.tileID.key])}}return Dg(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Bl[c]}return!1}}const Yf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},qg=b,Rx={hash:!1,interactive:!0,bearingSnap:7,attributionControl:zl,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Jf=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Mx={showCompass:!0,showZoom:!0,visualizePitch:!1};class Lx{constructor(i,c,p=!1){this.mousedown=S=>{this.startMouse(u.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),R.mousePos(this.element,S)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,R.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),R.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=i.dragRotate._mouseRotate.getClickTolerance(),y=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Nf({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:C,bearingDegreesPerPixelMoved:k=.8})=>{const L=new Bf;return new Os({clickTolerance:C,move:(D,z)=>({bearingDelta:(z.x-D.x)*k}),moveStateManager:L,enable:S,assignEvents:Jf})})({clickTolerance:m,enable:!0}),this.map=i,p&&(this.mousePitch=$f({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:C,pitchDegreesPerPixelMoved:k=-.5})=>{const L=new Bf;return new Os({clickTolerance:C,move:(D,z)=>({pitchDelta:(z.y-D.y)*k}),moveStateManager:L,enable:S,assignEvents:Jf})})({clickTolerance:y,enable:!0})),R.addEventListener(c,"mousedown",this.mousedown),R.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),R.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),R.disableDrag()}moveMouse(i,c){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(i,c)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(i,c)||{};y&&p.setPitch(p.getPitch()+y)}}moveTouch(i,c){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(i,c)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(i,c)||{};y&&p.setPitch(p.getPitch()+y)}}off(){const i=this.element;R.removeEventListener(i,"mousedown",this.mousedown),R.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend),R.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend)}}let Yi;function Qr(_,i,c){const p=new u.N(_.lng,_.lat);if(_=new u.N(_.lng,_.lat),i){const m=new u.N(_.lng-360,_.lat),y=new u.N(_.lng+360,_.lat),S=c.locationPoint(_).distSqr(i);c.locationPoint(m).distSqr(i)<S?_=m:c.locationPoint(y).distSqr(i)<S&&(_=y)}for(;Math.abs(_.lng-c.center.lng)>180;){const m=c.locationPoint(_);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _.lng!==p.lng&&c.locationPoint(_).y>c.height/2-c.getHorizon()?_:p}const Nl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ch(_,i,c){const p=_.classList;for(const m in Nl)p.remove(`maplibregl-${c}-anchor-${m}`);p.add(`maplibregl-${c}-anchor-${i}`)}class Ah extends u.E{constructor(i){if(super(),this._onKeyPress=c=>{const p=c.code,m=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=c=>{var p;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Qr(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${Nl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${y}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=u.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div");const c=R.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const y=R.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const S=R.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const C=R.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of k){const _e=R.createNS("http://www.w3.org/2000/svg","ellipse");_e.setAttributeNS(null,"opacity","0.04"),_e.setAttributeNS(null,"cx","10.5"),_e.setAttributeNS(null,"cy","5.80029008"),_e.setAttributeNS(null,"rx",pe.rx),_e.setAttributeNS(null,"ry",pe.ry),C.appendChild(_e)}const L=R.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const D=R.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(D);const z=R.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const G=R.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(G);const Q=R.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const re=R.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=R.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const de=R.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),re.appendChild(le),re.appendChild(de),S.appendChild(C),S.appendChild(L),S.appendChild(z),S.appendChild(Q),S.appendChild(re),c.appendChild(S),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Ch(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const m=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),S=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,S)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/m.transform._pixelPerMeter,k=Math.sin(m.getPitch()*Math.PI/180)*C,L=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),D=m.transform.lngLatToCameraDepth(this._lngLat,S+k)-L>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&D&&this._popup.remove(),this._element.style.opacity=D?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=u.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return i===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Hg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Gu=0,Zu=!1;const cs={maxWidth:100,unit:"metric"};function Ku(_,i,c){const p=c&&c.maxWidth||100,m=_._container.clientHeight/2,y=_.unproject([0,m]),S=_.unproject([p,m]),C=y.distanceTo(S);if(c&&c.unit==="imperial"){const k=3.2808*C;k>5280?Pt(i,p,k/5280,_._getUIString("ScaleControl.Miles")):Pt(i,p,k,_._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Pt(i,p,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Pt(i,p,C/1e3,_._getUIString("ScaleControl.Kilometers")):Pt(i,p,C,_._getUIString("ScaleControl.Meters"))}function Pt(_,i,c,p){const m=function(y){const S=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/S;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(k){const L=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*L)/L}(C),S*C}(c);_.style.width=i*(m/c)+"px",_.innerHTML=`${m}&nbsp;${p}`}const Ht={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},kh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ph(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,_),"top-left":new u.P(i,i),"top-right":new u.P(-i,i),bottom:new u.P(0,-_),"bottom-left":new u.P(i,-i),"bottom-right":new u.P(-i,-i),left:new u.P(_,0),right:new u.P(-_,0)}}if(_ instanceof u.P||Array.isArray(_)){const i=u.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.P.convert(_.center||[0,0]),top:u.P.convert(_.top||[0,0]),"top-left":u.P.convert(_["top-left"]||[0,0]),"top-right":u.P.convert(_["top-right"]||[0,0]),bottom:u.P.convert(_.bottom||[0,0]),"bottom-left":u.P.convert(_["bottom-left"]||[0,0]),"bottom-right":u.P.convert(_["bottom-right"]||[0,0]),left:u.P.convert(_.left||[0,0]),right:u.P.convert(_.right||[0,0])}}return Ph(new u.P(0,0))}const Qf=b;d.AJAXError=u.bh,d.Evented=u.E,d.LngLat=u.N,d.MercatorCoordinate=u.Z,d.Point=u.P,d.addProtocol=u.bi,d.config=u.a,d.removeProtocol=u.bj,d.AttributionControl=Fl,d.BoxZoomHandler=Xi,d.CanvasSource=kt,d.CooperativeGesturesHandler=Dl,d.DoubleClickZoomHandler=Ha,d.DragPanHandler=$g,d.DragRotateHandler=jg,d.EdgeInsets=Rl,d.FullscreenControl=class extends u.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=Sr,d.GeolocateControl=class extends u.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new u.N(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,m=this._map.getBearing(),y=u.e({bearing:m},this.options.fitBoundsOptions),S=Ie.fromLngLat(c,p);this._map.fitBounds(S,y,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new u.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Zu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ah({element:this._dotElement}),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ah({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Hg,_)}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(i=!1){if(Yi!==void 0&&!i)return Yi;if(window.navigator.permissions===void 0)return Yi=!!window.navigator.geolocation,Yi;try{Yi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Yi=!!window.navigator.geolocation}return Yi})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gu=0,Zu=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),c=_.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),c=_.getNorthEast(),p=i.distanceTo(c),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gu--,Zu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gu++,Gu>1?(_={maximumAge:6e5,timeout:0},Zu=!0):(_=this.options.positionOptions,Zu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=yh,d.ImageSource=$e,d.KeyboardHandler=ho,d.LngLatBounds=Ie,d.LogoControl=Zf,d.Map=class extends Ug{constructor(_){u.bf.mark(u.bg.create);const i=Object.assign(Object.assign({},Rx),_);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ml(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new vr,this._controls=[],this._mapId=u.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Yf),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new te(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const p=Uu(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{c?p(m):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Gf(this,i),this._hash=i.hash&&new yh(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,u.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Fl(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Zf,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new u.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new u.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new u.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=_.onAdd(this);this._controls.push(_);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,c,p)}resize(_){var i;const c=this._containerDimensions(),p=c[0],m=c[1],y=this._getClampedPixelRatio(p,m);if(this._resizeCanvas(p,m,y),this.painter.resize(p,m,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const k=this._getClampedPixelRatio(p,m);this._resizeCanvas(p,m,k),this.painter.resize(p,m,k)}this.transform.resize(p,m),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,m);const S=!this._moving;return S&&(this.stop(),this.fire(new u.k("movestart",_)).fire(new u.k("move",_))),this.fire(new u.k("resize",_)),S&&this.fire(new u.k("moveend",_)),this}_getClampedPixelRatio(_,i){const{0:c,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),y=_*m,S=i*m;return Math.min(y>c?c/y:1,S>p?p/S:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ie.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(u.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(u.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,c){if(_==="mouseenter"||_==="mouseover"){let p=!1;return{layers:i,listener:c,delegates:{mousemove:y=>{const S=i.filter(k=>this.getLayer(k)),C=S.length!==0?this.queryRenderedFeatures(y.point,{layers:S}):[];C.length?p||(p=!0,c.call(this,new ai(_,this,y.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(_==="mouseleave"||_==="mouseout"){let p=!1;return{layers:i,listener:c,delegates:{mousemove:S=>{const C=i.filter(k=>this.getLayer(k));(C.length!==0?this.queryRenderedFeatures(S.point,{layers:C}):[]).length?p=!0:p&&(p=!1,c.call(this,new ai(_,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,c.call(this,new ai(_,this,S.originalEvent)))}}}}{const p=m=>{const y=i.filter(C=>this.getLayer(C)),S=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];S.length&&(m.features=S,c.call(this,m),delete m.features)};return{layers:i,listener:c,delegates:{[_]:p}}}}_saveDelegatedListener(_,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(i)}_removeDelegatedListener(_,i,c){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const p=this._delegatedListeners[_];for(let m=0;m<p.length;m++){const y=p[m];if(y.listener===c&&y.layers.length===i.length&&y.layers.every(S=>i.includes(S))){for(const S in y.delegates)this.off(S,y.delegates[S]);return void p.splice(m,1)}}}on(_,i,c){if(c===void 0)return super.on(_,i);const p=this._createDelegatedListener(_,typeof i=="string"?[i]:i,c);this._saveDelegatedListener(_,p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(_,i,c){if(c===void 0)return super.once(_,i);const p=typeof i=="string"?[i]:i,m=this._createDelegatedListener(_,p,c);for(const y in m.delegates){const S=m.delegates[y];m.delegates[y]=(...C)=>{this._removeDelegatedListener(_,p,c),S(...C)}}this._saveDelegatedListener(_,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(_,i,c){return c===void 0?super.off(_,i):(this._removeDelegatedListener(_,typeof i=="string"?[i]:i,c),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let c;const p=_ instanceof u.P||Array.isArray(_),m=p?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:_)||{},m instanceof u.P||typeof m[0]=="number")c=[u.P.convert(m)];else{const y=u.P.convert(m[0]),S=u.P.convert(m[1]);c=[y,new u.P(S.x,y.y),S,new u.P(y.x,S.y),y]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new eh(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,c):this.style.loadJSON(_,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new eh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const c=this._requestManager.transformRequest(_,"Style");u.h(c,new AbortController).then(p=>{this._updateDiff(p.data,i)}).catch(p=>{p&&this.fire(new u.j(p))})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new u.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&i.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===_.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Xf(this.painter,i,_),this.painter.renderToTexture=new Vg(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const c=_[i]._tiles;for(const p in c){const m=c[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,i,c={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:y,stretchY:S,content:C,textFitWidth:k,textFitHeight:L}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||u.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:D,height:z,data:G}=i,Q=i;return this.style.addImage(_,{data:new u.R({width:D,height:z},new Uint8Array(G)),pixelRatio:p,stretchX:y,stretchY:S,content:C,textFitWidth:k,textFitHeight:L,sdf:m,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,_),this}}{const{width:D,height:z,data:G}=P.getImageData(i);this.style.addImage(_,{data:new u.R({width:D,height:z},G),pixelRatio:p,stretchX:y,stretchY:S,content:C,textFitWidth:k,textFitHeight:L,sdf:m,version:0})}}updateImage(_,i){const c=this.style.getImage(_);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||u.b(i)?P.getImageData(i):i,{width:m,height:y,data:S}=p;if(m===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||y!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(i instanceof HTMLImageElement||u.b(i));return c.data.replace(S,C),this.style.updateImage(_,c),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return V.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,c){return this.style.setLayerZoomRange(_,i,c),this._update(!0)}setFilter(_,i,c={}){return this.style.setFilter(_,i,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,c,p={}){return this.style.setPaintProperty(_,i,c,p),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,c,p={}){return this.style.setLayoutProperty(_,i,c,p),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,c,p=>{p||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,c=>{c||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=R.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const m=this._controlContainer=R.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{y[S]=R.create("div",`maplibregl-ctrl-${S} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,c){this._canvas.width=Math.floor(c*_),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:_},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!c){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new gh(c,this.transform),U.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=P.now();this.style.zoomHistory.update(m,y);const S=new u.z(m,{now:y,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=S.crossFadingFactor();C===1&&C===this._crossFadingFactor||(c=!0,this._crossFadingFactor=C),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(_=>{u.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return qg}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=ai,d.MapTouchEvent=Va,d.MapWheelEvent=Fg,d.Marker=Ah,d.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);i.title=p,i.setAttribute("aria-label",p)},this.options=u.e({},Mx,_),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),R.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),R.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=R.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Lx(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const c=R.create("button",_,this._container);return c.type="button",c.addEventListener("click",i),c}},d.Popup=class extends u.E{constructor(_){super(),this.remove=()=>(this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=R.create("div","maplibregl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Qr(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!i)return;const p=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=Ph(this.options.offset);if(!m){const C=this._container.offsetWidth,k=this._container.offsetHeight;let L;L=p.y+y.bottom.y<k?["top"]:p.y>this._map.transform.height-k?["bottom"]:[],p.x<C/2?L.push("left"):p.x>this._map.transform.width-C/2&&L.push("right"),m=L.length===0?"bottom":L.join("-")}let S=p.add(y[m]);this.options.subpixelPositioning||(S=S.round()),R.setTransform(this._container,`${Nl[m]} translate(${S.x}px,${S.y}px)`),Ch(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Ht),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=u.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=_;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(kh);_&&_.focus()}},d.RasterDEMTileSource=_r,d.RasterTileSource=Vt,d.ScaleControl=class{constructor(_){this._onMove=()=>{Ku(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Ku(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cs),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Oo,d.Style=eh,d.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Ol,d.TwoFingersTouchRotateHandler=qf,d.TwoFingersTouchZoomHandler=Uf,d.TwoFingersTouchZoomRotateHandler=Wf,d.VectorTileSource=Rr,d.VideoSource=mt,d.addSourceType=(_,i)=>u._(void 0,void 0,void 0,function*(){if(tr(_))throw new Error(`A source type called "${_}" already exists.`);((c,p)=>{Ft[c]=p})(_,i)}),d.clearPrewarmedResources=function(){const _=sr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(zt),sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return rr().getRTLTextPluginStatus()},d.getVersion=function(){return Qf},d.getWorkerCount=function(){return er.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(_){return fr().broadcast("IS",_)},d.prewarm=function(){Ar().acquire(zt)},d.setMaxParallelImageRequests=function(_){u.a.MAX_PARALLEL_IMAGE_REQUESTS=_},d.setRTLTextPlugin=function(_,i){return rr().setRTLTextPlugin(_,i)},d.setWorkerCount=function(_){er.workerCount=_},d.setWorkerUrl=function(_){u.a.WORKER_URL=_}});var h=r;return h})})(U5);var BX=U5.exports;const Ut=Xd(BX);function NX(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class $X{constructor(){this._apiKey="",this._fetch=NX(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const Md=new $X,sg={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!1},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!1},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!1},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!1},WELSH:{code:"cy",flag:"name:cy",name:"WELSH",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!1},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!1},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!1},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!1},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!1},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!1},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!1},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!1},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!1},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!1},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!1}};function jX(e,t=sg){return e in t?e[e]:null}function yS(e,t=sg){for(const r of Object.values(t))if(r.code===e)return r;return null}function _S(e,t=sg){for(const r of Object.values(t))if(r.flag===e)return r;return null}function UX(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function VX(e,t=sg){return UX(e)?_S(e.flag,t):typeof e!="string"?null:jX(e,t)||yS(e,t)||_S(e,t)||null}async function qX(e,t={}){if(Md.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Md.fetch(e,t)}const q5={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(q5);class HX extends Error{constructor(t,r=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${r}`),this.res=t}}const XP={403:"Key is missing, invalid or restricted"};async function WX(e={}){const t=new URL("geolocation/ip.json",q5.maptilerApiURL);t.searchParams.set("key",e.apiKey??Md.apiKey);const r=t.toString(),n=await qX(r);if(!n.ok)throw new HX(n,n.status in XP?XP[n.status]:"");return await n.json()}const YP={info:WX};function H5(e){const t=/^maptiler:\/\/(.*)/;let r;const n=e.trim();let a;return n.startsWith("http://")||n.startsWith("https://")?a=n:(r=t.exec(n))!==null?a=`https://api.maptiler.com/maps/${r[1]}/style.json`:a=`https://api.maptiler.com/maps/${n}/style.json`,a}class W5{constructor(t,r,n,a,h,d){this.name=t,this.variantType=r,this.id=n,this.referenceStyle=a,this.description=h,this.imageURL=d}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return H5(this.getId())}}class G5{constructor(t,r){this.name=t,this.id=r,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const vS=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function GX(e){return new Proxy(e,{get(t,r,n){return t.hasVariant(r)?t.getVariant(r):r.toString().toUpperCase()===r?e.getDefaultVariant():Reflect.get(t,r,n)}})}function ZX(){const e={};for(let t=0;t<vS.length;t+=1){const r=vS[t],n=GX(new G5(r.name,r.referenceStyleID));for(let a=0;a<r.variants.length;a+=1){const h=r.variants[a],d=new W5(h.name,h.variantType,h.id,n,h.description,h.imageURL);n.addVariant(d)}e[r.referenceStyleID]=n}return e}const Z5=ZX();var zT={exports:{}},Ld=typeof Reflect=="object"?Reflect:null,JP=Ld&&typeof Ld.apply=="function"?Ld.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},S_;Ld&&typeof Ld.ownKeys=="function"?S_=Ld.ownKeys:Object.getOwnPropertySymbols?S_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:S_=function(t){return Object.getOwnPropertyNames(t)};function KX(e){console&&console.warn&&console.warn(e)}var K5=Number.isNaN||function(t){return t!==t};function an(){an.init.call(this)}zT.exports=an;zT.exports.once=QX;an.EventEmitter=an;an.prototype._events=void 0;an.prototype._eventsCount=0;an.prototype._maxListeners=void 0;var QP=10;function J0(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return QP},set:function(e){if(typeof e!="number"||e<0||K5(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");QP=e}});an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};an.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||K5(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function X5(e){return e._maxListeners===void 0?an.defaultMaxListeners:e._maxListeners}an.prototype.getMaxListeners=function(){return X5(this)};an.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var a=t==="error",h=this._events;if(h!==void 0)a=a&&h.error===void 0;else if(!a)return!1;if(a){var d;if(r.length>0&&(d=r[0]),d instanceof Error)throw d;var u=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw u.context=d,u}var b=h[t];if(b===void 0)return!1;if(typeof b=="function")JP(b,this,r);else for(var T=b.length,A=tD(b,T),n=0;n<T;++n)JP(A[n],this,r);return!0};function Y5(e,t,r,n){var a,h,d;if(J0(r),h=e._events,h===void 0?(h=e._events=Object.create(null),e._eventsCount=0):(h.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),h=e._events),d=h[t]),d===void 0)d=h[t]=r,++e._eventsCount;else if(typeof d=="function"?d=h[t]=n?[r,d]:[d,r]:n?d.unshift(r):d.push(r),a=X5(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=d.length,KX(u)}return e}an.prototype.addListener=function(t,r){return Y5(this,t,r,!1)};an.prototype.on=an.prototype.addListener;an.prototype.prependListener=function(t,r){return Y5(this,t,r,!0)};function XX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J5(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=XX.bind(n);return a.listener=r,n.wrapFn=a,a}an.prototype.once=function(t,r){return J0(r),this.on(t,J5(this,t,r)),this};an.prototype.prependOnceListener=function(t,r){return J0(r),this.prependListener(t,J5(this,t,r)),this};an.prototype.removeListener=function(t,r){var n,a,h,d,u;if(J0(r),a=this._events,a===void 0)return this;if(n=a[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(h=-1,d=n.length-1;d>=0;d--)if(n[d]===r||n[d].listener===r){u=n[d].listener,h=d;break}if(h<0)return this;h===0?n.shift():YX(n,h),n.length===1&&(a[t]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",t,u||r)}return this};an.prototype.off=an.prototype.removeListener;an.prototype.removeAllListeners=function(t){var r,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var h=Object.keys(n),d;for(a=0;a<h.length;++a)d=h[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function Q5(e,t,r){var n=e._events;if(n===void 0)return[];var a=n[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?JX(a):tD(a,a.length)}an.prototype.listeners=function(t){return Q5(this,t,!0)};an.prototype.rawListeners=function(t){return Q5(this,t,!1)};an.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):eD.call(e,t)};an.prototype.listenerCount=eD;function eD(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?S_(this._events):[]};function tD(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function YX(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function JX(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function QX(e,t){return new Promise(function(r,n){function a(d){e.removeListener(t,h),n(d)}function h(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}rD(e,t,h,{once:!0}),t!=="error"&&eY(e,a,{once:!0})})}function eY(e,t,r){typeof e.on=="function"&&rD(e,"error",t,r)}function rD(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(h){n.once&&e.removeEventListener(t,a),r(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var tY=zT.exports;const rY=Xd(tY);let Hy;const nY=new Uint8Array(16);function iY(){if(!Hy&&(Hy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hy(nY)}const Ei=[];for(let e=0;e<256;++e)Ei.push((e+256).toString(16).slice(1));function oY(e,t=0){return Ei[e[t+0]]+Ei[e[t+1]]+Ei[e[t+2]]+Ei[e[t+3]]+"-"+Ei[e[t+4]]+Ei[e[t+5]]+"-"+Ei[e[t+6]]+Ei[e[t+7]]+"-"+Ei[e[t+8]]+Ei[e[t+9]]+"-"+Ei[e[t+10]]+Ei[e[t+11]]+Ei[e[t+12]]+Ei[e[t+13]]+Ei[e[t+14]]+Ei[e[t+15]]}const sY=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eI={randomUUID:sY};function aY(e,t,r){if(eI.randomUUID&&!t&&!e)return eI.randomUUID();e=e||{};const n=e.random||(e.rng||iY)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,oY(n)}const nD="3.7.7",lY=nD,hf=typeof Buffer=="function",tI=typeof TextDecoder=="function"?new TextDecoder:void 0,rI=typeof TextEncoder=="function"?new TextEncoder:void 0,uY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Zp=Array.prototype.slice.call(uY),Wy=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(Zp),cY=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ai=String.fromCharCode.bind(String),nI=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),iD=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),oD=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),sD=e=>{let t,r,n,a,h="";const d=e.length%3;for(let u=0;u<e.length;){if((r=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255||(a=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|a,h+=Zp[t>>18&63]+Zp[t>>12&63]+Zp[t>>6&63]+Zp[t&63]}return d?h.slice(0,d-3)+"===".substring(d):h},FT=typeof btoa=="function"?e=>btoa(e):hf?e=>Buffer.from(e,"binary").toString("base64"):sD,xS=hf?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,a=e.length;n<a;n+=4096)r.push(Ai.apply(null,e.subarray(n,n+4096)));return FT(r.join(""))},T_=(e,t=!1)=>t?iD(xS(e)):xS(e),hY=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Ai(192|t>>>6)+Ai(128|t&63):Ai(224|t>>>12&15)+Ai(128|t>>>6&63)+Ai(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Ai(240|t>>>18&7)+Ai(128|t>>>12&63)+Ai(128|t>>>6&63)+Ai(128|t&63)}},dY=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,aD=e=>e.replace(dY,hY),iI=hf?e=>Buffer.from(e,"utf8").toString("base64"):rI?e=>xS(rI.encode(e)):e=>FT(aD(e)),Od=(e,t=!1)=>t?iD(iI(e)):iI(e),oI=e=>Od(e,!0),fY=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,pY=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return Ai((r>>>10)+55296)+Ai((r&1023)+56320);case 3:return Ai((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Ai((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},lD=e=>e.replace(fY,pY),uD=e=>{if(e=e.replace(/\s+/g,""),!cY.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,a;for(let h=0;h<e.length;)t=Wy[e.charAt(h++)]<<18|Wy[e.charAt(h++)]<<12|(n=Wy[e.charAt(h++)])<<6|(a=Wy[e.charAt(h++)]),r+=n===64?Ai(t>>16&255):a===64?Ai(t>>16&255,t>>8&255):Ai(t>>16&255,t>>8&255,t&255);return r},BT=typeof atob=="function"?e=>atob(oD(e)):hf?e=>Buffer.from(e,"base64").toString("binary"):uD,cD=hf?e=>nI(Buffer.from(e,"base64")):e=>nI(BT(e).split("").map(t=>t.charCodeAt(0))),hD=e=>cD(dD(e)),mY=hf?e=>Buffer.from(e,"base64").toString("utf8"):tI?e=>tI.decode(cD(e)):e=>lD(BT(e)),dD=e=>oD(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),bS=e=>mY(dD(e)),gY=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fD=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),pD=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,fD(r));e("fromBase64",function(){return bS(this)}),e("toBase64",function(t){return Od(this,t)}),e("toBase64URI",function(){return Od(this,!0)}),e("toBase64URL",function(){return Od(this,!0)}),e("toUint8Array",function(){return hD(this)})},mD=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,fD(r));e("toBase64",function(t){return T_(this,t)}),e("toBase64URI",function(){return T_(this,!0)}),e("toBase64URL",function(){return T_(this,!0)})},yY=()=>{pD(),mD()},_Y={version:nD,VERSION:lY,atob:BT,atobPolyfill:uD,btoa:FT,btoaPolyfill:sD,fromBase64:bS,toBase64:Od,encode:Od,encodeURI:oI,encodeURL:oI,utob:aD,btou:lD,decode:bS,isValid:gY,fromUint8Array:T_,toUint8Array:hD,extendString:pD,extendUint8Array:mD,extendBuiltins:yY};var vY=Object.defineProperty,gD=e=>{throw TypeError(e)},xY=(e,t,r)=>t in e?vY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sn=(e,t,r)=>xY(e,typeof t!="symbol"?t+"":t,r),NT=(e,t,r)=>t.has(e)||gD("Cannot "+r),Or=(e,t,r)=>(NT(e,t,"read from private field"),r?r.call(e):t.get(e)),ac=(e,t,r)=>t.has(e)?gD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),od=(e,t,r,n)=>(NT(e,t,"write to private field"),t.set(e,r),r),Vo=(e,t,r)=>(NT(e,t,"access private method"),r);const Br={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...sg};function sI(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return yS(e)||Br.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>yS(e)).filter(e=>e)[0]??Br.LOCAL}const xo={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Br.STYLE,secondaryLanguage:Br.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(xo);const yD=aY();class bY extends rY{constructor(){super(...arguments),sn(this,"primaryLanguage",xo.primaryLanguage),sn(this,"secondaryLanguage"),sn(this,"session",!0),sn(this,"caching",!0),sn(this,"_unit","metric"),sn(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,Md.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){Md.fetch=t}get fetch(){return Md.fetch}}const vo=new bY,{addProtocol:aI}=Ut,wS="localcache_source",SS="localcache",wY="maptiler_sdk",SY=1e3,TY=100,TS=typeof caches<"u";function EY(e,t){if(TS&&vo.caching&&vo.session&&e.host===xo.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${wS}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${SS}://`)}return e.href}let Sb;async function _D(){return Sb||(Sb=await caches.open(wY)),Sb}let lI=0;async function CY(){const e=await _D(),t=await e.keys(),r=t.slice(0,Math.max(t.length-SY,0));for(const n of r)e.delete(n)}function AY(){aI(wS,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${wS}://`,"https://");const r=e;r.signal=t.signal;const n=await fetch(e.url,r),a=await n.json();return a.tiles&&a.tiles.length>0&&(a.tiles[0]+=`&last-modified=${n.headers.get("Last-Modified")}`),{data:a,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}}),aI(SS,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${SS}://`,"https://");const r=new URL(e.url),n=new URL(r);n.searchParams.delete("mtsid"),n.searchParams.delete("key");const a=n.toString(),h=new URL(r);h.searchParams.delete("last-modified");const d=h.toString(),u=async R=>({data:await R.arrayBuffer(),cacheControl:R.headers.get("Cache-Control"),expires:R.headers.get("Expires")}),b=await _D(),T=await b.match(a);if(T)return u(T);const A=e;A.signal=t.signal;const P=await fetch(d,A);return P.status>=200&&P.status<300&&(b.put(a,P.clone()).catch(()=>{}),++lI>TY&&(CY(),lI=0)),u(P)})}function kY(){if(typeof window>"u")return;const e=Ut.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{Ut.setRTLTextPlugin(xo.rtlPluginURL,!0)}catch{}}function PY(e,t){for(const r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function Dd(e,t,r){const n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function vD(e){e.parentNode&&e.parentNode.removeChild(e)}function uI(e,t){let r=null;try{r=new URL(e)}catch{return{url:e}}return r.host===xo.maptilerApiHost&&(r.searchParams.has("key")||r.searchParams.append("key",vo.apiKey),vo.session&&r.searchParams.append("mtsid",yD)),{url:EY(r,t)}}function cI(e){return(t,r)=>{if(e!=null){const n=e(t,r),a=uI((n==null?void 0:n.url)??"",r);return{...n,...a}}return uI(t,r)}}function IY(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function RY(e){const t=IY();if(!t)return;let r=null;if(typeof e=="string"?r=document.getElementById(e):e instanceof HTMLElement&&(r=e),!r)throw new Error("The Map container must be provided.");const n=document.createElement("div");throw n.innerHTML=t,n.classList.add("no-webgl-support-div"),r.appendChild(n),new Error(t)}let MY=class extends Ut.Marker{addTo(e){return super.addTo(e)}};class Ree extends Ut.Popup{addTo(t){return super.addTo(t)}}class Mee extends Ut.Style{constructor(t,r={}){super(t,r)}}class Lee extends Ut.CanvasSource{onAdd(t){super.onAdd(t)}}class Oee extends Ut.GeoJSONSource{onAdd(t){super.onAdd(t)}}class Dee extends Ut.ImageSource{onAdd(t){super.onAdd(t)}}class zee extends Ut.RasterTileSource{onAdd(t){super.onAdd(t)}}class Fee extends Ut.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class Bee extends Ut.VectorTileSource{onAdd(t){super.onAdd(t)}}class Nee extends Ut.VideoSource{onAdd(t){super.onAdd(t)}}class LY extends Ut.NavigationControl{onAdd(t){return super.onAdd(t)}}class OY extends Ut.GeolocateControl{onAdd(t){return super.onAdd(t)}}class $ee extends Ut.AttributionControl{onAdd(t){return super.onAdd(t)}}class DY extends Ut.LogoControl{onAdd(t){return super.onAdd(t)}}class zY extends Ut.ScaleControl{onAdd(t){return super.onAdd(t)}}class FY extends Ut.FullscreenControl{onAdd(t){return super.onAdd(t)}}class jee extends Ut.TerrainControl{onAdd(t){return super.onAdd(t)}}class Uee extends Ut.BoxZoomHandler{constructor(t,r){super(t,r)}}class Vee extends Ut.ScrollZoomHandler{constructor(t,r){super(t,r)}}class qee extends Ut.CooperativeGesturesHandler{constructor(t,r){super(t,r)}}class Hee extends Ut.KeyboardHandler{constructor(t){super(t)}}class Wee extends Ut.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class Gee extends Ut.MapWheelEvent{constructor(t,r,n){super(t,r,n)}}class Zee extends Ut.MapTouchEvent{constructor(t,r,n){super(t,r,n)}}class Kee extends Ut.MapMouseEvent{constructor(t,r,n,a={}){super(t,r,n,a)}}class hI extends DY{constructor(t={}){super(t),sn(this,"logoURL",""),sn(this,"linkURL",""),this.logoURL=t.logoURL??xo.maptilerLogoURL,this.linkURL=t.linkURL??xo.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const r=window.document.createElement("a");return r.style.backgroundRepeat="no-repeat",r.style.cursor="pointer",r.style.display="block",r.style.height="23px",r.style.margin="0 0 -4px -4px",r.style.overflow="hidden",r.style.width="88px",r.style.backgroundImage=`url(${this.logoURL})`,r.style.backgroundSize="100px 30px",r.style.width="100px",r.style.height="30px",r.target="_blank",r.rel="noopener",r.href=this.linkURL,r.setAttribute("aria-label","MapTiler logo"),r.setAttribute("rel","noopener"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}function dI(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:H5(e):e instanceof W5?e.getExpandedStyleURL():e instanceof G5?e.getDefaultVariant().getExpandedStyleURL():e:Z5[vS[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}class BY{constructor(){sn(this,"_map"),sn(this,"_container"),sn(this,"_terrainButton"),PY(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=Dd("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Dd("button","maplibregl-ctrl-terrain",this._container),Dd("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){vD(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class NY extends LY{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),sn(this,"_rotateCompassArrow",()=>{const r=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",r=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}))}_createButton(t,r){const n=super._createButton(t,r);return n.clickFunction=r,n}}const fI=Ut.Marker,pI=Ut.LngLat,$Y=Ut.LngLatBounds;class jY extends OY{constructor(){super(...arguments),sn(this,"lastUpdatedCenter",new pI(0,0)),sn(this,"_updateCamera",t=>{var r,n;const a=new pI(t.coords.longitude,t.coords.latitude),h=t.coords.accuracy,d={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},u=this._map.getZoom();u>(((n=(r=this.options)==null?void 0:r.fitBoundsOptions)==null?void 0:n.maxZoom)??30)&&(d.zoom=u),this._map.fitBounds($Y.fromLngLat(a,h),d,{geolocateSource:!0});let b=!1;const T=()=>{b=!0};this._map.once("click",T),this._map.once("dblclick",T),this._map.once("dragstart",T),this._map.once("mousedown",T),this._map.once("touchstart",T),this._map.once("wheel",T),this._map.once("moveend",()=>{this._map.off("click",T),this._map.off("dblclick",T),this._map.off("dragstart",T),this._map.off("mousedown",T),this._map.off("touchstart",T),this._map.off("wheel",T),!b&&(this.lastUpdatedCenter=this._map.getCenter())})}),sn(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Dd("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new fI({element:this._dotElement}),this._circleElement=Dd("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fI({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",r=>{const n=r.originalEvent&&r.originalEvent.type==="resize",a=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!r.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!n&&a>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),sn(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],r=this._map.project(t),n=this._map.unproject([r.x,r.y]),a=this._map.unproject([r.x+20,r.y]),h=n.distanceTo(a)/20,d=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}}var qo,ma,fc,pc,ms,E_,to,xD,gs,bD;class Tb{constructor(t,r){ac(this,to),ac(this,qo),sn(this,"map"),ac(this,ma),ac(this,fc),ac(this,pc),ac(this,ms,!1),ac(this,E_),t.style!==void 0&&od(this,ms,!0),od(this,qo,{zoomAdjust:-4,position:"top-right",...r,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(Or(this,qo).minZoom=t.lockZoom,Or(this,qo).maxZoom=t.lockZoom)}setStyle(t,r){Or(this,ms)||this.map.setStyle(t,r),Vo(this,to,gs).call(this)}addLayer(t,r){return Or(this,ms)||this.map.addLayer(t,r),Vo(this,to,gs).call(this),this.map}moveLayer(t,r){return Or(this,ms)||this.map.moveLayer(t,r),Vo(this,to,gs).call(this),this.map}removeLayer(t){return Or(this,ms)||this.map.removeLayer(t),Vo(this,to,gs).call(this),this}setLayerZoomRange(t,r,n){return Or(this,ms)||this.map.setLayerZoomRange(t,r,n),Vo(this,to,gs).call(this),this}setFilter(t,r,n){return Or(this,ms)||this.map.setFilter(t,r,n),Vo(this,to,gs).call(this),this}setPaintProperty(t,r,n,a){return Or(this,ms)||this.map.setPaintProperty(t,r,n,a),Vo(this,to,gs).call(this),this}setLayoutProperty(t,r,n,a){return Or(this,ms)||this.map.setLayoutProperty(t,r,n,a),Vo(this,to,gs).call(this),this}setGlyphs(t,r){return Or(this,ms)||this.map.setGlyphs(t,r),Vo(this,to,gs).call(this),this}onAdd(t){od(this,ma,t),od(this,fc,Dd("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[r,n]of Object.entries(Or(this,qo).containerStyle))Or(this,fc).style.setProperty(r,n);return Or(this,qo).container=Or(this,fc),Or(this,qo).zoom=t.getZoom()+Or(this,qo).zoomAdjust,this.map=new wD(Or(this,qo)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Vo(this,to,xD).call(this,Or(this,qo).parentRect),od(this,E_,Vo(this,to,bD).call(this))}),Or(this,fc)}onRemove(){var t;(t=Or(this,E_))==null||t.call(this),vD(Or(this,fc))}}qo=new WeakMap,ma=new WeakMap,fc=new WeakMap,pc=new WeakMap,ms=new WeakMap,E_=new WeakMap,to=new WeakSet,xD=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(od(this,pc,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:Or(this,pc)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Vo(this,to,gs).call(this))},gs=function(){if(Or(this,pc)===void 0)return;const{devicePixelRatio:e}=window,t=Or(this,ma).getCanvas(),r=t.width/e,n=t.height/e,a=Or(this,ma).unproject.bind(Or(this,ma)),h=a([0,0]),d=a([r,0]),u=a([0,n]),b=a([r,n]);Or(this,pc).geometry.coordinates=[[u.toArray(),b.toArray(),d.toArray(),h.toArray(),u.toArray()]],this.map.getSource("parentRect").setData(Or(this,pc))},bD=function(){const{pitchAdjust:e}=Or(this,qo),t=()=>{h("parent")},r=()=>{h("minimap")},n=()=>{Or(this,ma).on("move",t),this.map.on("move",r)},a=()=>{Or(this,ma).off("move",t),this.map.off("move",r)},h=d=>{a();const u=d==="parent"?Or(this,ma):this.map,b=d==="parent"?this.map:Or(this,ma),T=u.getCenter(),A=u.getZoom()+Or(this,qo).zoomAdjust*(d==="parent"?1:-1),P=u.getBearing(),R=u.getPitch();b.jumpTo({center:T,zoom:A,bearing:P,pitch:e?R:0}),Vo(this,to,gs).call(this),n()};return n(),()=>{a()}};const UY={POINT:"POINT",COUNTRY:"COUNTRY"};class wD extends Ut.Map{constructor(t){RY(t.container),t.apiKey&&(vo.apiKey=t.apiKey);const r=dI(t.style),n=location.hash;vo.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let a={compact:!1};t.customAttribution?a.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(a={...a,...t.attributionControl}),super({...t,style:r,maplibreLogo:!1,transformRequest:cI(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:a}),sn(this,"isTerrainEnabled",!1),sn(this,"terrainExaggeration",1),sn(this,"primaryLanguage"),sn(this,"terrainGrowing",!1),sn(this,"terrainFlattening",!1),sn(this,"minimap"),sn(this,"forceLanguageUpdate"),sn(this,"languageAlwaysBeenStyle"),sn(this,"isReady",!1),vo.caching&&!TS&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),vo.caching&&TS&&AY(),this.primaryLanguage=t.language??vo.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===Br.STYLE||this.primaryLanguage===Br.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Br.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&n)return;try{if(t.geolocate===UY.COUNTRY){await this.fitToIpBounds();return}}catch(A){console.warn(A.message)}let T;try{await this.centerOnIpPoint(t.zoom),T=this.getCameraHash()}catch(A){console.warn(A.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(A=>{T===this.getCameraHash()&&(this.terrain?this.easeTo({center:[A.coords.longitude,A.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[A.coords.longitude,A.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let T={logo:null};try{const A=Object.keys(this.style.sourceCaches).map(R=>this.getSource(R)).filter(R=>R&&"url"in R&&typeof R.url=="string"&&(R==null?void 0:R.url.includes("tiles.json"))),P=new URL(A[0].url);P.searchParams.has("key")||P.searchParams.append("key",vo.apiKey),T=await(await fetch(P.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in T&&T.logo){const A=T.logo;this.addControl(new hI({logoURL:A}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new hI,t.logoPosition);if(t.scaleControl){const A=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,P=new zY({unit:vo.unit});this.addControl(P,A),vo.on("unit",R=>{P.setUnit(R)})}if(t.navigationControl!==!1){const A=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new NY,A)}if(t.geolocateControl!==!1){const A=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new jY({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),A)}if(t.terrainControl){const A=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new BY,A)}if(t.fullscreenControl){const A=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new FY({}),A)}this.isReady=!0,this.fire("ready",{target:this})});let h=!1,d=!1,u;this.once("ready",()=>{h=!0,d&&this.fire("loadWithTerrain",u)}),this.once("style.load",()=>{const{minimap:T}=t;if(typeof T=="object"){const{zoom:A,center:P,style:R,language:U,apiKey:j,maptilerLogo:W,antialias:ee,refreshExpiredTiles:B,maxBounds:H,scrollZoom:V,minZoom:te,maxZoom:me,boxZoom:fe,locale:ge,fadeDuration:ie,crossSourceCollisions:Re,clickTolerance:Z,bounds:Te,fitBoundsOptions:Ue,pixelRatio:Fe,validateStyle:Ze}=t;this.minimap=new Tb(T,{zoom:A,center:P,style:R,language:U,apiKey:j,container:"null",maptilerLogo:W,antialias:ee,refreshExpiredTiles:B,maxBounds:H,scrollZoom:V,minZoom:te,maxZoom:me,boxZoom:fe,locale:ge,fadeDuration:ie,crossSourceCollisions:Re,clickTolerance:Z,bounds:Te,fitBoundsOptions:Ue,pixelRatio:Fe,validateStyle:Ze}),this.addControl(this.minimap,T.position??"bottom-left")}else T===!0?(this.minimap=new Tb({},t),this.addControl(this.minimap,"bottom-left")):T!==void 0&&T!==!1&&(this.minimap=new Tb({},t),this.addControl(this.minimap,T))});const b=T=>{T.terrain&&(d=!0,u={type:"loadWithTerrain",target:this,terrain:T.terrain},this.off("terrain",b),h&&this.fire("loadWithTerrain",u))};this.on("terrain",b),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}setStyle(t,r){var n;return(n=this.minimap)==null||n.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(dI(t),r)}addLayer(t,r){var n;return(n=this.minimap)==null||n.addLayer(t,r),super.addLayer(t,r)}moveLayer(t,r){var n;return(n=this.minimap)==null||n.moveLayer(t,r),super.moveLayer(t,r)}removeLayer(t){var r;return(r=this.minimap)==null||r.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,r,n){var a;return(a=this.minimap)==null||a.setLayerZoomRange(t,r,n),super.setLayerZoomRange(t,r,n)}setFilter(t,r,n){var a;return(a=this.minimap)==null||a.setFilter(t,r,n),super.setFilter(t,r,n)}setPaintProperty(t,r,n,a){var h;return(h=this.minimap)==null||h.setPaintProperty(t,r,n,a),super.setPaintProperty(t,r,n,a)}setLayoutProperty(t,r,n,a){var h;return(h=this.minimap)==null||h.setLayoutProperty(t,r,n,a),super.setLayoutProperty(t,r,n,a)}setGlyphs(t,r){var n;return(n=this.minimap)==null||n.setGlyphs(t,r),super.setGlyphs(t,r)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?_S(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var r,n;(n=(r=this.minimap)==null?void 0:r.map)==null||n.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const r=this.getStyleLanguage(),n=VX(t,Br);if(!n){console.warn(`The language "${n}" is not supported.`);return}if(!(n.flag===Br.STYLE.flag&&r&&(r.flag===Br.AUTO.flag||r.flag===Br.VISITOR.flag))&&(n.flag!==Br.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===n&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Br.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=n;let a=n;if(n.flag===Br.STYLE.flag){if(!r){console.warn("The style has no default languages or has an invalid one.");return}a=r}let h=Br.LOCAL.flag,d=`{${h}}`;a.flag===Br.VISITOR.flag?(h=sI().flag,d=["case",["all",["has",h],["has",Br.LOCAL.flag]],["case",["==",["get",h],["get",Br.LOCAL.flag]],["get",Br.LOCAL.flag],["format",["get",h],{"font-scale":.8},`
`,["get",Br.LOCAL.flag],{"font-scale":1.1}]],["get",Br.LOCAL.flag]]):a.flag===Br.VISITOR_ENGLISH.flag?(h=Br.ENGLISH.flag,d=["case",["all",["has",h],["has",Br.LOCAL.flag]],["case",["==",["get",h],["get",Br.LOCAL.flag]],["get",Br.LOCAL.flag],["format",["get",h],{"font-scale":.8},`
`,["get",Br.LOCAL.flag],{"font-scale":1.1}]],["get",Br.LOCAL.flag]]):a.flag===Br.AUTO.flag?(h=sI().flag,d=["case",["has",h],["get",h],["get",Br.LOCAL.flag]]):a===Br.LOCAL?(h=Br.LOCAL.flag,d=`{${h}}`):(h=a.flag,d=["case",["has",h],["get",h],["get",Br.LOCAL.flag]]);const{layers:u}=this.getStyle();for(const b of u){if(b.type!=="symbol")continue;const T=b,A=this.getSource(T.source);if(!A||!("url"in A&&typeof A.url=="string")||new URL(A.url).host!==xo.maptilerApiHost)continue;const{id:P,layout:R}=T;if(!R||!("text-field"in R))continue;const U=this.getLayoutProperty(P,"text-field");typeof U=="string"&&(U.toLowerCase().includes("ref")||U.toLowerCase().includes("housenumber"))||this.setLayoutProperty(P,"text-field",d)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,r=1e3){if(!this.terrain)return;const n=performance.now(),a=this.terrain.exaggeration,h=t-a,d=()=>{if(!this.terrain||this.terrainFlattening)return;const u=(performance.now()-n)/r;if(u<.99){const b=1-(1-u)**4,T=a+b*h;this.terrain.exaggeration=T,requestAnimationFrame(d)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(d)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const r=async a=>{!this.terrain||a.type!=="data"||a.dataType!=="source"||!("source"in a)||a.sourceId!=="maptiler-terrain"||a.source.type!=="raster-dem"||a.isSourceLoaded&&(this.off("data",r),this.growTerrain(t))},n=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",r),this.addSource(xo.terrainSourceId,{type:"raster-dem",url:xo.terrainSourceURL}),this.setTerrain({source:xo.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?n():this.once("load",()=>{this.getTerrain()&&this.getSource(xo.terrainSourceId)||n()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,r=performance.now(),n=this.terrain.exaggeration,a=()=>{if(!this.terrain||this.terrainGrowing)return;const h=(performance.now()-r)/t;if(this._elevationFreeze=!1,h<.99){const d=(1-h)**4,u=n*d;this.terrain.exaggeration=u,requestAnimationFrame(a)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(xo.terrainSourceId)&&this.removeSource(xo.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(a)}setTerrainExaggeration(t,r=!0){!r&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await YP.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const r=await YP.info();this.jumpTo({center:[(r==null?void 0:r.longitude)??0,(r==null?void 0:r.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),r=this.getCenter();return t[0]=r.lng,t[1]=r.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),_Y.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return vo}getMaptilerSessionId(){return yD}setTransformRequest(t){return super.setTransformRequest(cI(t)),this}}function Gy(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function VY(e){return`#${Gy(e[0])}${Gy(e[1])}${Gy(e[2])}${e.length===4?Gy(e[3]):""}`}class Gt extends Array{constructor(t={}){super(),sn(this,"min",0),sn(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new Gt({stops:t.map(r=>({value:r[0],color:r[1]}))})}setStops(t,r={clone:!0}){const n=r.clone?this.clone():this;n.length=0;let a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let d=0;d<t.length;d+=1)a=Math.min(a,t[d].value),h=Math.max(h,t[d].value),n.push({value:t[d].value,color:t[d].color.slice()});return n.sort((d,u)=>d.value<u.value?-1:1),this.min=a,this.max=h,n}scale(t,r,n={clone:!0}){const a=n.clone,h=this[0].value,d=this.at(-1).value-h,u=r-t,b=[];for(let T=0;T<this.length;T+=1){const A=(this[T].value-h)/d*u+t;a?b.push({value:A,color:this[T].color.slice()}):this[T].value=A}return a?new Gt({stops:b}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new Gt({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let r=0;r<this.length;r+=1)t.push({value:this[r].value,color:this[r].color});return t}reverse(t={clone:!0}){const r=t.clone?this.clone():this;for(let n=0;n<~~(r.length/2);n+=1){const a=r[n].color;r[n].color=r.at(-(n+1)).color,r.at(-(n+1)).color=a}return r}getBounds(){return{min:this.min,max:this.max}}getColor(t,r={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let n=0;n<this.length-1;n+=1){if(t>this[n+1].value)continue;const a=this[n].color;if(!r.smooth)return a.slice();const h=this[n].value,d=this[n+1].value,u=this[n+1].color,b=(d-t)/(d-h);return a.map((T,A)=>Math.round(T*b+u[A]*(1-b)))}return[0,0,0]}getColorHex(t,r={smooth:!0,withAlpha:!1}){return VY(this.getColor(t,r))}getColorRelative(t,r={smooth:!0}){const n=this.getBounds();return this.getColor(n.min+t*(n.max-n.min),r)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const r=document.createElement("canvas");r.width=t.horizontal?t.size:1,r.height=t.horizontal?1:t.size;const n=r.getContext("2d");if(!n)throw new Error("Canvs context is missing");const a=n.getImageData(0,0,r.width,r.height),h=a.data,d=t.size,u=this[0].value,b=(this.at(-1).value-u)/d;for(let T=0;T<d;T+=1){const A=this.getColor(u+T*b,{smooth:t.smooth});h[T*4]=A[0],h[T*4+1]=A[1],h[T*4+2]=A[2],h[T*4+3]=A.length>3?A[3]:255}return n.putImageData(a,0,0),r}resample(t,r=15){const n=this.getBounds(),a=this.scale(0,1),h=1/(r-1);let d;if(t==="ease-in-square")d=Array.from({length:r},(u,b)=>{const T=b*h,A=T**2,P=a.getColor(A);return{value:T,color:P}});else if(t==="ease-out-square")d=Array.from({length:r},(u,b)=>{const T=b*h,A=1-(1-T)**2,P=a.getColor(A);return{value:T,color:P}});else if(t==="ease-out-sqrt")d=Array.from({length:r},(u,b)=>{const T=b*h,A=T**.5,P=a.getColor(A);return{value:T,color:P}});else if(t==="ease-in-sqrt")d=Array.from({length:r},(u,b)=>{const T=b*h,A=1-(1-T)**.5,P=a.getColor(A);return{value:T,color:P}});else if(t==="ease-out-exp")d=Array.from({length:r},(u,b)=>{const T=b*h,A=1-2**(-10*T),P=a.getColor(A);return{value:T,color:P}});else if(t==="ease-in-exp")d=Array.from({length:r},(u,b)=>{const T=b*h,A=2**(10*T-10),P=a.getColor(A);return{value:T,color:P}});else throw new Error("Invalid ressampling method.");return new Gt({stops:d}).scale(n.min,n.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const r of t)r.color.length===3&&r.color.push(255);return t[0].color[3]=0,new Gt({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new Gt({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Gt({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new Gt({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new Gt({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new Gt({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new Gt({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new Gt({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Gt({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new Gt({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new Gt({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new Gt({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new Gt({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new Gt({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new Gt({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new Gt({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new Gt({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new Gt({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new Gt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new Gt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new Gt({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new Gt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new Gt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new Gt({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new Gt({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new Gt({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new Gt({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new Gt({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new Gt({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new Gt({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new Gt({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new Gt({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new Gt({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new Gt({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new Gt({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new Gt({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new Gt({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new Gt({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new Gt({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new Gt({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new Gt({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new Gt({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new Gt({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});kY();Ut.Map;Ut.Marker;Ut.Popup;Ut.Style;Ut.CanvasSource;Ut.GeoJSONSource;Ut.ImageSource;Ut.RasterTileSource;Ut.RasterDEMTileSource;Ut.VectorTileSource;Ut.VideoSource;Ut.NavigationControl;Ut.GeolocateControl;Ut.AttributionControl;Ut.LogoControl;Ut.ScaleControl;Ut.FullscreenControl;Ut.TerrainControl;Ut.BoxZoomHandler;Ut.ScrollZoomHandler;Ut.CooperativeGesturesHandler;Ut.KeyboardHandler;Ut.TwoFingersTouchPitchHandler;Ut.MapWheelEvent;Ut.MapTouchEvent;Ut.MapMouseEvent;Ut.config;Ut.getVersion;const qY="blue",HY="red",mI=(e,t,r,n)=>{const a=document.createElement("div");return a.className="marker",a.id=t.toString(),a.style.backgroundColor="blue",a.style.backgroundRepeat="no-repeat",a.style.width="30px",a.style.height="40px",a.style.borderTopLeftRadius="100px",a.style.borderTopRightRadius="100px",a.style.backgroundSize="contain",new MY({element:a,scale:.1,rotation:r}).setLngLat(e).addTo(n)};function $r(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var WY={};function $T(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:WY}var SD=Object.assign,wv=Object.getOwnPropertyDescriptor,Aa=Object.defineProperty,Q0=Object.prototype,ES=[];Object.freeze(ES);var TD={};Object.freeze(TD);var GY=typeof Proxy<"u",ZY=Object.toString();function ED(){GY||$r("Proxy not available")}function CD(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var xd=function(){};function Js(e){return typeof e=="function"}function Bc(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function ex(e){return e!==null&&typeof e=="object"}function gl(e){if(!ex(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===ZY}function AD(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function ag(e,t,r){Aa(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function kD(e,t,r){Aa(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Xc(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return ex(n)&&n[r]===!0}}function df(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function KY(e){var t=Object.getPrototypeOf(e),r=Object.getPrototypeOf(t),n=Object.getPrototypeOf(r);return n===null}function rl(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var PD=typeof Object.getOwnPropertySymbols<"u";function XY(e){var t=Object.keys(e);if(!PD)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return Q0.propertyIsEnumerable.call(e,n)})):t}var Gd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:PD?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function ID(e){return e===null?null:typeof e=="object"?""+e:e}function ll(e,t){return Q0.hasOwnProperty.call(e,t)}var YY=Object.getOwnPropertyDescriptors||function(t){var r={};return Gd(t).forEach(function(n){r[n]=wv(t,n)}),r};function Zo(e,t){return!!(e&t)}function Ko(e,t,r){return r?e|=t:e&=~t,e}function gI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function JY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eJ(n.key),n)}}function ff(e,t,r){return t&&JY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bd(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=tJ(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nc.apply(null,arguments)}function RD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,CS(e,t)}function CS(e,t){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},CS(e,t)}function QY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eJ(e){var t=QY(e,"string");return typeof t=="symbol"?t:t+""}function tJ(e,t){if(e){if(typeof e=="string")return gI(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gI(e,t):void 0}}var Sa=Symbol("mobx-stored-annotations");function ka(e){function t(r,n){if(ug(n))return e.decorate_20223_(r,n);lg(r,n,e)}return Object.assign(t,e)}function lg(e,t,r){ll(e,Sa)||ag(e,Sa,Nc({},e[Sa])),cJ(r)||(e[Sa][t]=r)}function rJ(e){return ll(e,Sa)||ag(e,Sa,Nc({},e[Sa])),e[Sa]}function ug(e){return typeof e=="object"&&typeof e.kind=="string"}var ar=Symbol("mobx administration"),Iu=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=jr.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return GD(this)},t.reportChanged=function(){Es(),ZD(this),Cs()},t.toString=function(){return this.name_},ff(e,[{key:"isBeingObserved",get:function(){return Zo(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return Zo(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return Zo(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Ko(this.flags_,e.diffValueMask_,n===1)}}])}();Iu.isBeingObservedMask_=1;Iu.isPendingUnobservationMask_=2;Iu.diffValueMask_=4;var jT=Xc("Atom",Iu);function MD(e,t,r){t===void 0&&(t=xd),r===void 0&&(r=xd);var n=new Iu(e);return t!==xd&&mQ(n,t),r!==xd&&QD(n,r),n}function nJ(e,t){return e===t}function iJ(e,t){return WT(e,t)}function oJ(e,t){return WT(e,t,1)}function sJ(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Sv={identity:nJ,structural:iJ,default:sJ,shallow:oJ};function $c(e,t,r){return oz(e)?e:Array.isArray(e)?yi.array(e,{name:r}):gl(e)?yi.object(e,void 0,{name:r}):df(e)?yi.map(e,{name:r}):rl(e)?yi.set(e,{name:r}):typeof e=="function"&&!$m(e)&&!jm(e)?AD(e)?Zd(e):Nm(r,e):e}function aJ(e,t,r){if(e==null||lx(e)||ax(e)||Jc(e)||wa(e))return e;if(Array.isArray(e))return yi.array(e,{name:r,deep:!1});if(gl(e))return yi.object(e,void 0,{name:r,deep:!1});if(df(e))return yi.map(e,{name:r,deep:!1});if(rl(e))return yi.set(e,{name:r,deep:!1})}function tx(e){return e}function lJ(e,t){return WT(e,t)?t:e}var uJ="override";function cJ(e){return e.annotationType_===uJ}function cg(e,t){return{annotationType_:e,options_:t,make_:hJ,extend_:dJ,decorate_20223_:fJ}}function hJ(e,t,r,n){var a;if((a=this.options_)!=null&&a.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if($m(r.value))return 1;var h=LD(e,this,t,r,!1);return Aa(n,t,h),2}function dJ(e,t,r,n){var a=LD(e,this,t,r);return e.defineProperty_(t,a,n)}function fJ(e,t){var r=t.kind,n=t.name,a=t.addInitializer,h=this,d=function(T){var A,P,R,U;return jc((A=(P=h.options_)==null?void 0:P.name)!=null?A:n.toString(),T,(R=(U=h.options_)==null?void 0:U.autoAction)!=null?R:!1)};if(r=="field")return function(b){var T,A=b;return $m(A)||(A=d(A)),(T=h.options_)!=null&&T.bound&&(A=A.bind(this),A.isMobxAction=!0),A};if(r=="method"){var u;return $m(e)||(e=d(e)),(u=this.options_)!=null&&u.bound&&a(function(){var b=this,T=b[n].bind(b);T.isMobxAction=!0,b[n]=T}),e}$r("Cannot apply '"+h.annotationType_+"' to '"+String(n)+"' (kind: "+r+"):"+(`
'`+h.annotationType_+"' can only be used on properties with a function value."))}function pJ(e,t,r,n){t.annotationType_,n.value}function LD(e,t,r,n,a){var h,d,u,b,T,A,P;a===void 0&&(a=wt.safeDescriptors),pJ(e,t,r,n);var R=n.value;if((h=t.options_)!=null&&h.bound){var U;R=R.bind((U=e.proxy_)!=null?U:e.target_)}return{value:jc((d=(u=t.options_)==null?void 0:u.name)!=null?d:r.toString(),R,(b=(T=t.options_)==null?void 0:T.autoAction)!=null?b:!1,(A=t.options_)!=null&&A.bound?(P=e.proxy_)!=null?P:e.target_:void 0),configurable:a?e.isPlainObject_:!0,enumerable:!1,writable:!a}}function OD(e,t){return{annotationType_:e,options_:t,make_:mJ,extend_:gJ,decorate_20223_:yJ}}function mJ(e,t,r,n){var a;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((a=this.options_)!=null&&a.bound&&(!ll(e.target_,t)||!jm(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(jm(r.value))return 1;var h=DD(e,this,t,r,!1,!1);return Aa(n,t,h),2}function gJ(e,t,r,n){var a,h=DD(e,this,t,r,(a=this.options_)==null?void 0:a.bound);return e.defineProperty_(t,h,n)}function yJ(e,t){var r,n=t.name,a=t.addInitializer;return jm(e)||(e=Zd(e)),(r=this.options_)!=null&&r.bound&&a(function(){var h=this,d=h[n].bind(h);d.isMobXFlow=!0,h[n]=d}),e}function _J(e,t,r,n){t.annotationType_,n.value}function DD(e,t,r,n,a,h){h===void 0&&(h=wt.safeDescriptors),_J(e,t,r,n);var d=n.value;if(jm(d)||(d=Zd(d)),a){var u;d=d.bind((u=e.proxy_)!=null?u:e.target_),d.isMobXFlow=!0}return{value:d,configurable:h?e.isPlainObject_:!0,enumerable:!1,writable:!h}}function UT(e,t){return{annotationType_:e,options_:t,make_:vJ,extend_:xJ,decorate_20223_:bJ}}function vJ(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function xJ(e,t,r,n){return wJ(e,this,t,r),e.defineComputedProperty_(t,Nc({},this.options_,{get:r.get,set:r.set}),n)}function bJ(e,t){var r=this,n=t.name,a=t.addInitializer;return a(function(){var h=Qc(this)[ar],d=Nc({},r.options_,{get:e,context:this});d.name||(d.name="ObservableObject."+n.toString()),h.values_.set(n,new Qs(d))}),function(){return this[ar].getObservablePropValue_(n)}}function wJ(e,t,r,n){t.annotationType_,n.get}function rx(e,t){return{annotationType_:e,options_:t,make_:SJ,extend_:TJ,decorate_20223_:EJ}}function SJ(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function TJ(e,t,r,n){var a,h;return CJ(e,this),e.defineObservableProperty_(t,r.value,(a=(h=this.options_)==null?void 0:h.enhancer)!=null?a:$c,n)}function EJ(e,t){var r=this,n=t.kind,a=t.name,h=new WeakSet;function d(u,b){var T,A,P=Qc(u)[ar],R=new kc(b,(T=(A=r.options_)==null?void 0:A.enhancer)!=null?T:$c,"ObservableObject."+a.toString(),!1);P.values_.set(a,R),h.add(u)}if(n=="accessor")return{get:function(){return h.has(this)||d(this,e.get.call(this)),this[ar].getObservablePropValue_(a)},set:function(b){return h.has(this)||d(this,b),this[ar].setObservablePropValue_(a,b)},init:function(b){return h.has(this)||d(this,b),b}}}function CJ(e,t,r,n){t.annotationType_}var AJ="true",kJ=zD();function zD(e){return{annotationType_:AJ,options_:e,make_:PJ,extend_:IJ,decorate_20223_:RJ}}function PJ(e,t,r,n){var a,h;if(r.get)return nx.make_(e,t,r,n);if(r.set){var d=jc(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:wt.safeDescriptors?e.isPlainObject_:!0,set:d})===null?0:2:(Aa(n,t,{configurable:!0,set:d}),2)}if(n!==e.target_&&typeof r.value=="function"){var u;if(AD(r.value)){var b,T=(b=this.options_)!=null&&b.autoBind?Zd.bound:Zd;return T.make_(e,t,r,n)}var A=(u=this.options_)!=null&&u.autoBind?Nm.bound:Nm;return A.make_(e,t,r,n)}var P=((a=this.options_)==null?void 0:a.deep)===!1?yi.ref:yi;if(typeof r.value=="function"&&(h=this.options_)!=null&&h.autoBind){var R;r.value=r.value.bind((R=e.proxy_)!=null?R:e.target_)}return P.make_(e,t,r,n)}function IJ(e,t,r,n){var a,h;if(r.get)return nx.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:wt.safeDescriptors?e.isPlainObject_:!0,set:jc(t.toString(),r.set)},n);if(typeof r.value=="function"&&(a=this.options_)!=null&&a.autoBind){var d;r.value=r.value.bind((d=e.proxy_)!=null?d:e.target_)}var u=((h=this.options_)==null?void 0:h.deep)===!1?yi.ref:yi;return u.extend_(e,t,r,n)}function RJ(e,t){$r("'"+this.annotationType_+"' cannot be used as a decorator")}var MJ="observable",LJ="observable.ref",OJ="observable.shallow",DJ="observable.struct",FD={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(FD);function Zy(e){return e||FD}var AS=rx(MJ),zJ=rx(LJ,{enhancer:tx}),FJ=rx(OJ,{enhancer:aJ}),BJ=rx(DJ,{enhancer:lJ}),BD=ka(AS);function Ky(e){return e.deep===!0?$c:e.deep===!1?tx:$J(e.defaultDecorator)}function NJ(e){var t;return e?(t=e.defaultDecorator)!=null?t:zD(e):void 0}function $J(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:$c}function ND(e,t,r){if(ug(t))return AS.decorate_20223_(e,t);if(Bc(t)){lg(e,t,AS);return}return oz(e)?e:gl(e)?yi.object(e,t,r):Array.isArray(e)?yi.array(e,t):df(e)?yi.map(e,t):rl(e)?yi.set(e,t):typeof e=="object"&&e!==null?e:yi.box(e,t)}SD(ND,BD);var jJ={box:function(t,r){var n=Zy(r);return new kc(t,Ky(n),n.name,!0,n.equals)},array:function(t,r){var n=Zy(r);return(wt.useProxies===!1||n.proxy===!1?NQ:PQ)(t,Ky(n),n.name)},map:function(t,r){var n=Zy(r);return new az(t,Ky(n),n.name)},set:function(t,r){var n=Zy(r);return new lz(t,Ky(n),n.name)},object:function(t,r,n){return Ru(function(){return rz(wt.useProxies===!1||(n==null?void 0:n.proxy)===!1?Qc({},n):TQ({},n),t,r)})},ref:ka(zJ),shallow:ka(FJ),deep:BD,struct:ka(BJ)},yi=SD(ND,jJ),$D="computed",UJ="computed.struct",kS=UT($D),VJ=UT(UJ,{equals:Sv.structural}),nx=function(t,r){if(ug(r))return kS.decorate_20223_(t,r);if(Bc(r))return lg(t,r,kS);if(gl(t))return ka(UT($D,t));var n=gl(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new Qs(n)};Object.assign(nx,kS);nx.struct=ka(VJ);var yI,_I,Tv=0,qJ=1,HJ=(yI=(_I=wv(function(){},"name"))==null?void 0:_I.configurable)!=null?yI:!1,vI={value:"action",configurable:!0,writable:!1,enumerable:!1};function jc(e,t,r,n){r===void 0&&(r=!1);function a(){return WJ(e,r,t,n||this,arguments)}return a.isMobxAction=!0,a.toString=function(){return t.toString()},HJ&&(vI.value=e,Aa(a,"name",vI)),a}function WJ(e,t,r,n,a){var h=GJ(e,t);try{return r.apply(n,a)}catch(d){throw h.error_=d,d}finally{ZJ(h)}}function GJ(e,t,r,n){var a=!1,h=0,d=wt.trackingDerivation,u=!t||!d;Es();var b=wt.allowStateChanges;u&&(Yc(),b=ix(!0));var T=VT(!0),A={runAsAction_:u,prevDerivation_:d,prevAllowStateChanges_:b,prevAllowStateReads_:T,notifySpy_:a,startTime_:h,actionId_:qJ++,parentActionId_:Tv};return Tv=A.actionId_,A}function ZJ(e){Tv!==e.actionId_&&$r(30),Tv=e.parentActionId_,e.error_!==void 0&&(wt.suppressReactionErrors=!0),ox(e.prevAllowStateChanges_),um(e.prevAllowStateReads_),Cs(),e.runAsAction_&&ul(e.prevDerivation_),wt.suppressReactionErrors=!1}function KJ(e,t){var r=ix(e);try{return t()}finally{ox(r)}}function ix(e){var t=wt.allowStateChanges;return wt.allowStateChanges=e,t}function ox(e){wt.allowStateChanges=e}var kc=function(e){function t(n,a,h,d,u){var b;return h===void 0&&(h="ObservableValue"),u===void 0&&(u=Sv.default),b=e.call(this,h)||this,b.enhancer=void 0,b.name_=void 0,b.equals=void 0,b.hasUnreportedChange_=!1,b.interceptors_=void 0,b.changeListeners_=void 0,b.value_=void 0,b.dehancer=void 0,b.enhancer=a,b.name_=h,b.equals=u,b.value_=a(n,void 0,h),b}RD(t,e);var r=t.prototype;return r.dehanceValue=function(a){return this.dehancer!==void 0?this.dehancer(a):a},r.set=function(a){this.value_,a=this.prepareNewValue_(a),a!==wt.UNCHANGED&&this.setNewValue_(a)},r.prepareNewValue_=function(a){if(ws(this)){var h=Ss(this,{object:this,type:Pa,newValue:a});if(!h)return wt.UNCHANGED;a=h.newValue}return a=this.enhancer(a,this.value_,this.name_),this.equals(this.value_,a)?wt.UNCHANGED:a},r.setNewValue_=function(a){var h=this.value_;this.value_=a,this.reportChanged(),Zs(this)&&Ks(this,{type:Pa,object:this,newValue:a,oldValue:h})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(a){return hg(this,a)},r.observe_=function(a,h){return h&&a({observableKind:"value",debugObjectName:this.name_,object:this,type:Pa,newValue:this.value_,oldValue:void 0}),dg(this,a)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return ID(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Iu),Qs=function(){function e(r){this.dependenciesState_=jr.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=jr.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Cv(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ev.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||$r(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=jc("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?Sv.structural:Sv.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){eQ(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing&&$r(32,this.name_,this.derivation),wt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)PS(this)&&(this.warnAboutUntrackedRead_(),Es(),this.value_=this.computeValue_(!1),Cs());else if(GD(this),PS(this)){var n=wt.trackingContext;this.keepAlive_&&!n&&(wt.trackingContext=this),this.trackAndCompute()&&QJ(this),wt.trackingContext=n}var a=this.value_;if(C_(a))throw a.cause;return a},t.set=function(n){if(this.setter_){this.isRunningSetter&&$r(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter=!1}}else $r(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,a=this.dependenciesState_===jr.NOT_TRACKING_,h=this.computeValue_(!0),d=a||C_(n)||C_(h)||!this.equals_(n,h);return d&&(this.value_=h),d},t.computeValue_=function(n){this.isComputing=!0;var a=ix(!1),h;if(n)h=jD(this,this.derivation,this.scope_);else if(wt.disableErrorBoundaries===!0)h=this.derivation.call(this.scope_);else try{h=this.derivation.call(this.scope_)}catch(d){h=new Cv(d)}return ox(a),this.isComputing=!1,h},t.suspend_=function(){this.keepAlive_||(IS(this),this.value_=void 0)},t.observe_=function(n,a){var h=this,d=!0,u=void 0;return cQ(function(){var b=h.get();if(!d||a){var T=Yc();n({observableKind:"computed",debugObjectName:h.name_,type:Pa,object:h,newValue:b,oldValue:u}),ul(T)}d=!1,u=b})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return ID(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},ff(e,[{key:"isComputing",get:function(){return Zo(this.flags_,e.isComputingMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isComputingMask_,n)}},{key:"isRunningSetter",get:function(){return Zo(this.flags_,e.isRunningSetterMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isRunningSetterMask_,n)}},{key:"isBeingObserved",get:function(){return Zo(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return Zo(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return Zo(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Ko(this.flags_,e.diffValueMask_,n===1)}}])}();Qs.isComputingMask_=1;Qs.isRunningSetterMask_=2;Qs.isBeingObservedMask_=4;Qs.isPendingUnobservationMask_=8;Qs.diffValueMask_=16;var sx=Xc("ComputedValue",Qs),jr;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(jr||(jr={}));var Ev;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Ev||(Ev={}));var Cv=function(t){this.cause=void 0,this.cause=t};function C_(e){return e instanceof Cv}function PS(e){switch(e.dependenciesState_){case jr.UP_TO_DATE_:return!1;case jr.NOT_TRACKING_:case jr.STALE_:return!0;case jr.POSSIBLY_STALE_:{for(var t=VT(!0),r=Yc(),n=e.observing_,a=n.length,h=0;h<a;h++){var d=n[h];if(sx(d)){if(wt.disableErrorBoundaries)d.get();else try{d.get()}catch{return ul(r),um(t),!0}if(e.dependenciesState_===jr.STALE_)return ul(r),um(t),!0}}return VD(e),ul(r),um(t),!1}}}function jD(e,t,r){var n=VT(!0);VD(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++wt.runId;var a=wt.trackingDerivation;wt.trackingDerivation=e,wt.inBatch++;var h;if(wt.disableErrorBoundaries===!0)h=t.call(r);else try{h=t.call(r)}catch(d){h=new Cv(d)}return wt.inBatch--,wt.trackingDerivation=a,XJ(e),um(n),h}function XJ(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=jr.UP_TO_DATE_,a=0,h=e.unboundDepsCount_,d=0;d<h;d++){var u=r[d];u.diffValue===0&&(u.diffValue=1,a!==d&&(r[a]=u),a++),u.dependenciesState_>n&&(n=u.dependenciesState_)}for(r.length=a,e.newObserving_=null,h=t.length;h--;){var b=t[h];b.diffValue===0&&HD(b,e),b.diffValue=0}for(;a--;){var T=r[a];T.diffValue===1&&(T.diffValue=0,JJ(T,e))}n!==jr.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function IS(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)HD(t[r],e);e.dependenciesState_=jr.NOT_TRACKING_}function UD(e){var t=Yc();try{return e()}finally{ul(t)}}function Yc(){var e=wt.trackingDerivation;return wt.trackingDerivation=null,e}function ul(e){wt.trackingDerivation=e}function VT(e){var t=wt.allowStateReads;return wt.allowStateReads=e,t}function um(e){wt.allowStateReads=e}function VD(e){if(e.dependenciesState_!==jr.UP_TO_DATE_){e.dependenciesState_=jr.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=jr.UP_TO_DATE_}}var A_=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},k_=!0,qD=!1,wt=function(){var e=$T();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(k_=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new A_().version&&(k_=!1),k_?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new A_):(setTimeout(function(){qD||$r(35)},1),new A_)}();function YJ(){if((wt.pendingReactions.length||wt.inBatch||wt.isRunningReactions)&&$r(36),qD=!0,k_){var e=$T();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),wt=new A_}}function JJ(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function HD(e,t){e.observers_.delete(t),e.observers_.size===0&&WD(e)}function WD(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,wt.pendingUnobservations.push(e))}function Es(){wt.inBatch++}function Cs(){if(--wt.inBatch===0){KD();for(var e=wt.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof Qs&&r.suspend_())}wt.pendingUnobservations=[]}}function GD(e){var t=wt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&wt.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&wt.inBatch>0&&WD(e),!1)}function ZD(e){e.lowestObserverState_!==jr.STALE_&&(e.lowestObserverState_=jr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===jr.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=jr.STALE_}))}function QJ(e){e.lowestObserverState_!==jr.STALE_&&(e.lowestObserverState_=jr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===jr.POSSIBLY_STALE_?t.dependenciesState_=jr.STALE_:t.dependenciesState_===jr.UP_TO_DATE_&&(e.lowestObserverState_=jr.UP_TO_DATE_)}))}function eQ(e){e.lowestObserverState_===jr.UP_TO_DATE_&&(e.lowestObserverState_=jr.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===jr.UP_TO_DATE_&&(t.dependenciesState_=jr.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Ma=function(){function e(r,n,a,h){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=jr.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Ev.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=a,this.requiresObservable_=h}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,wt.pendingReactions.push(this),KD())},t.runReaction_=function(){if(!this.isDisposed){Es(),this.isScheduled=!1;var n=wt.trackingContext;if(wt.trackingContext=this,PS(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(a){this.reportExceptionInDerivation_(a)}}wt.trackingContext=n,Cs()}},t.track=function(n){if(!this.isDisposed){Es(),this.isRunning=!0;var a=wt.trackingContext;wt.trackingContext=this;var h=jD(this,n,void 0);wt.trackingContext=a,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&IS(this),C_(h)&&this.reportExceptionInDerivation_(h.cause),Cs()}},t.reportExceptionInDerivation_=function(n){var a=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(wt.disableErrorBoundaries)throw n;var h="[mobx] uncaught error in '"+this+"'";wt.suppressReactionErrors||console.error(h,n),wt.globalReactionErrorHandlers.forEach(function(d){return d(n,a)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Es(),IS(this),Cs()))},t.getDisposer_=function(n){var a=this,h=function d(){a.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",d)};return n==null||n.addEventListener==null||n.addEventListener("abort",h),h[ar]=this,h},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){},ff(e,[{key:"isDisposed",get:function(){return Zo(this.flags_,e.isDisposedMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isDisposedMask_,n)}},{key:"isScheduled",get:function(){return Zo(this.flags_,e.isScheduledMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isScheduledMask_,n)}},{key:"isTrackPending",get:function(){return Zo(this.flags_,e.isTrackPendingMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isTrackPendingMask_,n)}},{key:"isRunning",get:function(){return Zo(this.flags_,e.isRunningMask_)},set:function(n){this.flags_=Ko(this.flags_,e.isRunningMask_,n)}},{key:"diffValue",get:function(){return Zo(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Ko(this.flags_,e.diffValueMask_,n===1)}}])}();Ma.isDisposedMask_=1;Ma.isScheduledMask_=2;Ma.isTrackPendingMask_=4;Ma.isRunningMask_=8;Ma.diffValueMask_=16;var tQ=100,RS=function(t){return t()};function KD(){wt.inBatch>0||wt.isRunningReactions||RS(rQ)}function rQ(){wt.isRunningReactions=!0;for(var e=wt.pendingReactions,t=0;e.length>0;){++t===tQ&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,a=r.length;n<a;n++)r[n].runReaction_()}wt.isRunningReactions=!1}var Av=Xc("Reaction",Ma);function nQ(e){var t=RS;RS=function(n){return e(function(){return t(n)})}}function cm(){return!1}function iQ(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var XD="action",oQ="action.bound",YD="autoAction",sQ="autoAction.bound",aQ="<unnamed action>",MS=cg(XD),lQ=cg(oQ,{bound:!0}),LS=cg(YD,{autoAction:!0}),uQ=cg(sQ,{autoAction:!0,bound:!0});function JD(e){var t=function(n,a){if(Js(n))return jc(n.name||aQ,n,e);if(Js(a))return jc(n,a,e);if(ug(a))return(e?LS:MS).decorate_20223_(n,a);if(Bc(a))return lg(n,a,e?LS:MS);if(Bc(n))return ka(cg(e?YD:XD,{name:n,autoAction:e}))};return t}var wd=JD(!1);Object.assign(wd,MS);var Nm=JD(!0);Object.assign(Nm,LS);wd.bound=ka(lQ);Nm.bound=ka(uQ);function $m(e){return Js(e)&&e.isMobxAction===!0}function cQ(e,t){var r,n,a,h;t===void 0&&(t=TD);var d=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",u=!t.scheduler&&!t.delay,b;if(u)b=new Ma(d,function(){this.track(P)},t.onError,t.requiresObservable);else{var T=dQ(t),A=!1;b=new Ma(d,function(){A||(A=!0,T(function(){A=!1,b.isDisposed||b.track(P)}))},t.onError,t.requiresObservable)}function P(){e(b)}return(a=t)!=null&&(a=a.signal)!=null&&a.aborted||b.schedule_(),b.getDisposer_((h=t)==null?void 0:h.signal)}var hQ=function(t){return t()};function dQ(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:hQ}var fQ="onBO",pQ="onBUO";function mQ(e,t,r){return ez(fQ,e,t,r)}function QD(e,t,r){return ez(pQ,e,t,r)}function ez(e,t,r,n){var a=Iv(t),h=Js(n)?n:r,d=e+"L";return a[d]?a[d].add(h):a[d]=new Set([h]),function(){var u=a[d];u&&(u.delete(h),u.size===0&&delete a[d])}}var gQ="never",Xy="always",yQ="observed";function tz(e){e.isolateGlobalState===!0&&YJ();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(wt.useProxies=t===Xy?!0:t===gQ?!1:typeof Proxy<"u"),t==="ifavailable"&&(wt.verifyProxies=!0),r!==void 0){var n=r===Xy?Xy:r===yQ;wt.enforceActions=n,wt.allowStateChanges=!(n===!0||n===Xy)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(a){a in e&&(wt[a]=!!e[a])}),wt.allowStateReads=!wt.observableRequiresReaction,e.reactionScheduler&&nQ(e.reactionScheduler)}function rz(e,t,r,n){var a=YY(t);return Ru(function(){var h=Qc(e,n)[ar];Gd(a).forEach(function(d){h.extend_(d,a[d],r&&d in r?r[d]:!0)})}),e}function _Q(e,t){return nz(Iv(e,t))}function nz(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=vQ(e.observing_).map(nz)),t}function vQ(e){return Array.from(new Set(e))}var xQ=0;function iz(){this.message="FLOW_CANCELLED"}iz.prototype=Object.create(Error.prototype);var Eb=OD("flow"),bQ=OD("flow.bound",{bound:!0}),Zd=Object.assign(function(t,r){if(ug(r))return Eb.decorate_20223_(t,r);if(Bc(r))return lg(t,r,Eb);var n=t,a=n.name||"<unnamed flow>",h=function(){var u=this,b=arguments,T=++xQ,A=wd(a+" - runid: "+T+" - init",n).apply(u,b),P,R=void 0,U=new Promise(function(j,W){var ee=0;P=W;function B(te){R=void 0;var me;try{me=wd(a+" - runid: "+T+" - yield "+ee++,A.next).call(A,te)}catch(fe){return W(fe)}V(me)}function H(te){R=void 0;var me;try{me=wd(a+" - runid: "+T+" - yield "+ee++,A.throw).call(A,te)}catch(fe){return W(fe)}V(me)}function V(te){if(Js(te==null?void 0:te.then)){te.then(V,W);return}return te.done?j(te.value):(R=Promise.resolve(te.value),R.then(B,H))}B(void 0)});return U.cancel=wd(a+" - runid: "+T+" - cancel",function(){try{R&&xI(R);var j=A.return(void 0),W=Promise.resolve(j.value);W.then(xd,xd),xI(W),P(new iz)}catch(ee){P(ee)}}),U};return h.isMobXFlow=!0,h},Eb);Zd.bound=ka(bQ);function xI(e){Js(e.cancel)&&e.cancel()}function jm(e){return(e==null?void 0:e.isMobXFlow)===!0}function wQ(e,t){return e?lx(e)||!!e[ar]||jT(e)||Av(e)||sx(e):!1}function oz(e){return wQ(e)}function nl(e,t){t===void 0&&(t=void 0),Es();try{return e.apply(t)}finally{Cs()}}function nd(e){return e[ar]}var SQ={has:function(t,r){return nd(t).has_(r)},get:function(t,r){return nd(t).get_(r)},set:function(t,r,n){var a;return Bc(r)?(a=nd(t).set_(r,n,!0))!=null?a:!0:!1},deleteProperty:function(t,r){var n;return Bc(r)?(n=nd(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var a;return(a=nd(t).defineProperty_(r,n))!=null?a:!0},ownKeys:function(t){return nd(t).ownKeys_()},preventExtensions:function(t){$r(13)}};function TQ(e,t){var r,n;return ED(),e=Qc(e,t),(n=(r=e[ar]).proxy_)!=null?n:r.proxy_=new Proxy(e,SQ)}function ws(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function hg(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),CD(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Ss(e,t){var r=Yc();try{for(var n=[].concat(e.interceptors_||[]),a=0,h=n.length;a<h&&(t=n[a](t),t&&!t.type&&$r(14),!!t);a++);return t}finally{ul(r)}}function Zs(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function dg(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),CD(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Ks(e,t){var r=Yc(),n=e.changeListeners_;if(n){n=n.slice();for(var a=0,h=n.length;a<h;a++)n[a](t);ul(r)}}function EQ(e,t,r){return Ru(function(){var n,a=Qc(e,r)[ar];(n=t)!=null||(t=rJ(e)),Gd(t).forEach(function(h){return a.make_(h,t[h])})}),e}var Cb=Symbol("mobx-keys");function CQ(e,t,r){return gl(e)?rz(e,e,t,r):(Ru(function(){var n=Qc(e,r)[ar];if(!e[Cb]){var a=Object.getPrototypeOf(e),h=new Set([].concat(Gd(e),Gd(a)));h.delete("constructor"),h.delete(ar),ag(a,Cb,h)}e[Cb].forEach(function(d){return n.make_(d,t&&d in t?t[d]:!0)})}),e)}var bI="splice",Pa="update",AQ=1e4,kQ={get:function(t,r){var n=t[ar];return r===ar?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):ll(kv,r)?kv[r]:t[r]},set:function(t,r,n){var a=t[ar];return r==="length"&&a.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:a.set_(parseInt(r),n),!0},preventExtensions:function(){$r(15)}},qT=function(){function e(r,n,a,h){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=a,this.legacyMode_=h,this.atom_=new Iu(r),this.enhancer_=function(d,u){return n(d,u,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return hg(this,n)},t.observe_=function(n,a){return a===void 0&&(a=!1),a&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),dg(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&$r("Out of range: "+n);var a=this.values_.length;if(n!==a)if(n>a){for(var h=new Array(n-a),d=0;d<n-a;d++)h[d]=void 0;this.spliceWithArray_(a,0,h)}else this.spliceWithArray_(n,a-n)},t.updateArrayLength_=function(n,a){n!==this.lastKnownLength_&&$r(16),this.lastKnownLength_+=a,this.legacyMode_&&a>0&&dz(n+a+1)},t.spliceWithArray_=function(n,a,h){var d=this;this.atom_;var u=this.values_.length;if(n===void 0?n=0:n>u?n=u:n<0&&(n=Math.max(0,u+n)),arguments.length===1?a=u-n:a==null?a=0:a=Math.max(0,Math.min(a,u-n)),h===void 0&&(h=ES),ws(this)){var b=Ss(this,{object:this.proxy_,type:bI,index:n,removedCount:a,added:h});if(!b)return ES;a=b.removedCount,h=b.added}if(h=h.length===0?h:h.map(function(P){return d.enhancer_(P,void 0)}),this.legacyMode_){var T=h.length-a;this.updateArrayLength_(u,T)}var A=this.spliceItemsIntoValues_(n,a,h);return(a!==0||h.length!==0)&&this.notifyArraySplice_(n,h,A),this.dehanceValues_(A)},t.spliceItemsIntoValues_=function(n,a,h){if(h.length<AQ){var d;return(d=this.values_).splice.apply(d,[n,a].concat(h))}else{var u=this.values_.slice(n,n+a),b=this.values_.slice(n+a);this.values_.length+=h.length-a;for(var T=0;T<h.length;T++)this.values_[n+T]=h[T];for(var A=0;A<b.length;A++)this.values_[n+h.length+A]=b[A];return u}},t.notifyArrayChildUpdate_=function(n,a,h){var d=!this.owned_&&cm(),u=Zs(this),b=u||d?{observableKind:"array",object:this.proxy_,type:Pa,debugObjectName:this.atom_.name_,index:n,newValue:a,oldValue:h}:null;this.atom_.reportChanged(),u&&Ks(this,b)},t.notifyArraySplice_=function(n,a,h){var d=!this.owned_&&cm(),u=Zs(this),b=u||d?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:bI,index:n,removed:h,added:a,removedCount:h.length,addedCount:a.length}:null;this.atom_.reportChanged(),u&&Ks(this,b)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,a){var h=this.values_;if(this.legacyMode_&&n>h.length&&$r(17,n,h.length),n<h.length){this.atom_;var d=h[n];if(ws(this)){var u=Ss(this,{type:Pa,object:this.proxy_,index:n,newValue:a});if(!u)return;a=u.newValue}a=this.enhancer_(a,d);var b=a!==d;b&&(h[n]=a,this.notifyArrayChildUpdate_(n,a,d))}else{for(var T=new Array(n+1-h.length),A=0;A<T.length-1;A++)T[A]=void 0;T[T.length-1]=a,this.spliceWithArray_(h.length,0,T)}},e}();function PQ(e,t,r,n){return r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),ED(),Ru(function(){var a=new qT(r,t,n,!1);kD(a.values_,ar,a);var h=new Proxy(a.values_,kQ);return a.proxy_=h,e&&e.length&&a.spliceWithArray_(0,0,e),h})}var kv={clear:function(){return this.splice(0)},replace:function(t){var r=this[ar];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),h=2;h<n;h++)a[h-2]=arguments[h];var d=this[ar];switch(arguments.length){case 0:return[];case 1:return d.spliceWithArray_(t);case 2:return d.spliceWithArray_(t,r)}return d.spliceWithArray_(t,r,a)},spliceWithArray:function(t,r,n){return this[ar].spliceWithArray_(t,r,n)},push:function(){for(var t=this[ar],r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[ar].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[ar],r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return wt.trackingDerivation&&$r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){wt.trackingDerivation&&$r(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[ar],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};vn("at",as);vn("concat",as);vn("flat",as);vn("includes",as);vn("indexOf",as);vn("join",as);vn("lastIndexOf",as);vn("slice",as);vn("toString",as);vn("toLocaleString",as);vn("toSorted",as);vn("toSpliced",as);vn("with",as);vn("every",ra);vn("filter",ra);vn("find",ra);vn("findIndex",ra);vn("findLast",ra);vn("findLastIndex",ra);vn("flatMap",ra);vn("forEach",ra);vn("map",ra);vn("some",ra);vn("toReversed",ra);vn("reduce",sz);vn("reduceRight",sz);function vn(e,t){typeof Array.prototype[e]=="function"&&(kv[e]=t(e))}function as(e){return function(){var t=this[ar];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function ra(e){return function(t,r){var n=this,a=this[ar];a.atom_.reportObserved();var h=a.dehanceValues_(a.values_);return h[e](function(d,u){return t.call(r,d,u,n)})}}function sz(e){return function(){var t=this,r=this[ar];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),a=arguments[0];return arguments[0]=function(h,d,u){return a(h,d,u,t)},n[e].apply(n,arguments)}}var IQ=Xc("ObservableArrayAdministration",qT);function ax(e){return ex(e)&&IQ(e[ar])}var RQ={},lu="add",Pv="delete",az=function(){function e(r,n,a){var h=this;n===void 0&&(n=$c),a===void 0&&(a="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ar]=RQ,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=a,Js(Map)||$r(18),Ru(function(){h.keysAtom_=MD("ObservableMap.keys()"),h.data_=new Map,h.hasMap_=new Map,r&&h.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var a=this;if(!wt.trackingDerivation)return this.has_(n);var h=this.hasMap_.get(n);if(!h){var d=h=new kc(this.has_(n),tx,"ObservableMap.key?",!1);this.hasMap_.set(n,d),QD(d,function(){return a.hasMap_.delete(n)})}return h.get()},t.set=function(n,a){var h=this.has_(n);if(ws(this)){var d=Ss(this,{type:h?Pa:lu,object:this,newValue:a,name:n});if(!d)return this;a=d.newValue}return h?this.updateValue_(n,a):this.addValue_(n,a),this},t.delete=function(n){var a=this;if(this.keysAtom_,ws(this)){var h=Ss(this,{type:Pv,object:this,name:n});if(!h)return!1}if(this.has_(n)){var d=cm(),u=Zs(this),b=u||d?{observableKind:"map",debugObjectName:this.name_,type:Pv,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return nl(function(){var T;a.keysAtom_.reportChanged(),(T=a.hasMap_.get(n))==null||T.setNewValue_(!1);var A=a.data_.get(n);A.setNewValue_(void 0),a.data_.delete(n)}),u&&Ks(this,b),!0}return!1},t.updateValue_=function(n,a){var h=this.data_.get(n);if(a=h.prepareNewValue_(a),a!==wt.UNCHANGED){var d=cm(),u=Zs(this),b=u||d?{observableKind:"map",debugObjectName:this.name_,type:Pa,object:this,oldValue:h.value_,name:n,newValue:a}:null;h.setNewValue_(a),u&&Ks(this,b)}},t.addValue_=function(n,a){var h=this;this.keysAtom_,nl(function(){var T,A=new kc(a,h.enhancer_,"ObservableMap.key",!1);h.data_.set(n,A),a=A.value_,(T=h.hasMap_.get(n))==null||T.setNewValue_(!0),h.keysAtom_.reportChanged()});var d=cm(),u=Zs(this),b=u||d?{observableKind:"map",debugObjectName:this.name_,type:lu,object:this,name:n,newValue:a}:null;u&&Ks(this,b)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,a=this.keys();return Um({next:function(){var d=a.next(),u=d.done,b=d.value;return{done:u,value:u?void 0:n.get(b)}}})},t.entries=function(){var n=this,a=this.keys();return Um({next:function(){var d=a.next(),u=d.done,b=d.value;return{done:u,value:u?void 0:[b,n.get(b)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(n,a){for(var h=bd(this),d;!(d=h()).done;){var u=d.value,b=u[0],T=u[1];n.call(a,T,b,this)}},t.merge=function(n){var a=this;return Jc(n)&&(n=new Map(n)),nl(function(){gl(n)?XY(n).forEach(function(h){return a.set(h,n[h])}):Array.isArray(n)?n.forEach(function(h){var d=h[0],u=h[1];return a.set(d,u)}):df(n)?(KY(n)||$r(19,n),n.forEach(function(h,d){return a.set(d,h)})):n!=null&&$r(20,n)}),this},t.clear=function(){var n=this;nl(function(){UD(function(){for(var a=bd(n.keys()),h;!(h=a()).done;){var d=h.value;n.delete(d)}})})},t.replace=function(n){var a=this;return nl(function(){for(var h=MQ(n),d=new Map,u=!1,b=bd(a.data_.keys()),T;!(T=b()).done;){var A=T.value;if(!h.has(A)){var P=a.delete(A);if(P)u=!0;else{var R=a.data_.get(A);d.set(A,R)}}}for(var U=bd(h.entries()),j;!(j=U()).done;){var W=j.value,ee=W[0],B=W[1],H=a.data_.has(ee);if(a.set(ee,B),a.data_.has(ee)){var V=a.data_.get(ee);d.set(ee,V),H||(u=!0)}}if(!u)if(a.data_.size!==d.size)a.keysAtom_.reportChanged();else for(var te=a.data_.keys(),me=d.keys(),fe=te.next(),ge=me.next();!fe.done;){if(fe.value!==ge.value){a.keysAtom_.reportChanged();break}fe=te.next(),ge=me.next()}a.data_=d}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,a){return dg(this,n)},t.intercept_=function(n){return hg(this,n)},ff(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Jc=Xc("ObservableMap",az);function MQ(e){if(df(e)||Jc(e))return e;if(Array.isArray(e))return new Map(e);if(gl(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return $r(21,e)}var LQ={},lz=function(){function e(r,n,a){var h=this;n===void 0&&(n=$c),a===void 0&&(a="ObservableSet"),this.name_=void 0,this[ar]=LQ,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=a,Js(Set)||$r(22),this.enhancer_=function(d,u){return n(d,u,a)},Ru(function(){h.atom_=MD(h.name_),r&&h.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;nl(function(){UD(function(){for(var a=bd(n.data_.values()),h;!(h=a()).done;){var d=h.value;n.delete(d)}})})},t.forEach=function(n,a){for(var h=bd(this),d;!(d=h()).done;){var u=d.value;n.call(a,u,u,this)}},t.add=function(n){var a=this;if(this.atom_,ws(this)){var h=Ss(this,{type:lu,object:this,newValue:n});if(!h)return this}if(!this.has(n)){nl(function(){a.data_.add(a.enhancer_(n,void 0)),a.atom_.reportChanged()});var d=!1,u=Zs(this),b=u||d?{observableKind:"set",debugObjectName:this.name_,type:lu,object:this,newValue:n}:null;u&&Ks(this,b)}return this},t.delete=function(n){var a=this;if(ws(this)){var h=Ss(this,{type:Pv,object:this,oldValue:n});if(!h)return!1}if(this.has(n)){var d=!1,u=Zs(this),b=u||d?{observableKind:"set",debugObjectName:this.name_,type:Pv,object:this,oldValue:n}:null;return nl(function(){a.atom_.reportChanged(),a.data_.delete(n)}),u&&Ks(this,b),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,a=Array.from(this.keys()),h=Array.from(this.values());return Um({next:function(){var u=n;return n+=1,u<h.length?{value:[a[u],h[u]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,a=0,h=Array.from(this.data_.values());return Um({next:function(){return a<h.length?{value:n.dehanceValue_(h[a++]),done:!1}:{done:!0}}})},t.intersection=function(n){if(rl(n)&&!wa(n))return n.intersection(this);var a=new Set(this);return a.intersection(n)},t.union=function(n){if(rl(n)&&!wa(n))return n.union(this);var a=new Set(this);return a.union(n)},t.difference=function(n){return new Set(this).difference(n)},t.symmetricDifference=function(n){if(rl(n)&&!wa(n))return n.symmetricDifference(this);var a=new Set(this);return a.symmetricDifference(n)},t.isSubsetOf=function(n){return new Set(this).isSubsetOf(n)},t.isSupersetOf=function(n){return new Set(this).isSupersetOf(n)},t.isDisjointFrom=function(n){if(rl(n)&&!wa(n))return n.isDisjointFrom(this);var a=new Set(this);return a.isDisjointFrom(n)},t.replace=function(n){var a=this;return wa(n)&&(n=new Set(n)),nl(function(){Array.isArray(n)?(a.clear(),n.forEach(function(h){return a.add(h)})):rl(n)?(a.clear(),n.forEach(function(h){return a.add(h)})):n!=null&&$r("Cannot initialize set from "+n)}),this},t.observe_=function(n,a){return dg(this,n)},t.intercept_=function(n){return hg(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},ff(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),wa=Xc("ObservableSet",lz),wI=Object.create(null),SI="remove",uz=function(){function e(r,n,a,h){n===void 0&&(n=new Map),h===void 0&&(h=kJ),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=a,this.defaultAnnotation_=h,this.keysAtom_=new Iu("ObservableObject.keys"),this.isPlainObject_=gl(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,a){var h=this.values_.get(n);if(h instanceof Qs)return h.set(a),!0;if(ws(this)){var d=Ss(this,{type:Pa,object:this.proxy_||this.target_,name:n,newValue:a});if(!d)return null;a=d.newValue}if(a=h.prepareNewValue_(a),a!==wt.UNCHANGED){var u=Zs(this),b=!1,T=u||b?{type:Pa,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:h.value_,name:n,newValue:a}:null;h.setNewValue_(a),u&&Ks(this,T)}return!0},t.get_=function(n){return wt.trackingDerivation&&!ll(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,a,h){return h===void 0&&(h=!1),ll(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,a):h?Reflect.set(this.target_,n,a):(this.target_[n]=a,!0):this.extend_(n,{value:a,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,h)},t.has_=function(n){if(!wt.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var a=this.pendingKeys_.get(n);return a||(a=new kc(n in this.target_,tx,"ObservableObject.key?",!1),this.pendingKeys_.set(n,a)),a.get()},t.make_=function(n,a){if(a===!0&&(a=this.defaultAnnotation_),a!==!1){if(!(n in this.target_)){var h;if((h=this.target_[Sa])!=null&&h[n])return;$r(1,a.annotationType_,this.name_+"."+n.toString())}for(var d=this.target_;d&&d!==Q0;){var u=wv(d,n);if(u){var b=a.make_(this,n,u,d);if(b===0)return;if(b===1)break}d=Object.getPrototypeOf(d)}EI(this,a,n)}},t.extend_=function(n,a,h,d){if(d===void 0&&(d=!1),h===!0&&(h=this.defaultAnnotation_),h===!1)return this.defineProperty_(n,a,d);var u=h.extend_(this,n,a,d);return u&&EI(this,h,n),u},t.defineProperty_=function(n,a,h){h===void 0&&(h=!1),this.keysAtom_;try{Es();var d=this.delete_(n);if(!d)return d;if(ws(this)){var u=Ss(this,{object:this.proxy_||this.target_,name:n,type:lu,newValue:a.value});if(!u)return null;var b=u.newValue;a.value!==b&&(a=Nc({},a,{value:b}))}if(h){if(!Reflect.defineProperty(this.target_,n,a))return!1}else Aa(this.target_,n,a);this.notifyPropertyAddition_(n,a.value)}finally{Cs()}return!0},t.defineObservableProperty_=function(n,a,h,d){d===void 0&&(d=!1),this.keysAtom_;try{Es();var u=this.delete_(n);if(!u)return u;if(ws(this)){var b=Ss(this,{object:this.proxy_||this.target_,name:n,type:lu,newValue:a});if(!b)return null;a=b.newValue}var T=TI(n),A={configurable:wt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:T.get,set:T.set};if(d){if(!Reflect.defineProperty(this.target_,n,A))return!1}else Aa(this.target_,n,A);var P=new kc(a,h,"ObservableObject.key",!1);this.values_.set(n,P),this.notifyPropertyAddition_(n,P.value_)}finally{Cs()}return!0},t.defineComputedProperty_=function(n,a,h){h===void 0&&(h=!1),this.keysAtom_;try{Es();var d=this.delete_(n);if(!d)return d;if(ws(this)){var u=Ss(this,{object:this.proxy_||this.target_,name:n,type:lu,newValue:void 0});if(!u)return null}a.name||(a.name="ObservableObject.key"),a.context=this.proxy_||this.target_;var b=TI(n),T={configurable:wt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:b.get,set:b.set};if(h){if(!Reflect.defineProperty(this.target_,n,T))return!1}else Aa(this.target_,n,T);this.values_.set(n,new Qs(a)),this.notifyPropertyAddition_(n,void 0)}finally{Cs()}return!0},t.delete_=function(n,a){if(a===void 0&&(a=!1),this.keysAtom_,!ll(this.target_,n))return!0;if(ws(this)){var h=Ss(this,{object:this.proxy_||this.target_,name:n,type:SI});if(!h)return null}try{var d;Es();var u=Zs(this),b=!1,T=this.values_.get(n),A=void 0;if(!T&&(u||b)){var P;A=(P=wv(this.target_,n))==null?void 0:P.value}if(a){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(T&&(this.values_.delete(n),T instanceof kc&&(A=T.value_),ZD(T)),this.keysAtom_.reportChanged(),(d=this.pendingKeys_)==null||(d=d.get(n))==null||d.set(n in this.target_),u||b){var R={type:SI,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:A,name:n};u&&Ks(this,R)}}finally{Cs()}return!0},t.observe_=function(n,a){return dg(this,n)},t.intercept_=function(n){return hg(this,n)},t.notifyPropertyAddition_=function(n,a){var h,d=Zs(this),u=!1;if(d||u){var b=d||u?{type:lu,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:a}:null;d&&Ks(this,b)}(h=this.pendingKeys_)==null||(h=h.get(n))==null||h.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Gd(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Qc(e,t){var r;if(ll(e,ar))return e;var n=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",a=new uz(e,new Map,String(n),NJ(t));return ag(e,ar,a),e}var OQ=Xc("ObservableObjectAdministration",uz);function TI(e){return wI[e]||(wI[e]={get:function(){return this[ar].getObservablePropValue_(e)},set:function(r){return this[ar].setObservablePropValue_(e,r)}})}function lx(e){return ex(e)?OQ(e[ar]):!1}function EI(e,t,r){var n;(n=e.target_[Sa])==null||delete n[r]}var DQ=hz(0),zQ=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),Ab=0,cz=function(){};function FQ(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}FQ(cz,Array.prototype);var HT=function(e){function t(n,a,h,d){var u;return h===void 0&&(h="ObservableArray"),d===void 0&&(d=!1),u=e.call(this)||this,Ru(function(){var b=new qT(h,a,d,!0);b.proxy_=u,kD(u,ar,b),n&&n.length&&u.spliceWithArray(0,0,n),zQ&&Object.defineProperty(u,"0",DQ)}),u}RD(t,e);var r=t.prototype;return r.concat=function(){this[ar].atom_.reportObserved();for(var a=arguments.length,h=new Array(a),d=0;d<a;d++)h[d]=arguments[d];return Array.prototype.concat.apply(this.slice(),h.map(function(u){return ax(u)?u.slice():u}))},r[Symbol.iterator]=function(){var n=this,a=0;return Um({next:function(){return a<n.length?{value:n[a++],done:!1}:{done:!0,value:void 0}}})},ff(t,[{key:"length",get:function(){return this[ar].getArrayLength_()},set:function(a){this[ar].setArrayLength_(a)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(cz);Object.entries(kv).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&ag(HT.prototype,t,r)});function hz(e){return{enumerable:!1,configurable:!0,get:function(){return this[ar].get_(e)},set:function(r){this[ar].set_(e,r)}}}function BQ(e){Aa(HT.prototype,""+e,hz(e))}function dz(e){if(e>Ab){for(var t=Ab;t<e+100;t++)BQ(t);Ab=e}}dz(1e3);function NQ(e,t,r){return new HT(e,t,r)}function Iv(e,t){if(typeof e=="object"&&e!==null){if(ax(e))return t!==void 0&&$r(23),e[ar].atom_;if(wa(e))return e.atom_;if(Jc(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||$r(25,t,OS(e)),r}if(lx(e)){if(!t)return $r(26);var n=e[ar].values_.get(t);return n||$r(27,t,OS(e)),n}if(jT(e)||sx(e)||Av(e))return e}else if(Js(e)&&Av(e[ar]))return e[ar];$r(28)}function $Q(e,t){if(e||$r(29),jT(e)||sx(e)||Av(e)||Jc(e)||wa(e))return e;if(e[ar])return e[ar];$r(24,e)}function OS(e,t){var r;if(t!==void 0)r=Iv(e,t);else{if($m(e))return e.name;lx(e)||Jc(e)||wa(e)?r=$Q(e):r=Iv(e)}return r.name_}function Ru(e){var t=Yc(),r=ix(!0);Es();try{return e()}finally{Cs(),ox(r),ul(t)}}var CI=Q0.toString;function WT(e,t,r){return r===void 0&&(r=-1),DS(e,t,r)}function DS(e,t,r,n,a){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var h=typeof e;if(h!=="function"&&h!=="object"&&typeof t!="object")return!1;var d=CI.call(e);if(d!==CI.call(t))return!1;switch(d){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=AI(e),t=AI(t);var u=d==="[object Array]";if(!u){if(typeof e!="object"||typeof t!="object")return!1;var b=e.constructor,T=t.constructor;if(b!==T&&!(Js(b)&&b instanceof b&&Js(T)&&T instanceof T)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],a=a||[];for(var A=n.length;A--;)if(n[A]===e)return a[A]===t;if(n.push(e),a.push(t),u){if(A=e.length,A!==t.length)return!1;for(;A--;)if(!DS(e[A],t[A],r-1,n,a))return!1}else{var P=Object.keys(e),R;if(A=P.length,Object.keys(t).length!==A)return!1;for(;A--;)if(R=P[A],!(ll(t,R)&&DS(e[R],t[R],r-1,n,a)))return!1}return n.pop(),a.pop(),!0}function AI(e){return ax(e)?e.slice():df(e)||Jc(e)||rl(e)||wa(e)?Array.from(e.entries()):e}function Um(e){return e[Symbol.iterator]=jQ,e}function jQ(){return this}["Symbol","Map","Set"].forEach(function(e){var t=$T();typeof t[e]>"u"&&$r("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:iQ,extras:{getDebugName:OS},$mobx:ar});if(!X.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!EQ)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function UQ(e){e()}function VQ(e){e||(e=UQ),tz({reactionScheduler:e})}function qQ(e){return _Q(e)}var HQ=1e4,WQ=1e4,GQ=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=HQ),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var a=Date.now();r.registrations.forEach(function(h,d){a-h.registeredAt>=n&&(r.finalize(h.value),r.registrations.delete(d))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){this.registrations.set(n,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,WQ))}}),e}(),ZQ=typeof FinalizationRegistry<"u"?FinalizationRegistry:GQ,Vm=new ZQ(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),fz={exports:{}},pz={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=X;function KQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var XQ=typeof Object.is=="function"?Object.is:KQ,YQ=Kd.useState,JQ=Kd.useEffect,QQ=Kd.useLayoutEffect,eee=Kd.useDebugValue;function tee(e,t){var r=t(),n=YQ({inst:{value:r,getSnapshot:t}}),a=n[0].inst,h=n[1];return QQ(function(){a.value=r,a.getSnapshot=t,kb(a)&&h({inst:a})},[e,r,t]),JQ(function(){return kb(a)&&h({inst:a}),e(function(){kb(a)&&h({inst:a})})},[e]),eee(r),r}function kb(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!XQ(e,r)}catch{return!0}}function ree(e,t){return t()}var nee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ree:tee;pz.useSyncExternalStore=Kd.useSyncExternalStore!==void 0?Kd.useSyncExternalStore:nee;fz.exports=pz;var iee=fz.exports;function kI(e){e.reaction=new Ma("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function oee(e,t){t===void 0&&(t="observed");var r=Xo.useRef(null);if(!r.current){var n={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(u){return Vm.unregister(n),n.onStoreChange=u,n.reaction||(kI(n),n.stateVersion=Symbol()),function(){var b;n.onStoreChange=null,(b=n.reaction)===null||b===void 0||b.dispose(),n.reaction=null}},getSnapshot:function(){return n.stateVersion}};r.current=n}var a=r.current;a.reaction||(kI(a),Vm.register(r,a,a)),Xo.useDebugValue(a.reaction,qQ),iee.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot);var h,d;if(a.reaction.track(function(){try{h=e()}catch(u){d=u}}),d)throw d;return h}var Pb,Ib,mz=typeof Symbol=="function"&&Symbol.for,see=(Ib=(Pb=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Pb===void 0?void 0:Pb.configurable)!==null&&Ib!==void 0?Ib:!1,PI=mz?Symbol.for("react.forward_ref"):typeof X.forwardRef=="function"&&X.forwardRef(function(e){return null}).$$typeof,II=mz?Symbol.for("react.memo"):typeof X.memo=="function"&&X.memo(function(e){return null}).$$typeof;function aee(e,t){var r;if(II&&e.$$typeof===II)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var n=(r=void 0)!==null&&r!==void 0?r:!1,a=e,h=e.displayName||e.name;if(PI&&e.$$typeof===PI&&(n=!0,a=e.render,typeof a!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var d=function(u,b){return oee(function(){return a(u,b)},h)};return d.displayName=e.displayName,see&&Object.defineProperty(d,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(d.contextTypes=e.contextTypes),n&&(d=X.forwardRef(d)),d=X.memo(d),uee(e,d),d}var lee={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function uee(e,t){Object.keys(e).forEach(function(r){lee[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var Rb;VQ(Km.unstable_batchedUpdates);Rb=Vm.finalizeAllImmediately;function cee(e,t){if(RI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.hasOwnProperty.call(t,r[a])||!RI(e[r[a]],t[r[a]]))return!1;return!0}function RI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var MI=Symbol("patchMixins"),gz=Symbol("patchedDefinition");function hee(e,t){var r=e[MI]=e[MI]||{},n=r[t]=r[t]||{};return n.locks=n.locks||0,n.methods=n.methods||[],n}function LI(e,t){for(var r=this,n=arguments.length,a=new Array(n>2?n-2:0),h=2;h<n;h++)a[h-2]=arguments[h];t.locks++;try{var d;return e!=null&&(d=e.apply(this,a)),d}finally{t.locks--,t.locks===0&&t.methods.forEach(function(u){u.apply(r,a)})}}function OI(e,t){var r=function(){for(var a=arguments.length,h=new Array(a),d=0;d<a;d++)h[d]=arguments[d];LI.call.apply(LI,[this,e,t].concat(h))};return r}function dee(e,t,r){var n=hee(e,t);n.methods.indexOf(r)<0&&n.methods.push(r);var a=Object.getOwnPropertyDescriptor(e,t);if(!(a&&a[gz])){var h=e[t],d=yz(e,t,a?a.enumerable:void 0,n,h);Object.defineProperty(e,t,d)}}function yz(e,t,r,n,a){var h,d=OI(a,n);return h={},h[gz]=!0,h.get=function(){return d},h.set=function(b){if(this===e)d=OI(b,n);else{var T=yz(this,t,r,n,b);Object.defineProperty(this,t,T)}},h.configurable=!0,h.enumerable=r,h}var DI=Symbol("ObserverAdministration"),zI=Symbol("isMobXReactObserver");function zS(e){var t;return(t=e[DI])!=null?t:e[DI]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:FS(e.constructor),state:void 0,props:void 0,context:void 0}}function fee(e){var t=e.prototype;if(e[zI]){var r=FS(e);throw new Error("The provided component class ("+r+") has already been declared as an observer component.")}else e[zI]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==X.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=FI;else if(t.shouldComponentUpdate!==FI)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}var n=t.render;if(typeof n!="function"){var a=FS(e);throw new Error("[mobx-react] class component ("+a+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}t.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:pee.call(this,n)}),this.render()};var h=t.componentDidMount;return t.componentDidMount=function(){var d=this,u=zS(this);return u.mounted=!0,Vm.unregister(this),u.forceUpdate=function(){return d.forceUpdate()},(!u.reaction||u.reactionInvalidatedBeforeMount)&&u.forceUpdate(),h==null?void 0:h.apply(this,arguments)},dee(t,"componentWillUnmount",function(){var d,u=zS(this);(d=u.reaction)==null||d.dispose(),u.reaction=null,u.forceUpdate=null,u.mounted=!1,u.reactionInvalidatedBeforeMount=!1}),e}function FS(e){return e.displayName||e.name||"<component>"}function pee(e){var t=e.bind(this),r=zS(this);function n(){r.reaction||(r.reaction=mee(r),r.mounted||Vm.register(this,r,this));var a=void 0,h=void 0;if(r.reaction.track(function(){try{h=KJ(!1,t)}catch(d){a=d}}),a)throw a;return h}return n}function mee(e){return new Ma(e.name+".render()",function(){if(!e.mounted){e.reactionInvalidatedBeforeMount=!0;return}try{e.forceUpdate==null||e.forceUpdate()}catch{var t;(t=e.reaction)==null||t.dispose(),e.reaction=null}})}function FI(e,t){return this.state!==t?!0:!cee(this.props,e)}function gee(e,t){return e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(X.Component,e)||Object.prototype.isPrototypeOf.call(X.PureComponent,e)?fee(e):aee(e)}Xo.version.split(".")[0];if(!X.Component)throw new Error("mobx-react requires React to be available");if(!yi)throw new Error("mobx-react requires mobx to be available");const yee=(e,t)=>{const r=e.reduce((u,b)=>({...u,[b._element.id]:b}),{}),n=t.reduce((u,b)=>({...u,[b.id]:b}),{}),a=e.filter(u=>!n[u._element.id]),h=t.filter(u=>!r[u.id]),d=e.filter(u=>n[u._element.id]);return{markersToRemove:a,markersToAdd:h,markersToStay:d,newMakersObj:n}},BI={lng:139.793,lat:35.6844},_ee=13,vee=5,xee=6e4,bee=gee(({mapStore:e})=>{const t=JL(),r=X.useRef(null),n=X.useRef(null),a=X.useRef(null),h=X.useRef({});return vo.apiKey="hi9oh74MeJFcI4DAXYI3",X.useEffect(()=>{if(!sessionStorage.getItem(W2.IS_LOGGED_IN)){t("/");return}n.current||(Fw.connect(),n.current=new wD({container:r.current,style:Z5.STREETS,center:[BI.lng,BI.lat],zoom:_ee}))},[t]),X.useEffect(()=>{var R;if(!n.current)return;if(!((R=a.current)!=null&&R.length)){a.current=e.mapMarkers.map(U=>mI([U.coords.lng,U.coords.lat],U.id,U.direction,n.current));return}const{markersToAdd:d,markersToRemove:u,markersToStay:b,newMakersObj:T}=yee(a.current,e.mapMarkers);u.map(U=>U._element.style.backgroundColor=HY);const A=u.reduce((U,j)=>({...U,[j._element.id]:setTimeout(()=>{j.remove(),delete h.current[j._element.id],a.current=(a.current||[]).filter(W=>W._element.id!==j._element.id)},vee*xee)}),{});h.current={...h.current,...A},b.forEach(U=>{U.setLngLat([T[U._element.id].coords.lng,T[U._element.id].coords.lat]),U._element.style.backgroundColor=qY,clearTimeout(h.current[U._element.id]),delete h.current[U._element.id]});const P=d.map(U=>mI([U.coords.lng,U.coords.lat],U.id,U.direction,n.current));a.current=[...a.current,...P]},[e.mapMarkers,t]),We.jsx("div",{className:"map-wrap",children:We.jsx("div",{ref:r,className:"map"})})});class wee{constructor(){ic(this,"mapMarkers",[]);ic(this,"setMapMarkers",t=>{this.mapMarkers=t});CQ(this)}get getMarkers(){return this.mapMarkers}}const NI=new wee,See=()=>{const e=t=>{NI.setMapMarkers(t)};return X.useEffect(()=>(Fw.on(Nw.MAP_ITEMS,e),()=>{Fw.off(Nw.MAP_ITEMS)}),[]),We.jsx(bee,{mapStore:NI})},Tee=Sj([{path:Bw.MAP,element:We.jsx(See,{})},{path:Bw.LOGIN,element:We.jsx(FX,{})}]);tz({enforceActions:"always",computedRequiresReaction:!0,reactionRequiresObservable:!0,disableErrorBoundaries:!0});function Eee(){return We.jsx(Mj,{router:Tee})}const Cee=document.querySelector("#root"),Aee=QM(Cee);Aee.render(We.jsx(Eee,{}))});export default kee();
